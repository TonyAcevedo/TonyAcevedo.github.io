//////////////////////////////////////////////////////////////////////
// Pano2VR 6.0 beta4/17095 HTML5/CSS3 & WebGL Panorama Player       //
// License &#39;Anthony T. Acevedo Jr.&#39;                         //
// (c) 2018, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

var G="function"==typeof Object.defineProperties?Object.defineProperty:function(n,e,g){n!=Array.prototype&&n!=Object.prototype&&(n[e]=g.value)},N="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function O(n,e){if(e){var g=N;n=n.split(".");for(var c=0;c<n.length-1;c++){var b=n[c];b in g||(g[b]={});g=g[b]}n=n[n.length-1];c=g[n];e=e(c);e!=c&&null!=e&&G(g,n,{configurable:!0,writable:!0,value:e})}}var P;
if("function"==typeof Object.setPrototypeOf)P=Object.setPrototypeOf;else{var Q;a:{var R={Tm:!0},S={};try{S.__proto__=R;Q=S.Tm;break a}catch(n){}Q=!1}P=Q?function(n,e){n.__proto__=e;if(n.__proto__!==e)throw new TypeError(n+" is not extensible");return n}:null}var T=P;O("Object.setPrototypeOf",function(n){return n||T});
O("Array.prototype.fill",function(n){return n?n:function(e,g,c){var b=this.length||0;0>g&&(g=Math.max(0,b+g));if(null==c||c>b)c=b;c=Number(c);0>c&&(c=Math.max(0,b+c));for(g=Number(g||0);g<c;g++)this[g]=e;return this}});
var __extends=this&&this.__extends||function(){function n(e,g){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,b){c.__proto__=b}||function(c,b){for(var a in b)b.hasOwnProperty(a)&&(c[a]=b[a])};return n(e,g)}return function(e,g){function c(){this.constructor=e}n(e,g);e.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();
function U(){var n="perspective",e=["Webkit","Moz","O","ms","Ms"],g;for(g=0;g<e.length;g++)"undefined"!==typeof document.documentElement.style[e[g]+"Perspective"]&&(n=e[g]+"Perspective");"undefined"!==typeof document.documentElement.style[n]?"webkitPerspective"in document.documentElement.style?(n=document.createElement("style"),e=document.createElement("div"),g=document.head||document.getElementsByTagName("head")[0],n.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",g.appendChild(n),
e.id="ggswhtml5",document.documentElement.appendChild(e),g=5===e.offsetHeight,n.parentNode.removeChild(n),e.parentNode.removeChild(e)):g=!0:g=!1;return g}function V(){var n;if(n=!!window.WebGLRenderingContext)try{var e=document.createElement("canvas");e.width=100;e.height=100;var g=e.getContext("webgl");g||(g=e.getContext("experimental-webgl"));n=!!g}catch(c){n=!1}return n}var ggP2VR;
(function(n){var e=function(){function c(b){this.g=null;this.mg=this.el=this.qb=!1;this.eb=!0;this.jb=this.Da=this.va=0;this.f=70;this.Ta=0;this.autoplay=this.rg=!1;this.id="";this.i=this.pan=0;this.g=b;this.fd=this.Ic=100;this.vd=1}c.prototype.Mb=function(b){var a;if(a=b.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=b.getAttributeNode("pan"))this.pan=Number(a.nodeValue);if(a=b.getAttributeNode("tilt"))this.i=Number(a.nodeValue)};c.prototype.ym=function(b){var a="",d=this.g,h=!0;if(d.gf){var c=
new n.wa(0,0,-100);c.va(-this.i*Math.PI/180);c.Da(this.pan*Math.PI/180);c.Da(-d.pan.c*Math.PI/180);c.va(d.i.c*Math.PI/180);c.jb(d.O.c*Math.PI/180);.01<=c.z&&(h=!1)}d.Bc&&(a+="perspective("+b+"px) ");a=a+("translate3d(0px,0px,"+b+"px) ")+("rotateZ("+d.O.c.toFixed(10)+"deg) ");a+="rotateX("+d.i.c.toFixed(10)+"deg) ";a+="rotateY("+(-d.pan.c).toFixed(10)+"deg) ";a+="rotateY("+this.pan.toFixed(10)+"deg) ";a+="rotateX("+(-this.i).toFixed(10)+"deg) ";b=1E4;c=this.b.videoWidth;var k=this.b.videoHeight;if(0==
c||0==k)c=640,k=480;0<this.Ic&&(c=this.Ic);0<this.fd&&(k=this.fd);0<c&&0<k&&(this.b.width=c,this.b.height=k,this.b.style.width=c+"px",this.b.style.height=k+"px");0<this.f&&(b=c/(2*Math.tan(this.f/2*Math.PI/180)));a+="translate3d(0px,0px,"+(-b).toFixed(10)+"px) ";a+="rotateZ("+this.jb.toFixed(10)+"deg) ";a+="rotateY("+(-this.Da).toFixed(10)+"deg) ";a+="rotateX("+this.va.toFixed(10)+"deg) ";this.vd&&1!=this.vd&&(a+="scaleY("+this.vd+") ");a+="translate3d("+-c/2+"px,"+-k/2+"px,0px) ";this.b.style[d.Ra+
"Origin"]="0% 0%";this.qb&&(a="",1==this.Ta&&(a+="scale("+Math.min(d.o.width/c,d.o.height/k)+") "),a+="translate3d("+-c/2+"px,"+-k/2+"px,0px) ");this.to!=a&&(this.to=a,this.b.style[d.Ra]=a,this.b.style.visibility=h&&this.eb?"visible":"hidden",this.mg&&this.el==this.qb&&(this.b.style[d.cd]="all 0s linear 0s"),this.el=this.qb)};c.prototype.Cf=function(b){this.b&&(this.b.style.visibility=b?"visible":"hidden")};c.prototype.Le=function(){var b=this.g;b.Y?(this.b.style.left=b.o.width/2+"px",this.b.style.top=
b.o.height/2+"px"):(this.b.style.left=b.margin.left+b.o.width/2+"px",this.b.style.top=b.margin.top+b.o.height/2+"px")};return c}();n.vq=e;var g=function(c){function b(a){a=c.call(this,a)||this;a.ia=!1;a.Nj=!1;a.Jl=!1;a.If=!1;a.xh=!1;a.yj=!1;a.ak=!1;a.Gb=null;a.Sf=null;a.Ug=0;a.ze=0;a.Be=!1;a.xj=!1;a.stopped=!1;a.url=[];a.loop=0;a.level=1;a.cc=0;a.mode=1;a.yh=10;a.tb=0;a.Hf=0;a.la=1;a.Uc=0;a.Dc=0;a.Ec=0;a.Vc=0;return a}__extends(b,c);b.prototype.im=function(){if(this.ia&&this.stopped)this.stopped=
!1;else{if(!this.ia&&this.g.gf){this.Ed();var a=this.sc;this.addElement();this.sc=a;this.b.pause()}0==this.loop?this.ia?(this.Gb=null,this.Yc()):this.b.play():0<this.sc?(this.sc--,this.ia||(this.b.currentTime=0),this.xh&&(this.dd&&0==this.dd.gain.value||0==this.uc.gain.value&&0==this.xc.gain.value&&0==this.vc.gain.value&&0==this.wc.gain.value)||(this.ia?(this.Gb=null,this.Yc()):this.b.play())):this.ia&&(this.Gb=null,this.Be=!1)}};b.prototype.mh=function(){this.ak=!1;var a=this.g.Ca;a&&(this.ia||(this.source=
a.createMediaElementSource(this.b)),2==this.mode||3==this.mode||5==this.mode?(this.Ue=a.createChannelSplitter(2),this.uc=a.createGain(),this.vc=a.createGain(),this.wc=a.createGain(),this.xc=a.createGain(),this.Wf=a.createChannelMerger(2),this.ia||this.source.connect(this.Ue),this.Ue.connect(this.uc,0),this.Ue.connect(this.vc,0),this.Ue.connect(this.wc,1),this.Ue.connect(this.xc,1),this.uc.connect(this.Wf,0,0),this.vc.connect(this.Wf,0,1),this.wc.connect(this.Wf,0,0),this.xc.connect(this.Wf,0,1),this.Wf.connect(a.destination)):
(this.dd=a.createGain(),this.ia||this.source.connect(this.dd),this.dd.connect(a.destination)))};b.prototype.Qg=function(){var a=this.g.Ca;this.qb||this.yj||(this.uc.gain.setValueAtTime(this.Uc,a.currentTime),this.xc.gain.setValueAtTime(this.Vc,a.currentTime),this.vc.gain.setValueAtTime(this.Dc,a.currentTime),this.wc.gain.setValueAtTime(this.Ec,a.currentTime))};b.prototype.wi=function(){if(!this.ak){var a=this.g,d=this.g.Ca;if(this.b||this.ia){var b,c=this.pan-a.pan.c;for(b=this.i-a.i.c;-180>c;)c+=
360;for(;180<c;)c-=360;var k=this.cc,r=this.yh;0==r&&(r=.01);0>r&&(r=a.f.c);this.Pb||(this.Pb=new n.wa,this.Pb.Ik(this.pan,this.i));0!=this.mode&&1!=this.mode||!d||this.dd&&this.dd.gain.setValueAtTime(this.level*a.V*this.la,d.currentTime);if(2==this.mode&&d){var f=.5*Math.cos(c*Math.PI/180)+.5;this.Uc=Math.sqrt(f)*this.la*this.level*a.V;this.Vc=Math.sqrt(f)*this.la*this.level*a.V;this.Dc=Math.sqrt(1-f)*this.la*this.level*a.V;this.Ec=Math.sqrt(1-f)*this.la*this.level*a.V;this.Qg()}if(3==this.mode){0>
c?c<-this.tb?c+=this.tb:c=0:c=c>this.tb?c-this.tb:0;var m=this.level;b=Math.abs(b);b=b<this.Hf?0:b-this.Hf;var g=1-b/r;if(Math.abs(c)>r||0>g)f=m*k*a.V,d?(this.Uc=f*this.la,this.Vc=f*this.la,this.Ec=this.Dc=0,this.Qg()):this.b.volume=m*k*a.V;else if(f=1-Math.abs(c/r),d){var e=m*(k+(1-k)*g*f)*a.V;f=m*k*a.V;0<=c?(this.Uc=e*this.la,this.Vc=f*this.la):(this.Uc=f*this.la,this.Vc=e*this.la);2*Math.abs(c)<r?(f=1-Math.abs(2*c)/r,e=m*(k+(1-k)*g*f)*a.V,f=.5*m*(1-k)*g*(1-f)*a.V,0<=c?(this.Vc=e*this.la,this.Ec=
f*this.la,this.Dc=0):(this.Uc=e*this.la,this.Dc=f*this.la,this.Ec=0)):(f=1-(Math.abs(2*c)-r)/r,e=.5*m*(1-k)*g*f*a.V,0<=c?(this.Ec=e*this.la,this.Dc=0):(this.Dc=e*this.la,this.Ec=0));this.Qg()}else this.b.volume=m*(k+(1-k)*g*f)*a.V}4==this.mode&&(Math.abs(c)<this.tb&&Math.abs(b)<this.Hf?this.If||(this.If=!0,this.sc=this.loop-1,this.ia?this.Be||this.Yc():this.b.play()):this.If=!1);5==this.mode&&(b=180*Math.acos(a.Si.bi(this.Pb))/Math.PI,b<this.tb?d?(this.Uc=this.level*a.V*this.la,this.Vc=this.level*
a.V*this.la,this.Ec=this.Dc=0,this.Qg()):this.b.volume=this.level*a.V:d?(b<this.tb+r?(0>c?c=c>-this.tb?0:c+this.tb:c=c<this.tb?0:c-this.tb,e=1-Math.max(b-this.tb,0)/r,f=Math.max(1-Math.abs(c)*Math.cos(this.i*Math.PI/180)/r,0),0<c?(this.Uc=this.level*(e*(1-this.cc)+this.cc)*a.V*this.la,this.Vc=this.level*(e*f*(1-this.cc)+this.cc)*a.V*this.la,this.Dc=0,this.Ec=this.level*e*(1-f)*a.V*this.la):(this.Uc=this.level*(e*f*(1-this.cc)+this.cc)*a.V*this.la,this.Vc=this.level*(e*(1-this.cc)+this.cc)*a.V*this.la,
this.Dc=this.level*e*(1-f)*a.V*this.la,this.Ec=0)):(e=this.level*this.cc*a.V,this.Uc=e*this.la,this.Vc=e*this.la,this.Ec=this.Dc=0),this.Qg()):(b-=this.tb,b<r&&0<r?(f=1-Math.abs(b/r),this.b.volume=this.level*(k+(1-k)*f)*a.V):this.b.volume=k*a.V));6==this.mode&&(b=180*Math.acos(a.Si.bi(this.Pb))/Math.PI,Math.abs(b)<this.tb?this.If||(this.If=!0,this.sc=this.loop-1,this.ia?this.Be||this.Yc():this.b.play()):this.If=!1)}}};b.prototype.uk=function(){var a=this;a.Gb=this.g.Ca.createBufferSource();a.Gb.addEventListener("ended",
function(){a.im()},!1);2==a.mode||3==a.mode||5==a.mode?a.Gb.connect(a.Ue):a.Gb.connect(a.dd)};b.prototype.cp=function(a){var d=this,b=this.g.Ca;d.uk();this.g.M("createBufferSoundSource()");b.decodeAudioData(a,function(a){d.Sf=a;d.Gb.buffer=a;d.g.M("audio Data decoded");d.xj&&(d.Yc(),d.xj=!1)})};b.prototype.Yc=function(){var a=this.g.Ca,d=this.ze;this.Sf?(null==this.Gb&&(this.uk(),this.Gb.buffer=this.Sf),this.Ug=a.currentTime-d,this.ze=0,this.Be=!0,this.stopped=!1,this.Gb.start(0,d),this.g.M("buffer Source started")):
(this.g.M("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.xj=!0)};b.prototype.Ii=function(){var a=this.g.Ca.currentTime-this.Ug;this.Te();this.ze=a};b.prototype.Te=function(){this.Gb&&this.Be&&(this.stopped=!0,this.Gb.disconnect(),this.Gb.stop(0),this.Gb=null);this.Ug=this.ze=0;this.Be=!1};b.prototype.cn=function(){var a=this.g.Ca;return this.ze?this.ze:this.Ug?a.currentTime-this.Ug:0};b.prototype.dn=function(a){this.Te();this.ze=a;this.Yc()};b.prototype.addElement=function(){var a=
-1,d=this,b=this.g,c=this.g.Ca;try{for(var k=!1,r=0;r<b.N.length;r++)b.N[r].id==d.id&&(a=r,null==b.N[r].b&&!b.N[r].ia||b.N[r].url.join()!=d.url.join()||b.N[r].loop!=d.loop||b.N[r].mode!=d.mode||(k=!0,b.N[r].pan=d.pan,b.N[r].i=d.i,b.N[r].level=d.level,b.N[r].cc=d.cc,b.N[r].yh=d.yh,b.N[r].tb=d.tb,b.N[r].Hf=d.Hf));if(k)b.M("Keep playing "+d.id);else{if(0<=a){var f=b.N[a];if(null!=f.b||f.ia)if(c&&b.La.enabled)b.La.Yg.push(f),1!=b.C.Oa&&2!=b.C.Oa&&b.La.Fk(f);else{try{f.ia?f.Ii():f.b.pause()}catch(y){b.M(y)}try{f.Ed()}catch(y){b.M(y)}}}if(c&&
b.Kc&&(2==this.mode||3==this.mode||5==this.mode)){if(0<d.url.length){d.ia=!0;d.mh();var m=new XMLHttpRequest;m.open("GET",b.kc(d.url[0]),!0);m.responseType="arraybuffer";m.onload=function(){d.cp(m.response)};m.send();d.xh=!1}}else{d.b=document.createElement("audio");d.b.crossOrigin=b.crossOrigin;d.b.setAttribute("class","ggmedia");b.ff&&d.b.setAttribute("id",b.ff+d.id);for(r=0;r<d.url.length;r++)k=void 0,k=document.createElement("source"),""!=d.url[r]&&"#"!=d.url[r]&&(k.crossOrigin=b.crossOrigin,
k.setAttribute("src",b.kc(d.url[r])),d.b.appendChild(k));d.b.volume=d.level*b.V;0<d.b.childNodes.length&&(b.T.appendChild(d.b),d.b.addEventListener("ended",function(){d.im()},!1),c&&(d.mh(),d.xh=!1,0==d.loop&&d.source.mediaElement&&(d.source.mediaElement.loop=!0)))}1<=d.loop&&(d.sc=d.loop-1);0<=a?b.N[a]=d:b.N.push(d);d.wi();-1!=this.g.Qc.indexOf(d.id)||-1!=this.g.Qc.indexOf("_main")&&-1==this.g.ce.indexOf(d.id)||(1!=d.mode&&2!=d.mode&&3!=d.mode&&5!=d.mode||!(0<=d.loop)||c&&b.La.enabled||(d.ia||(d.b.autoplay=
!0),d.autoplay=!0),0==d.mode&&0<=d.loop&&(d.autoplay=!0))}}catch(y){this.g.M(y)}};b.prototype.Ed=function(){try{this.g.M("Remove Snd:"+this.id),this.ia||(this.g.T.removeChild(this.b),this.b=null)}catch(a){this.g.M(a)}};b.prototype.Mb=function(a){c.prototype.Mb.call(this,a);var d;(d=a.getAttributeNode("url"))&&this.url.push(d.nodeValue.toString());if(d=a.getAttributeNode("level"))this.level=Number(d.nodeValue);if(d=a.getAttributeNode("loop"))this.loop=Number(d.nodeValue);if(d=a.getAttributeNode("mode"))this.mode=
Number(d.nodeValue);if(d=a.getAttributeNode("nodechangekeep"))this.Jl=1==Number(d.nodeValue);if(d=a.getAttributeNode("field"))this.yh=Number(d.nodeValue);if(d=a.getAttributeNode("ambientlevel"))this.cc=Number(d.nodeValue);if(d=a.getAttributeNode("pansize"))this.tb=Number(d.nodeValue);if(d=a.getAttributeNode("tiltsize"))this.Hf=Number(d.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(d=a.getAttributeNode("url"))&&this.url.push(d.nodeValue.toString()),a=a.nextSibling};return b}(e);n.Rm=g;g=
function(c){function b(a){a=c.call(this,a)||this;a.poster="";a.va=0;a.Da=0;a.jb=0;a.f=50;a.Ta=0;a.rg=!1;a.nd=!1;return a}__extends(b,c);b.prototype.re=function(){1!=this.Ta&&4!=this.Ta||this.ng(!this.qb);2==this.Ta&&this.g.Ol(this.id)};b.prototype.ng=function(a){var d=this.g,b=d.Ca;if(1==this.Ta||4==this.Ta)if(this.qb=a,this.g.Fb)(d=d.ha)&&d.activateSound(this.id,this.qb?1:0);else{if(this.qb)this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.style.zIndex=(d.ih+8E4).toString(),
this.b.style[this.g.cd]="all 1s ease 0s",this.g.Ub(this.id)||d.Ae(this.id);else{this.b.style.pointerEvents="none";this.b.style.cursor="default";this.b.style.zIndex=d.ih.toString();this.b.style[this.g.cd]="all 1s ease 0s";this.g.Ub(this.id)&&d.ni(this.id);this.yj=!0;var c=this;setTimeout(function(){c.yj=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){b=b.currentTime;var k=this.uc.gain.value,r=this.xc.gain.value,f=this.vc.gain.value,m=this.wc.gain.value;this.qb?(this.uc.gain.linearRampToValueAtTime(k,
b),this.uc.gain.linearRampToValueAtTime(this.level*d.V,b+1),this.xc.gain.linearRampToValueAtTime(r,b),this.xc.gain.linearRampToValueAtTime(this.level*d.V,b+1),this.vc.gain.linearRampToValueAtTime(f,b),this.vc.gain.linearRampToValueAtTime(0,b+1),this.wc.gain.linearRampToValueAtTime(m,b),this.wc.gain.linearRampToValueAtTime(0,b+1)):(this.uc.gain.linearRampToValueAtTime(k,b),this.uc.gain.linearRampToValueAtTime(this.Uc,b+1),this.xc.gain.linearRampToValueAtTime(r,b),this.xc.gain.linearRampToValueAtTime(this.Vc,
b+1),this.vc.gain.linearRampToValueAtTime(f,b),this.vc.gain.linearRampToValueAtTime(this.Dc,b+1),this.wc.gain.linearRampToValueAtTime(m,b),this.wc.gain.linearRampToValueAtTime(this.Ec,b+1))}this.mg=!0;this.g.zm()}2==this.Ta&&(a?this.g.Ae(this.id):this.g.wj(this.id))};b.prototype.og=function(){this.mg=!1;this.b.style[this.g.cd]="none"};b.prototype.mq=function(){0==this.loop?this.b.play():0<this.sc?(this.sc--,this.b.currentTime=0,this.b.play()):this.sl=!1};b.prototype.Mb=function(a){c.prototype.Mb.call(this,
a);var d;if(d=a.getAttributeNode("poster"))this.poster=String(d.nodeValue);if(d=a.getAttributeNode("rotx"))this.va=Number(d.nodeValue);if(d=a.getAttributeNode("roty"))this.Da=Number(d.nodeValue);if(d=a.getAttributeNode("rotz"))this.jb=Number(d.nodeValue);if(d=a.getAttributeNode("fov"))this.f=Number(d.nodeValue);if(d=a.getAttributeNode("width"))this.Ic=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.fd=Number(d.nodeValue);this.vd=(d=a.getAttributeNode("stretch"))?Number(d.nodeValue):1;if(d=
a.getAttributeNode("clickmode"))this.Ta=Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.rg=1==Number(d.nodeValue);if(d=a.getAttributeNode("startmutedmobile"))this.Nj=1==Number(d.nodeValue)};b.prototype.addElement=function(){var a=this,d=this.g;try{a.b=document.createElement("video");a.b.setAttribute("class","ggmedia");a.b.crossOrigin=d.crossOrigin;a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});d.ff&&a.b.setAttribute("id",d.ff+a.id);if(d.eh)a.b.setAttribute("playsinline",
"playsinline"),a.b.setAttribute("style","display: none; max-width:none;");else if(a.b.setAttribute("style","max-width:none;pointer-events:none;"),a.b.setAttribute("playsinline","playsinline"),1==a.Ta||4==a.Ta)a.b.addEventListener(d.Gm(),function(){a.og()},!1),a.b.addEventListener("transitionend",function(){a.og()},!1);var b=void 0;for(b=0;b<a.url.length;b++){var c=void 0;c=document.createElement("source");c.crossOrigin=d.crossOrigin;c.setAttribute("src",d.kc(a.url[b]));a.b.appendChild(c)}""!=a.poster&&
(a.b.poster=d.kc(a.poster),0>a.loop&&(a.b.preload="none"));a.b.volume=a.level*d.V;1<=a.loop&&(a.sc=a.loop-1);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.b.autoplay=!0,a.sl=!0,a.autoplay=!0,(this.g.Kc||this.g.Td)&&this.g.dg&&this.Nj&&a.b.setAttribute("muted","muted"));d.J.push(this);d.eh?d.T.appendChild(a.b):(a.b.style.position="absolute",a.Ic&&(a.b.width=a.Ic),a.fd&&(a.b.height=a.fd),d.D.appendChild(a.b),(this.g.Kc||this.g.Td)&&this.g.dg&&this.Nj?this.ak=!0:a.mh());a.b.addEventListener("ended",
function(){a.mq()},!1)}catch(k){d.M(k)}};b.prototype.registerElement=function(a,d){this.nd=!0;this.b=d;this.id=a;this.level=1;this.g.J.push(this)};b.prototype.Ed=function(){var a=this.g;a.eh&&(a.H.deleteTexture(this.oc),this.oc=0,a.T.removeChild(this.b));a.Am&&a.D.removeChild(this.b);this.b=null};return b}(g);n.gk=g;g=function(c){function b(a){a=c.call(this,a)||this;a.url="";a.va=0;a.Da=0;a.jb=0;a.f=50;a.Ta=0;a.rg=!1;a.Ic=100;a.fd=100;a.vd=1;return a}__extends(b,c);b.prototype.Mb=function(a){c.prototype.Mb.call(this,
a);var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("rotx"))this.va=Number(d.nodeValue);if(d=a.getAttributeNode("roty"))this.Da=Number(d.nodeValue);if(d=a.getAttributeNode("rotz"))this.jb=Number(d.nodeValue);if(d=a.getAttributeNode("fov"))this.f=Number(d.nodeValue);if(d=a.getAttributeNode("width"))this.Ic=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.fd=Number(d.nodeValue);this.vd=(d=a.getAttributeNode("stretch"))?Number(d.nodeValue):1;if(d=
a.getAttributeNode("clickmode"))this.Ta=Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.rg=1==Number(d.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(d=a.getAttributeNode("url"))&&(this.url=d.nodeValue.toString()),a=a.nextSibling};b.prototype.og=function(){this.mg=!1;this.b.style[this.g.cd]="none"};b.prototype.re=function(){1!==this.Ta&&4!==this.Ta||this.ng(!this.qb)};b.prototype.ng=function(a){var d=this.g;if(1===this.Ta||4===this.Ta)this.qb=a,this.g.Fb?(a=this.g.ha)&&a.activateSound(this.id,
this.qb?1:0):(this.qb?(this.b.style.pointerEvents="auto",this.b.style.cursor="pointer",this.b.style.zIndex=(d.ih+8E4).toString()):(this.b.style.pointerEvents="none",this.b.style.cursor="default",this.b.style.zIndex=d.ih.toString()),this.b.style[d.cd]="all 1s ease 0s",this.mg=!0,d.um())};b.prototype.addElement=function(){var a=this,d=this.g;try{a.b=document.createElement("img");a.b.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.b.setAttribute("class","ggmedia");
a.b.hidden=!0;a.b.addEventListener("click",function(a){a.stopPropagation()});d.ff&&a.b.setAttribute("id",d.ff+a.id);a.b.ondragstart=function(){return!1};if(1===a.Ta||4===a.Ta)a.b.addEventListener(d.Gm(),function(){a.og()},!1),a.b.addEventListener("transitionend",function(){a.og()},!1);a.b.setAttribute("src",d.kc(a.url));a.Ic&&(a.b.width=a.Ic);a.fd&&(a.b.height=a.fd);d.Xa.push(a);a.b.style.position="absolute";d.D.appendChild(a.b)}catch(h){d.M("Error addimage:"+h)}};b.prototype.Ed=function(){this.g.D.removeChild(this.b);
this.b=null};return b}(e);n.Pm=g;e=function(c){function b(a){a=c.call(this,a)||this;a.mk=50;a.alpha=50;a.type=0;a.color=16777215;return a}__extends(b,c);b.prototype.Mb=function(a){c.prototype.Mb.call(this,a);var d;if(d=a.getAttributeNode("blinding"))this.mk=Number(d.nodeValue);if(d=a.getAttributeNode("alpha"))this.alpha=Number(d.nodeValue);if(d=a.getAttributeNode("type"))this.type=Number(d.nodeValue);if(d=a.getAttributeNode("color"))this.color=Number(d.nodeValue)};return b}(e);n.Qm=e;e=function(){function c(b){this.type=
"empty";this.Lj=this.id=this.target=this.description=this.title=this.url="";this.hh=100;this.qg=20;this.Ai=!1;this.b=null;this.vb=this.Lb=this.mb=this.pa=this.i=this.pan=0;this.visible=!0;this.hc=b.A.hc;this.ec=b.A.ec;this.gc=b.A.gc;this.dc=b.A.dc;this.cf=b.A.cf;this.Nf=[]}c.prototype.Ze=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.i;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Lj;this.obj=this.b};c.prototype.Mb=
function(b){var a;if(a=b.getAttributeNode("url"))this.url=a.nodeValue.toString();if(a=b.getAttributeNode("target"))this.target=a.nodeValue.toString();if(a=b.getAttributeNode("title"))this.title=a.nodeValue.toString();if(a=b.getAttributeNode("description"))this.description=a.nodeValue.toString();if(a=b.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=b.getAttributeNode("skinid"))this.Lj=a.nodeValue.toString();if(a=b.getAttributeNode("width"))this.hh=Number(a.nodeValue);if(a=b.getAttributeNode("height"))this.qg=
Number(a.nodeValue);if(a=b.getAttributeNode("wordwrap"))this.Ai=1==Number(a.nodeValue);this.pan=(a=b.getAttributeNode("pan"))?Number(a.nodeValue):0;this.i=(a=b.getAttributeNode("tilt"))?Number(a.nodeValue):0;if(a=b.getAttributeNode("bordercolor"))this.hc=Number(a.nodeValue);if(a=b.getAttributeNode("backgroundcolor"))this.ec=Number(a.nodeValue);if(a=b.getAttributeNode("borderalpha"))this.gc=Number(a.nodeValue);if(a=b.getAttributeNode("backgroundalpha"))this.dc=Number(a.nodeValue);if(a=b.getAttributeNode("handcursor"))this.cf=
1==Number(a.nodeValue);for(b=b.firstChild;b;){if("polystring"==b.nodeName){a=b.textContent.toString().split("|");for(var d=0;d<a.length;d++){var c=a[d].split("/");if(2==c.length){var l={pan:0,i:0};l.pan=Number(c[0]);l.i=Number(c[1]);this.Nf.push(l)}}}"vertex"==b.nodeName&&(l={pan:0,i:0},a=b.getAttributeNode("pan"),l.pan=a?Number(a.nodeValue):0,a=b.getAttributeNode("tilt"),l.i=a?Number(a.nodeValue):0,this.Nf.push(l));b=b.nextSibling}this.Ze()};return c}();n.lh=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c,b){this.x=c;this.y=b}e.prototype.Ya=function(c,b){this.x=c;this.y=b};e.prototype.xd=function(c,b,a){var d=b.y-c.y;this.x=c.x+(b.x-c.x)*a;this.y=c.y+d*a};e.prototype.bn=function(c,b,a,d,h){var l=new e;l.xd(c,a,h);c=new e;c.xd(a,d,h);a=new e;a.xd(d,b,h);b=new e;b.xd(l,c,h);l=new e;l.xd(c,a,h);c=new e;c.xd(b,l,h);this.x=c.x;this.y=c.y};e.prototype.Fi=function(c,b,a,d,h){var l=new e,k=.5,r=.25;do{l.bn(c,b,a,d,k);var f=l.x-h;k=0<f?k-r:k+r;r/=2}while(.01<Math.abs(f));
this.x=l.x;this.y=l.y};return e}();n.rc=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c,b,a,d,h){this.x=c;this.y=b;this.z=a;this.rd=d;this.Pb=h}e.prototype.Ya=function(c,b,a){this.x=c;this.y=b;this.z=a;this.Pb=this.rd=void 0};e.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.rd+","+this.Pb+")"};e.prototype.va=function(c){var b=Math.sin(c);c=Math.cos(c);var a=this.y,d=this.z;this.y=c*a-b*d;this.z=b*a+c*d};e.prototype.ip=function(){var c=this.y;this.y=-this.z;this.z=c};e.prototype.hp=function(){var c=this.y;this.y=
this.z;this.z=-c};e.prototype.Da=function(c){var b=Math.sin(c);c=Math.cos(c);var a=this.x,d=this.z;this.x=c*a+b*d;this.z=-b*a+c*d};e.prototype.jp=function(){var c=this.x;this.x=-this.z;this.z=c};e.prototype.jb=function(c){var b=Math.sin(c);c=Math.cos(c);var a=this.x,d=this.y;this.x=c*a-b*d;this.y=b*a+c*d};e.prototype.$l=function(){var c=this.x;this.x=-this.y;this.y=c};e.prototype.Fd=function(c){this.va(c*Math.PI/180)};e.prototype.Ce=function(c){this.Da(c*Math.PI/180)};e.prototype.De=function(c){this.jb(c*
Math.PI/180)};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.rd,this.Pb)};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.prototype.normalize=function(){var c=this.length();0<c&&(c=1/c,this.x*=c,this.y*=c,this.z*=c)};e.prototype.bi=function(c){return this.x*c.x+this.y*c.y+this.z*c.z};e.prototype.Ik=function(c,b){var a=Math.cos(b*Math.PI/180);this.x=a*Math.sin(c*Math.PI/180);this.y=Math.sin(b*Math.PI/180);this.z=a*Math.cos(c*Math.PI/
180)};e.prototype.Ym=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};e.prototype.Zm=function(){return 180*Math.asin(this.y/this.length())/Math.PI};e.prototype.xd=function(c,b,a){this.x=c.x*a+b.x*(1-a);this.y=c.y*a+b.y*(1-a);this.z=c.z*a+b.z*(1-a);this.rd=c.rd*a+b.rd*(1-a);this.Pb=c.Pb*a+b.Pb*(1-a)};return e}();n.wa=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(){this.dm()}e.prototype.dm=function(){this.Vb=1;this.lc=this.Wb=this.Db=0;this.Xb=1;this.Yb=this.Ib=this.mc=0;this.Jb=1};e.prototype.clone=function(c){this.Vb=c.Vb;this.Db=c.Db;this.Wb=c.Wb;this.lc=c.lc;this.Xb=c.Xb;this.mc=c.mc;this.Ib=c.Ib;this.Yb=c.Yb;this.Jb=c.Jb};e.prototype.xp=function(c){var b=Math.cos(c);c=Math.sin(c);this.Vb=1;this.lc=this.Wb=this.Db=0;this.Xb=b;this.mc=-c;this.Ib=0;this.Yb=c;this.Jb=b};e.prototype.yp=function(c){var b=Math.cos(c);
c=Math.sin(c);this.Vb=b;this.Db=0;this.Wb=c;this.lc=0;this.Xb=1;this.mc=0;this.Ib=-c;this.Yb=0;this.Jb=b};e.prototype.zp=function(c){var b=Math.cos(c);c=Math.sin(c);this.Vb=b;this.Db=-c;this.Wb=0;this.lc=c;this.Xb=b;this.Yb=this.Ib=this.mc=0;this.Jb=1};e.prototype.up=function(c){this.xp(c*Math.PI/180)};e.prototype.vp=function(c){this.yp(c*Math.PI/180)};e.prototype.wp=function(c){this.zp(c*Math.PI/180)};e.prototype.Fd=function(c){this.Nc||(this.Nc=new e,this.Ud=new e);this.Nc.up(c);this.Ud.clone(this);
this.multiply(this.Nc,this.Ud)};e.prototype.Ce=function(c){this.Nc||(this.Nc=new e,this.Ud=new e);this.Nc.vp(c);this.Ud.clone(this);this.multiply(this.Nc,this.Ud)};e.prototype.De=function(c){this.Nc||(this.Nc=new e,this.Ud=new e);this.Nc.wp(c);this.Ud.clone(this);this.multiply(this.Nc,this.Ud)};e.prototype.multiply=function(c,b){this.Vb=c.Vb*b.Vb+c.Db*b.lc+c.Wb*b.Ib;this.Db=c.Vb*b.Db+c.Db*b.Xb+c.Wb*b.Yb;this.Wb=c.Vb*b.Wb+c.Db*b.mc+c.Wb*b.Jb;this.lc=c.lc*b.Vb+c.Xb*b.lc+c.mc*b.Ib;this.Xb=c.lc*b.Db+
c.Xb*b.Xb+c.mc*b.Yb;this.mc=c.lc*b.Wb+c.Xb*b.mc+c.mc*b.Jb;this.Ib=c.Ib*b.Vb+c.Yb*b.lc+c.Jb*b.Ib;this.Yb=c.Ib*b.Db+c.Yb*b.Xb+c.Jb*b.Yb;this.Jb=c.Ib*b.Wb+c.Yb*b.mc+c.Jb*b.Jb};e.prototype.Ko=function(c){var b=c.x;var a=c.y;var d=c.z;c.x=b*this.Vb+a*this.Db+d*this.Wb;c.y=b*this.lc+a*this.Xb+d*this.mc;c.z=b*this.Ib+a*this.Yb+d*this.Jb};return e}();n.dk=e})(ggP2VR||(ggP2VR={}));
(function(n){n.$={create:function(e){var g;"undefined"!=typeof Float32Array?g=new Float32Array(16):g=Array(16);e&&(g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=e[3],g[4]=e[4],g[5]=e[5],g[6]=e[6],g[7]=e[7],g[8]=e[8],g[9]=e[9],g[10]=e[10],g[11]=e[11],g[12]=e[12],g[13]=e[13],g[14]=e[14],g[15]=e[15]);return g},set:function(e,g){g[0]=e[0];g[1]=e[1];g[2]=e[2];g[3]=e[3];g[4]=e[4];g[5]=e[5];g[6]=e[6];g[7]=e[7];g[8]=e[8];g[9]=e[9];g[10]=e[10];g[11]=e[11];g[12]=e[12];g[13]=e[13];g[14]=e[14];g[15]=e[15];return g},te:function(e){e[0]=
1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},multiply:function(e,g,c){c||(c=e);var b=e[0],a=e[1],d=e[2],h=e[3],l=e[4],k=e[5],r=e[6],f=e[7],m=e[8],n=e[9],p=e[10],q=e[11],t=e[12],v=e[13],u=e[14];e=e[15];var x=g[0],A=g[1],w=g[2],B=g[3],z=g[4],C=g[5],D=g[6],E=g[7],F=g[8],H=g[9],I=g[10],J=g[11],K=g[12],L=g[13],M=g[14];g=g[15];c[0]=x*b+A*l+w*m+B*t;c[1]=x*a+A*k+w*n+B*v;c[2]=x*d+A*r+w*p+B*u;c[3]=x*h+A*f+w*q+B*e;c[4]=z*b+C*l+D*m+
E*t;c[5]=z*a+C*k+D*n+E*v;c[6]=z*d+C*r+D*p+E*u;c[7]=z*h+C*f+D*q+E*e;c[8]=F*b+H*l+I*m+J*t;c[9]=F*a+H*k+I*n+J*v;c[10]=F*d+H*r+I*p+J*u;c[11]=F*h+H*f+I*q+J*e;c[12]=K*b+L*l+M*m+g*t;c[13]=K*a+L*k+M*n+g*v;c[14]=K*d+L*r+M*p+g*u;c[15]=K*h+L*f+M*q+g*e;return c},translate:function(e,g,c){var b=g[0],a=g[1];g=g[2];if(!c||e==c)return e[12]=e[0]*b+e[4]*a+e[8]*g+e[12],e[13]=e[1]*b+e[5]*a+e[9]*g+e[13],e[14]=e[2]*b+e[6]*a+e[10]*g+e[14],e[15]=e[3]*b+e[7]*a+e[11]*g+e[15],e;var d=e[0],h=e[1],l=e[2],k=e[3],r=e[4],f=e[5],
m=e[6],n=e[7],p=e[8],q=e[9],t=e[10],v=e[11];c[0]=d;c[1]=h;c[2]=l;c[3]=k;c[4]=r;c[5]=f;c[6]=m;c[7]=n;c[8]=p;c[9]=q;c[10]=t;c[11]=v;c[12]=d*b+r*a+p*g+e[12];c[13]=h*b+f*a+q*g+e[13];c[14]=l*b+m*a+t*g+e[14];c[15]=k*b+n*a+v*g+e[15];return c},scale:function(e,g,c){var b=g[0],a=g[1];g=g[2];if(!c||e==c)return e[0]*=b,e[1]*=b,e[2]*=b,e[3]*=b,e[4]*=a,e[5]*=a,e[6]*=a,e[7]*=a,e[8]*=g,e[9]*=g,e[10]*=g,e[11]*=g,e;c[0]=e[0]*b;c[1]=e[1]*b;c[2]=e[2]*b;c[3]=e[3]*b;c[4]=e[4]*a;c[5]=e[5]*a;c[6]=e[6]*a;c[7]=e[7]*a;c[8]=
e[8]*g;c[9]=e[9]*g;c[10]=e[10]*g;c[11]=e[11]*g;c[12]=e[12];c[13]=e[13];c[14]=e[14];c[15]=e[15];return c},rotate:function(e,g,c,b){var a=c[0],d=c[1];c=c[2];var h=Math.sqrt(a*a+d*d+c*c);if(!h)return null;1!=h&&(h=1/h,a*=h,d*=h,c*=h);var l=Math.sin(g),k=Math.cos(g),r=1-k;g=e[0];h=e[1];var f=e[2],m=e[3],n=e[4],p=e[5],q=e[6],t=e[7],v=e[8],u=e[9],x=e[10],A=e[11],w=a*a*r+k,B=d*a*r+c*l,z=c*a*r-d*l,C=a*d*r-c*l,D=d*d*r+k,E=c*d*r+a*l,F=a*c*r+d*l;a=d*c*r-a*l;d=c*c*r+k;b?e!=b&&(b[12]=e[12],b[13]=e[13],b[14]=e[14],
b[15]=e[15]):b=e;b[0]=g*w+n*B+v*z;b[1]=h*w+p*B+u*z;b[2]=f*w+q*B+x*z;b[3]=m*w+t*B+A*z;b[4]=g*C+n*D+v*E;b[5]=h*C+p*D+u*E;b[6]=f*C+q*D+x*E;b[7]=m*C+t*D+A*E;b[8]=g*F+n*a+v*d;b[9]=h*F+p*a+u*d;b[10]=f*F+q*a+x*d;b[11]=m*F+t*a+A*d;return b},Bn:function(e,g,c,b,a,d,h){h||(h=n.$.create());var l=g-e,k=b-c,r=d-a;h[0]=2*a/l;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*a/k;h[6]=0;h[7]=0;h[8]=(g+e)/l;h[9]=(b+c)/k;h[10]=-(d+a)/r;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(d*a*2)/r;h[15]=0;return h},perspective:function(e,g,c,b,a){e=
c*Math.tan(e*Math.PI/360);g=e*g;return n.$.Bn(-g,g,-e,e,c,b,a)},yq:function(e,g,c,b,a,d,h){h||(h=n.$.create());var l=g-e,k=b-c,r=d-a;h[0]=2/l;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/k;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/r;h[11]=0;h[12]=-(e+g)/l;h[13]=-(b+c)/k;h[14]=-(d+a)/r;h[15]=1;return h}}})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c){this.ma=n.$.create();this.sb=n.$.create();this.gd=0;this.Ua=[];this.ug=!1;this.Pj=this.aj=this.Cj=1;this.We=1E6;this.sh=[!1,!1,!1,!1,!1,!1];this.mi=!1;this.Wi=[];this.ek=8;this.Do=new n.dk;this.Qd=[];this.g=c;if(c.Kc||c.Td)c.Wg=2}e.prototype.sg=function(){var c=this.g.H;if(c){var b=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
c.compileShader(b);c.getShaderParameter(b,c.COMPILE_STATUS)||(console&&console.log(c.getShaderInfoLog(b)),alert(c.getShaderInfoLog(b)),b=null);var a=c.createShader(c.VERTEX_SHADER);this.Hc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=c.createProgram();this.lf(this.F,a,b);this.F.Z=c.getAttribLocation(this.F,"aVertexPosition");c.enableVertexAttribArray(this.F.Z);this.F.Ba=c.getAttribLocation(this.F,"aTextureCoord");c.enableVertexAttribArray(this.F.Ba);this.F.Wd=c.getUniformLocation(this.F,"uPMatrix");this.F.Ig=c.getUniformLocation(this.F,"uMVMatrix");this.F.wf=c.getUniformLocation(this.F,"uSampler");this.F.Bi=c.getUniformLocation(this.F,"uZoffset");b=c.createShader(c.VERTEX_SHADER);this.Hc(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
a=c.createShader(c.FRAGMENT_SHADER);this.Hc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.Bd=c.createProgram();this.lf(this.Bd,b,a);this.Bd.Z=c.getAttribLocation(this.Bd,"aVertexPosition");c.enableVertexAttribArray(this.Bd.Z);a=c.createShader(c.VERTEX_SHADER);this.Hc(a,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
b=c.createShader(c.FRAGMENT_SHADER);this.Hc(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.eg=c.createProgram();this.lf(this.eg,a,b)}};e.prototype.Hh=function(){var c=this.g,b=c.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);var d=this.ej(13);this.Hc(a,d);d=b.createShader(b.VERTEX_SHADER);
this.Hc(d,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Ul=b.createProgram();this.lf(this.Ul,d,a);a=b.createShader(b.FRAGMENT_SHADER);d=this.ej(4);this.Hc(a,d);d=b.createShader(b.VERTEX_SHADER);this.Hc(d,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Vl=b.createProgram();this.lf(this.Vl,d,a);a=b.createShader(b.FRAGMENT_SHADER);d=this.ej(c.s.format);this.Hc(a,d);d=b.createShader(b.VERTEX_SHADER);this.Hc(d,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Wl=b.createProgram();this.lf(this.Wl,d,a);this.di||(this.di=b.createBuffer())}else this.g.M("No WebGL to initRemapShader!")};e.prototype.Hc=function(c,b){var a=this.g.H;a.shaderSource(c,b);a.compileShader(c);a.getShaderParameter(c,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(c)),W&&alert(a.getShaderInfoLog(c)))};e.prototype.lf=function(c,b,a){var d=this.g.H;d.attachShader(c,b);d.attachShader(c,a);d.linkProgram(c);d.getProgramParameter(c,d.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(d.getError()));d.useProgram(c)};e.prototype.ej=function(c){var b=this.g;var a="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
a=(13==c?a+"uniform samplerCube cubeTexture;":a+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";a+="vec4 direction;\n";a+="vec2 src;\n";a+="vec2 srcCord;\n";a+="vec2 texc;\n";var d=this.al(b.ra());b.ra()!=b.nc&&0!=b.nc?(b=this.al(b.nc),a+="vec4 direction1,direction2;\n",a+=d.replace("direction=","direction1="),a+=b.replace("direction=","direction2="),a+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):a+=d;a+="direction=direction*matRotate;\n";13==c&&(a+="direction.z=-direction.z;",
a+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==c&&(a+="float iz=1.0/(direction.z * rectSrcDistance);\n",a+="src.x=-direction.x*iz;\n",a+="src.y= direction.y*iz;\n",a+="texc=src * srcScale + srcOffset;\n",a+="if (",a+="(direction.z<0.0) && ",a+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",a+="  gl_FragColor = texture2D(tileTexture, texc);\n",a+="} else {\n",a+="  discard;\n",a+="}\n");1==c&&(a+="src.x=atan(float(-direction.x), float(-direction.z));",a+=
"src.y=asin(direction.y);\n",a+="texc=src * srcScale + srcOffset;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");14==c&&(a+="vec2 cf;\n",a+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=+direction.y/direction.z;\n",a+="  cf.x=1.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",
a+="  src.y=-direction.y/direction.x;\n",a+="  cf.x=3.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=-direction.y/direction.z;\n",a+="  cf.x=5.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=+direction.y/direction.x;\n",a+="  cf.x=1.0;cf.y=1.0;\n",
a+="}\n",a+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",a+="  src.x=+direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=5.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",a+="  src.x=-direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=3.0;cf.y=1.0;\n",a+="}\n",a+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",a+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");return a+="}\n"};e.prototype.al=function(c){var b="";switch(c){case 4:b+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:b+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:b+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return b+
"direction.w=0.0;\ndirection=normalize(direction);\n"};e.prototype.kl=function(c){var b,a,d=this.g,h=this.g.H;this.Ri=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,this.Ri);var l=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(b=0;12>b;b++)2>b%3&&(l[b]*=c);h.bufferData(h.ARRAY_BUFFER,new Float32Array(l),h.STATIC_DRAW);this.je=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,this.je);var k=[1,0,0,0,0,1,1,1];h.bufferData(h.ARRAY_BUFFER,new Float32Array(k),h.STATIC_DRAW);this.$c=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,
this.$c);var r=[0,1,2,0,2,3];h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),h.STATIC_DRAW);l=[];r=[];k=[];var f=new n.wa;for(c=0;6>c;c++){var e=c%3;var g=3>c?1:0;for(a=0;4>a;a++){f.x=-1;f.y=-1;f.z=1;for(b=0;b<a;b++)f.$l();k.push((0>f.x?.33:0)+.33*e,(0>f.y?0:.5)+.5*g);if(4>c)for(b=0;b<c;b++)f.jp();else 5==c?f.ip():f.hp();l.push(f.x,f.y,f.z)}b=4*c;r.push(b,1+b,2+b,b,2+b,3+b)}d.s.Zj=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,d.s.Zj);h.bufferData(h.ARRAY_BUFFER,new Float32Array(l),h.STATIC_DRAW);
d.s.oi=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,d.s.oi);h.bufferData(h.ARRAY_BUFFER,new Float32Array(k),h.STATIC_DRAW);d.s.jj=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,d.s.jj);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),h.STATIC_DRAW);this.vo=h.createBuffer();this.uo=h.createBuffer()};e.prototype.fj=function(c){var b=this;return function(){try{if(c.Oo)return;var a=b.g.H;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);var d=!1;null!=c.ve&&c.ve.complete?c.fl||(a.bindTexture(a.TEXTURE_2D,
c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c.ve),d=c.fl=!0):null!=c.qf&&c.qf.complete&&(a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c.qf),d=!0);d&&(c.loaded=!0);a.bindTexture(a.TEXTURE_2D,null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0)}catch(h){b.g.M(h)}b.g.update(2)}};e.prototype.ll=function(){var c=this.g,b=c.H;if(this.Ua)for(;0<this.Ua.length;)b.deleteTexture(this.Ua.pop());this.Ua=[];for(var a=0;6>a;a++){var d=b.createTexture();this.gd++;
d.qf=null;d.ve=null;d.fl=!1;b.bindTexture(b.TEXTURE_2D,d);b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);if(c.Xe[a]){var h=new Image;h.crossOrigin=c.crossOrigin;h.src=c.kc(c.Xe[a]);d.qf=h;h.addEventListener&&h.addEventListener("load",this.fj(d),!1);c.Qb.push(h)}this.Ua.push(d)}for(a=0;6>a;a++)c.th[a]&&
(h=new Image,h.crossOrigin=c.crossOrigin,h.src=c.kc(c.th[a]),h.addEventListener?h.addEventListener("load",this.fj(this.Ua[a]),!1):h.onload=this.fj(this.Ua[a]),this.Ua[a].ve=h,c.Qb.push(h));for(a=0;a<c.J.length;a++)c.J[a].nd||(c.J[a].oc=b.createTexture(),c.gd++,b.bindTexture(b.TEXTURE_2D,c.J[a].oc),b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));c.s.oc=b.createTexture();c.gd++;b.bindTexture(b.TEXTURE_2D,c.s.oc);b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null)};e.prototype.sq=function(){var c=this.g;if(c.o.width!=c.D.offsetWidth||c.o.height!=c.D.offsetHeight)c.o.width=c.D.offsetWidth,
c.o.height=c.D.offsetHeight;c.ne&&(c.Jc(0),c.Sc());if(c.H){var b=c.H;this.ui();b.clear(b.DEPTH_BUFFER_BIT);b.useProgram(this.F);this.Df(0);b.uniform1i(this.F.wf,0);b.enableVertexAttribArray(this.F.Z);b.enableVertexAttribArray(this.F.Ba);b.bindBuffer(b.ARRAY_BUFFER,this.je);b.vertexAttribPointer(this.F.Ba,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$c);b.uniform1f(this.F.Bi,1E-4);b.vertexAttribPointer(this.F.Z,3,b.FLOAT,!1,0,0);n.$.te(this.sb);n.$.perspective(c.Tb(),
c.rb.width/c.rb.height,.1,100,this.sb);b.uniformMatrix4fv(this.F.Wd,!1,this.sb);for(c=0;6>c;c++)this.Df(c),b.bindBuffer(b.ARRAY_BUFFER,this.Ri),b.vertexAttribPointer(this.F.Z,3,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.je),b.vertexAttribPointer(this.F.Ba,2,b.FLOAT,!1,0,0),6<=this.Ua.length&&this.Ua[c].loaded&&(b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Ua[c]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$c),b.uniform1i(this.F.wf,0),b.uniformMatrix4fv(this.F.Ig,!1,this.ma),b.uniformMatrix4fv(this.F.Wd,
!1,this.sb),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}};e.prototype.ui=function(){var c=this.g;if(c.h.sf&&6<c.h.sf.length){var b=parseInt(c.h.sf);c.H.clearColor((b>>16&255)/255,(b>>8&255)/255,(b>>0&255)/255,1)}};e.prototype.Df=function(c,b){void 0===b&&(b=1);var a=this.g;n.$.te(this.ma);n.$.rotate(this.ma,b*-a.O.c*Math.PI/180,[0,0,1]);n.$.rotate(this.ma,b*-a.i.c*Math.PI/180,[1,0,0]);-1==b?n.$.rotate(this.ma,-a.pan.c*Math.PI/180,[0,1,0]):n.$.rotate(this.ma,(180-a.pan.c)*Math.PI/180,[0,1,0]);
a.Za&&(n.$.rotate(this.ma,-a.Za.pitch*Math.PI/180,[1,0,0]),n.$.rotate(this.ma,a.Za.O*Math.PI/180,[0,0,1]));4>c?n.$.rotate(this.ma,-Math.PI/2*c,[0,1,0]):n.$.rotate(this.ma,Math.PI/2*(5==c?1:-1),[1,0,0])};e.prototype.Vp=function(c){var b=this;return function(){b.Wi.push(c)}};e.prototype.sn=function(c){this.g.Ea=!0;this.g.ad=!0;c.loaded=!0;c.Dj=0;c.Yd=0;var b=this.g.H;this.Ak();b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);if(null!=c.h&&c.h.complete){c.fb=b.createTexture();this.g.gd++;b.bindTexture(b.TEXTURE_2D,
c.fb);try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c.h)}catch(a){b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.g.M(a)}}this.g.update(2)};e.prototype.Ak=function(){this.g.Ob&&this.g.Ob--};e.prototype.tn=function(){if(0<this.Wi.length){var c=this.Wi.shift();this.sn(c)}};e.prototype.Lo=function(c){var b=this;return function(){b.g.Ea=!0;b.g.ad=!0;var a=b.g.h;try{if(null!=c&&c.complete){var d=a.I[a.I.length-1],h=a.Ja;d.height=d.width=
c.width-2*h;d.L=d.ea=1;for(var l=0;6>l;l++){var k=new n.Kd;k.K=document.createElement("canvas");b.g.Y?(k.K.width=d.width+2*h,k.K.height=d.height+2*h):(k.K.width=a.G+2*h,k.K.height=a.G+2*h);k.Pa=k.K.getContext("2d");k.K.style[b.g.Ra+"Origin"]="0% 0%";k.K.style.overflow="hidden";k.K.style.position="absolute";k.h=c;var r=d.width+2*h,f=d.height+2*h;k.Pa&&k.Pa.drawImage(c,0,l*f,r,f,0,0,r,f);if(b.g.Y&&b.g.H){var e=b.g.H;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1);k.fb=e.createTexture();b.g.gd++;e.bindTexture(e.TEXTURE_2D,
k.fb);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,k.K)}catch(y){b.g.M(y)}e.bindTexture(e.TEXTURE_2D,null);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0)}b.g.Tc&&(k.K.Sd=-1,b.g.D.insertBefore(k.K,b.g.D.firstChild));d.U[l]=k}d.loaded=!0}}catch(y){b.g.M(y)}b.g.update(2)}};e.prototype.qm=function(c){var b=this;return function(){b.g.Ea=!0;b.g.ad=!0;b.Ak();c.h=null}};e.prototype.qq=function(){var c=this.g,b=c.h,a=c.h.I;c.ne&&(c.Jc(0),c.Sc());if(c.H){var d=c.H;d.useProgram(this.F);this.ui();d.clear(d.DEPTH_BUFFER_BIT);
d.enable(d.DEPTH_TEST);n.$.te(this.sb);n.$.perspective(c.Tb(),c.rb.width/c.rb.height,.1,100,this.sb);d.uniformMatrix4fv(this.F.Wd,!1,this.sb);c.wm();c.qj();var h=c.Zi();var l=a.length-1;for(c.pc=0;l>=h;){var k=a[l],r=1;l==a.length-1&&0==b.Ja&&(r=b.G/(b.G-.5));for(var f=0;6>f;f++){var e=c.nb.cb[f];var g=e.nf;if(e.eb&&0<g.Mf&&0<g.gh&&0<g.scale||k.cache){e.Ea=!1;e.Se[l]||(e.Se[l]={Wa:0,zb:0,Bb:0,Cb:0});var p=e.Se[l];k.cache?(p.Wa=0,p.zb=0,p.Bb=k.L-1,p.Cb=k.ea-1):c.bl(k,g,p);g=!0;for(var q=p.zb;q<=p.Cb;q++)for(var t=
p.Wa;t<=p.Bb;t++){var v=t+q*k.L+f*k.L*k.ea,u=k.U[v];u||(u=k.U[v]=new n.Kd);this.wh()?u.h||(u.Yd?u.Yd--:(this.Qh(u,k,c.He(f,l,t,q)),c.Ea=!0)):c.pc++;if(u.fb){if(!u.bf){v=.5*l+1;u.bf=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,u.bf);var x=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];x[3]=t*b.G-b.Ja;x[0]=Math.min((t+1)*b.G,k.width)+b.Ja;x[7]=q*b.G-b.Ja;x[1]=Math.min((q+1)*b.G,k.height)+b.Ja;x[4]=x[1];x[6]=x[3];x[9]=x[0];x[10]=x[7];for(var A=0;12>A;A++)x[A]=0==A%3?r*v*(-2*x[A]/k.width+1):1==A%3?r*v*(-2*x[A]/k.height+
1):v;d.bufferData(d.ARRAY_BUFFER,new Float32Array(x),d.STATIC_DRAW)}}else g=!1;u.visible=e.eb}p.oj=g}}l--}for(f=0;6>f;f++)if(e=c.nb.cb[f],e.eb)for(g=e.nf,this.Df(f),d.uniform1i(this.F.wf,0),d.uniformMatrix4fv(this.F.Wd,!1,this.sb),d.uniformMatrix4fv(this.F.Ig,!1,this.ma),d.enableVertexAttribArray(this.F.Z),d.enableVertexAttribArray(this.F.Ba),d.bindBuffer(d.ARRAY_BUFFER,this.je),d.vertexAttribPointer(this.F.Ba,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.$c),
d.useProgram(this.F),l=h;l<=a.length-1;){k=a[l];if(e.eb&&0<g.Mf&&e.Se[l]&&0<=e.Se[l].Wa){p=e.Se[l];for(q=p.zb;q<=p.Cb;q++)for(t=p.Wa;t<=p.Bb;t++)v=t+q*k.L+f*k.L*k.ea,(u=k.U[v])&&u.fb&&(d.uniform1f(this.F.Bi,1E-4*(t%2+q%2*2)),d.bindBuffer(d.ARRAY_BUFFER,u.bf),d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0),d.bindTexture(d.TEXTURE_2D,u.fb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,
d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)),u.visible=e.eb;p.oj&&(l=a.length)}l++}this.Ej();c.ad=!1}};e.prototype.wh=function(){return this.g.Ob<this.g.Wg};e.prototype.Qh=function(c,b,a){var d=this.g;d.ij++;c.h=new Image;c.Dj++;c.Yd=1<<c.Dj;c.h.onload=this.Vp(c);c.h.onerror=this.qm(c);c.h.onabort=this.qm(c);c.h.crossOrigin=d.crossOrigin;c.h.setAttribute("src",a);d.M("load "+a);b.cache&&d.Qb.push(c.h);d.Ob++};e.prototype.Fm=
function(){var c=this.g,b=c.h;c.ne&&(c.Jc(0),c.Sc());if(c.H){var a=c.H;this.ui();W&&a.clearColor(.2,0,0,1);a.clear(a.DEPTH_BUFFER_BIT);a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.bindBuffer(a.ARRAY_BUFFER,this.di);var d=[0,0];d[2]=c.o.width;d[3]=0;d[4]=c.o.width;d[5]=c.o.height;d[6]=0;d[7]=c.o.height;a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);this.g.pc=0;if(!this.yc||this.ug)0<b.I.length?this.qn():this.rn();c.s.kd?this.Vo():(a.enable(a.DEPTH_TEST),a.depthRange(0,1),a.depthFunc(a.LESS),
this.mi=!1,0<b.I.length&&this.rq(),this.yc&&!this.mi&&this.Uo())}};e.prototype.Hp=function(c,b,a,d,h,l,k){var r=this.g,f=r.h,e=r.o,g=a*f.G/b.width,p=(a+1)*f.G/b.width;a=d*f.G/b.height;b=(d+1)*f.G/b.height;1<p&&(h*=2,p=1);1<b&&(h*=2,b=1);h=Math.min(this.ek,h);p=(p-g)/h;var q=(b-a)/h;d=b=0;f={x:0,y:0};var t={x:0,y:0},v=0;c.Fh=0;var u=r.Jg,x=new n.wa,A=this.Do;A.dm();4>l?A.Ce(-90*l):A.Fd(5==l?90:-90);r.Za&&(A.De(r.Za.O),A.Fd(-r.Za.pitch));A.Ce(-r.pan.c);A.Fd(r.i.c);A.De(r.O.c);for(l=0;l<=h;l++)for(var w=
0;w<=h;w++){var B=2*(g+w*p)-1;var z=2*(a+l*q)-1;x.x=1*B;x.y=1*z;x.z=-1;x.normalize();A.Ko(x);B=this.Yk(x,f,r.ra());0!=r.nc&&1>u&&(B=B&&this.Yk(x,t,r.nc),f.x=f.x*u+t.x*(1-u),f.y=f.y*u+t.y*(1-u));B?-1E10<f.x&&1E10>f.x&&-1E10<f.y&&1E10>f.y?-2<f.x&&2>f.x&&-2<f.y&&2>f.y&&(b+=f.x,d+=f.y,v++):f.x=NaN:f.x=NaN;c.hd[c.Fh++]=f.x;c.hd[c.Fh++]=f.y}0<v?(b/=v,d/=v):k=0;for(a=0;a<c.Fh;a+=2)f.x=c.hd[a],f.y=c.hd[a+1],r=f.x-b,g=f.y-d,f.x+=r*k,f.y+=g*k,c.hd[a]=e.width/2+f.x*e.width/2,c.hd[a+1]=e.height/2-f.y*e.width/
2;this.Ip(c,h)};e.prototype.Yk=function(c,b,a){var d=!0;switch(a){case 0:case 4:a=1/(c.z*this.Cj);b.x=-c.x*a;b.y=c.y*a;0<c.z&&(d=!1);break;case 9:1==c.z&&(d=!1);a=1/((1-c.z)*this.Pj);b.x=c.x*a;b.y=-c.y*a;break;case 12:if(a=Math.sqrt(c.x*c.x+c.y*c.y),0==a)b.x=0,b.y=0;else{var h=2*this.aj*Math.acos(-c.z)/a;if(2<a)return!1;b.x=h*c.x;b.y=-h*c.y}}return d};e.prototype.Ip=function(c,b){for(var a=this.g,d=[],h,l=c.wd=0;l<b;l++)for(var k=0;k<b;k++){d[0]=l+k*(b+1);d[1]=l+1+k*(b+1);d[2]=l+(k+1)*(b+1);d[3]=
l+1+(k+1)*(b+1);h=!0;for(var r=0;4>r;r++)isNaN(c.hd[2*d[0]])&&(h=!1);if(h){var f=!1,e=!1,g=!1,p=!1;for(r=0;4>r;r++){var n=c.hd[2*d[r]];n<a.o.width&&(e=!0);0<=n&&(f=!0);n=c.hd[2*d[r]+1];n<a.o.height&&(g=!0);0<=n&&(p=!0)}if(h=h&&e&&f&&g&&p)c.se[c.wd++]=d[0],c.se[c.wd++]=d[3],c.se[c.wd++]=d[2],c.se[c.wd++]=d[0],c.se[c.wd++]=d[1],c.se[c.wd++]=d[3]}}};e.prototype.rq=function(){var c=this.g,b=c.h,a=c.h.I;c.ne&&(c.Jc(0),c.Sc());if(c.H){var d=c.H,h=this.Vl;d.useProgram(h);this.Vj(h);d.enable(d.CULL_FACE);
d.cullFace(d.FRONT);d.enable(d.DEPTH_TEST);n.$.te(this.sb);n.$.perspective(c.Tb(),c.rb.width/c.rb.height,.1,100,this.sb);d.uniformMatrix4fv(d.getUniformLocation(h,"uPMatrix"),!1,this.sb);this.g.pc=0;c.qj();var l=c.Zi(),k=0;var r=a.length-1;for(var f={},e=a[r];e.rf&&0<r;)r--,e=a[r];for(var g=r,p=g,q=0;6>q;q++)for(var t=0;t<e.ea;t++)for(var v=0;v<e.L;v++){var u=v+t*e.L+q*e.L*e.ea;f[u]=1}for(;r>=l;){var x={};e=a[r];var A=null;0<r&&(A=a[r-1]);var w=!0;for(var B in f)if(f.hasOwnProperty(B)){u=Number(B);
var z=e.U[u];q=Number(Math.floor(u/(e.L*e.ea)));t=Math.floor((u-q*e.L*e.ea)/e.L);v=Math.floor(u-(t*e.L+q*e.L*e.ea));if(6<=q)console.log("Grrr...");else{var C=this.g.nb.cb[q];C.Ea=!1;z||(z=e.U[u]=new n.Kd,c.M("create "+u));this.Hp(z,e,v,t,Math.max(1,this.ek>>g-r),q,-(0!=c.nc)?.3:.1);z.visible=0<z.wd||e.cache;z.Mh=3;z.yg=Date.now();z.visible&&!z.fb&&(w=!1,this.wh()?z.h||(z.Yd?z.Yd--:(this.Qh(z,e,c.He(q,r,v,t)),c.Ea=!0)):this.g.pc++);if(A&&(z.visible||A.cache)){z=(v*b.G+1)/e.width;v=Math.min(1,(v+1)*
b.G-1/e.width);var D=(t*b.G+1)/e.height;t=Math.min(1,(t+1)*b.G-1/e.height);u=b.G/A.width;C=b.G/A.height;var E=D;D=Math.floor(D*A.height/b.G);do{var F=z,H=Math.floor(z*A.width/b.G);do{var I=H+D*A.L+q*A.L*A.ea;H<A.L&&D<A.ea?x[I]=1:c.M("Grrrr");H++;F+=u}while(F<v);D++;E+=C}while(E<t)}}}w&&(p=r,20>c.f.c&&r<this.We&&(this.mi=!0));f=x;r--}this.Ej();d.uniform1i(d.getUniformLocation(h,"tileTexture"),0);d.activeTexture(d.TEXTURE0);r=l;for(l=-1;r<=Math.min(p,this.We-1);){e=a[r];for(B in e.U)if(e.U.hasOwnProperty(B)){f=
Number(B);z=e.U[f];q=Math.floor(f/(e.L*e.ea));t=Math.floor((f-q*e.L*e.ea)/e.L);v=Math.floor(f-(t*e.L+q*e.L*e.ea));l!=q&&(l=q,this.vi(q,h));if(k>c.we){c.M("Excided painted tiles");this.mi=!1;break}z.fb&&(f=q=b.G,v==e.L-1&&(q=e.width-b.G*v),t==e.ea-1&&(f=e.height-b.G*t),q=(q+2*b.Ja)/b.G,f=(f+2*b.Ja)/b.G,d.bindTexture(d.TEXTURE_2D,z.fb),d.uniform2f(d.getUniformLocation(h,"uCanvasDimensions"),c.o.width,c.o.height),g=d.getUniformLocation(h,"srcScale"),d.uniform2f(g,.5*e.width/b.G/q,.5*e.height/b.G/f),
g=d.getUniformLocation(h,"srcOffset"),d.uniform2f(g,(.5*e.width+b.Ja-b.G*v)/b.G/q,-(.5*e.height+b.Ja-b.G*t)/b.G/f+1),g=d.getUniformLocation(h,"zOffset"),d.uniform1f(g,(r+1)/(a.length+5)),q=d.getAttribLocation(h,"aVertexPosition"),d.disableVertexAttribArray(0),d.disableVertexAttribArray(1),d.disableVertexAttribArray(2),d.enableVertexAttribArray(q),d.activeTexture(d.TEXTURE0),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.bindBuffer(d.ARRAY_BUFFER,this.vo),d.vertexAttribPointer(q,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,new Float32Array(z.hd),d.DYNAMIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.uo),d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array(z.se),d.DYNAMIC_DRAW),d.drawElements(d.TRIANGLES,z.wd,d.UNSIGNED_SHORT,0),k++)}r++}d.disable(d.CULL_FACE);d.cullFace(d.FRONT_AND_BACK);c.ad=!1}};e.prototype.vi=function(c,
b){var a=this.g.H;n.$.te(this.ma);this.Df(c,-1);a.uniformMatrix4fv(a.getUniformLocation(b,"matRotate"),!1,this.ma)};e.prototype.Vo=function(){var c=this.g;if(c.H){var b=c.H,a=this.Wl;b.useProgram(a);this.vi(0,a);b.uniform2f(b.getUniformLocation(a,"uCanvasDimensions"),c.o.width,c.o.height);if(1==c.s.format){var d=b.getUniformLocation(a,"srcScale");b.uniform2f(d,-.5/Math.PI,(c.s.cj?-1:1)/Math.PI)}14==c.s.format&&(d=b.getUniformLocation(a,"srcScale"),b.uniform2f(d,1-2*c.s.Qe/(c.s.width/3),1-2*c.s.Qe/
(c.s.height/2)));d=b.getUniformLocation(a,"srcOffset");b.uniform2f(d,.5,.5);this.Vj(a);d=b.getUniformLocation(a,"cubeTexture");b.uniform1i(d,0);d=b.getAttribLocation(a,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(d);b.bindBuffer(b.ARRAY_BUFFER,this.di);b.vertexAttribPointer(d,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,c.s.oc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$c);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}};e.prototype.Vj=function(c){var b=this.g,a=b.H,d=this.g.o,h=d.width/d.height;switch(b.f.mode){case 1:h=1;break;case 2:h=d.width/Math.sqrt(d.width*d.width+d.height*d.height);break;case 3:4*d.height/3<d.width&&(h=4/3)}d=a.getUniformLocation(c,
"rectDstDistance");this.Cj=Math.tan(Math.min(b.f.c,179)/2*Math.PI/180)*h;a.uniform1f(d,this.Cj);d=a.getUniformLocation(c,"fisheyeDistance");this.aj=180/(b.f.c*Math.PI*h);a.uniform1f(d,this.aj);d=a.getUniformLocation(c,"stereoDistance");this.Pj=Math.tan(Math.min(b.f.c,359)/4*Math.PI/180)*h;a.uniform1f(d,this.Pj);d=a.getUniformLocation(c,"directionBlend");a.uniform1f(d,b.Jg)};e.prototype.Uo=function(){var c=this.g,b=c.H,a=this.Ul;b.useProgram(a);b.enable(b.DEPTH_TEST);this.vi(0,a);b.uniform2f(b.getUniformLocation(a,
"uCanvasDimensions"),c.o.width,c.o.height);c=b.getUniformLocation(a,"srcScale");b.uniform2f(c,1,1);c=b.getUniformLocation(a,"srcOffset");b.uniform2f(c,0,0);c=b.getUniformLocation(a,"zOffset");b.uniform1f(c,.9999);this.Vj(a);this.vi(0,a);c=b.getUniformLocation(a,"cubeTexture");b.uniform1i(c,0);a=b.getAttribLocation(a,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(a);b.bindBuffer(b.ARRAY_BUFFER,this.di);b.vertexAttribPointer(a,
2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_CUBE_MAP,this.yc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$c);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)};e.prototype.rn=function(){for(var c=this.g,b=c.H,
a=[1,3,5,4,0,2],d=!0,h=!0,l=!1,k=0;6>k;k++)this.Ua[k].ve.complete?this.sh[k]||(l=!0):d=!1,this.Ua[k].qf.complete||(h=!1);if(h||d)if(!h||d||!this.yc||l){k=Math.round(c.qc/c.Gf);h=(c.qc-k)/2;c.M("paint cube single - isMain: "+d+" overlap: "+h);this.We=0;this.yc||(this.yc=b.createTexture());c.gd++;b.bindTexture(b.TEXTURE_CUBE_MAP,this.yc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
1);l=document.createElement("canvas");l.width=k;l.height=k;var e=l.getContext("2d");for(k=0;6>k;k++){var f=a[k];this.Ua[f].ve.complete?this.sh[f]||(e.drawImage(this.Ua[f].ve,-h,-h),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,l),this.sh[f]=!0):(e.drawImage(this.Ua[f].qf,-h,-h,c.qc,c.qc),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+k,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,l))}this.ug=!d}};e.prototype.qn=function(){var c=this.g,b=this.g.h,a=c.h.I,d=c.H,h;var l=a.length-1;if(!(0>
l)){a[l].rf&&l--;var k=512;c.tg&&(k=256);!c.vf&&2<=c.devicePixelRatio&&(k=512);for((h=d.getParameter(d.MAX_CUBE_MAP_TEXTURE_SIZE))&&h<k&&(k=h);0<l&&a[l-1].width<=k;)l--;k=a[l];if(0!=k.L){h=l;var e=this.mn(l);this.ug&&e&&(this.ug=!1);e||(l=a.length-1,k=a[l],e||(k.rf?(e=k.loaded,this.pj(l-1)&&(--l,e=!0)):e=this.pj(l)),this.ug=!0);this.pj(h);if(e&&this.We>l){k=a[l];c.M("paint cube level "+l);this.We=l;a=c.h.Ja;l=0<a||1<k.L||1<k.ea;e=h=void 0;l&&(e=document.createElement("canvas"),e.width=k.width,e.height=
k.height,2048>k.width&&(1500<k.width?(e.width=2048,e.height=2048):700<k.width?(e.width=1024,e.height=1024):(e.width=512,e.height=512)),h=e.getContext("2d"));this.yc=d.createTexture();c.gd++;d.bindTexture(d.TEXTURE_CUBE_MAP,this.yc);d.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_CUBE_MAP,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var f=[1,3,5,4,0,2];b=b.G;for(var m=0;6>m;m++){for(var g=0;g<k.ea;g++)for(var n=0;n<k.L;n++){var q=
n+g*k.L+f[m]*k.L*k.ea,t=k.U[q],v=t.h;t.K&&(v=t.K);v?l?(q=e.width/k.width,h.drawImage(v,q*(n*b-a),q*(g*b-a),q*v.width,q*v.height)):d.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,v):(c.M("WTF?!"),c.M(q),c.M(t))}l&&d.texImage2D(d.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,e)}}}}};e.prototype.pj=function(c){var b=this.g,a=b.h.I[c];if(0==a.L)return!1;var d=!0;a.cache=!0;for(var h=0;6>h;h++)for(var l=0;l<a.ea;l++)for(var k=0;k<a.L;k++){var e=k+l*a.L+h*a.L*
a.ea,f=a.U[e];f||(f=a.U[e]=new n.Kd);this.wh()?f.h||(f.Yd?f.Yd--:(this.Qh(f,a,b.He(h,c,k,l)),b.Ea=!0)):this.g.pc++;f.fb||(d=!1,b.Ea=!0)}d&&(a.loaded=!0);return d};e.prototype.mn=function(c){c=this.g.h.I[c];if(0==c.L)return!1;for(var b=0;6>b;b++)for(var a=0;a<c.ea;a++)for(var d=0;d<c.L;d++){var h=c.U[d+a*c.L+b*c.L*c.ea];if(!h||!h.fb)return!1}return c.loaded=!0};e.prototype.ready=function(){return null!=this.yc};e.prototype.Ej=function(){for(var c=this.g,b=c.h.I,a=c.H,d=Date.now(),h=b.length-1;0<=h;h--){var l=
b[h];if(!l.cache)for(var k in l.U)if(l.U.hasOwnProperty(k)){var e=l.U[k];0<e.Mh&&e.Mh--;e.visible||0<e.Mh?(e.visible&&(e.yg=d),e=this.Qd.indexOf(e),-1!==e&&this.Qd.splice(e,1)):-1===this.Qd.indexOf(e)&&(e.level=l,this.Qd.push(e))}}if(this.Qd.length>1.1*c.om)for(this.Qd.sort(function(a,d){return d.yg-a.yg});this.Qd.length>c.om;)e=this.Qd.pop(),e.fb&&(a.deleteTexture(e.fb),c.gd--,e.fb=0),e.h=null,e.bf&&(a.deleteBuffer(e.bf),e.bf=0),k=e.level.U.indexOf(e),c.M("delete "+k+" "+(d-e.yg)),delete e.level.U[k]};
e.prototype.kq=function(){var c=this.g;if(c.H){var b=this.g.H;b.disable(b.DEPTH_TEST);var a;for(a=0;a<c.J.length;a++){var d=c.J[a];if(!d.nd){n.$.te(this.ma);n.$.rotate(this.ma,-c.O.c*Math.PI/180,[0,0,1]);n.$.rotate(this.ma,-c.i.c*Math.PI/180,[1,0,0]);n.$.rotate(this.ma,(180-c.pan.c)*Math.PI/180,[0,1,0]);n.$.rotate(this.ma,d.pan*Math.PI/180,[0,1,0]);n.$.rotate(this.ma,-d.i*Math.PI/180,[1,0,0]);n.$.translate(this.ma,[0,0,1]);n.$.rotate(this.ma,d.jb*Math.PI/180,[0,0,1]);n.$.rotate(this.ma,-d.Da*Math.PI/
180,[0,1,0]);n.$.rotate(this.ma,d.va*Math.PI/180,[1,0,0]);var h=Math.tan(d.f/2*Math.PI/180),l=d.ee;l||(l=16/9);n.$.scale(this.ma,[h,h/l,1]);n.$.translate(this.ma,[0,0,-1]);b.bindBuffer(b.ARRAY_BUFFER,this.Ri);b.vertexAttribPointer(this.F.Z,3,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.je);b.vertexAttribPointer(this.F.Ba,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,d.oc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.$c);b.uniform1i(this.F.wf,0);b.uniformMatrix4fv(this.F.Ig,!1,this.ma);b.uniformMatrix4fv(this.F.Wd,!1,this.sb);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}}b.enable(b.DEPTH_TEST)}};e.prototype.jq=function(){var c=this.g,b;if(c.o.width!=c.D.offsetWidth||c.o.height!=c.D.offsetHeight)c.o.width=c.D.offsetWidth,c.o.height=
c.D.offsetHeight;c.ne&&(c.Jc(0),c.Sc());if(c.H){var a=c.H;a.useProgram(this.F);n.$.te(this.sb);n.$.perspective(c.Tb(),c.rb.width/c.rb.height,.1,100,this.sb);a.uniformMatrix4fv(this.F.Wd,!1,this.sb);this.Df(0);a.uniform1i(this.F.wf,0);a.uniformMatrix4fv(this.F.Wd,!1,this.sb);a.uniformMatrix4fv(this.F.Ig,!1,this.ma);a.enableVertexAttribArray(this.F.Z);a.enableVertexAttribArray(this.F.Ba);a.bindBuffer(a.ARRAY_BUFFER,this.je);a.vertexAttribPointer(this.F.Ba,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);
a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$c);a.uniform1f(this.F.Bi,1E-4);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,c.s.oc);for(b=0;1>b;b++)this.Df(0),a.bindBuffer(a.ARRAY_BUFFER,c.s.Zj),a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,c.s.oi),a.vertexAttribPointer(this.F.Ba,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.s.jj),a.uniform1i(this.F.wf,0),a.uniformMatrix4fv(this.F.Ig,!1,this.ma),a.uniformMatrix4fv(this.F.Wd,
!1,this.sb),a.drawElements(a.TRIANGLES,36,a.UNSIGNED_SHORT,0)}};e.prototype.iq=function(){var c=this.g,b=c.H,a=c.s;if(0<c.J.length)for(var d=0;d<c.J.length;d++){var h=c.J[d];if(!h.nd&&h.sl&&h.Eh!=h.b.currentTime&&(h.Eh=h.b.currentTime,!h.ee&&0<h.b.videoHeight&&(h.ee=h.b.videoWidth/h.b.videoHeight),c.eh))try{h.oc&&(b.bindTexture(b.TEXTURE_2D,h.oc),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,h.b),c.update())}catch(k){c.M(k)}}if(a.b&&(d=Number(a.b.currentTime),a.Eh!=d)){a.Eh=d;try{var l=
0<a.b.readyState;c.gf&&a.kd&&(l=l&&0<a.b.currentTime);a.oc&&a.Kh&&l&&(a.kd=!0,a.width=a.b.videoWidth,a.height=a.b.videoHeight,b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,c.s.cj),b.bindTexture(b.TEXTURE_2D,a.oc),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,a.b),a.nm=!0,c.update())}catch(k){c.M(k)}}};e.prototype.Kl=function(){var c,b,a=this.g,d=this.g.H;a.xa.style.visibility="hidden";a.A.wg!=a.A.mode&&(a.A.wg=a.A.mode);if((0<=a.A.mode||0<a.A.kb.length)&&!a.C.Xg){var h=1;0>=a.A.mode&&(h=0);3==a.A.mode&&
(h=a.A.pa);for(c=0;c<a.P.length;c++){var l=a.P[c];if("poly"==l.type){var k=l.Xd,e=h;2==a.A.mode&&(e=l.pa);var f=a.A.kb.indexOf(l.id);-1!=f&&(e=a.A.Nb[f]);if(0<k.length){f=[];for(b=0;b<k.length;b++)f.push(k[b].Lb),f.push(k[b].vb),f.push(0);d.useProgram(this.Bd);d.enable(d.BLEND);d.blendFuncSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.SRC_ALPHA,d.ONE);d.disable(d.DEPTH_TEST);k=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,k);d.bufferData(d.ARRAY_BUFFER,new Float32Array(f),d.STATIC_DRAW);d.uniform2f(d.getUniformLocation(this.Bd,
"uCanvasDimensions"),a.o.width,a.o.height);k=d.getUniformLocation(this.Bd,"uColor");b=l.hc;d.uniform3f(k,(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);var m=d.getUniformLocation(this.Bd,"uAlpha");d.uniform1f(m,l.gc*e);d.vertexAttribPointer(this.Bd.Z,3,d.FLOAT,!1,0,0);d.drawArrays(d.LINE_LOOP,0,f.length/3);b=l.ec;d.uniform3f(k,(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);d.uniform1f(m,l.dc*e);d.enable(d.STENCIL_TEST);d.clearStencil(0);d.clear(d.STENCIL_BUFFER_BIT);d.colorMask(!1,!1,!1,!1);d.stencilFunc(d.ALWAYS,
1,1);d.stencilOp(d.INCR,d.INCR,d.INCR);d.drawArrays(d.TRIANGLE_FAN,0,f.length/3);d.colorMask(!0,!0,!0,!0);d.stencilFunc(d.EQUAL,1,1);d.stencilOp(d.ZERO,d.ZERO,d.ZERO);d.drawArrays(d.TRIANGLE_FAN,0,f.length/3);d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.disable(d.STENCIL_TEST);d.useProgram(this.F)}}}}};e.prototype.Uj=function(){var c=this.g,b=c.h;if(c.o.width!=c.D.offsetWidth||c.o.height!=c.D.offsetHeight)c.o.width=c.D.offsetWidth,c.o.height=c.D.offsetHeight;c.ne&&(c.Jc(0),c.Sc());if(c.H){var a=c.H;
this.ui();a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.useProgram(this.eg);var d=a.getUniformLocation(this.eg,"uRect");a.uniform2f(a.getUniformLocation(this.eg,"uCanvasDimensions"),c.o.width,c.o.height);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$c);var h=a.getAttribLocation(this.eg,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(h);a.bindBuffer(a.ARRAY_BUFFER,
this.je);a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0);c.pc=0;var l=100/c.f.c;var k=b.width/b.height;h=c.o.height*l*k;l*=c.o.height;k=(c.pan.c/100/k-.5)*h+c.o.width/2;for(var e=(c.i.c/100-.5)*l+c.o.height/2,f,m,g,p=0;b.I.length>=p+2&&b.I[p+1].width>h;)p++;var q;var t=[];for(q=b.I.length-1;q>=p;){var v=b.I[q];if(v.cache){var u={Wa:0,zb:0};u.Bb=v.L-1;u.Cb=v.ea-1}else{u={};f=-e/l*(v.height/c.h.G);m=(-k+c.o.width)/h*(v.width/c.h.G);var x=(-e+c.o.height)/l*(v.height/c.h.G);u.Wa=Math.min(Math.max(0,Math.floor(-k/
h*(v.width/c.h.G))),v.L-1);u.zb=Math.min(Math.max(0,Math.floor(f)),v.ea-1);u.Bb=Math.min(Math.max(0,Math.floor(m)),v.L-1);u.Cb=Math.min(Math.max(0,Math.floor(x)),v.ea-1)}t[q]=u;var A=!0;for(m=u.zb;m<=u.Cb;m++)for(f=u.Wa;f<=u.Bb;f++)g=f+m*v.L,x=v.U[g],x||(x=new n.Kd,v.U[g]=x),this.wh()?x.h||(this.Qh(x,v,c.He(0,q,f,m)),c.Ea=!0):this.g.pc++,x.h&&x.h.complete||(A=!1),x.visible=!0;u.oj=A;q--}for(q=b.I.length-1;q>=p;){v=b.I[q];if(t[q]&&0<=t[q].Wa)for(u=t[q],m=u.zb;m<=u.Cb;m++)for(f=u.Wa;f<=u.Bb;f++)g=f+
m*v.L,(x=v.U[g])&&x.h&&x.h.complete&&(c=k+(-b.Ja+b.G*f)*h/v.width,a.uniform4f(d,c,e+(-b.Ja+b.G*m)*l/v.height,x.h.width*h/v.width,x.h.height*l/v.height),x&&x.fb&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.$c),a.bindTexture(a.TEXTURE_2D,x.fb),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.drawElements(a.TRIANGLES,
6,a.UNSIGNED_SHORT,0)));q--}this.Ej()}};e.prototype.ei=function(){var c=this.g.H;if(c&&this.Ua)for(;0<this.Ua.length;){var b=this.Ua.pop();b.Oo=!0;c.deleteTexture(b)}this.yc&&(c.deleteTexture(this.yc),this.yc=null);this.We=1E6;this.sh=[!1,!1,!1,!1,!1,!1]};return e}();n.Sm=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){return function(){this.nf={fg:1,gg:1,Dg:0,Eg:0,Mf:0,gh:0,scale:1};this.eb=!0;this.Se=[]}}(),g=function(){function c(){var b;this.cb=Array(6);for(b=0;6>b;b++)this.cb[b]=new e}c.prototype.nn=function(b,a,d,c){for(var h=0;6>h;h++){var k;if(k=this.cb[h]){var e=[];e.push(new n.wa(-1,-1,-1,0,0));e.push(new n.wa(1,-1,-1,1,0));e.push(new n.wa(1,1,-1,1,1));e.push(new n.wa(-1,1,-1,0,1));for(var f=0;f<e.length;f++)4>h?e[f].Da(-Math.PI/2*h):e[f].va(Math.PI/2*(4===h?-1:1)),c&&(e[f].jb(c.O*
Math.PI/180),e[f].va(-c.pitch*Math.PI/180)),e[f].Da(-b*Math.PI/180),e[f].va(a*Math.PI/180),e[f].jb(d*Math.PI/180);k.eb=0<e.length}}};return c}();n.Om=g})(ggP2VR||(ggP2VR={}));
(function(n){n.Nm=function(){return function(){this.I=[];this.sf="0x000000";this.Pl=!1;this.Dl=this.Cl=.4;this.G=512;this.Ja=1;this.nj=0;this.El="";this.Yl=this.height=this.width=0}}();n.fk=function(){return function(){this.height=this.width=0;this.rf=this.cache=!1;this.ea=this.L=0;this.loaded=!1;this.U=[]}}();n.Kd=function(){return function(){this.loaded=this.visible=!1;this.Yd=this.Dj=0;this.hd=[];this.Fh=0;this.se=[];this.Mh=this.yg=this.wd=0}}()})(ggP2VR||(ggP2VR={}));
(function(n){n.Jm=function(){return function(e,g){this.g=e;this.sa=g;var c=this.__div=document.createElement("div");var b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+e.Ia+"user-select: none;");b.ondragstart=function(){return!1};c.appendChild(b);b="position:absolute;"+(e.Ia+"user-select: none;");b+=e.Ia+"touch-callout: none;";b+=e.Ia+"tap-highlight-color: rgba(0,0,0,0);";e.jd&&!e.Y&&(b+=e.Ia+"transform: translateZ(9999999px);");c.setAttribute("style",b);c.onclick=function(){e.xf(g);e.vj(g.url,g.target);e.aa&&e.aa.hotspotProxyClick&&e.aa.hotspotProxyClick(g.id,g.url)};
c.ondblclick=function(){e.aa&&e.aa.hotspotProxyDoubleClick&&e.aa.hotspotProxyDoubleClick(g.id,g.url)};var a=e.A.Sj;if(a.enabled){var d=document.createElement("div");b="position:absolute;top:\t 20px;";b=a.Ai?b+"white-space: pre-wrap;":b+"white-space: nowrap;";b+=e.Ia+"transform-origin: 50% 50%;";d.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;");d.style.color=this.g.fa(a.Tj,a.Rj);a.background?d.style.backgroundColor=this.g.fa(a.ec,a.dc):d.style.backgroundColor=
"transparent";d.style.border="solid "+this.g.fa(a.hc,a.gc)+" "+a.Hi+"px";d.style.borderRadius=a.Gi+"px";d.style.textAlign="center";0<a.width?(d.style.left=-a.width/2+"px",d.style.width=a.width+"px"):d.style.width="auto";d.style.height=0<a.height?a.height+"px":"auto";d.style.overflow="hidden";d.innerHTML=g.title;c.onmouseover=function(){0==a.width&&(d.style.left=-d.offsetWidth/2+"px");d.style.visibility="inherit";e.aa&&e.aa.hotspotProxyOver&&e.aa.hotspotProxyOver(g.id,g.url)};c.onmouseout=function(){d.style.visibility=
"hidden";e.aa&&e.aa.hotspotProxyOut&&e.aa.hotspotProxyOut(g.id,g.url)};c.appendChild(d)}}}()})(ggP2VR||(ggP2VR={}));(function(n){n.Fc=function(){return function(){this.value=this.time=0;this.Yj="";this.ie=this.he=this.Wc=this.ge=this.ub=this.type=this.xb=0;this.nh=""}}();n.ck=function(){return function(){this.bq=this.Xm=this.length=0}}();n.bk=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c){this.g=c;this.enabled=!1;this.Uf=1;this.Re=0;this.type="crossdissolve";this.bc=this.Oa=this.Cc=0;this.Of=5;this.de=1;this.Pf=!1;this.Ge=this.Fe=this.Oj=0;this.Id=70;this.Im=0;this.yb=this.Hm=1;this.kh=this.jh=.5;this.fe=this.zi=this.Th=this.Lh=!1;this.Ui=1}e.prototype.sg=function(){var c=this.g.H,b=c.createShader(c.VERTEX_SHADER);c.shaderSource(b,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
c.compileShader(b);c.getShaderParameter(b,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(b)),b=null);var a=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.oa=c.createProgram();c.attachShader(this.oa,b);c.attachShader(this.oa,a);c.linkProgram(this.oa);c.getProgramParameter(this.oa,c.LINK_STATUS)||alert("Could not initialise shaders");this.oa.Z=c.getAttribLocation(this.oa,"aVertexPosition");c.enableVertexAttribArray(this.oa.Z);this.oa.Ba=c.getAttribLocation(this.oa,"aTextureCoord");c.enableVertexAttribArray(this.oa.Ba);a=c.createShader(c.FRAGMENT_SHADER);
c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.Sa=c.createProgram();c.attachShader(this.Sa,b);c.attachShader(this.Sa,a);c.linkProgram(this.Sa);c.getProgramParameter(this.Sa,c.LINK_STATUS)||alert("Could not initialise shaders");this.Sa.Z=c.getAttribLocation(this.Sa,"aVertexPosition");c.enableVertexAttribArray(this.Sa.Z);this.Sa.Ba=c.getAttribLocation(this.Sa,"aTextureCoord");c.enableVertexAttribArray(this.Sa.Ba);a=c.createShader(c.FRAGMENT_SHADER);
c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.Ha=c.createProgram();c.attachShader(this.Ha,b);c.attachShader(this.Ha,a);c.linkProgram(this.Ha);c.getProgramParameter(this.Ha,c.LINK_STATUS)||alert("Could not initialise shaders");this.Ha.Z=c.getAttribLocation(this.Ha,"aVertexPosition");c.enableVertexAttribArray(this.Ha.Z);this.Ha.Ba=c.getAttribLocation(this.Ha,"aTextureCoord");c.enableVertexAttribArray(this.Ha.Ba);a=c.createShader(c.FRAGMENT_SHADER);
c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.Na=c.createProgram();c.attachShader(this.Na,b);c.attachShader(this.Na,a);c.linkProgram(this.Na);c.getProgramParameter(this.Na,c.LINK_STATUS)||alert("Could not initialise shaders");this.Na.Z=c.getAttribLocation(this.Na,"aVertexPosition");c.enableVertexAttribArray(this.Na.Z);this.Na.Ba=c.getAttribLocation(this.Na,"aTextureCoord");c.enableVertexAttribArray(this.Na.Ba)};e.prototype.Jc=function(){var c=
this.g.H;if(!c)return!1;if(this.ac=c.createFramebuffer()){c.bindFramebuffer(c.FRAMEBUFFER,this.ac);this.ac.width=1024;this.ac.height=1024;this.Ke=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.Ke);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.ac.width,this.ac.height,0,c.RGBA,c.UNSIGNED_BYTE,null);var b=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,b);c.renderbufferStorage(c.RENDERBUFFER,
c.DEPTH_COMPONENT16,this.ac.width,this.ac.height);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.Ke,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,b);c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);this.ib=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.ib);c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),c.STATIC_DRAW);this.ib.Lc=3;this.ib.Vd=4;this.tf=
c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.tf);c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),c.STATIC_DRAW);return!0}return!1};e.prototype.Ll=function(c){var b=this.g.H,a=this.g.rb;if(this.Jd){b.useProgram(this.oa);b.bindBuffer(b.ARRAY_BUFFER,this.ib);b.vertexAttribPointer(this.oa.Z,this.ib.Lc,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.tf);b.vertexAttribPointer(this.oa.Ba,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(this.oa.Z);b.enableVertexAttribArray(this.oa.Ba);b.activeTexture(b.TEXTURE0);
b.bindTexture(b.TEXTURE_2D,this.Ke);a=1+(this.yb-1)*c;var d=b.getUniformLocation(this.oa,"uAlpha");b.uniform1f(d,1);d=b.getUniformLocation(this.oa,"uZoomIn");b.uniform1i(d,1);d=b.getUniformLocation(this.oa,"uZoomCenter");var h=.5+(this.jh-.5)*Math.sqrt(c),l=.5+(this.kh-.5)*Math.sqrt(c);0>h-.5/a&&(h=.5/a);0>l-.5/a&&(l=.5/a);1<h+.5/a&&(h=1-.5/a);1<l+.5/a&&(l=1-.5/a);b.uniform2f(d,h,l);h=b.getUniformLocation(this.oa,"uZoomFactor");b.uniform1f(h,a);b.uniform1i(b.getUniformLocation(this.oa,"uSampler"),
0);b.drawArrays(b.TRIANGLE_STRIP,0,this.ib.Vd);b.useProgram(this.g.na.F)}else{this.g.$g();b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.SRC_ALPHA,b.ONE);b.enable(b.BLEND);b.disable(b.DEPTH_TEST);h=.5+(this.jh-.5);l=.5+(this.kh-.5);0>h-.5/this.yb&&(h=.5/this.yb);0>l-.5/this.yb&&(l=.5/this.yb);1<h+.5/this.yb&&(h=1-.5/this.yb);1<l+.5/this.yb&&(l=1-.5/this.yb);if("crossdissolve"==this.type)b.useProgram(this.oa),b.bindBuffer(b.ARRAY_BUFFER,this.ib),b.vertexAttribPointer(this.oa.Z,this.ib.Lc,
b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.tf),b.vertexAttribPointer(this.oa.Ba,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Ke),d=b.getUniformLocation(this.oa,"uAlpha"),b.uniform1f(d,1-c),d=b.getUniformLocation(this.oa,"uZoomIn"),b.uniform1i(d,1==this.Oa||2==this.Oa?1:0),d=b.getUniformLocation(this.oa,"uZoomCenter"),b.uniform2f(d,h,l),h=b.getUniformLocation(this.oa,"uZoomFactor"),b.uniform1f(h,this.yb),b.uniform1i(b.getUniformLocation(this.oa,"uSampler"),0);
else if("diptocolor"==this.type)b.useProgram(this.Sa),b.bindBuffer(b.ARRAY_BUFFER,this.ib),b.vertexAttribPointer(this.Sa.Z,this.ib.Lc,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.tf),b.vertexAttribPointer(this.Sa.Ba,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Ke),b.uniform1f(b.getUniformLocation(this.Sa,"uColorPercent"),Math.min(2*c,1)),d=b.getUniformLocation(this.Sa,"uAlpha"),b.uniform1f(d,1-Math.max(2*(c-.5),0)),b.uniform3f(b.getUniformLocation(this.Sa,"uDipColor"),
(this.Re>>16&255)/255,(this.Re>>8&255)/255,(this.Re&255)/255),d=b.getUniformLocation(this.Sa,"uZoomIn"),b.uniform1i(d,1==this.Oa||2==this.Oa?1:0),d=b.getUniformLocation(this.Sa,"uZoomCenter"),b.uniform2f(d,h,l),h=b.getUniformLocation(this.Sa,"uZoomFactor"),b.uniform1f(h,this.yb),b.uniform1i(b.getUniformLocation(this.Sa,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){b.useProgram(this.Ha);b.bindBuffer(b.ARRAY_BUFFER,
this.ib);b.vertexAttribPointer(this.Ha.Z,this.ib.Lc,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.tf);b.vertexAttribPointer(this.Ha.Ba,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.Ke);if(1==this.Oa||2==this.Oa||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type)var k=d=.5;else d=this.jh,k=this.kh;var e=d*a.width,f=k*a.height;e=Math.max(e,a.width-e);f=Math.max(f,a.height-f);"irisround"==this.type||"irisroundcenter"==this.type?b.uniform1f(b.getUniformLocation(this.Ha,
"uRadius"),(Math.sqrt(e*e+f*f)+this.Cc)*c):(e>f?(f=a.height/a.width*e+this.Cc,e+=this.Cc):(e=a.width/a.height*f+this.Cc,f+=this.Cc),b.uniform2f(b.getUniformLocation(this.Ha,"uRectDim"),e*c,f*c));c=b.getUniformLocation(this.Ha,"uSoftEdge");b.uniform1f(c,this.Cc);b.uniform1i(b.getUniformLocation(this.Ha,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);b.uniform2f(b.getUniformLocation(this.Ha,"uIrisCenter"),d*a.width,k*a.height);d=b.getUniformLocation(this.Ha,"uZoomIn");b.uniform1i(d,
1==this.Oa||2==this.Oa?1:0);d=b.getUniformLocation(this.Ha,"uZoomCenter");b.uniform2f(d,h,l);h=b.getUniformLocation(this.Ha,"uZoomFactor");b.uniform1f(h,this.yb);b.uniform1i(b.getUniformLocation(this.Ha,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)b.useProgram(this.Na),b.bindBuffer(b.ARRAY_BUFFER,this.ib),b.vertexAttribPointer(this.Na.Z,this.ib.Lc,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,
this.tf),b.vertexAttribPointer(this.Na.Ba,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Ke),b.uniform1f(b.getUniformLocation(this.Na,"uPercent"),3>this.Ui?c*(a.width+this.Cc):c*(a.height+this.Cc)),c=b.getUniformLocation(this.Na,"uSoftEdge"),b.uniform1f(c,this.Cc),b.uniform1i(b.getUniformLocation(this.Na,"uDirection"),this.Ui),b.uniform2f(b.getUniformLocation(this.Na,"uCanvasDimensions"),a.width,a.height),d=b.getUniformLocation(this.Na,"uZoomIn"),b.uniform1i(d,1==this.Oa||
2==this.Oa?1:0),d=b.getUniformLocation(this.Na,"uZoomCenter"),b.uniform2f(d,h,l),h=b.getUniformLocation(this.Na,"uZoomFactor"),b.uniform1f(h,this.yb),b.uniform1i(b.getUniformLocation(this.Na,"uSampler"),0);b.drawArrays(b.TRIANGLE_STRIP,0,this.ib.Vd);b.useProgram(this.g.na.F);b.disable(b.BLEND);b.enable(b.DEPTH_TEST)}};return e}();n.Lm=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c){this.Yg=[];this.g=c;this.enabled=!1;this.xb=2;this.xk=!1}e.prototype.Fk=function(c){if(2==c.mode||3==c.mode||5==c.mode){var b=this.g.Ca.currentTime,a=c.xc.gain.value,d=c.vc.gain.value,h=c.wc.gain.value;c.uc.gain.linearRampToValueAtTime(c.uc.gain.value,b);c.uc.gain.linearRampToValueAtTime(0,b+this.xb);c.xc.gain.linearRampToValueAtTime(a,b);c.xc.gain.linearRampToValueAtTime(0,b+this.xb);c.vc.gain.linearRampToValueAtTime(d,b);c.vc.gain.linearRampToValueAtTime(0,
b+this.xb);c.wc.gain.linearRampToValueAtTime(h,b);c.wc.gain.linearRampToValueAtTime(0,b+this.xb)}else b=this.g.Ca.currentTime,c.dd.gain.linearRampToValueAtTime(c.dd.gain.value,b),c.dd.gain.linearRampToValueAtTime(0,b+this.xb);c.xh=!0;setTimeout(function(){c.Ed()},1E3*this.xb+5)};e.prototype.Rp=function(){for(var c=0;c<this.g.N.length;c++){var b=this.g.N[c];-1==this.g.Qc.indexOf(b.id)&&(-1==this.g.Qc.indexOf("_main")||-1!=this.g.ce.indexOf(b.id))&&!this.g.Ub(b.id)&&-1<b.loop&&4!=b.mode&&6!=b.mode&&
(b.ia?b.Yc():(b.b.play(),b.b.currentTime=0))}};e.prototype.yn=function(){var c=(this.g.Ca.currentTime-this.Np)/this.xb;c=Math.min(1,c);for(var b=0;b<this.g.N.length;b++){var a=this.g.N[b];this.g.Ub(a.id)&&1>a.la&&(a.la=c)}1==c&&clearInterval(this.Mp)};return e}();n.Mm=e})(ggP2VR||(ggP2VR={}));
(function(n){var e=function(){function e(c){this.Cg=[];this.Zc=null;this.Zb=[];this.Rb=[];this.$b=[];this.Kj=!0;this.g=c;this.pn()}e.prototype.sg=function(){var c=this.g.H,b=c.createShader(c.VERTEX_SHADER);c.shaderSource(b,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");c.compileShader(b);c.getShaderParameter(b,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(b)),b=null);var a=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.fc=c.createProgram();c.attachShader(this.fc,b);c.attachShader(this.fc,a);c.linkProgram(this.fc);c.getProgramParameter(this.fc,c.LINK_STATUS)||alert("Could not initialise shaders");this.fc.Z=c.getAttribLocation(this.fc,"aVertexPosition");c.enableVertexAttribArray(this.fc.Z);a=c.createShader(c.VERTEX_SHADER);b=c.createShader(c.VERTEX_SHADER);c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);c.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
c.compileShader(b);c.getShaderParameter(b,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(b)),a=null);var d=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
c.compileShader(d);c.getShaderParameter(d,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(d)),d=null);this.qa=c.createProgram();c.attachShader(this.qa,a);c.attachShader(this.qa,d);c.linkProgram(this.qa);c.getProgramParameter(this.qa,c.LINK_STATUS)||alert("Could not initialise shaders");this.qa.Z=c.getAttribLocation(this.qa,"aVertexPosition");c.enableVertexAttribArray(this.qa.Z);a=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)||(alert(c.getShaderInfoLog(a)),a=null);this.wb=c.createProgram();c.attachShader(this.wb,b);c.attachShader(this.wb,a);c.linkProgram(this.wb);c.getProgramParameter(this.wb,c.LINK_STATUS)||alert("Could not initialise shaders");this.wb.Z=c.getAttribLocation(this.wb,"aVertexPosition")};e.prototype.Jc=function(){var c=this.g.H;this.ud=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.ud);c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),c.STATIC_DRAW);this.ud.Lc=3;this.ud.Vd=4;this.$e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.$e);for(var b=[0,0,0],a=2*Math.PI/6,d=Math.PI/180*35,h=1,l=d;l<=d+2*Math.PI;l+=a)b.push(Math.sin(l)),b.push(-Math.cos(l)),b.push(0),h++;c.bufferData(c.ARRAY_BUFFER,new Float32Array(b),c.STATIC_DRAW);this.$e.Lc=3;this.$e.Vd=h;this.Zl=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.Zl);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,
c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);b=document.createElement("canvas");b.width=100;b.height=1;a=b.getContext("2d");a.width=100;a.height=1;d=a.createLinearGradient(0,0,100,0);d.addColorStop(0,this.g.fa(16777215,0));d.addColorStop(.88,this.g.fa(0,0));d.addColorStop(.9,this.g.fa(16654848,1));d.addColorStop(.92,this.g.fa(16776448,1));d.addColorStop(.94,this.g.fa(4849466,1));d.addColorStop(.96,this.g.fa(131071,
1));d.addColorStop(.98,this.g.fa(8190,1));d.addColorStop(1,this.g.fa(0,0));a.fillStyle=d;a.fillRect(0,0,100,1);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,b)};e.prototype.gp=function(){for(;0<this.Cg.length;)this.Cg.pop()};e.prototype.pn=function(){var c=[],b=[],a=[];var d={m:14,alpha:.2,color:11390415,j:.27};c.push(d);d={m:20,alpha:.25,color:11390415,j:.4};c.push(d);d={m:10,alpha:.2,color:12442332,j:.6};c.push(d);d={m:15,alpha:.2,color:11390415,j:.8};c.push(d);d={m:10,alpha:.2,color:12442332,
j:1.5};c.push(d);d={m:15,alpha:.2,color:11390415,j:1.8};c.push(d);d={m:8,alpha:.2,color:12575203,v:.8,j:.7};b.push(d);d={m:7,alpha:.4,color:12575203,v:.5,j:1.6};b.push(d);d={m:5,alpha:.4,color:12575203,v:.6,j:.9};b.push(d);d={m:8,alpha:.3,color:12575203,v:.4,j:1.1};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:30,alpha:.3,color:11390415,j:.5};c.push(d);d={m:10,alpha:.3,color:11390415,j:1};c.push(d);d={m:20,alpha:.3,color:11390415,j:1.3};c.push(d);d={m:10,alpha:.3,color:11390415,
j:1.5};c.push(d);d={m:15,alpha:.3,color:11390415,j:1.8};c.push(d);d={m:10,alpha:.3,color:15506856,v:.8,j:.7};b.push(d);d={m:20,alpha:.5,color:15506856,v:.5,j:1.6};b.push(d);d={m:5,alpha:.5,color:15506856,v:.6,j:.9};b.push(d);d={m:60,alpha:.4,color:15506856,v:.2,j:1.1};b.push(d);a.push({m:220,alpha:.035,j:2});this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:30,alpha:.5,color:15465727,j:.5};c.push(d);d={m:40,alpha:.28,color:15726842,j:.8};c.push(d);d={m:25,alpha:.32,color:15726842,
j:1.1};c.push(d);d={m:15,alpha:.25,color:15726842,j:1.35};c.push(d);d={m:10,alpha:.28,color:15465727,j:1.65};c.push(d);d={m:10,alpha:.45,color:15465727,v:.8,j:.7};b.push(d);d={m:7,alpha:.5,color:15465727,v:.4,j:.9};b.push(d);d={m:40,alpha:.4,color:15465727,v:.3,j:.38};b.push(d);d={m:50,alpha:.4,color:15465727,v:.5,j:1.25};b.push(d);d={m:18,alpha:.2,color:15465727,v:.5,j:1.25};b.push(d);d={m:10,alpha:.34,color:15726842,v:.8,j:1.5};b.push(d);d={m:38,alpha:.37,color:15465727,v:.3,j:-.5};b.push(d);this.Zb.push(c);
this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:16,alpha:.5,color:16363159,j:.1};c.push(d);d={m:26,alpha:.3,color:16091819,j:.32};c.push(d);d={m:29,alpha:.2,color:16091819,j:1.32};c.push(d);d={m:20,alpha:.18,color:16363159,j:1.53};c.push(d);d={m:27,alpha:.13,color:16425092,j:1.6};c.push(d);d={m:20,alpha:.1,color:16091819,j:1.75};c.push(d);d={m:12,alpha:.45,color:16312238,v:.45,j:.2};b.push(d);d={m:8,alpha:.25,color:16434209,v:.7,j:.33};b.push(d);d={m:9,alpha:.25,color:16091819,v:.4,j:.7};b.push(d);
d={m:7,alpha:.2,color:16091819,v:.4,j:.85};b.push(d);d={m:60,alpha:.23,color:16091819,v:.55,j:1.05};b.push(d);d={m:37,alpha:.1,color:16091819,v:.55,j:1.22};b.push(d);d={m:10,alpha:.25,color:16363159,v:.65,j:1.38};b.push(d);d={m:7,alpha:.2,color:16434209,v:.5,j:1.45};b.push(d);d={m:3,alpha:.2,color:16416033,v:.5,j:1.78};b.push(d);d={m:6,alpha:.18,color:16434209,v:.45,j:1.9};b.push(d);d={m:4,alpha:.14,color:16766514,v:.45,j:2.04};b.push(d);d={m:30,alpha:.14,color:16766514,v:.8,j:.04};b.push(d);this.Zb.push(c);
this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:9,alpha:.3,color:14346999,v:.3,j:.3};b.push(d);d={m:5,alpha:.5,color:14148072,v:.8,j:.6};b.push(d);d={m:3,alpha:.37,color:14346999,v:.66,j:.8};b.push(d);d={m:45,alpha:.2,color:14346999,v:.36,j:1.2};b.push(d);d={m:13,alpha:.2,color:14346999,v:.36,j:1.23};b.push(d);d={m:11,alpha:.2,color:14148072,v:.36,j:1.28};b.push(d);d={m:27,alpha:.16,color:14346999,v:.36,j:1.55};b.push(d);d={m:6,alpha:.36,color:14148072,v:.8,j:1.7};b.push(d);this.Zb.push(c);this.Rb.push(b);
this.$b.push(a);c=[];b=[];a=[];d={m:24,alpha:.2,color:15186464,j:.2};c.push(d);d={m:7,alpha:.26,color:15186464,j:.35};c.push(d);d={m:23,alpha:.18,color:15186464,j:.65};c.push(d);d={m:13,alpha:.2,color:15186464,j:.8};c.push(d);d={m:11,alpha:.15,color:15186464,j:1.4};c.push(d);d={m:15,alpha:.11,color:15451904,j:1.6};c.push(d);d={m:6,alpha:.45,color:15579138,v:.45,j:.22};b.push(d);d={m:3,alpha:.3,color:15451904,v:.25,j:.4};b.push(d);d={m:4,alpha:.2,color:15451904,v:.25,j:.45};b.push(d);d={m:65,alpha:.17,
color:15186464,v:.25,j:.5};b.push(d);d={m:5,alpha:.45,color:15579138,v:.45,j:.88};b.push(d);d={m:140,alpha:.18,color:15579138,v:.32,j:.95};b.push(d);d={m:12,alpha:.22,color:15579138,v:.32,j:1.1};b.push(d);d={m:8,alpha:.32,color:15451904,v:.72,j:1.2};b.push(d);d={m:55,alpha:.2,color:15451904,v:.45,j:1.33};b.push(d);d={m:4,alpha:.3,color:15451904,v:.25,j:1.42};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:16,alpha:.4,color:10933495,j:.32};c.push(d);d={m:14,alpha:.3,color:11007484,
j:.36};c.push(d);d={m:10,alpha:.3,color:4037331,j:.58};c.push(d);d={m:14,alpha:.22,color:8835068,j:.68};c.push(d);d={m:10,alpha:.27,color:11007484,j:.82};c.push(d);d={m:11,alpha:.27,color:10867450,j:1};c.push(d);d={m:9,alpha:.2,color:6158332,j:1.05};c.push(d);d={m:10,alpha:.17,color:10867450,j:1.78};c.push(d);d={m:10,alpha:.3,color:4037331,j:-.23};c.push(d);d={m:8,alpha:.45,color:8835068,v:.45,j:.175};b.push(d);d={m:7,alpha:.4,color:12574715,v:.55,j:.46};b.push(d);d={m:3,alpha:.3,color:10867450,v:.35,
j:.5};b.push(d);d={m:60,alpha:.37,color:4031699,v:.75,j:.75};b.push(d);d={m:3,alpha:.25,color:4031699,v:.25,j:.75};b.push(d);d={m:3,alpha:.2,color:6158332,v:.25,j:.9};b.push(d);d={m:7,alpha:.45,color:8835068,v:.45,j:1.3};b.push(d);d={m:32,alpha:.22,color:8835068,v:.75,j:1.62};b.push(d);d={m:9,alpha:.45,color:4031699,v:.65,j:1.6};b.push(d);d={m:8,alpha:.25,color:4031699,v:.65,j:1.83};b.push(d);d={m:7,alpha:.4,color:12574715,v:.55,j:-.18};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=
[];b=[];a=[];d={m:16,alpha:.4,color:16389120,j:.32};c.push(d);d={m:26,alpha:.22,color:16389120,j:.4};c.push(d);d={m:26,alpha:.25,color:16389120,j:.65};c.push(d);d={m:18,alpha:.3,color:16389120,j:1.23};c.push(d);d={m:14,alpha:.26,color:16389120,j:1.33};c.push(d);d={m:17,alpha:.18,color:16389120,j:1.7};c.push(d);d={m:30,alpha:.16,color:16389120,j:2.15};c.push(d);d={m:100,alpha:.25,color:16389120,v:.22,j:1.45};b.push(d);d={m:7,alpha:.5,color:15628151,v:.3,j:1.5};b.push(d);d={m:3,alpha:.5,color:15628151,
v:.3,j:1.52};b.push(d);d={m:4,alpha:.5,color:16389120,v:.3,j:1.745};b.push(d);d={m:9,alpha:.22,color:16389120,v:.3,j:1.8};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:16,alpha:.4,color:10933495,j:.32};c.push(d);d={m:14,alpha:.3,color:11007484,j:.36};c.push(d);d={m:10,alpha:.3,color:4037331,j:.58};c.push(d);d={m:14,alpha:.22,color:8835068,j:.68};c.push(d);d={m:10,alpha:.27,color:11007484,j:.82};c.push(d);d={m:11,alpha:.27,color:10867450,j:1};c.push(d);d={m:9,alpha:.2,
color:6158332,j:1.05};c.push(d);d={m:10,alpha:.17,color:10867450,j:1.78};c.push(d);d={m:10,alpha:.3,color:4037331,j:-.23};c.push(d);d={m:8,alpha:.45,color:8835068,v:.45,j:.175};b.push(d);d={m:7,alpha:.4,color:12574715,v:.55,j:.46};b.push(d);d={m:3,alpha:.3,color:10867450,v:.35,j:.5};b.push(d);d={m:60,alpha:.37,color:4031699,v:.75,j:.75};b.push(d);d={m:3,alpha:.25,color:4031699,v:.25,j:.75};b.push(d);d={m:3,alpha:.2,color:6158332,v:.25,j:.9};b.push(d);d={m:7,alpha:.45,color:8835068,v:.45,j:1.3};b.push(d);
d={m:32,alpha:.22,color:8835068,v:.75,j:1.62};b.push(d);d={m:9,alpha:.45,color:4031699,v:.65,j:1.6};b.push(d);d={m:8,alpha:.25,color:4031699,v:.65,j:1.83};b.push(d);d={m:7,alpha:.4,color:12574715,v:.55,j:-.18};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:16,alpha:.4,color:16389120,j:.32};c.push(d);d={m:26,alpha:.22,color:16389120,j:.4};c.push(d);d={m:26,alpha:.25,color:16389120,j:.65};c.push(d);d={m:18,alpha:.3,color:16389120,j:1.23};c.push(d);d={m:14,alpha:.26,color:16389120,
j:1.33};c.push(d);d={m:17,alpha:.18,color:16389120,j:1.7};c.push(d);d={m:30,alpha:.16,color:16389120,j:2.15};c.push(d);d={m:100,alpha:.25,color:16389120,v:.22,j:1.45};b.push(d);d={m:7,alpha:.5,color:15628151,v:.3,j:1.5};b.push(d);d={m:3,alpha:.5,color:15628151,v:.3,j:1.52};b.push(d);d={m:4,alpha:.5,color:16389120,v:.3,j:1.745};b.push(d);d={m:9,alpha:.22,color:16389120,v:.3,j:1.8};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a);c=[];b=[];a=[];d={m:24,alpha:.2,color:15186464,j:.2};c.push(d);
d={m:7,alpha:.26,color:15186464,j:.35};c.push(d);d={m:23,alpha:.18,color:15186464,j:.65};c.push(d);d={m:13,alpha:.2,color:15186464,j:.8};c.push(d);d={m:11,alpha:.15,color:15186464,j:1.4};c.push(d);d={m:15,alpha:.11,color:15451904,j:1.6};c.push(d);d={m:6,alpha:.45,color:15579138,v:.45,j:.22};b.push(d);d={m:3,alpha:.3,color:15451904,v:.25,j:.4};b.push(d);d={m:4,alpha:.2,color:15451904,v:.25,j:.45};b.push(d);d={m:65,alpha:.17,color:15186464,v:.25,j:.5};b.push(d);d={m:5,alpha:.45,color:15579138,v:.45,
j:.88};b.push(d);d={m:140,alpha:.18,color:15579138,v:.32,j:.95};b.push(d);d={m:12,alpha:.22,color:15579138,v:.32,j:1.1};b.push(d);d={m:8,alpha:.32,color:15451904,v:.72,j:1.2};b.push(d);d={m:55,alpha:.2,color:15451904,v:.45,j:1.33};b.push(d);d={m:4,alpha:.3,color:15451904,v:.25,j:1.42};b.push(d);this.Zb.push(c);this.Rb.push(b);this.$b.push(a)};e.prototype.So=function(){if(this.Kj){var c=this.g.H,b,a=new n.wa(0,0,-100),d=this.g.ed(),h=0,l=0,k=!1;if(this.g.Y){var e=this.g.rb.width;var f=this.g.rb.height;
this.g.C.Xg&&(e=this.g.C.ac.width,f=this.g.C.ac.height)}else{this.S||(this.S=this.Zc.getContext("2d"));if(this.S.width!==this.g.o.width||this.S.height!==this.g.o.height)this.S.width=this.g.o.width,this.S.height=this.g.o.height;this.S.clear?this.S.clear():this.S.clearRect(0,0,this.Zc.width,this.Zc.height);e=this.S.width;f=this.S.height}var m=Math.sqrt(e*e+f*f),g=m/800;for(b=0;b<this.Cg.length;b++){var p=this.Cg[b];a.Ya(0,0,-100);a.va(-p.i*Math.PI/180);a.Da(p.pan*Math.PI/180);a.Da(-this.g.pan.c*Math.PI/
180);a.va(this.g.i.c*Math.PI/180);a.jb(this.g.O.c*Math.PI/180);if(-.01>a.z){l=-d/a.z;h=a.x*l;l*=a.y;var q=Math.max(e,f);Math.abs(h)<q/2+100&&Math.abs(l)<q/2+100&&(k=!0,h+=e/2,l+=f/2)}if(k){this.g.Y&&(c.blendFunc(c.SRC_ALPHA,c.DST_ALPHA),c.enable(c.BLEND),c.disable(c.DEPTH_TEST));q=e/2;var t=f/2;var v=Math.sqrt((q-h)*(q-h)+(t-l)*(t-l));var u=m/2;t=e>f?e:f;q=p.mk/100*((u-v)/u);0>q&&(q=0);if(this.g.Y){c.useProgram(this.fc);c.bindBuffer(c.ARRAY_BUFFER,this.g.C.ib);c.vertexAttribPointer(this.fc.Z,this.g.C.ib.Lc,
c.FLOAT,!1,0,0);var x=c.getUniformLocation(this.fc,"uCanvasDimensions");c.uniform2f(x,c.drawingBufferWidth,c.drawingBufferHeight);c.uniform2f(c.getUniformLocation(this.fc,"uFlareCenterPosition"),c.drawingBufferWidth/e*h,f-c.drawingBufferHeight/f*l);c.uniform1f(c.getUniformLocation(this.fc,"uBlindingValue"),q);x=c.getUniformLocation(this.fc,"uAspectRatio");c.uniform1f(x,this.g.C.Xg?c.drawingBufferWidth/c.drawingBufferHeight:c.drawingBufferWidth/c.drawingBufferHeight/(e/f));c.drawArrays(c.TRIANGLE_STRIP,
0,this.g.C.ib.Vd)}else x=this.S.createRadialGradient(h,l,1,h,l,t),x.addColorStop(0,"rgba(255, 255, 255, "+q+")"),x.addColorStop(.5,"rgba(255, 255, 255, "+.8*q+")"),x.addColorStop(1,"rgba(255, 255, 255, "+.6*q+")"),this.S.fillStyle=x,this.S.fillRect(0,0,this.S.width,this.S.height);if(0!=Number(p.type)&&!this.g.C.Xg){q=e/2-h;t=f/2-l;var A=1,w=Number(p.type)-1;v<.35*u&&(A=v/(.35*u),A*=A);v>.7*u&&(A=(u-v)/(.3*u));A*=p.alpha/100;if(0<this.Zb[w].length)for(v=0;v<this.Zb[w].length;v++){var B=this.Zb[w][v];
u=B.m*g;var z=B.alpha*A;0>z&&(z=0);var C=B.color;if(8==w||9==w||10==w)C=p.color;if(this.g.Y)c.useProgram(this.qa),c.bindBuffer(c.ARRAY_BUFFER,this.$e),c.vertexAttribPointer(this.qa.Z,this.$e.Lc,c.FLOAT,!1,0,0),x=c.getUniformLocation(this.qa,"uCanvasDimensions2"),c.uniform2f(x,c.drawingBufferWidth,c.drawingBufferHeight),c.uniform2f(c.getUniformLocation(this.qa,"uCirclePosition"),c.drawingBufferWidth/e*(h+q*B.j),c.drawingBufferWidth/e*(f-(l+t*B.j))),c.uniform2f(c.getUniformLocation(this.qa,"uCircleTexturePosition"),
c.drawingBufferWidth/e*(h+q*B.j),f-(l+t*B.j)),c.uniform1f(c.getUniformLocation(this.qa,"uCircleRadius"),u),c.uniform3f(c.getUniformLocation(this.qa,"uCircleColor"),(C>>16&255)/255,(C>>8&255)/255,(C&255)/255),c.uniform1f(c.getUniformLocation(this.qa,"uCircleAlpha"),z),c.uniform1f(c.getUniformLocation(this.qa,"uCircleSoftness"),.1),x=c.getUniformLocation(this.qa,"uAspectRatio"),c.uniform1f(x,c.drawingBufferWidth/c.drawingBufferHeight/(e/f)),c.drawArrays(c.TRIANGLE_FAN,0,this.$e.Vd);else{this.S.save();
this.S.translate(h+q*B.j,l+t*B.j);x=this.S.createRadialGradient(0,0,1,0,0,1.1*u);x.addColorStop(0,this.g.fa(C,z));x.addColorStop(.65,this.g.fa(C,.9*z));x.addColorStop(.8,this.g.fa(C,.7*z));x.addColorStop(1,this.g.fa(C,.2*z));this.S.beginPath();C=2*Math.PI/6;B=Math.PI/180*35;var D=!0;for(z=B;z<=B+2*Math.PI;z+=C)D?(this.S.moveTo(u*Math.sin(z),u*Math.cos(z)),D=!1):this.S.lineTo(u*Math.sin(z),u*Math.cos(z));this.S.closePath();this.S.fillStyle=x;this.S.fill();this.S.restore()}}if(0<this.Rb[w].length)for(v=
0;v<this.Rb[w].length;v++){B=this.Rb[w][v];u=B.m*g;z=B.alpha*A;0>z&&(z=0);C=B.color;if(8==w||9==w||10==w)C=p.color;this.g.Y?(c.useProgram(this.qa),c.bindBuffer(c.ARRAY_BUFFER,this.ud),c.vertexAttribPointer(this.qa.Z,this.ud.Lc,c.FLOAT,!1,0,0),x=c.getUniformLocation(this.qa,"uCanvasDimensions2"),c.uniform2f(x,c.drawingBufferWidth,c.drawingBufferHeight),x=c.getUniformLocation(this.qa,"uCirclePosition"),c.uniform2f(x,c.drawingBufferWidth/e*(h+q*B.j),c.drawingBufferWidth/e*(f-(l+t*B.j))),x=c.getUniformLocation(this.qa,
"uCircleTexturePosition"),c.uniform2f(x,c.drawingBufferWidth/e*(h+q*B.j),f-(l+t*B.j)),x=c.getUniformLocation(this.qa,"uCircleRadius"),c.uniform1f(x,u),c.uniform3f(c.getUniformLocation(this.qa,"uCircleColor"),(C>>16&255)/255,(C>>8&255)/255,(C&255)/255),c.uniform1f(c.getUniformLocation(this.qa,"uCircleAlpha"),z),c.uniform1f(c.getUniformLocation(this.qa,"uCircleSoftness"),B.v),x=c.getUniformLocation(this.qa,"uAspectRatio"),c.uniform1f(x,c.drawingBufferWidth/c.drawingBufferHeight/(e/f)),c.drawArrays(c.TRIANGLE_FAN,
0,this.ud.Vd)):(this.S.save(),this.S.translate(h+q*B.j,l+t*B.j),x=this.S.createRadialGradient(0,0,1,0,0,u),x.addColorStop(0,this.g.fa(C,z)),x.addColorStop(1-B.v,this.g.fa(C,.8*z)),x.addColorStop(1,this.g.fa(C,0)),this.S.beginPath(),this.S.arc(0,0,u,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=x,this.S.fill(),this.S.restore())}if(0<this.$b[w].length)for(v=0;v<this.$b[w].length;v++)p=this.$b[w][v],u=p.m*g,z=p.alpha*A,0>z&&(z=0),this.g.Y?(c.useProgram(this.wb),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,
this.Zl),c.bindBuffer(c.ARRAY_BUFFER,this.ud),c.vertexAttribPointer(this.wb.Z,this.ud.Lc,c.FLOAT,!1,0,0),x=c.getUniformLocation(this.wb,"uCanvasDimensions2"),c.uniform2f(x,e,f),x=c.getUniformLocation(this.wb,"uCirclePosition"),c.uniform2f(x,h+q*p.j,f-(l+t*p.j)),x=c.getUniformLocation(this.wb,"uRingTexturePosition"),c.uniform2f(x,c.drawingBufferWidth/e*(h+q*p.j),f-(l+t*p.j)),x=c.getUniformLocation(this.wb,"uCircleRadius"),c.uniform1f(x,u),c.uniform2f(c.getUniformLocation(this.wb,"uRingPosition"),h+
q*p.j,f-(l+t*p.j)),c.uniform1f(c.getUniformLocation(this.wb,"uRingRadius"),u),c.uniform1f(c.getUniformLocation(this.wb,"uRingAlpha"),z),x=c.getUniformLocation(this.wb,"uAspectRatio"),c.uniform1f(x,c.drawingBufferWidth/c.drawingBufferHeight/(e/f)),c.uniform1i(c.getUniformLocation(this.wb,"uSampler"),0),c.drawArrays(c.TRIANGLE_FAN,0,this.ud.Vd)):(this.S.save(),this.S.translate(h+q*p.j,l+t*p.j),x=this.S.createRadialGradient(0,0,0,0,0,u),x.addColorStop(0,this.g.fa(16777215,0)),x.addColorStop(.88,this.g.fa(0,
0)),x.addColorStop(.9,this.g.fa(16654848,z)),x.addColorStop(.92,this.g.fa(16776448,z)),x.addColorStop(.94,this.g.fa(4849466,z)),x.addColorStop(.96,this.g.fa(131071,z)),x.addColorStop(.98,this.g.fa(8190,z)),x.addColorStop(1,this.g.fa(0,0)),this.S.beginPath(),this.S.arc(0,0,u,0,2*Math.PI,!1),this.S.closePath(),this.S.fillStyle=x,this.S.fill(),this.S.restore())}this.g.Y&&(c.useProgram(this.g.na.F),c.disable(c.BLEND),c.enable(c.DEPTH_TEST))}}}};return e}();n.Km=e})(ggP2VR||(ggP2VR={}));var W=!1;
(function(n){var e=function(){return function(){this.f=this.i=this.pan=0}}(),g=function(){return function(){this.Pi=-1E7}}(),c=function(){function b(a,d){this.Bo="TGljZW5zZSAnQW50aG9ueSBULiBBY2V2ZWRvIEpyLic=";this.pan={c:0,Qa:0,min:0,max:360,d:0,uj:0,Gc:0};this.i={c:0,Qa:0,min:-90,max:90,d:0,Gc:0};this.O={c:0,Qa:0,min:-180,max:180,d:0};this.tc={pan:0,i:-90,O:0,f:170,Eb:9};this.f={c:70,Qa:70,min:1,Gg:0,max:170,rj:360,sj:270,pf:0,d:0,mode:0,km:0,zk:0};this.Za={O:0,pitch:0};this.o={width:10,height:10};this.hb=0;this.Si=new n.wa;this.crossOrigin=
"anonymous";this.Ka=this.$h=4;this.gd=this.ih=this.Jg=this.nc=0;this.X={start:{x:0,y:0},da:{x:0,y:0},Ad:{x:0,y:0},c:{x:0,y:0},ca:{x:0,y:0}};this.R={Va:!1,Hk:0,startTime:0,start:{x:0,y:0},da:{x:0,y:0},Ad:{x:0,y:0},c:{x:0,y:0},ca:{x:0,y:0}};this.dg=!0;this.Aa={enabled:!0,da:{x:0,y:0},ca:{x:0,y:0},Fj:0,f:{active:!1,jc:0}};this.gb={alpha:0,beta:0,gamma:0,orientation:0,Ml:0,gi:!0,cg:0};this.pg={alpha:0,beta:0,gamma:0,orientation:0};this.s={src:[],Qe:4,width:640,height:480,kd:!1,Kh:!1,lm:!1,me:"loop",b:HTMLVideoElement=
null,nm:!1,oc:WebGLTexture=null,Zj:WebGLBuffer=null,oi:WebGLBuffer=null,jj:WebGLBuffer=null,format:1,Eh:0,cj:1};this.Nh=0;this.ha=this.xa=this.Fa=this.T=this.ic=this.$a=this.D=null;this.oe="pano";this.bj="flashcontainer";this.Ti="";this.control=null;this.Qb=[];this.Ea=!1;this.$f=1;this.ka=null;this.Ld=this.Ne=this.df=!1;this.Qf=0;this.sd=.02;this.Di=0;this.Ei=!1;this.Ci=this.oh=this.Rf=this.Me=this.lk=0;this.kk=-1;this.Kb="";this.uf=this.Bc=!1;this.ai=0;this.th=[];this.Xe=[];this.Gf=this.qc=1;this.Vf=
1024;this.vf=!1;this.we=200;this.Ob=0;this.Wg=5;this.pc=0;this.om=50;this.ij=this.pm=0;this.l={enabled:!1,timeout:5,active:!1,Vg:!1,speed:.4,ri:0,Yh:0,tj:!0,fh:!1,Kf:!1,ph:"",Md:"Animation01",Pe:!1,Uh:!1,Qj:!1,startTime:0,ld:0,zh:!1,uh:!1,Ph:0,zd:0,Ag:0,Bg:0,zg:0,Al:0};this.u={active:!1,aborted:!1,speed:.1,pan:0,i:0,O:0,f:70,Id:70,Ag:0,Bg:0,Bl:0,zg:0,Eb:0,Mg:0,mj:0,Xj:!1,Hg:!1,jk:0,ik:0,Gh:!1};this.kf={pan:-1,i:-1,f:-1};this.yl=0;this.aa=null;this.Lf={};this.yi={};this.Pd=[];this.Sh={};this.Ac={};
this.mf={};this.A={mode:1,wg:-1,pa:0,mb:0,Xc:.05,hc:255,gc:1,ec:255,dc:.3,cf:!0,Sj:{enabled:!0,width:180,height:20,Tj:0,Rj:1,background:!0,ec:16777215,dc:1,hc:0,gc:1,Gi:3,Hi:1,Ai:!0},kb:[],Nb:[],Pc:[],li:[]};this.za=null;this.P=[];this.N=[];this.J=[];this.Xa=[];this.Ie=[];this.Ma=[];this.ya=[];this.Qc=[];this.ce=[];this.Ee=[];this.V=1;this.na=this.Cd=this.Sb=this.Od=null;this.ag={};this.pd={};this.h=new n.Nm;this.Ro={target:0,current:0,Xc:.01,un:2,Xi:0,vh:!1,an:!1};this.margin={left:0,top:0,right:0,
bottom:0};this.B={ue:!1,Co:!1,Ab:!1,md:!1,yd:!0,ml:!1,jm:1,am:!1,Vi:!0,Zf:!0,rh:!1,ef:!1,bm:!0,sensitivity:8};this.Fg=[];this.ad=!0;this.ta={x:0,y:0};this.eh=this.Fb=this.ah=this.Tc=this.Y=!1;this.xi=this.Am=!0;this.hj=!1;this.ne=!0;this.bh=this.gj=!1;this.Bm=!0;this.Ia=this.Nd="";this.cd="transition";this.Ra="transform";this.td="perspective";this.Ck="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";
this.rb={width:0,height:0};this.Lk=new n.wa;this.Kk=new n.wa;this.Mk=new n.wa;this.Nk=new n.wa;this.Jk=new n.wa;this.hf=!1;this.zl=this.bb="";this.$j=[];this.ti=[];this.tg=this.ol=this.Td=this.pl=this.Kc=this.kj=this.Gj=this.jd=this.gf=this.nl=this.lj=this.ql=this.rl=this.ul=!1;this.dh=!0;this.fi=this.Ih=!1;this.il=[];this.devicePixelRatio=1;this.ga=this.C=null;this.qh=!1;this.La=null;this.pb={enabled:!1,speed:1,od:!1,$i:!0};this.Il=!1;this.Rh="<<LOG>>";this.nb=new n.Om;this.Wj=!1;this.Yf=function(a,
d){if(0==a.length)return a;var b;var c=[];var h=d.bi(a[0])-0;for(b=0;b<a.length;b++){var l=b;var k=b+1;k==a.length&&(k=0);var e=d.bi(a[k])-0;if(0<=h&&0<=e)c.push(a[l]);else if(0<=h||0<=e){var g=e/(e-h);0>g&&(g=0);1<g&&(g=1);var v=new n.wa;v.xd(a[l],a[k],g);0>h||c.push(a[l]);c.push(v)}h=e}return c};this.Ql=new e;this.Mj=0;this.Oh=-1;this.kg=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+
document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.Wh=1;this.zn=this.Bh=this.wl=this.Yi=this.Bj=this.ci=0;this.xl=!1;this.Rd=!0;this.ob=new n.lh(this);this.ob.cf=!1;this.Bk();if(7<this.Rh.length){var c=b.Tf("bG9n");window[b.Tf("Y29uc29sZQ==")][c](b.nk(this.Rh))}this.xf(this.ob);this.checkLoaded=this.Qb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.Fb=!0,this.Y=this.Tc=!1,d.hasOwnProperty("flashPlayerId")?
this.oe=d.flashPlayerId:this.oe="pano",d.hasOwnProperty("flashContainerId")?this.bj=d.flashContainerId:this.bj=a+"flash");this.ua();this.Fb||(this.Ga=new n.Km(this));this.wk(a);this.$m();this.userdata=this.Lf=this.bg();this.emptyHotspot=this.ob;this.mouse=this.ta;this.C=new n.Lm(this);this.La=new n.Mm(this);this.na=new n.Sm(this);this.Sc()}b.prototype.cl=function(a){return-99991===a?this.Bo:"6.0 beta4/17095"};b.prototype.Qi=function(){this.C.enabled=this.ga.enabled;this.C.type=this.ga.type;this.C.Oa=
this.ga.zoomin;this.C.bc=this.ga.zoomout;this.C.Uf=this.ga.blendtime;this.C.Pf=this.ga.zoomoutpause;this.C.Of=this.ga.zoomfov;this.C.de=this.ga.zoomspeed;this.C.Re=this.ga.blendcolor;this.C.Cc=this.ga.softedge;this.ga=null};b.prototype.Cp=function(a){this.ga={};this.ga.enabled=!0;this.ga.type=this.C.type;this.ga.zoomin=this.C.Oa;this.ga.zoomout=this.C.bc;this.ga.blendtime=this.C.Uf;this.ga.zoomoutpause=this.C.Pf;this.ga.zoomfov=this.C.Of;this.ga.zoomspeed=this.C.de;this.ga.blendcolor=this.C.Re;this.ga.softedge=
this.C.Cc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.ga.type=d}a.hasOwnProperty("before")&&(d=Number(a.before),0==d||2==d)&&(this.ga.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.ga.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.ga.blendtime=
d));a.hasOwnProperty("waitfortransition")&&(this.ga.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.ga.zoomfov=d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.ga.zoomspeed=d));a.hasOwnProperty("dipcolor")&&(this.ga.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ga.softedge=a));this.qh||this.Qi()};b.prototype.Oc=function(a,d,b){var c=d?Number(d):0;if(0!=a&&
4!=a&&12!=a&&9!=a)this.Mc("Unsupported projection type: "+a);else if(d&&0!==c&&4!==c&&12!==c&&9!==c)this.Mc("Unsupported projection2 type: "+c);else if(a==c&&(c=0),this.Jg=b?Number(b):1,this.Ka!=a||this.nc!=c)this.Ka=a,this.nc=c,this.na.Hh()};b.prototype.ra=function(){return 0==this.Ka?4:this.Ka};b.prototype.Li=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Mc("Unsupported projection type: "+a);else if(this.Y||0==a||4==a||this.Mc("Projection changes require WebGL!"),this.ra()!=a){var b={};b.pan=this.pan.c;
b.tilt=this.i.c;b.fov=this.f.c;b.projection=a;b.timingFunction=3;b.speed=d;a=this.jg(a);b.fov=Math.min(a,b.fov);this.Vh(b)}};b.prototype.addListener=function(a,d){(this.ag[a]=this.ag[a]||[]).push(d)};b.prototype.ja=function(a,d){if(a=this.ag[a])for(var b=a.length,c=0;c<b;c++)try{a[c].apply(null,[d])}catch(k){this.Mc(k)}};b.prototype.removeEventListener=function(a,d){var b=this.ag[a];if(b){var c;var k=0;for(c=b.length;k<c;k++)if(b[k]===d){1===c?delete this.ag[a]:b.splice(k,1);break}}};b.prototype.Wm=
function(a,d,b,c){if(!this.pd.hasOwnProperty(a)){var h=new g;this.pd[a]=h;h.type=d;"undefined"!==typeof b&&this.$d(a,b);"object"===typeof c&&this.fm(a,c);return!0}return!1};b.prototype.fm=function(a,d){if(this.pd.hasOwnProperty(a)&&"object"===typeof d){var b=this.pd[a];d.hasOwnProperty("cookiePath")&&(b.tk=String(d.cookiePath));d.hasOwnProperty("cookieExpireDays")&&(b.Pi=parseFloat(d.cookieExpireDays));if(d.hasOwnProperty("keep")&&(b.vl=!!d.keep,b.vl)){var c="ggvar_"+a;0<document.cookie.length&&(d=
document.cookie.indexOf(c+"="),-1!=d&&(d=d+c.length+1,c=document.cookie.indexOf(";",d),-1==c&&(c=document.cookie.length),d=decodeURIComponent(document.cookie.substring(d,c)),0==b.type&&this.$d(a,d),1==b.type&&this.$d(a,parseFloat(d)),2==b.type&&this.$d(a,"true"==d)))}return!0}return!1};b.prototype.$d=function(a,d){if(this.pd.hasOwnProperty(a)){var b=this.pd[a];if(0==b.type&&"string"===typeof d||1==b.type&&"number"===typeof d||2==b.type&&"boolean"===typeof d){if(b.vl){var c="ggvar_"+a+"="+encodeURIComponent(d.toString());
-1<=b.Pi&&(c+="; max-age="+86400*b.Pi);b.tk&&(c+="; path="+b.tk);document.cookie=c}b.value!=d&&(b.value=d,this.ja("varchanged_"+a,{value:d}));return!0}}return!1};b.prototype.no=function(a){if(this.pd.hasOwnProperty(a))return this.pd[a].value};b.Tf=function(a){var d="",b=0;a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));c=c<<2|k>>4;k=(k&15)<<4|e>>2;var m=(e&3)<<6|f;d+=String.fromCharCode(c);64!=e&&(d+=String.fromCharCode(k));64!=f&&(d+=String.fromCharCode(m))}while(b<a.length);return d};b.xn=function(a){for(var d=[1,1,1,1,2,2,3,0],b=a.length,c="",k=0;k<b;){var e=a.charCodeAt(k++);if(e&128){var f=d[e>>3&7];if(!(e&64&&f)||k+
f>b)return null;for(e&=63>>f;0<f;--f){var m=a.charCodeAt(k++);if(128!=(m&192))return null;e=e<<6|m&63}}c+=String.fromCharCode(e)}return c};b.nk=function(a){return b.xn(b.Tf(a))};b.prototype.Bk=function(){this.devicePixelRatio=window.devicePixelRatio||1;this.ul=!!navigator.userAgent.match(/(Windows|Win)/g);this.rl=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g);this.ql=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.lj=!!navigator.userAgent.match(/(MSIE)/g);this.nl=!!navigator.userAgent.match(/(Edge|EdgA)/g);
this.gf=!!navigator.userAgent.match(/(Firefox)/g);if(this.jd=!!navigator.userAgent.match(/(Safari)/g)){var a=navigator.userAgent.indexOf("Safari");this.Gd=navigator.userAgent.substring(a+7);a=navigator.userAgent.indexOf("Version");-1!=a&&(this.Gd=navigator.userAgent.substring(a+8));this.Gd=this.Gd.substring(0,this.Gd.indexOf(" "));this.Gd=this.Gd.substring(0,this.Gd.indexOf("."));this.Gj=!0}if(this.kj=!!navigator.userAgent.match(/(Chrome)/g))this.jd=!1;this.Kc=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);
this.pl=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.Td=!!navigator.userAgent.match(/(android)/i);this.ol=!!navigator.userAgent.match(/(IEMobile)/i);this.tg=this.Kc||this.Td||this.ol;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.il=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.Ih=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.Ia="";this.cd="transition";this.Ra="transform";this.td="perspective";
for(var d=0;d<a.length;d++)"undefined"!==typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ia="-"+a[d].toLowerCase()+"-",this.cd=a[d]+"Transition",this.Ra=a[d]+"Transform",this.td=a[d]+"Perspective");this.hj=U();this.Y=V();this.Tc=this.hj;this.Y&&(this.Tc=!1);this.Bc=!0;this.uf=!1;if(this.Kc||this.Td)this.em(80),this.Wg=2;this.Mc("Pano2VR player "+this.cl()+" - Prefix:"+this.Ia+", "+(this.hj?"CSS 3D available":"CSS 3D not available")+", "+(this.Y?"WebGL available":"WebGL not available"));
W&&this.M("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.Ca=new AudioContext}catch(h){this.Ca=null}this.jd&&(!this.Gj||9>Number(this.Gd))&&(this.Ca=null);this.dh=this.pl?this.jd&&this.Gj&&10<=Number(this.Gd)?!0:!1:!0};b.prototype.M=function(a){if(W){var d=document.getElementById("gg_debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Mc=function(a){var d=document.getElementById("gg_debug");d&&(d.innerHTML=
a+"<br />");window.console&&window.console.log(a)};b.prototype.em=function(a){this.we=a};b.prototype.lp=function(a){this.crossOrigin=a};b.prototype.np=function(a){this.ff=a};b.prototype.eo=function(){return this.ai};b.prototype.kp=function(a){this.Nd=a};b.prototype.En=function(){return this.Nd};b.prototype.Nn=function(){return this.tg};b.prototype.On=function(){return this.hf};b.prototype.Kn=function(){return this.l.active};b.prototype.op=function(a){this.tg=!!a};b.prototype.Ch=function(){return this.isLoaded};
b.prototype.Mn=function(){return!this.isLoaded};b.prototype.ed=function(){return Number(this.o.height)/(2*Math.tan(Math.PI/180*(this.Tb()/2)))};b.prototype.gm=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var b=a-this.margin.left-this.margin.right,c=d-this.margin.top-this.margin.bottom;if(!(10>b||10>c)){var k=window.devicePixelRatio||1;this.vf&&(k=1);this.D.style.width=b+"px";this.D.style.height=c+"px";this.D.style.left=this.margin.left+"px";this.D.style.top=this.margin.top+
"px";if(this.Y)try{this.$a&&(this.$a.style.position="absolute",this.$a.style.display="inline",this.$a.style.width=b+"px",this.$a.style.height=c+"px",this.$a.width=b*k,this.$a.height=c*k),this.H&&(this.rb.width=b*k,this.rb.height=c*k,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(r){alert(r)}this.ic&&(this.ic.style.width=a+"px",this.ic.style.height=d+"px",this.ic.width=a,this.ic.height=d);this.Fa&&(this.Fa.style.width=a+"px",this.Fa.style.height=d+"px",this.xa.style.width=
a+"px",this.xa.style.height=d+"px",this.xa.width=a,this.xa.height=d,this.xa.style.left=this.margin.left+"px",this.xa.style.top=this.margin.top+"px",this.ka&&this.ka!=this.Fa&&(this.ka.style.width=a+"px",this.ka.style.height=d+"px"));this.Ga&&(b=this.Ga.Zc,b.style.width=a+"px",b.style.height=d+"px",b.width=a,b.height=d,b.style.left=this.margin.left+"px",b.style.top=this.margin.top+"px");this.df&&(this.Ea=!0);b=this.D.offsetWidth;c=this.D.offsetHeight;if(this.o.width!=b||this.o.height!=c)this.o.width=
b,this.o.height=c;this.lq();this.ka&&this.ka.ggUpdateSize&&this.ka.ggUpdateSize(a,d);this.ja("sizechanged",{hh:a,qg:d})}};b.prototype.Le=function(){this.Wj=!0};b.prototype.Sc=function(){this.gm(this.Od.offsetWidth,this.Od.offsetHeight)};b.prototype.so=function(){var a={width:0,height:0};a.width=this.o.width;a.height=this.o.height;return a};b.prototype.qe=function(){var a={x:0,y:0},d=this.D;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;while(d)}return a};b.prototype.Ap=
function(a){this.aa=a};b.prototype.qp=function(a,d,b,c){this.margin.left=a;this.margin.top=d;this.margin.right=b;this.margin.bottom=c;this.aa=this.skinObj;this.Le()};b.prototype.jn=function(a){0==a&&(this.B.yd=!1);1==a&&(this.B.yd=!0);2==a&&(this.B.yd=!this.B.yd);this.ja("viewmodechanged",{})};b.prototype.qo=function(){return 1==this.B.yd?1:0};b.prototype.rk=function(a,d){this.A.mode=1==d&&0<this.A.mode?0:Math.round(a);this.update();this.ha&&(this.ha.changePolygonMode(a,d),this.ha.update());this.ja("polymodechanged",
{})};b.prototype.hm=function(a){var d=this.A.kb.indexOf(a);-1==d?(this.A.kb.push(a),this.A.Nb.push(0),this.A.Pc.push(1)):this.A.Pc[d]=1;this.update()};b.prototype.gl=function(a){var d=this.A.kb.indexOf(a);-1!=d&&(this.A.Pc[d]=0,this.A.li.push(a),this.update())};b.prototype.Xp=function(a){var d=this.A.kb.indexOf(a);-1==d||-1!=d&&0==this.A.Pc[d]?this.hm(a):this.gl(a);this.update()};b.prototype.gn=function(a,d,b,c,k){for(var h=0;h<this.P.length;h++){var l=this.P[h];"poly"!=l.type||l.id!=a&&""!=a||(l.ec=
d,l.dc=b,l.hc=c,l.gc=k)}""==a&&(this.A.ec=d,this.A.dc=b,this.A.hc=c,this.A.gc=k);this.update()};b.prototype.en=function(a){this.Ga&&(this.Ga.Kj=0==a?!0:1==a?!1:!this.Ga.Kj,this.update())};b.prototype.ho=function(){return this.A.mode};b.prototype.kn=function(){this.ja("viewstatechanged",{})};b.prototype.ro=function(){return 0};b.prototype.Un=function(a){return(a=this.Sh[a])?a.type:"web"};b.prototype.Tn=function(a){return(a=this.Sh[a])?a:{}};b.prototype.Zn=function(a,d){var b=[];a||(a=this.bb);var c=
this.Pd[a];c&&(a=c);""===a&&0<Object.keys(this.Ac).length&&(a=Object.keys(this.Ac)[0]);this.Ac[a]&&this.Ac[a][d]&&(b.push(this.Ac[a][d].y),b.push(this.Ac[a][d].x));return b};b.prototype.$n=function(a,d){var b=[];a||(a=this.bb);var c=this.Pd[a];c&&(a=c);""===a&&0<Object.keys(this.Ac).length&&(a=Object.keys(this.Ac)[0]);this.mf[a]&&this.mf[a][d]&&(b.push(this.mf[a][d].x),b.push(this.mf[a][d].y));return b};b.prototype.Sn=function(a){var d=this.Pd[a];d&&(a=d);d=[];for(var b in this.Sh)d.push(b);for(b=
0;b<d.length;b++)if(this.Ac[a][d[b]])return d[b];return""};b.prototype.jl=function(a,d,b){a=Math.atan2(a+1,b);var c=Math.atan2(d+1,b);d=Math.sin(a);b=Math.sin(c);a=Math.cos(a);c=Math.cos(c);this.Lk.Ya(0,0,-1);this.Kk.Ya(a,0,-d);this.Mk.Ya(-a,0,-d);this.Nk.Ya(0,c,-b);this.Jk.Ya(0,-c,-b)};b.prototype.Oi=function(a){a=this.Yf(a,this.Lk);a=this.Yf(a,this.Kk);a=this.Yf(a,this.Mk);a=this.Yf(a,this.Nk);return a=this.Yf(a,this.Jk)};b.prototype.tm=function(a){if(!this.Bc&&this.Ao!=a){this.Ao=a;var d=this.margin.left+
this.o.width/2+"px ";d+=this.margin.top+this.o.height/2+"px ";this.Fa.style[this.td]=a+"px";this.Fa.style[this.td+"Origin"]=d;this.D.style[this.td]=a+"px";this.D.style[this.td+"Origin"]=d}};b.prototype.Sk=function(){return this.C.Je||this.C.Jd||this.Y&&(4!=this.Ka||0!=this.nc)?!1:!0};b.prototype.Zg=function(){var a=new n.wa(0,0,-100),d=this.ed();var b=100/this.f.c;var c=this.h.width/this.h.height;var k=this.o.height*b*c;b*=this.o.height;for(var e=this.Sk(),f=0;f<this.P.length;f++){var m=this.P[f];
if("point"==m.type){var g=!1;if(2==this.hb){var p=(this.pan.c-m.pan)/100/c*k;var q=(this.i.c-m.i)/100*b;Math.abs(p)<this.o.width/2+500&&Math.abs(q)<this.o.height/2+500&&(g=!0)}else a.Ya(0,0,-100),a.va(-m.i*Math.PI/180),a.Da(m.pan*Math.PI/180),a.Da(-this.pan.c*Math.PI/180),a.va(this.i.c*Math.PI/180),a.jb(this.O.c*Math.PI/180),.01>a.z?(q=-d/a.z,p=a.x*q,q*=a.y,Math.abs(p)<this.o.width/2+500&&Math.abs(q)<this.o.height/2+500&&(g=!0)):q=p=0;m.Lb=p+this.o.width/2;m.vb=q+this.o.height/2;m.visible=g;m.px=
m.Lb;m.py=m.vb;m.visible=m.visible;if(m.b&&m.b.onUpdatePosition)m.b.onUpdatePosition(this,m);else m.b&&m.b.__div&&("none"!=m.b.__div.style[this.cd]&&(m.b.__div.style[this.cd]="none"),m.b.ggUse3d?(this.Bc||this.tm(d),2==this.hb?(m.b.__div.style[this.Ra]="scale("+(100/this.f.c*500/m.b.gg3dDistance).toFixed(10)+")",m.b.__div.style.left=this.margin.left+p+this.o.width/2+"px",m.b.__div.style.top=this.margin.top+q+this.o.height/2+"px"):(m.b.__div.style.width="1px",m.b.__div.style.height="1px",p="",this.Bc&&
(p+="perspective("+d+"px) "),p+="translate3d(0px,0px,"+d+"px) ",p+="rotateZ("+this.O.c.toFixed(10)+"deg) ",p+="rotateX("+this.i.c.toFixed(10)+"deg) ",p+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",p+="rotateY("+m.pan.toFixed(10)+"deg) ",p+="rotateX("+(-m.i).toFixed(10)+"deg) ",p+="translate3d(0px,0px,"+(-1*m.b.gg3dDistance).toFixed(10)+"px) ",m.b.__div.style[this.Ra+"Origin"]="0% 0%",m.b.__div.style[this.Ra]=p,m.b.__div.style.left=this.margin.left+this.o.width/2+"px",m.b.__div.style.top=this.margin.top+
this.o.height/2+"px")):g&&e?(m.b.__div.style.left=this.margin.left+p+this.o.width/2+"px",m.b.__div.style.top=this.margin.top+q+this.o.height/2+"px"):(m.b.__div.style.left="-1000px",m.b.__div.style.top="-1000px"))}if("poly"==m.type){var t=[];if(2==this.hb)for(m.Xd=[],g=0;g<m.Nf.length;g++)q=m.Nf[g],p=(this.pan.c-q.pan)/100/c*k,q=(this.i.c-q.i)/100*b,p+=this.margin.left+this.o.width/2,q+=this.margin.top+this.o.height/2,m.Xd.push({Lb:p,vb:q});else{for(g=0;g<m.Nf.length;g++)q=m.Nf[g],a.Ya(0,0,-100),a.va(-q.i*
Math.PI/180),a.Da(q.pan*Math.PI/180),a.Da(-this.pan.c*Math.PI/180),a.va(this.i.c*Math.PI/180),a.jb(this.O.c*Math.PI/180),t.push(a.clone());t=this.Oi(t);if(0<t.length)for(g=0;g<t.length;g++)a=t[g],.1>a.z?(q=-d/a.z,p=this.o.width/2+a.x*q,q=this.o.height/2+a.y*q):q=p=0,a.Lb=p,a.vb=q;m.Xd=t}}}};b.prototype.Gn=function(){for(var a=[],d=0;d<this.P.length;d++){var b=this.P[d];"point"==b.type&&b.b&&b.b.__div&&a.push(b.b.__div)}return a};b.prototype.fa=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);
1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.To=function(){var a;if(this.xa&&(this.A.wg!=this.A.mode&&(this.A.wg=this.A.mode,this.xa.style.visibility=0<this.A.mode?"inherit":"hidden"),0<=this.A.mode||0<this.A.kb.length)){this.ba||(this.ba=this.xa.getContext("2d"));if(this.ba.width!=this.o.width||this.ba.height!=this.o.height)this.ba.width=this.o.width,this.ba.height=this.o.height;this.ba.clear?this.ba.clear():this.ba.clearRect(0,0,this.xa.width,this.xa.height);
var d=1;0>=this.A.mode&&(d=0);3==this.A.mode&&(d=this.A.pa);for(a=0;a<this.P.length;a++){var b=this.P[a];var c=d;if("poly"==b.type){var k=b.Xd;2==this.A.mode&&(c=b.pa);var e=this.A.kb.indexOf(b.id);-1!=e&&(c=this.A.Nb[e]);this.ba.fillStyle=this.fa(b.ec,b.dc*c);this.ba.strokeStyle=this.fa(b.hc,b.gc*c);if(0<k.length){this.ba.beginPath();for(b=0;b<k.length;b++)c=k[b],0==b?this.ba.moveTo(c.Lb,c.vb):this.ba.lineTo(c.Lb,c.vb);this.ba.closePath();this.ba.stroke();this.ba.fill()}}}}};b.prototype.hl=function(a,
d,b){var c,h=!1;var e=0;for(c=a.length-1;e<a.length;c=e++){var f=a[e];c=a[c];f.vb>b!=c.vb>b&&d<(c.Lb-f.Lb)*(b-f.vb)/(c.vb-f.vb)+f.Lb&&(h=!h)}return h};b.prototype.Ni=function(a,d){var b=-1;if((0<=this.A.mode||0<this.A.kb.length)&&this.xo())for(var c=0;c<this.P.length;c++){var k=this.P[c];"poly"==k.type&&k.Xd&&0<k.Xd.length&&(-1!=this.A.mode||-1!=this.A.kb.indexOf(k.id))&&this.hl(k.Xd,a,d)&&(b=c,k.Lb=a,k.vb=d)}return 0<=b?this.P[b]:!1};b.prototype.xo=function(){return 4==this.ra()&&0==this.nc};b.prototype.Tb=
function(){var a=0,d=this.ra(),b=this.o;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(b.height/b.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:b.height/b.width*this.f.c/2;break;case 2:a=Math.sqrt(b.width*b.width+b.height*b.height);a=4==d?180*Math.atan(b.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:b.height/a*this.f.c/2;break;case 3:a=4*b.height/3>b.width?this.f.c/2:4==d?180*Math.atan(4*b.height/(3*b.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*b.height/(3*
b.width)*(this.f.c/2)}return 2*a};b.prototype.In=function(a,d){a||(a=this.Tb());d||(d=this.ra());return 4==d?180*Math.atan(this.ee()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.ee()};b.prototype.ee=function(){return this.o.width/this.o.height};b.prototype.Rg=function(a){a/=2;var d=this.ra();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==d?180*Math.atan(this.o.width/this.o.height*Math.tan(a*Math.PI/180))/Math.PI:this.o.width/this.o.height*a;this.f.c=2*a;break;case 2:var b=Math.sqrt(this.o.width*
this.o.width+this.o.height*this.o.height);a=4==d?180*Math.atan(b/this.o.height*Math.tan(a*Math.PI/180))/Math.PI:b/this.o.height*a;this.f.c=2*a;break;case 3:4*this.o.height/3>this.o.width?this.f.c=2*a:(b=3*this.o.width/(4*this.o.height),a=4==d?180*Math.atan(b*Math.tan(a*Math.PI/180))/Math.PI:b*a,this.f.c=2*a)}};b.prototype.Xf=function(){var a=this.Ql;a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Ve(a);this.Ve(a);this.Ve(a);this.pan.c=a.pan;this.i.c=a.i;this.f.c=a.f};b.prototype.Ve=function(a){var d=
this.o.width/this.o.height;if(2==this.hb){if(0<this.f.Gg){var b=this.qc;this.h.I&&0<this.h.I.length&&(b=this.h.I[0].height);this.f.min=100*this.o.height/(b*this.f.Gg)}var c=a.f/2;b=c*d;var k=this.h.width/this.h.height*50;d=this.B.bm?2*Math.min(50,k/d):2*Math.max(50,k/d);a.f<this.f.min&&(a.f=this.f.min);a.f>d&&(a.f=d);50<c?a.i=0:(50<a.i+c&&(a.i=50-c),-50>a.i-c&&(a.i=-50+c));b>k?a.pan=0:(a.pan+b>k&&(a.pan=k-b,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0)),a.pan-b<-k&&(a.pan=-k+b,this.l.active&&
(this.l.speed=-this.l.speed,this.pan.d=0)))}else{0<this.f.Gg&&(b=this.qc,this.h.I&&0<this.h.I.length&&(b=this.h.I[0].height),this.f.min=360*Math.atan2(this.o.height/2,b/2*this.f.Gg)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);k=this.f.max;var e=179;c=this.Tb()/2;b=d*c;4==this.ra()?b=180*Math.atan(d*Math.tan(c*Math.PI/180))/Math.PI:9==this.ra()?(k=this.f.sj,e=355):12==this.ra()&&(k=this.f.rj,e=360);this.Y||(k=Math.max(160,k));a.f>k&&(a.f=k);12==this.ra()&&(2*b>e&&(a.f=e/d),c=this.Tb()/2,2*c>e&&(a.f=
e),c=this.Tb()/2,b=d*c);2*c>this.i.max-this.i.min&&180>this.i.max-this.i.min&&(c=(this.i.max-this.i.min)/2,this.Rg(2*c));90>this.i.max?a.i+c>this.i.max&&(a.i=this.i.max-c):a.i>this.i.max&&(a.i=this.i.max);-90<this.i.min?a.i-c<this.i.min&&(a.i=this.i.min+c):a.i<this.i.min&&(a.i=this.i.min);d=this.pan.max-this.pan.min;if(359.99>d){k=90;e=Math.tan(c*Math.PI/180);var f=Math.tan((Math.abs(a.i)+c)*Math.PI/180);f=Math.sqrt(f*f+1)/Math.sqrt(e*e+1);c=180*Math.atan(f*Math.tan(b*Math.PI/180))/Math.PI;2*c>d&&
(f=Math.tan(d*Math.PI/360)/Math.tan(b*Math.PI/180),d=f*Math.sqrt(e*e+1),f=Math.sqrt(d*d-1),k=180/Math.PI*Math.atan(f));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.l.active&&(this.l.speed=-this.l.speed,this.pan.d=0));a.i+b>k&&(a.i=k-b);a.i-b<-k&&(a.i=-k+b)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.Ea=!0;a&&(this.$f=Math.max(1*a,this.$f))};b.prototype.Tk=function(){return this.ha?
!!this.ha.isTileLoading:0<this.Ob||0<this.pc};b.prototype.$g=function(){var a=Date.now();if(this.Fb){if(this.ha)if(this.eq(),2===this.hb)this.Xf(),this.Zg();else if(0===this.hb){var d=this.ed();this.jl(this.o.width/2,this.o.height/2,d);this.Zg()}}else 2===this.hb?(this.Zg(),this.Y?(this.na.Uj(),this.na.Kl()):this.Uj()):0===this.hb&&(!this.Y||4==this.Ka&&0==this.nc?(d=this.ed(),this.jl(this.o.width/2,this.o.height/2,d),this.Zg(),this.eh?this.na.kq():this.Am&&this.zm(),this.um(),this.Y?(this.s.kd?14==
this.s.format?this.na.jq():this.na.Fm():0<this.h.I.length?this.na.qq():this.na.sq(),this.na.Kl()):(this.Tc?0<this.h.I.length?this.hq():this.gq():this.ah&&this.cq(),this.To()),this.Ga&&this.Ga.So()):(this.na.Fm(),this.Zg(),this.wo()));d=Date.now();50<d-a?(this.M("Time between frames: "+(d-a)),this.vf||(2<this.Mj?(this.vf=!0,this.M("disabling HighDPI rendering"),this.Sc()):this.Mj++)):this.Mj=0;this.df&&this.h.Yl++};b.prototype.gq=function(){var a=!1;if(this.o.width!=this.D.offsetWidth||this.o.height!=
this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=this.D.offsetHeight,this.D.style[this.Ra+"OriginX"]=this.o.width/2+"px",this.D.style[this.Ra+"OriginY"]=this.o.height/2+"px",a=!0;var d=Math.round(this.ed());this.xg==d&&!a||this.Bc||(this.xg=d,this.D.style[this.td]=d+"px");this.nb.nn(this.pan.c,this.i.c,this.O.c,this.Za);for(a=0;6>a;a++){var b;if(b=this.nb.cb[a]){var c="";this.Bc?(c+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,0px) ",c+="perspective("+d+"px) ",c+="translate3d(0px,0px,"+
d+"px) "):c+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,"+d+"px) ";c+="rotateZ("+Number(this.O.c).toFixed(10)+"deg) ";c+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ";c+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";b.dl&&(c+=b.dl,b.eb||(c="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),b.K.style[this.Ra]=c)}}};b.prototype.cq=function(){this.Xf();var a;this.ic&&(a=this.ic.getContext("2d"));if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=
this.D.offsetWidth,this.o.height=this.D.offsetHeight;if(a){var d=a.canvas.width/2,b=a.canvas.height/2,c=a.createRadialGradient(d,b,5,d,b,Math.max(d,b));c.addColorStop(0,"#333");c.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=c;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,b-60);a.fillText("Tilt: "+this.i.c.toFixed(1),d,b-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,b);a.fillText("Node: "+this.Rk(),
d,b+30);a.fillText("Title: "+this.Lf.title,d,b+60)}};b.prototype.eq=function(){this.Xf();if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=this.D.offsetHeight;this.ha&&this.ha.setPan&&(this.ha.setPan(this.pan.c),this.ha.setTilt(this.i.c),this.ha.setFov(this.f.c))};b.prototype.Uj=function(){this.xa.style.visibility="inherit";this.ba||(this.ba=this.xa.getContext("2d"));if(this.ba.width!=this.o.width||this.ba.height!=this.o.height)this.ba.width=
this.o.width,this.ba.height=this.o.height;this.ba.clear?this.ba.clear():this.ba.clearRect(0,0,this.xa.width,this.xa.height);this.pc=0;var a=100/this.f.c;var d=this.h.width/this.h.height;var b=this.o.height*a*d;a*=this.o.height;var c=(this.pan.c/100/d-.5)*b+this.o.width/2;for(var k=(this.i.c/100-.5)*a+this.o.height/2,e,f,m,g,p=0;this.h.I.length>=p+2&&this.h.I[p+1].width>b;)p++;var q;var t=[];for(q=this.h.I.length-1;q>=p;){d=this.h.I[q];if(d.cache){var v={Wa:0,zb:0};v.Bb=d.L-1;v.Cb=d.ea-1}else{v={};
var u=-k/a*(d.height/this.h.G);e=(-c+this.o.width)/b*(d.width/this.h.G);f=(-k+this.o.height)/a*(d.height/this.h.G);v.Wa=Math.min(Math.max(0,Math.floor(-c/b*(d.width/this.h.G))),d.L-1);v.zb=Math.min(Math.max(0,Math.floor(u)),d.ea-1);v.Bb=Math.min(Math.max(0,Math.floor(e)),d.L-1);v.Cb=Math.min(Math.max(0,Math.floor(f)),d.ea-1)}t[q]=v;var x=!0;for(f=v.zb;f<=v.Cb;f++)for(e=v.Wa;e<=v.Bb;e++)g=e+f*d.L,u=d.U[g],u||(u=new n.Kd,d.U[g]=u),this.Ob<this.Wg?u.h||(this.ij++,u.h=new Image,u.h.onload=this.Up(),u.h.onerror=
this.pi(u),u.h.onabort=this.pi(u),u.h.crossOrigin=this.crossOrigin,u.h.setAttribute("src",this.He(0,q,e,f)),d.cache&&this.Qb.push(u.h),this.Ob++,this.Ea=!0):this.pc++,u.h&&u.h.complete||(x=!1),u.visible=!0;v.oj=x;q--}for(q=this.h.I.length-1;q>=p;){d=this.h.I[q];if(t[q]&&0<=t[q].Wa)for(v=t[q],f=v.zb;f<=v.Cb;f++)for(e=v.Wa;e<=v.Bb;e++)g=e+f*d.L,(u=d.U[g])||(u=d.U[g]=new n.Kd),u.h&&u.h.complete&&(g=c+(-this.h.Ja+this.h.G*e)*b/d.width,this.ba.drawImage(u.h,g,k+(-this.h.Ja+this.h.G*f)*a/d.height,u.h.width*
b/d.width,u.h.height*a/d.height)),u.visible=!0;q--}for(b=0;b<this.h.I.length;b++)if(d=this.h.I[b],!d.cache)for(m in d.U)d.U.hasOwnProperty(m)&&(u=d.U[m],u.visible||(u.h=null,delete d.U[m]));if(0<=this.A.mode||0<this.A.kb.length)for(b=1,0>=this.A.mode&&(b=0),3==this.A.mode&&(b=this.A.pa),m=0;m<this.P.length;m++)if(d=this.P[m],c=b,"poly"==d.type&&(a=d.Xd,2==this.A.mode&&(c=d.pa),k=this.A.kb.indexOf(d.id),-1!=k&&(c=this.A.Nb[k]),0<a.length)){this.ba.fillStyle=this.fa(d.ec,d.dc*c);this.ba.strokeStyle=
this.fa(d.hc,d.gc*c);this.ba.beginPath();for(d=0;d<a.length;d++)c=a[d],0==d?this.ba.moveTo(c.Lb,c.vb):this.ba.lineTo(c.Lb,c.vb);this.ba.closePath();this.ba.stroke();this.ba.fill()}this.ad=!1};b.prototype.Tp=function(a){var d=this;return function(){d.update();d.ad=!0;a.loaded=!0;a.h&&!a.K&&d.D.appendChild(a.h);d.Ob&&d.Ob--;a.h&&a.Pa&&(a.Pa.drawImage(a.h,0,0),a.h=null)}};b.prototype.Up=function(){var a=this;return function(){a.Ea=!0;a.ad=!0;a.Ob&&a.Ob--}};b.prototype.pi=function(a){var d=this;return function(){d.Ea=
!0;d.ad=!0;d.Ob&&d.Ob--;a.h=null}};b.prototype.bl=function(a,d,b){b.Wa=a.width/this.h.G*d.fg;b.zb=a.height/this.h.G*d.gg;b.Bb=a.width/this.h.G*d.Dg;b.Cb=a.height/this.h.G*d.Eg;b.Wa=Math.min(Math.max(0,Math.floor(b.Wa)),a.L-1);b.zb=Math.min(Math.max(0,Math.floor(b.zb)),a.ea-1);b.Bb=Math.min(Math.max(0,Math.floor(b.Bb)),a.L-1);b.Cb=Math.min(Math.max(0,Math.floor(b.Cb)),a.ea-1)};b.prototype.tp=function(a){a=Math.round(a);this.Bc=0<(a&1);this.uf=0<(a&2);this.xi=0<(a&4);this.vf=0<(a&8);4096<=a&&(this.Tc=
0<(a&4096),this.Y=0<(a&8192),this.ah=0<(a&32768))};b.prototype.ko=function(){var a=0;this.Bc&&(a|=1);this.uf&&(a|=2);this.xi&&(a|=4);this.Tc&&(a|=4096);this.Y&&(a|=8192);this.ah&&(a|=32768);return a};b.prototype.wm=function(){if(!(6>this.nb.cb.length))for(var a=0;6>a;a++){var d=this.nb.cb[a];var b=[];b.push(new n.wa(-1,-1,-1,0,0));b.push(new n.wa(1,-1,-1,1,0));b.push(new n.wa(1,1,-1,1,1));b.push(new n.wa(-1,1,-1,0,1));for(var c=0;4>c;c++)4>a?b[c].Da(-Math.PI/2*a):b[c].va(Math.PI/2*(4==a?-1:1)),this.Za&&
(b[c].jb(this.Za.O*Math.PI/180),b[c].va(-this.Za.pitch*Math.PI/180)),b[c].Ce(-this.pan.c),b[c].Fd(this.i.c),b[c].De(this.O.c);b=this.Oi(b);d.eb=0<b.length;if(d.eb){d=d.nf;d.fg=b[0].rd;d.Dg=b[0].rd;d.gg=b[0].Pb;d.Eg=b[0].Pb;for(c=1;c<b.length;c++)d.fg=Math.min(d.fg,b[c].rd),d.Dg=Math.max(d.Dg,b[c].rd),d.gg=Math.min(d.gg,b[c].Pb),d.Eg=Math.max(d.Eg,b[c].Pb);d.Mf=d.Dg-d.fg;d.gh=d.Eg-d.gg;d.scale=Math.max(d.Mf,d.gh)}else d.nf.Mf=-1,d.nf.gh=-1}};b.prototype.qj=function(){for(var a=0;a<this.h.I.length;a++){var d=
this.h.I[a],b;for(b in d.U)d.U.hasOwnProperty(b)&&(d.U[b].visible=!1)}};b.prototype.Zi=function(){var a=0,d=Math.tan(Math.min(this.Tb(),175)*Math.PI/360),b=this.o.height/(2*d);b*=1+this.o.width/this.o.height*d/2;for(b*=Math.pow(2,1<this.devicePixelRatio?this.h.Dl:this.h.Cl);this.h.I.length>=a+2&&!this.h.I[a+1].rf&&this.h.I[a+1].width>b;)a++;return a};b.prototype.hq=function(){var a=!1,d,b,c;if(this.o.width!==this.D.offsetWidth||this.o.height!==this.D.offsetHeight)this.o.width=this.D.offsetWidth,this.o.height=
this.D.offsetHeight,this.D.style[this.Ra+"OriginX"]=this.o.width/2+"px",this.D.style[this.Ra+"OriginY"]=this.o.height/2+"px",a=!0;var k=Math.round(this.ed());if(this.xg!=k||a)this.xg=k,this.Bc||(this.D.style[this.td]=k+"px",this.D.style[this.td+"Origin"]="50% 50%");this.pc=0;if(0<this.h.I.length){this.wm();this.qj();var e="";for(d=0;6>d;d++){var f=this.nb.cb[d];f.eb&&(e=e+d+",")}e=this.Zi();var m;for(m=this.h.I.length-1;m>=e;){a=this.h.I[m];var g=1;m==this.h.I.length-1&&0==this.h.Ja&&(g=this.h.G/
(this.h.G-2));for(d=0;6>d;d++){f=this.nb.cb[d];var p=f.nf;if(f.eb&&0<p.Mf&&0<p.gh&&0<p.scale||a.cache){f.Ea=!1;var q={};a.cache?(q.Wa=0,q.zb=0,q.Bb=a.L-1,q.Cb=a.ea-1):this.bl(a,p,q);for(c=q.zb;c<=q.Cb;c++)for(b=q.Wa;b<=q.Bb;b++){var t=b+c*a.L+d*a.L*a.ea;(p=a.U[t])||(p=a.U[t]=new n.Kd);if(!p.K&&this.Ob<this.Wg){if(0<this.ti.length){p.K=this.ti.shift();for(t=this.D.firstChild;t&&t.Sd&&(-1==t.Sd||t.Sd>=m);)t=t.nextSibling;this.D.insertBefore(p.K,t);p.Pa=p.K.getContext("2d")}else if(this.pm<this.we){this.pm++;
p.K=document.createElement("canvas");p.K.width=this.h.G+2*this.h.Ja;p.K.height=this.h.G+2*this.h.Ja;p.Pa=p.K.getContext("2d");p.K.style[this.Ra+"Origin"]="0% 0%";p.K.style.overflow="hidden";p.K.style.position="absolute";for(t=this.D.firstChild;t&&t.Sd&&(-1==t.Sd||t.Sd>=m);)t=t.nextSibling;this.D.insertBefore(p.K,t)}p.K&&(this.ij++,p.h=new Image,p.h.crossOrigin=this.crossOrigin,p.h.style[this.Ra+"Origin"]="0% 0%",p.h.style.position="absolute",p.h.style.overflow="hidden",p.K.Sd=m,p.h.onload=this.Tp(p),
p.h.onerror=this.pi(p),p.h.onabort=this.pi(p),p.h.setAttribute("src",this.He(d,m,b,c)),a.cache&&this.Qb.push(p.h),this.Ob++,this.Ea=!0)}else this.pc++;if(p.K){t="";this.Bc?(t+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,0px) ",t+=" perspective("+k+"px) ",t+="translate3d(0px,0px,"+k+"px) "):t+="translate3d("+this.o.width/2+"px,"+this.o.height/2+"px,"+k+"px) ";t+="rotateZ("+Number(this.O.c).toFixed(10)+"deg) ";t+="rotateX("+Number(this.i.c).toFixed(10)+"deg) ";t+="rotateY("+Number(-this.pan.c).toFixed(10)+
"deg) ";this.Za&&(t+="rotateX("+Number(-this.Za.pitch).toFixed(10)+"deg) ",t+="rotateZ("+Number(this.Za.O).toFixed(10)+"deg) ");t=4>d?t+("rotateY("+-90*d+"deg) "):t+("rotateX("+(4==d?-90:90)+"deg) ");if(this.uf){var v=this.h.G/a.width*(2*m+1)*(this.Vf/this.h.G);v=this.jd?2/Math.tan(this.f.c*Math.PI/360)*v:2*v;t+=" scale("+v*g*g+")"}else v=1/(g*g);t+=" translate3d("+(1/g*b*this.h.G-this.h.Ja-a.width/2)+"px,";t+=1/g*c*this.h.G-this.h.Ja-a.width/2+"px,";t+=-a.width*v/2+"px)";f.eb&&(p.visible=!0,p.K?
p.K.style[this.Ra]=t:p.h&&(p.h.style[this.Ra]=t))}}}}m--}for(k=0;k<this.h.I.length;k++){a=this.h.I[k];for(var u in a.U)a.U.hasOwnProperty(u)&&(p=a.U[u],!p.visible&&p.K&&(a.cache?p.K?p.K.style[this.Ra]="translate3d(-10px,-10px,0px) scale(0.001,0.001)":p.h&&(p.h.style[this.Ra]=""):(p.Pa&&p.Pa.clearRect(0,0,p.Pa.canvas.width,p.Pa.canvas.height),this.ti.push(p.K),p.K?(e="translate3d(-10px,-10px,0px) scale(0.001,0.001)",p.K.style[this.Ra]=e,p.K.Sd=-1):p.loaded&&this.D.removeChild(p.h),p.K=null,p.h=null,
p.Pa=null,delete a.U[u])))}this.ad=!1}};b.prototype.um=function(){var a=Math.round(this.ed());this.Bc||this.tm(a);for(var d=0;d<this.Xa.length;d++){var b=this.Xa[d];b.ym(a);b.b.hidden=!1}};b.prototype.zm=function(){for(var a=Math.round(this.ed()),d=0;d<this.J.length;d++){var b=this.J[d];b.nd||(b.ym(a),b.b.hidden=!1)}};b.prototype.wo=function(){for(var a=0;a<this.Xa.length;a++){var d=this.Xa[a];d.Cf(!1)}for(a=0;a<this.J.length;a++)d=this.J[a],d.nd||d.Cf(!1)};b.prototype.lq=function(){for(var a=0;a<
this.J.length;a++){var d=this.J[a];d.nd||d.Le()}for(a=0;a<this.Xa.length;a++)d=this.Xa[a],d.Le()};b.prototype.Jc=function(a){this.ne=!1;try{a?this.$a=a:this.$a=document.createElement("canvas");var d=this.Od.offsetWidth-this.margin.left-this.margin.right,b=this.Od.offsetHeight-this.margin.top-this.margin.bottom;if(100>d||100>b)b=d=100;var c=window.devicePixelRatio||1;this.vf&&(c=1);this.D.style.width=d+"px";this.D.style.height=b+"px";this.$a.style.width=d+"px";this.$a.style.height=b+"px";this.$a.width=
d*c;this.$a.height=b*c;this.$a.style.display="none";this.$a.style.touchAction="none";this.D.insertBefore(this.$a,this.D.firstChild);a={stencil:!0,depth:!0};a.alpha=this.jd?!0:!1;this.Kc&&10<=this.il[0]&&(a.antialias=!1,a.alpha=!1);this.H=this.$a.getContext("webgl",a);this.H||(this.H=this.$a.getContext("experimental-webgl",a));if(this.H){var k=this.H;this.rb.width=d*c;this.rb.height=b*c;k.clearColor(0,0,0,0);k.enable(this.H.DEPTH_TEST);k.viewport(0,0,500,500);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT);
4096<=k.getParameter(k.MAX_TEXTURE_SIZE)&&!this.tg&&(this.we=1<c?4*this.we:2*this.we);this.M("Max tile cnt: "+this.we);this.na.sg();this.na.Hh();this.na.kl(this.Gf);this.na.ll();this.C&&(this.C.sg(),this.C.Jc());this.Ga&&(this.Ga.sg(),this.Ga.Jc())}}catch(r){this.M(r)}this.H?this.Y=!0:alert("Could not initialise WebGL!")};b.prototype.kc=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Nd+a:this.Nd};b.prototype.Zd=function(a,d,b){var c=
(new RegExp("%0*"+d,"i")).exec(a.toString());if(c){c=c.toString();var h=b.toString();for(c.charAt(c.length-1)!=d&&(h=(1+b).toString());h.length<c.length-1;)h="0"+h;a=a.replace(c,h)}return a};b.prototype.He=function(a,d,b,c){var h=this.h.nj-1-d,l=this.h.El,e="x";switch(a){case 0:e="f";break;case 1:e="r";break;case 2:e="b";break;case 3:e="l";break;case 4:e="u";break;case 5:e="d"}for(var m=0;3>m;m++)l=this.Zd(l,"c",a),l=this.Zd(l,"s",e),l=this.Zd(l,"r",d),l=this.Zd(l,"l",h),l=this.Zd(l,"x",b),l=this.Zd(l,
"y",c),l=this.Zd(l,"v",c),l=this.Zd(l,"h",b);return this.kc(l)};b.prototype.lg=function(){return this.pan.c};b.prototype.co=function(){return this.u.pan};b.prototype.Wk=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.pe=function(){for(var a=this.pan.c-this.pan.uj;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Af=function(a){this.ua();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.Hj=function(a){this.ua();isNaN(a)||(this.pan.c=Number(a)+
this.pan.uj);this.update()};b.prototype.qk=function(a,d){isNaN(a)||(this.Af(this.lg()+a),d&&(this.pan.d=a))};b.prototype.fn=function(a,d){this.qk(a*this.Ah(),d)};b.prototype.Dh=function(){return this.i.c};b.prototype.lo=function(){return this.u.i};b.prototype.Bf=function(a){this.ua();isNaN(a)||(this.i.c=Number(a));this.update()};b.prototype.sk=function(a,d){this.Bf(this.Dh()+a);d&&(this.i.d=a)};b.prototype.hn=function(a,d){this.sk(a*this.Ah(),d)};b.prototype.Ij=function(a){this.ua();isNaN(a)||(this.O.c=
Number(a));this.update()};b.prototype.Zk=function(){return this.O.c};b.prototype.ig=function(){return this.f.c};b.prototype.Hn=function(){return this.u.Id};b.prototype.yf=function(a){this.ua();switch(this.ra()){case 4:var d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.hb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.pk=function(a,d){this.yf(this.ig()+a);d&&(this.f.d=a)};b.prototype.Ki=function(a,d){if(!isNaN(a)){var b=
a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);b=this.f.c*Math.exp(b);this.yf(b);d&&(this.f.d=a)}};b.prototype.sp=function(a,d){this.ua();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);this.update()};b.prototype.ii=function(a,d,b){this.ua();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.i.c=d);isNaN(b)||this.yf(b);this.update()};b.prototype.mp=function(){this.ii(this.pan.Qa,this.i.Qa,this.f.Qa)};b.prototype.pp=function(a){this.Og(a);this.Pg(a);this.Ng(a)};b.prototype.Og=function(a){this.B.Ab=a};b.prototype.Ng=
function(a){this.B.ue=a};b.prototype.Rn=function(){return this.B.ue};b.prototype.Pg=function(a){this.B.md=a};b.prototype.Dp=function(a,d){void 0===d&&(d=!0);this.Bm=d;this.bh==!a&&((this.bh=!!a)?this.gb.gi=!0:this.O.c=0,this.ja("gyrochanged",{}))};b.prototype.mo=function(){return this.bh};b.prototype.bo=function(){return this.Td?5:this.Kc?4:this.ul?1:this.rl?2:this.ql?3:0};b.prototype.Fn=function(){return this.lj?5:this.nl?4:this.gf?2:this.jd?3:this.kj?1:0};b.prototype.moveTo=function(a,d,b,c,k,e){this.ua();
if("_blank"!==a&&""!==a){this.u.active=!0;this.u.aborted=!1;this.u.Xj=!1;var h=a.toString().split("/");1<h.length&&(a=Number(h[0]),c=Number(d),d=Number(h[1]),2<h.length&&(b=Number(h[2])));isNaN(a)?this.u.pan=this.pan.c:this.u.pan=Number(a);isNaN(d)?this.u.i=this.i.c:this.u.i=Number(d);!isNaN(b)&&0<b&&180>b?this.u.f=Number(b):this.u.f=this.f.c;this.u.speed=!isNaN(c)&&0<c?Number(c):1;isNaN(k)?this.u.O=this.O.c:this.u.O=Number(k);void 0!==e?!a||4!=e&&12!=e&&9!=e||(this.u.Eb=e):this.u.Eb=this.Ka}};b.prototype.Vh=
function(a){this.ua();var d=0,b=0,c=70,k=4,e=0,f=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.u.pan=d);a.hasOwnProperty("tilt")&&(b=Number(a.tilt),this.u.i=b);a.hasOwnProperty("fov")&&(c=Number(a.fov),this.u.f=c);a.hasOwnProperty("projection")&&(k=Number(a.projection),this.u.Eb=k);a.hasOwnProperty("timingFunction")&&(e=Number(a.timingFunction));a.hasOwnProperty("speed")&&(f=Number(a.speed));0>=f?(this.ii(d,b,c),this.Oc(k)):(a=new n.bk,a.ab="__AutoMove",a.Ef=this.Wk(),a.Tg=this.i.c,a.Hd=this.f.c,
a.Sg=this.Ka,a.Rc=d,a.ae=b,a.Ff=c,a.qd=k,a.Ye=!1,a.ke=!1,a.le=!1,0==e&&(a.ke=!0),1==e&&(a.Ye=!0,a.ke=!0),2==e&&(a.le=!0),a.speed=f,this.u.ik=this.w,this.w=this.Ok(a),this.u.jk=(new Date).getTime(),this.u.Xj=!0,this.u.active=!0,this.u.aborted=!1,this.u.pan=d,this.u.i=b,this.u.f=c,this.Ld=!1)};b.prototype.Ho=function(a){this.moveTo(this.pan.Qa,this.i.Qa,this.f.Qa,a)};b.prototype.Io=function(a,d){var b={};b.pan=this.pan.Qa;b.tilt=this.i.Qa;b.fov=this.f.Qa;b.projection=this.$h;b.timingFunction=d;b.speed=
a;this.Vh(b)};b.prototype.Vm=function(a,d,b,c){var h=new n.lh(this);h.type="point";h.pan=d;h.i=b;h.id=a;h.b={};h.b.player=this;h.Ze();h.b.hotspot=h;h.b.__div=document.createElement("div");h.b.__div.appendChild(c);this.P.push(h);h.b.__div.style.position="absolute";h.b.__div.style.left="-1000px";h.b.__div.style.top="-1000px";this.Fa.insertBefore(h.b.__div,this.Fa.firstChild);this.Ea=!0};b.prototype.fq=function(a,d,b){for(var c=0;c<this.P.length;c++){var h=this.P[c];h.id==a&&(h.pan=d,h.i=b,h.Ze())}this.Ea=
!0};b.prototype.fp=function(a){for(var d=-1,b,c=0;c<this.P.length;c++)b=this.P[c],b.id==a&&(d=c);-1<d&&(b=this.P.splice(d,1).pop(),b.b&&b.b.__div&&this.Fa.removeChild(b.b.__div))};b.prototype.fo=function(){for(var a=[],d=0;d<this.P.length;d++){var b=this.P[d];"point"==b.type&&a.push(String(b.id))}return a};b.prototype.Jn=function(a){for(var d=0;d<this.P.length;d++){var b=this.P[d];if(b.id==a)return d={},d.id=a,d.pan=b.pan,d.tilt=b.i,d.url=b.url,d.target=b.target,d.title=b.title,d.description=b.description,
d.skinid=b.Lj,b.b&&b.b.__div&&(d.div=b.b.__div),d}};b.prototype.Em=function(a,d){this.X.start.x=a;this.X.start.y=d;this.X.da.x=a;this.X.da.y=d;this.Aa.da.x=a;this.Aa.da.y=d;this.Bj++;this.pan.Gc=this.pan.c;this.i.Gc=this.i.c};b.prototype.Cm=function(a,d){var b=this.Tb();this.pan.Gc+=a*b/this.o.height;this.i.Gc+=d*b/this.o.height;this.pan.c=this.pan.Gc;this.i.c=this.i.Gc};b.prototype.Dm=function(a,d){this.X.c.x=a;this.X.c.y=d;this.X.ca.x=this.X.c.x-this.X.da.x;this.X.ca.y=this.X.c.y-this.X.da.y;this.B.yd&&
(this.X.da.x=this.X.c.x,this.X.da.y=this.X.c.y,this.update())};b.prototype.ua=function(){this.l.active&&(this.l.active=!1,this.ja("autorotatechanged",{}),this.pan.d=0,this.i.d=0,this.f.d=0);this.u.active&&(this.u.active=!1,this.pan.d=0,this.i.d=0,this.f.d=0);this.Ne=this.u.aborted=!1;this.l.Uh=!1;this.sd=.02;this.Qf=0;this.l.Kf&&(this.l.enabled=this.l.Pe);this.jf=(new Date).getTime()};b.prototype.Pn=function(){return this.jf};b.prototype.Xk=function(a,d){a||(a=this.ta.x,d=this.ta.y);var b=this.o.height/
(2*Math.tan(this.f.c*Math.PI/360));a-=this.o.width/2;d-=this.o.height/2;var c={};c.pan=180*Math.atan(a/b)/Math.PI;c.tilt=180*Math.atan(-d/Math.sqrt(a*a+b*b))/Math.PI;return c};b.prototype.io=function(a,d){a||(a=this.ta.x,d=this.ta.y);if(2===this.hb){var b=this.f.c/this.o.height;a=-(a-this.o.width/2)*b+this.pan.c;d=-(d-this.o.height/2)*b+this.i.c}else{b=new n.wa(0,0,1);a=this.Xk(a,d);b.Fd(-a.tilt);b.Ce(a.pan);b.Fd(-this.i.c);b.Ce(-this.pan.c);b.Fd(-this.Za.pitch);b.De(this.Za.O);for(a=b.Ym()-180;-180>
a;)a+=360;d=b.Zm()}b={};b.pan=a;b.tilt=d;return b};b.prototype.zc=function(a){return a==this.control||a&&void 0!==a.ggPermeableMap&&1==a.ggPermeableMap?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Mi=function(a,d){var b=this.ed(),c,e;for(c=0;c<this.J.length+this.Xa.length;c++){var g=c<this.J.length?this.J[c]:this.Xa[c-this.J.length];if(g.qb)return g}for(c=0;c<this.J.length+this.Xa.length;c++)if(g=c<
this.J.length?this.J[c]:this.Xa[c-this.J.length],!g.nd){var f=[],m=new n.wa,y;var p=e=void 0;0<g.f&&(e=Math.tan(g.f/2*Math.PI/180),p=0<g.Ic?e*g.fd/g.Ic:e,g.vd&&1!=g.vd&&(p*=g.vd));for(y=0;4>y;y++){switch(y){case 0:m.Ya(-e,-p,0);break;case 1:m.Ya(e,-p,0);break;case 2:m.Ya(e,p,0);break;case 3:m.Ya(-e,p,0)}m.va(g.va*Math.PI/180);m.Da(-g.Da*Math.PI/180);m.jb(g.jb*Math.PI/180);m.z=m.z-1;m.va(-g.i*Math.PI/180);m.Da(g.pan*Math.PI/180);m.Da(-this.pan.c*Math.PI/180);m.va(this.i.c*Math.PI/180);m.jb(this.O.c*
Math.PI/180);f.push(m.clone())}f=this.Oi(f);if(0<f.length){for(y=0;y<f.length;y++)m=f[y],.1>m.z?(p=-b/m.z,e=this.o.width/2+m.x*p,p=this.o.height/2+m.y*p):p=e=0,m.Lb=e,m.vb=p;if(this.hl(f,a,d))return g}}return null};b.prototype.Jh=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.Go=function(a){this.vm(a);if(this.bd)this.bd.onclick();this.Sb=null;if(!this.B.Ab){a=a?a:window.event;
if(a.which||0==a.which||1==a.which){var d=(new Date).getTime();if(this.Cd){this.Sb=this.Cd;this.R.Va=!0;this.R.startTime=d;a.stopPropagation();return}if(this.zc(a.target)){var b;(b=this.Mi(this.ta.x,this.ta.y))&&b.re&&(this.Sb=b);this.Em(a.pageX,a.pageY);this.R.Va=!0;this.R.startTime=d;a.preventDefault();this.ua()}}this.X.ca.x=0;this.X.ca.y=0}};b.prototype.Jf=function(a,d){var b=this.A.Sj;b.enabled&&(this.sa!=this.ob&&0<=a&&0<=d&&""!=this.sa.title?(this.za.innerHTML=this.sa.title,this.za.style.color=
this.fa(b.Tj,b.Rj),b.background?this.za.style.backgroundColor=this.fa(b.ec,b.dc):this.za.style.backgroundColor="transparent",this.za.style.border="solid "+this.fa(b.hc,b.gc)+" "+b.Hi+"px",this.za.style.borderRadius=b.Gi+"px",this.za.style.textAlign="center",0<b.width?(this.za.style.left=a-b.width/2+this.margin.left+"px",this.za.style.width=b.width+"px"):(this.za.style.width="auto",this.za.style.left=a-this.za.offsetWidth/2+this.margin.left+"px"),this.za.style.height=0<b.height?b.height+"px":"auto",
this.za.style.top=d+25+ +this.margin.top+"px",this.za.style.visibility="inherit",this.za.style.overflow="hidden"):(this.za.style.visibility="hidden",this.za.innerHTML=""))};b.prototype.vm=function(a){var d=this.qe();this.Jh()?(this.ta.x=a.pageX-this.margin.left,this.ta.y=a.pageY-this.margin.top):(this.ta.x=a.pageX-d.x,this.ta.y=a.pageY-d.y);return d};b.prototype.xf=function(a){a&&null!==a&&"object"==typeof a?this.sa=a:this.sa=this.ob;this.sa.Ze&&this.sa.Ze();this.hotspot=this.sa};b.prototype.Fo=function(a){a=
a?a:window.event;var d=this.vm(a);if(!this.B.Ab&&!this.Cd){this.l.active&&(this.l.Ph=(new Date).getTime());this.R.Va&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.Dm(a.pageX,a.pageY),this.ua());var b=!1;if(this.sa==this.ob||"poly"==this.sa.type){var c=this.ob;0<this.P.length&&this.zc(a.target)&&(c=this.Ni(this.ta.x,this.ta.y));this.hi(c);this.Jf(a.pageX-d.x,a.pageY-d.y);0!=c&&c!=this.ob&&(b=!0)}d=null;!b&&this.zc(a.target)&&(d=this.Mi(this.ta.x,this.ta.y));this.l.uh&&(this.l.uh=!1);
this.Fa.style.cursor=this.sa!=this.ob&&this.sa.cf&&b||d&&d.rg?"pointer":"default"}};b.prototype.hi=function(a){!1===a&&(a=this.ob);this.sa!=a&&(this.sa!=this.ob&&(0<this.A.mode&&(this.sa.mb=0),this.aa&&this.aa.hotspotProxyOut&&this.aa.hotspotProxyOut(this.sa.id,this.sa.url)),a!=this.ob?(this.xf(a),this.aa&&this.aa.hotspotProxyOver&&this.aa.hotspotProxyOver(this.sa.id,this.sa.url),0<this.A.mode&&(this.A.mb=1,this.sa.mb=1)):(this.xf(this.ob),0<this.A.mode&&(this.A.mb=0)),this.ha&&this.ha.changeCurrentHotspot(this.sa.id))};
b.prototype.Eo=function(a){a=a?a:window.event;this.Oh=-1;if(!this.B.Ab&&(this.Sb&&(this.Sb.re(),this.Sb.qb?this.Cd=this.Sb:this.Cd=null),this.R.Va)){this.ua();a.preventDefault();this.R.Va=!1;a=(new Date).getTime();var d=Math.abs(this.X.start.x-this.X.da.x)+Math.abs(this.X.start.y-this.X.da.y);if(400>a-this.R.startTime&&0<=d&&20>d){var b=this.Ni(this.ta.x,this.ta.y);b&&this.rm(b);d=Math.abs(this.X.Ad.x-this.X.da.x)+Math.abs(this.X.Ad.y-this.X.da.y);700>a-this.vg&&0<=d&&20>d?(b?this.sm(b):this.B.Vi&&
this.si(),this.vg=0):this.vg=a;this.X.Ad.x=this.X.da.x;this.X.Ad.y=this.X.da.y}}};b.prototype.Fl=function(a){if(!this.B.md&&(a=a?a:window.event,this.zc(a.target))){var d=a.detail?-1*a.detail:a.wheelDelta/40;this.B.ml&&(d=-d);a.axis&&(-1==this.Oh?this.Oh=a.axis:this.Oh!=a.axis&&(d=0));var b=0<d?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(d=0);0!=d&&(this.Ki(b*this.B.jm,!0),this.update());a.preventDefault();this.ua()}};b.prototype.aq=function(a){a||(a=window.event);
var d=a.touches,b=this.qe();this.ta.x=d[0].pageX-b.x;this.ta.y=d[0].pageY-b.y;this.be=this.Sb=null;this.dg&&(this.dg=!1,this.An());if(!this.B.Ab){var c=(new Date).getTime();if(this.Cd)this.Sb=this.Cd,this.R.Va=!0,this.R.startTime=c,a.preventDefault();else{if(!this.R.Va&&d[0]){this.R.startTime=c;this.R.start.x=d[0].pageX;this.R.start.y=d[0].pageY;this.R.da.x=d[0].pageX;this.R.da.y=d[0].pageY;this.lb=d[0].target;if(this.zc(this.lb)){(c=this.Mi(this.ta.x,this.ta.y))&&c.re&&(this.Sb=c);if(c=this.Ni(this.ta.x,
this.ta.y))this.M(c),this.be=c,this.hi(c),c=this.kg(a),this.Jf(c.x-b.x,c.y-b.y);this.Em(d[0].pageX,d[0].pageY);this.R.Hk=d[0].identifier;this.R.Va=!0;a.preventDefault();this.ua()}if(this.lb){b=this.lb;for(c=!1;b&&b!=this.control;){if(b.onmouseover)b.onmouseover();b.onmousedown&&!c&&(b.onmousedown(),c=!0);b=b.parentNode}c&&a.preventDefault()}}1<d.length&&(this.R.Va=!1);!this.gj&&2==d.length&&d[0]&&d[1]&&this.zc(this.lb)&&(a=d[0].pageX-d[1].pageX,d=d[0].pageY-d[1].pageY,this.f.km=Math.sqrt(a*a+d*d),
this.f.pf=this.f.c);this.X.ca.x=0;this.X.ca.y=0}}};b.prototype.An=function(){this.dh&&this.s.b&&(this.s.kd||this.s.b.play(),this.s.b.muted=!1);if(this.Kc&&this.Ca&&this.Ca.createOscillator){var a=this.Ca.createOscillator(),d=this.Ca.createGain();a.frequency.value=30;a.type="sine";a.connect(d);d.connect(this.Ca.destination);d.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(d=0;d<this.N.length;d++){var b=this.N[d];(!this.Ub(b.id)||b.ia)&&0<=b.loop&&b.autoplay&&(b.ia&&b.Te(),this.Ae(b.id,
b.loop))}for(d=0;d<this.J.length;d++)b=this.J[d],!this.Ub(b.id)&&b.autoplay&&this.dh&&this.Ae(b.id,b.loop),this.Ub(b.id)&&b.autoplay&&this.dh&&(b.mh(),b.b.muted=!1)};b.prototype.$p=function(a){a||(a=window.event);var d=a.touches,b=this.qe();this.ta.x=d[0].pageX-b.x;this.ta.y=d[0].pageY-b.y;if(!this.B.Ab){d[0]&&(this.R.da.x=d[0].pageX,this.R.da.y=d[0].pageY);if(this.lb){for(var c=this.lb,e=!1;c&&c!=this.control&&!e;)"scrollarea"==c.ggType&&(e=!0),"map"==c.ggType&&(e=!0),"text"==c.ggType&&(e=!0),c=
c.parentNode;e||a.preventDefault()}if(this.R.Va){a.preventDefault();for(c=0;c<d.length;c++)if(d[c].identifier==this.R.Hk){this.Dm(d[c].pageX,d[c].pageY);break}this.be&&(c=this.kg(a),this.Jf(c.x-b.x,c.y-b.y));this.ua()}2==d.length&&d[0]&&d[1]&&(this.R.Va=!1,!this.gj&&this.zc(this.lb)&&(this.B.md||(b=d[0].pageX-d[1].pageX,d=d[0].pageY-d[1].pageY,this.f.zk=Math.sqrt(b*b+d*d),this.Aa.f.active=!0,this.Aa.f.jc=this.f.pf*Math.sqrt(this.f.km/this.f.zk),4==this.ra()&&this.Aa.f.jc>this.f.max&&(this.Aa.f.jc=
this.f.max),this.Aa.f.jc<this.f.min&&(this.Aa.f.jc=this.f.min)),this.ua(),a.preventDefault()))}};b.prototype.Zp=function(a){var d=this.qe(),b=!1;if(!this.B.Ab){this.R.Va&&(a.preventDefault(),this.ua());var c=(new Date).getTime();var e=void 0;var g=!1;e=Math.abs(this.R.start.x-this.R.da.x)+Math.abs(this.R.start.y-this.R.da.y);if(0<=e&&20>e){b=!0;this.zc(this.lb)&&(a.preventDefault(),this.Sb&&(this.Sb.re(),this.Sb.qb?this.Cd=this.Sb:this.Cd=null));if(this.lb){for(e=this.lb;e&&e!=this.control;)e.onclick&&
(e.onclick(),g=!0,b=!1),e=e.parentNode;g&&a.preventDefault()}e=Math.abs(this.R.Ad.x-this.R.da.x)+Math.abs(this.R.Ad.y-this.R.da.y);if(700>c-this.vg&&0<=e&&20>e){if(this.zc(this.lb))if(a.preventDefault(),this.be)this.sm(this.be);else if(this.B.Vi){var f=this;setTimeout(function(){f.si()},1)}if(this.lb){for(e=this.lb;e&&e!=this.control;)e.ondblclick&&(e.ondblclick(),g=!0,b=!1),e=e.parentNode;g&&a.preventDefault()}this.vg=0}else this.vg=c;this.R.Ad.x=this.R.da.x;this.R.Ad.y=this.R.da.y}if(this.lb)for(e=
this.lb;e&&e!=this.control;){if(e.onmouseout)e.onmouseout();if(e.onmouseup)e.onmouseup();e=e.parentNode}a=this.kg(a);this.Jf(a.x-d.x,a.y-d.y);this.be&&b&&this.rm(this.be);this.lb=null;this.R.Va=!1;this.hi(this.ob);this.be=null}};b.prototype.Yp=function(a){var d=this.qe();this.B.Ab||(this.R.Va=!1);this.be=null;this.hi(this.ob);a=this.kg(a);this.Jf(a.x-d.x,a.y-d.y)};b.prototype.tl=function(){return null!=this.lb||this.R.Va};b.prototype.Gl=function(a){!this.xe&&window.MSGesture&&(this.M("setup gesture"),
this.xe=new MSGesture,this.xe.target=this.control);this.xe&&this.xe.addPointer(a.pointerId)};b.prototype.Qk=function(a){this.gj=!0;this.Wh=1;this.B.Ab||this.B.md||(a.touches?(this.lb=a.touches.target,this.zc(a.target)&&(a.preventDefault(),this.f.pf=this.f.c,this.ua())):(a.preventDefault(),this.f.pf=this.f.c,this.ua()))};b.prototype.Cn=function(a){this.B.Ab||this.B.md||!this.zc(a.target)||(a.preventDefault(),this.Aa.f.active=!0,this.Aa.f.jc=this.f.pf/Math.sqrt(a.scale),4==this.ra()&&this.Aa.f.jc>this.f.max&&
(this.Aa.f.jc=this.f.max),this.update(),this.ua())};b.prototype.Jo=function(a){this.B.Ab||this.B.md||(a.preventDefault(),1!=a.scale&&(this.Aa.f.active=!0,this.Wh*=a.scale,this.Aa.f.jc=this.f.pf/Math.sqrt(this.Wh),4==this.ra()&&this.Aa.f.jc>this.f.max&&(this.Aa.f.jc=this.f.max),this.update(),this.ua()))};b.prototype.Pk=function(a){this.B.Ab||this.B.md||(this.Aa.f.active=!1,a.preventDefault(),this.ua(),this.xe&&this.xe.reset&&this.xe.reset())};b.prototype.yo=function(a){this.B.ue||(this.isFullscreen&&
a.preventDefault(),this.Nh=a.keyCode,this.ua())};b.prototype.zo=function(a){this.Nh&&(this.Nh=0,a.preventDefault())};b.prototype.Po=function(){this.Nh=0};b.prototype.Zh=function(){this.isFullscreen&&(this.Jh()||this.exitFullscreen(),this.Jh()&&(this.T.style.left="0px",this.T.style.top="0px"))};b.prototype.Qo=function(a,d,b,c){c?(this.pg.alpha=a,this.pg.beta=d,this.pg.gamma=b,this.pg.gamma+=90):(this.gb.alpha=a,this.gb.beta=d,this.gb.gamma=b,this.gb.gamma+=90);this.gb.orientation=window.orientation?
parseInt(""+window.orientation,10):0;b=new n.dk;a=this.gb;b.Ce(-a.alpha);b.De(-a.beta);b.Fd(-a.gamma);b.De(90-a.orientation);1>b.Db?-1<b.Db?(d=180/Math.PI*Math.asin(-b.Db),a=180/Math.PI*Math.atan2(b.Yb,b.Xb),b=180/Math.PI*Math.atan2(b.Wb,b.Vb)):(d=0,a=90,b=-180/Math.PI*Math.atan2(-b.Ib,b.Jb)):(d=0,a=-90,b=180/Math.PI*Math.atan2(-b.Ib,b.Jb));if(this.bh)if(this.tl()||this.u.Gh||this.gb.gi)this.gb.Ml=this.lg()+b,this.gb.cg=0,this.gb.gi=!1;else{c=this.u.active;var h=1;10>this.gb.cg&&(this.gb.cg+=1,h=
.1*this.gb.cg);b=-b+this.gb.Ml;this.Af(h*b+(1-h)*this.lg());this.Bf(h*a+(1-h)*this.Dh());this.Bm?this.Ij(h*d+(1-h)*this.Zk()):this.Ij(0);this.Xf();this.u.active=c}};b.prototype.rm=function(a){this.aa&&this.aa.hotspotProxyClick&&this.aa.hotspotProxyClick(a.id,a.url);""!=a.url&&(this.vj(a.url,a.target),this.Jf(-1,-1))};b.prototype.sm=function(a){this.aa&&this.aa.hotspotProxyDoubleClick&&this.aa.hotspotProxyDoubleClick(a.id,a.url)};b.prototype.Ah=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,
90)/360))};b.prototype.Nl=function(){var a=this;setTimeout(function(){a.Nl()},100);9!=a.ci||a.Ih||window.requestAnimationFrame(function(){a.Kg();a.Mc("restart recover timer")});10<a.ci&&1<a.Bj&&(a.Mc("recover timer - disabling requestAnimationFrame"),a.Ih=!0,a.Kg());a.ci++};b.prototype.ki=function(a){var d={uq:{value:0,name:"pan"},wq:{value:1,name:"tilt"},tq:{value:2,name:"fov"}},b=0,c=0,e=0,g;for(g in d){for(var f=d[g],m,y=Math.floor(a);!this.af(y,f.value)&&0<y;)y--;y=this.af(y,f.value);var p=this.Wn(y);
if(p){m=new n.rc(y.time,y.value);var q=new n.rc(p.time,p.value),t=(a-y.time)/(p.time-y.time);if(0!=y.type||0!=p.type&&3!=p.type)if(3==y.type)m=y.value;else{t=new n.rc;var v=new n.rc,u=p.time-y.time;0==y.type?v.Ya(y.time+.3*u,y.value):v.Ya(y.he,y.ie);0==p.type||3==p.type?t.Ya(p.time-.3*u,p.value):t.Ya(p.ge,p.Wc);p=new n.rc;p.Fi(m,q,v,t,a);m=p.y}else p=new n.rc,p.xd(m,q,t),m=p.y}else m=y.value;switch(f.value){case 0:f=this.pan.c;if(this.Ld&&3!=y.type){if(2!=this.hb){for(;360<m;)m-=360;for(;-360>m;)m+=
360}b=m-f;2!=this.hb&&(180<b&&(b-=360),-180>b&&(b+=360));this.pan.c=this.pan.c+b*this.sd}else this.pan.c=m;this.l.Ag=this.pan.c;break;case 1:f=this.i.c;this.Ld&&3!=y.type?(c=m-f,this.i.c=this.i.c+c*this.sd):this.i.c=m;this.l.Bg=this.i.c;break;case 2:f=this.f.c,this.Ld&&3!=y.type?(e=m-f,this.f.c=this.f.c+e*this.sd):this.f.c=m,this.l.zg=this.f.c}}d=this.ra();for(g=Math.floor(a);!this.af(g,3)&&0<g;)g--;g=this.af(g,3);y=a-g.time;this.Ld&&-1!=this.Rf&&this.oh+this.Ci>a?(d=this.jg(this.Rf),this.f.c>d?this.oh=
a:(y=(a-this.oh)/this.Ci,y=Math.min(1,y),this.Oc(this.Ka,this.Rf,1-y))):(0==g.xb||y>g.xb-.3?this.Oc(g.value):(y/=g.xb,this.Oc(d,g.value,1-y)),this.l.Al=g.value);this.Ld&&(b=Math.sqrt(b*b+c*c+e*e),.3>b&&(this.Ld=!1,this.sd=.02,this.Qf=0),0<this.Qf&&b>this.Qf&&(this.sd+=.01,this.sd=Math.min(this.sd,1)),this.Qf=b);g=Math.floor(a);if(g!=this.kk)for(this.kk=g,a=this.Dn(g),b=0;b<a.length;b++)c=a[b],e=c.nh,this.pd.hasOwnProperty(e)&&(d=this.pd[e].type,0==d?this.$d(e,c.Yj):1==d?this.$d(e,c.value):2==d&&this.$d(e,
"true"==c.Yj));this.update()};b.prototype.Wo=function(a){var d=this.u.speed;this.u.mj&&(d=d*(a.getTime()-this.u.mj)/60,5<d&&(d=5),.2>d&&(d=.2));this.u.mj=a.getTime();this.l.zh&&(this.na.ready()||4==this.Ka)&&this.Ch()&&(this.l.zh=!1,this.l.active=!0,this.pb.od=!0,this.pb.$i=!1);if(this.u.active||0!=this.u.Eb&&this.na.ready()){if(this.u.Xj&&"__AutoMove"==this.w.ab){var b=a.getTime()-this.u.jk;d=b/100;if(d>=this.w.length){if(this.ki(this.w.length),this.ya.splice(this.ya.indexOf(this.w),1),this.u.active=
!1,this.w=this.u.ik,this.u.Eb=0,this.ii(this.u.pan,this.u.i,this.u.f),this.pan.Gc=this.u.pan,this.i.Gc=this.u.i,this.u.Hg&&(this.u.Hg=!1,this.l.Uh=!0,this.l.active=!0,this.ja("autorotatechanged",{})),this.onMoveComplete)this.onMoveComplete()}else this.ki(d)}else{this.pan.d=this.u.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.i.d=this.u.i-this.i.c;this.O.d=this.u.O-this.O.c;this.f.d=this.u.f-this.f.c;b=d*this.Ah();
var c=Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d+this.f.d*this.f.d),e=this.pan.c-this.u.Ag,g=this.i.c-this.u.Bg,f=this.O.c-this.u.Bl,m=this.f.c-this.u.zg;100*Math.sqrt(e*e+g*g+f*f+m*m)<b&&0==this.u.Eb&&(this.u.aborted=!0);this.u.Ag=this.pan.c;this.u.Bg=this.i.c;this.u.Bl=this.O.c;this.u.zg=this.f.c;if(100*c<b||this.u.aborted){if(this.pan.d=0,this.i.d=0,this.O.d=0,this.f.d=0,this.u.active&&(this.u.active=!1,this.pan.c=this.u.pan,this.i.c=this.u.i,this.O.c=this.u.O,this.f.c=
this.u.f,this.onMoveComplete))this.onMoveComplete()}else c=c>5*b?b/c:.2,this.pan.d*=c,this.i.d*=c,this.f.d*=c;this.pan.c+=this.pan.d;this.i.c+=this.i.d;this.O.c+=this.O.d;this.f.c+=this.f.d;0!=this.u.Eb&&(this.u.Eb!=this.Ka?(d=this.jg(this.u.Eb),this.ig()>d?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.i.d*this.i.d+this.O.d*this.O.d)/b,1))*b,this.f.d)-this.f.d,this.u.f=this.f.c):(this.nc=this.Ka,this.Ka=this.u.Eb,this.M("New projection from Target:"+this.Ka),this.Jg=
this.u.Mg=0,this.na.Hh())):1>this.u.Mg?(this.u.Mg=Math.min(1,this.u.Mg+.05*d),this.Jg=this.u.Mg):(this.nc=0,this.u.Eb=0,this.na.Hh()))}this.jf=a.getTime();this.update()}else if(this.l.active){b=a.getTime()-this.l.startTime;this.l.Ph<this.l.startTime&&(this.l.Ph=this.l.startTime);if((this.l.Kf||this.pb.od)&&0<this.ya.length){d=b/100;c=!1;if(this.Kb!=this.w.ab||""!=this.w.Oe&&this.l.Md!=this.w.Oe){for(b=0;b<this.ya.length;b++)if(""==this.Kb&&this.ya[b].Oe==this.l.Md||""!=this.Kb&&this.ya[b].ab==this.Kb&&
this.ya[b].Oe==this.l.Md){c=!0;this.w=this.ya[b];this.Kb=this.w.ab;break}!c&&0<this.ya.length&&this.ya[0].Oe==this.l.Md&&(c=!0,this.w=this.ya[0],this.Kb=this.w.ab)}else c=!0;if(c)if(b=(e=this.s.b&&this.s.kd)&&this.l.Qj&&!this.pb.od,this.Ne){c=d;if(b)for(this.s.b.currentTime<this.lk&&this.Ei&&(this.Di++,this.Ei=!1),c=10*(this.Di*this.s.b.duration+this.s.b.currentTime),this.lk=this.s.b.currentTime,.05>this.s.b.duration-this.s.b.currentTime&&(this.Ei=!0);c>=10*this.Me;)c-=10*this.Me;if(!e&&d>=this.w.length||
e&&!b&&d>=this.w.length||e&&b&&(this.w.ab!=this.w.Hl||this.w.Xh!=this.bb)&&d>=this.w.length){this.ki(this.w.length);this.l.zd=0;this.Ne=!1;if(this.pb.od){this.cm();return}this.Kb=this.w.Hl;if(this.Kb==this.w.ab&&this.bb==this.w.Xh){if(1<this.Ma.length&&0<this.l.Yh){if(this.l.tj){b=1E3;do d=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&d==this.bb)}else d=this.Vk();this.ye("{"+d+"}");this.l.startTime=a.getTime();this.Ne=!1;this.l.active=!0;this.C.fe=!0}}else this.hf&&this.w.Xh!=this.bb&&
(this.ye("{"+this.w.Xh+"}",this.w.Mo),this.C.enabled?(this.l.active=!1,this.C.fe=!0):this.l.active=!0),this.l.startTime=a.getTime()}else this.ki(c),this.l.zd=c}else if(d=this.w.W[0],c=this.w.W[1],e=this.w.W[2],g=this.w.W[3],3!=g.ub&&(g=0),this.l.Uh||this.u.aborted||this.pb.od||b){if(this.Ne=!0,0<this.l.zd?this.l.startTime=a.getTime()-100*this.l.zd:this.l.startTime=a.getTime(),this.Ld=b){for(this.Me=this.Di=0;this.Me<this.w.length/10;)this.Me+=this.s.b.duration;c=10*this.s.b.currentTime;for(b=Math.floor(c);!this.af(b,
3)&&0<b;)b--;b=this.af(b,3);b.value==this.Ka?this.Rf=-1:(this.Rf=b.value,this.oh=c,this.Ci=Math.max(5,b.time+b.xb-c))}}else{b={};if(0<this.l.zd)b.pan=this.l.Ag,b.tilt=this.l.Bg,b.fov=this.l.zg,b.projection=this.l.Al;else{for(b.pan=d.value;360<b.pan;)b.pan-=360;for(;-360>b.pan;)b.pan+=360;b.tilt=c.value;b.fov=e.value;b.projection=g?g.value:4}b.timingFunction=3;b.speed=1;this.u.Hg=!0;this.Vh(b);this.l.active=!0}}else if(0<this.l.Yh&&this.hf&&b>=1E3*this.l.Yh){if(1<this.Ma.length){if(this.l.tj){b=1E3;
do d=this.Ma[Math.floor(Math.random()*this.Ma.length)];while(b--&&d==this.bb)}else b=this.Ma.indexOf(this.bb),b++,b>=this.Ma.length&&(b=0),d=this.Ma[b];this.l.startTime=a.getTime();this.l.ld=a.getTime();this.l.timeout=0;this.ye("{"+d+"}");this.l.active=!0;this.C.fe=!0}}else b=a.getTime(),c=d=1E3/60,0!=this.l.ld&&(c=b-this.l.ld),this.i.d=this.l.ri*(0-this.i.c)/100,this.f.d=this.l.ri*(this.f.Qa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.l.speed*this.Ah()*.05,d=c/d,this.pan.c+=this.pan.d*d,this.i.c+=
this.i.d*d,this.f.c+=this.f.d*d,this.l.ld=b,this.update();3E3<a.getTime()-this.l.Ph&&!this.l.uh&&(this.Fa.style.cursor="none",this.l.uh=!0)}else!this.pb.$i&&1E3<a.getTime()-this.jf&&(this.ya.splice(this.ya.indexOf(this.w),1),this.w=this.hg(!1),this.Kb=this.w.ab,this.l.active=!1,this.l.zh=!0),this.l.enabled&&!this.R.Va&&a.getTime()-this.jf>1E3*this.l.timeout&&(this.l.Vg&&this.Ch()||!this.l.Vg)&&(this.l.active=!0,this.l.startTime=a.getTime(),this.l.ld=0,this.ja("autorotatechanged",{}),this.pan.d=0,
this.i.d=0,this.f.d=0),!this.Aa.enabled||this.R.Va||0==this.pan.d&&0==this.i.d&&0==this.f.d||(this.u.Gh=!0,this.pan.d*=.9,this.i.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.i.c+=this.i.d,this.Ki(this.f.d),1E-4>this.pan.d*this.pan.d+this.i.d*this.i.d+this.f.d*this.f.d&&(this.pan.d=0,this.i.d=0,this.f.d=0),this.update())};b.prototype.Yo=function(a){var d=this.C;if(d.Jd){var b=a.getTime()-d.Im;b/=1E3*d.Hm;1<=b?(d.Jd=!1,this.Gk(),d.Oj=a.getTime(),this.mm(),d.Je=!0,0==d.bc||d.Pf||(4==d.bc?(this.w=this.hg(!0,
d.Fe,d.Ge,d.Id),this.Kb=this.w.ab,this.l.active=!0,this.pb.od=!0):this.moveTo(d.Fe,d.Ge,d.Id,d.de,0,d.qd))):d.Ll(b)}else d.Je&&(b=a.getTime()-d.Oj,b/=1E3*d.Uf,1<=b?(d.Je=!1,this.jf=a.getTime(),this.update(),0!=d.bc&&d.Pf&&(4==d.bc?(this.w=this.hg(!0,d.Fe,d.Ge,d.Id),this.Kb=this.w.ab,this.l.active=!0,this.pb.od=!0):this.moveTo(d.Fe,d.Ge,d.Id,d.de,0,d.qd)),4!=d.bc&&(this.Og(d.Th),this.Pg(d.zi),this.Ng(d.Lh),this.l.active=d.fe,d.fe=!1),this.l.ld=0,this.ga&&this.Qi(),this.qh=!1):d.Ll(b));d=this.Ro;d.an&&
(d.vh?a.getTime()-d.Xi>=1E3*d.un&&(d.vh=!1):(d.current+=d.Xc,0>d.current&&(d.current=0,d.Xc=-d.Xc,d.vh=!0,d.Xi=a.getTime()),1<d.current&&(d.current=1,d.Xc=-d.Xc,d.vh=!0,d.Xi=a.getTime())))};b.prototype.ap=function(){var a,d=this.A;if(0<d.kb.length){for(a=0;a<d.kb.length;a++)d.Pc[a]!=d.Nb[a]&&(d.Pc[a]>d.Nb[a]?(d.Nb[a]+=.05,d.Pc[a]<d.Nb[a]&&(d.Nb[a]=d.Pc[a])):(d.Nb[a]-=.05,d.Pc[a]>d.Nb[a]&&(d.Nb[a]=d.Pc[a],-1!=d.li.indexOf(d.kb[a])&&(d.li.splice(d.li.indexOf(d.kb[a]),1),d.kb.splice(a,1),d.Pc.splice(a,
1),d.Nb.splice(a,1)))));this.update()}if(2==d.mode)for(a=0;a<this.P.length;a++){var b=this.P[a];"poly"==b.type&&b.mb!=b.pa&&(b.mb>b.pa?(b.pa+=d.Xc,b.mb<b.pa&&(b.pa=b.mb)):(b.pa-=d.Xc,b.mb>b.pa&&(b.pa=b.mb)),this.update())}3==d.mode&&d.mb!=d.pa&&(d.mb>d.pa?(d.pa+=d.Xc,d.mb<d.pa&&(d.pa=d.mb)):(d.pa-=d.Xc,d.mb>d.pa&&(d.pa=d.mb)),this.update())};b.prototype.$o=function(){var a=this.Aa;this.R.Va&&(this.B.yd?(a.ca.x=.4*(this.X.da.x-a.da.x),a.ca.y=.4*(this.X.da.y-a.da.y),a.da.x+=a.ca.x,a.da.y+=a.ca.y):(a.ca.x=
.1*-this.X.ca.x*this.B.sensitivity/8,a.ca.y=.1*-this.X.ca.y*this.B.sensitivity/8),this.Cm(a.ca.x,a.ca.y),this.update());a.f.active&&(this.pk(.4*(a.f.jc-this.f.c)),.001>Math.abs(a.f.jc-this.f.c)/this.f.c&&(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ca.x||0!=a.ca.y)&&!this.R.Va){var d=.9*(1-a.Fj);a.ca.x=d*a.ca.x;a.ca.y=d*a.ca.y;this.u.Gh=!0;.01>a.ca.x*a.ca.x+a.ca.y*a.ca.y?(a.ca.x=0,a.ca.y=0):(this.Cm(a.ca.x,a.ca.y),this.update())}};b.prototype.Xo=function(){if(this.B.am&&this.B.yd){var a=this.Ql;
a.pan=this.pan.c;a.i=this.i.c;a.f=this.f.c;this.Ve(a);this.Ve(a);this.Ve(a);var d=a.pan-this.pan.c,b=a.i-this.i.c;a=a.f-this.f.c;if(0!=d||0!=b||0!=a){var c=.2+.9*Math.min((Math.abs(d)+Math.abs(b)+Math.abs(a))/Math.abs(Math.min(this.f.c,90))*.3,1);this.pan.c+=d*c;this.i.c+=b*c;this.f.c+=a*c;this.Aa.Fj=.3;this.update()}else this.Aa.Fj=0}else this.Xf();if(2!=this.hb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.Zo=function(){if(!this.Ch()&&this.df&&5<this.h.Yl){var a,
d=0,b=this.Qb.length;if(this.ah)b=50,this.Yi<b&&this.Yi++,d=this.Yi;else for(a=0;a<b;a++)(this.Qb[a].complete&&this.Qb[a].src!=this.Ck||""==this.Qb[a].src)&&d++;d==b?(this.ai=1,this.isLoaded=!0,this.ka&&this.ka.ggLoaded&&this.ka.ggLoaded(),this.ja("imagesready",{}),this.l.Vg&&this.l.enabled&&!this.u.active&&!this.C.Jd&&(this.l.active=!0,this.l.startTime=(new Date).getTime(),this.l.ld=0)):this.ai=d/(1*b)}};b.prototype.Kg=function(){var a=this;a.fi||(a.Ih?setTimeout(function(){a.fi=!1;a.Kg()},1E3/60):
window.requestAnimationFrame(function(){a.fi=!1;a.Kg()}));a.fi=!0;this.Bj=this.ci=0;a.u.Gh=!1;var d=new Date;this.Bh++;120<=this.Bh&&(this.M("F/s: "+Math.round(1E3*this.Bh/(d.getTime()-this.wl))),this.wl=d.getTime(),this.Bh=0);this.ja("timer",{});this.Y&&this.na.tn();this.Fb&&""!==this.oe&&!this.ha&&document.hasOwnProperty(this.oe)&&document[this.oe].setPan&&0==this.zn--&&(this.ha=document[this.oe],this.Tc=this.Y=!1,this.xa&&(this.xa.style.visibility="hidden"),this.ha.setLocked(!0),this.ha.setSlaveMode(!0),
this.ha.readConfigString(this.Ti),this.Mc("Flash player '"+this.oe+"' connected."));this.Wj&&(this.Sc(),this.Wj=!1);this.$o();this.Zo();this.Wo(d);this.Xo();this.Yo(d);this.na.iq();(0<=this.A.mode||0<this.A.kb.length)&&this.ap();this.wi();if(this.kf.pan!=this.pan.c||this.kf.i!=this.i.c||this.kf.f!=this.f.c)this.kf.pan=this.pan.c,this.kf.i=this.i.c,this.kf.f=this.f.c,this.ja("positionchanged",{});this.yl!=this.Ka&&(this.yl=this.Ka,this.ja("projectionchanged",{}));this.Ea&&(0<this.$f?this.$f--:(this.Ea=
!1,this.$f=0),this.C.Je||this.C.Jd||this.$g(),this.ja("repaint",{}));d=this.Tk();d!=this.xl&&(d?(this.ka&&this.ka.ggReLoadedLevels&&this.ka.ggReLoadedLevels(),this.ja("tilesrequested",{})):(a.ka&&a.ka.ggLoadedLevels&&a.ka.ggLoadedLevels(),this.ja("tilesready",{})),this.xl=d)};b.prototype.jg=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.rj);a=Math.min(360*this.ee(),a);a=Math.min(360/this.ee(),a);break;case 9:a=Math.min(270,this.f.sj);break;default:a=90}return a};
b.prototype.xm=function(){var a=this;setTimeout(function(){a.zf(!1)},10);setTimeout(function(){a.zf(!1)},100)};b.prototype.wi=function(){this.Si.Ik(this.pan.c,this.i.c);for(var a=0;a<this.N.length+this.J.length;a++){if(a<this.N.length)var d=this.N[a];else if(d=this.J[a-this.N.length],d.nd)continue;d.wi()}};b.prototype.Jp=function(a,d){var c=this;var l="<<U>>"+String(c.Ia);l=l.toUpperCase();"U"!=l.charAt(2)&&(c.B.ef=!1);if(0!=c.Fg.length||!c.B.ef||c.B.Zf||c.B.rh)if(c.bd)c.T.removeChild(c.bd),c.bd=
null;else{c.bd=document.createElement("div");var e=c.bd;l="left: "+a+"px;"+("top:\t "+d+"px;")+"z-index: 32000;";l+="position:relative;";l+="display: table;";l+="background-color: white;";l+="border: 1px solid lightgray;";l+="box-shadow: 1px 1px 3px #333;";l+="font-family: Verdana, Arial, Helvetica, sans-serif;";l+="font-size: 9pt;";l+="opacity : 0.95;";e.setAttribute("style",l);e.setAttribute("class","gg_contextmenu");l=document.createElement("style");a=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");
l.type="text/css";l.styleSheet?l.styleSheet.cssText=a.nodeValue:l.appendChild(a);e.appendChild(l);for(a=0;a<c.Fg.length;a++){d=c.Fg[a];var g=document.createElement("div");l="text-align: left;";l+="margin: 0;";l+="padding: 5px 20px;";l+="vertical-align: left;";g.setAttribute("style",l);g.setAttribute("class","gg_context_row");l=document.createElement("a");l.href=d.url;l.target="_blank";l.innerHTML=d.text;l.setAttribute("style","color: black; text-decoration: none;");g.appendChild(l);e.appendChild(g)}0<
c.Fg.length&&(!c.B.ef||c.B.Zf||c.B.rh)&&e.appendChild(document.createElement("hr"));if(c.B.rh&&c.Y){d=[];d.push({text:"Rectilinear Projection",Lg:4});d.push({text:"Stereographic Projection",Lg:9});d.push({text:"Fisheye Projection",Lg:12});for(a=0;a<d.length;a++){g=d[a];var f=document.createElement("div");f.setAttribute("class","gg_context_row");l="text-align: left;";l+="margin: 0;";l=c.Ka==g.Lg?l+"padding: 5px 20px 5px 7px;":l+"padding: 5px 20px;";l+="vertical-align: left;";l+="cursor: pointer;";
f.setAttribute("style",l);f.onclick=function(a){return function(){c.Li(a,1);c.update()}}(g.Lg);c.Ka==g.Lg?f.innerHTML="&#10687; "+g.text:f.innerHTML=g.text;e.appendChild(f)}c.B.ef&&!c.B.Zf||e.appendChild(document.createElement("hr"))}c.B.Zf&&(a=document.createElement("div"),a.setAttribute("class","gg_context_row"),l="text-align: left;margin: 0;padding: 5px 20px;",l+="vertical-align: left;",l+="cursor: pointer;",a.setAttribute("style",l),a.onclick=function(){c.si()},a.innerHTML=c.Jh()?"Exit Fullscreen":
"Enter Fullscreen",e.appendChild(a));c.B.ef||(a=document.createElement("div"),l="text-align: left;margin: 0;padding: 5px 20px;",l+="vertical-align: left;",a.setAttribute("style",l),a.setAttribute("class","gg_context_row"),l=document.createElement("a"),l.href=b.Tf("aHR0cDovL3Bhbm8ydnIuY29tLw=="),l.target="_blank",l.innerHTML=b.Tf("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),7<this.Rh.length&&(l.innerHTML+="<br/>"+b.nk(this.Rh).replace(/./gm,function(a){return"&#"+a.charCodeAt(0)+";"})),l.setAttribute("style","color: black; text-decoration: none;"),
a.appendChild(l),e.appendChild(a));c.T.insertBefore(c.bd,c.T.firstChild);e.onclick=function(){c.bd&&(c.T.removeChild(c.bd),c.bd=null)};e.oncontextmenu=e.onclick}};b.prototype.$m=function(){var a=this;var d=a.Fa;a.control=d;a.control=d;a.xm();setTimeout(function(){a.Kg()},10);setTimeout(function(){a.Nl()},200);setTimeout(function(){a.Le();a.$g()},10);d.addEventListener&&(d.addEventListener("touchstart",function(d){a.aq(d)},!1),d.addEventListener("touchmove",function(d){a.$p(d)},!1),d.addEventListener("touchend",
function(d){a.Zp(d)},!1),d.addEventListener("touchcancel",function(d){a.Yp(d)},!1),d.addEventListener("pointerdown",function(d){a.Gl(d)},!1),d.addEventListener("MSPointerDown",function(d){a.Gl(d)},!1),d.addEventListener("MSGestureStart",function(d){a.Qk(d)},!1),d.addEventListener("MSGestureEnd",function(d){a.Pk(d)},!1),d.addEventListener("MSGestureChange",function(d){a.Jo(d)},!1),d.addEventListener("gesturestart",function(d){a.Qk(d)},!1),d.addEventListener("gesturechange",function(d){a.Cn(d)},!1),
d.addEventListener("gestureend",function(d){a.Pk(d)},!1),d.addEventListener("mousedown",function(d){a.Go(d)},!1),d.addEventListener("mousemove",function(d){a.Fo(d)},!1),document.addEventListener("mouseup",function(d){a.Eo(d)},!1),d.addEventListener("mousewheel",function(d){a.Fl(d)},!1),d.addEventListener("DOMMouseScroll",function(d){a.Fl(d)},!1),document.addEventListener("keydown",function(d){a.yo(d)},!1),document.addEventListener("keyup",function(d){a.zo(d)},!1),window.addEventListener("orientationchange",
function(){a.xm()},!1),window.addEventListener("resize",function(){a.Le()},!1),window.addEventListener("blur",function(){a.Po()},!1),a.T.addEventListener("webkitfullscreenchange",function(){a.Zh()},!1),document.addEventListener("mozfullscreenchange",function(){a.Zh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.Zh()},!1),document.addEventListener("MSFullscreenChange",function(){a.Zh()},!1));d.oncontextmenu=function(d){void 0===d&&(d=window.event);if(d.target&&!a.zc(d.target))return!0;
if(!d.ctrlKey){d=a.kg(d);var b=a.qe();a.Jp(d.x-b.x,d.y-b.y);return!1}return!0};window.addEventListener("deviceorientation",function(d){a.Qo(d.alpha,d.beta,d.gamma,d.absolute)})};b.prototype.hk=function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.aa&&this.aa.addSkinHotspot?(this.P[a].Ze(),this.P[a].b=new this.aa.addSkinHotspot(this.P[a])):this.P[a].b=new n.Jm(this,this.P[a]),this.P[a].b.__div.style.left="-1000px",this.P[a].b.__div.style.top="-1000px",this.P[a].b&&this.P[a].b.__div)){var d=
this.Fa.firstChild;d?this.Fa.insertBefore(this.P[a].b.__div,d):this.Fa.appendChild(this.P[a].b.__div)}};b.prototype.Gm=function(){var a,d=document.createElement("fakeelement"),b={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in b)if(void 0!==d.style[a])return b[a]};b.prototype.Hb=function(a){var d=[];"#"==a.substr(0,1)&&(a=a.substr(1));a=new RegExp(a,"");for(var b=0;b<this.N.length;b++)a.test(this.N[b].id)&&
d.push(this.N[b]);for(b=0;b<this.J.length;b++)a.test(this.J[b].id)&&d.push(this.J[b]);for(b=0;b<this.Xa.length;b++)a.test(this.Xa[b].id)&&d.push(this.Xa[b]);return d};b.prototype.Vn=function(a){if("_videopanorama"==a)return this.s.b;a=this.Hb(a);return 0<a.length?a[0].b:null};b.prototype.Tl=function(a,d){var b=this;d.addEventListener("ended",function(a){b.ja("videoended",{video:a.target})});d.addEventListener("pause",function(a){b.ja("videopaused",{video:a.target})});d.addEventListener("play",function(a){b.ja("videostarted",
{video:a.target})});for(var c=0;c<this.J.length;c++)if(this.J[c].id==a)return this.J[c].b=d,this.J[c];c=new n.gk(this);c.registerElement(a,d);return c};b.prototype.Ub=function(a){if(this.Fb){var d=this.ha;if(d)return d.isPlaying(a)}else{if("_main"===a)return!0;a=this.Hb(a);if(0<a.length)return a[0].ia?a[0].Be:!a[0].b.ended&&!a[0].b.paused}return!1};b.prototype.Ae=function(a,d){if(this.Fb){var b=this.ha;b&&b.playSound(a,d)}else try{b=this.Hb(a);for(var c=0;c<b.length;c++){var e=b[c];e.sc=d&&!isNaN(Number(d))?
Number(d)-1:e.loop-1;-1==e.sc&&(e.sc=1E7);this.M(e.b);this.Ub(a)&&this.ni(a);e.ia?e.Yc():e.b.play();this.Bp(e.id)}}catch(r){this.M(r)}};b.prototype.Ol=function(a,d){a=this.Hb(a);for(var b=0;b<a.length;b++){var c=a[b];this.Ub(c.id)?this.wj(c.id):this.Ae(c.id,d)}};b.prototype.bp=function(a,d){a=this.Hb(a);for(var b=0;b<a.length;b++){var c=a[b];this.Ub(c.id)?this.ni(c.id):this.Ae(c.id,d)}};b.prototype.wj=function(a){if(this.Fb){var d=this.ha;d&&d.pauseSound(a)}else try{if(d=void 0,"_main"==a){this.ji(a);
for(d=0;d<this.N.length;d++)this.N[d].ia?this.N[d].Ii():this.N[d].b.pause();for(d=0;d<this.J.length;d++)this.J[d].b.pause()}else{var b=this.Hb(a);for(d=0;d<b.length;d++){var c=b[d];this.ji(c.id);c.ia?c.Ii():c.b.pause()}}}catch(k){this.M(k)}};b.prototype.Um=function(a,d){a=this.Hb(a);for(var b=0;b<a.length;b++){var c=a[b];0==d||1==d?c.ng&&c.ng(1==d):2==d&&c.re&&c.re()}};b.prototype.ni=function(a){var d;if(this.Fb)(d=this.ha)&&d.stopSound(a);else try{if("_main"===a){this.ji(a);for(d=0;d<this.N.length;d++)this.N[d].ia?
this.N[d].Te():(this.N[d].b.pause(),this.N[d].b.currentTime=0);for(d=0;d<this.J.length;d++)this.J[d].b.pause(),this.J[d].b.currentTime=0}else{var b=this.Hb(a);for(d=0;d<b.length;d++){var c=b[d];this.ji(c.id);c.ia?c.Te():c.b&&c.b.pause&&(c.b.pause(),c.b.currentTime=0,this.gf&&(c.Ed(),c.addElement()))}}}catch(k){this.M(k)}};b.prototype.ji=function(a){-1==this.Qc.indexOf(a)&&this.Qc.push(a);var d=this.ce.indexOf(a);-1!=d&&this.ce.splice(d,1);"_main"==a&&(this.ce=[])};b.prototype.Bp=function(a){-1!=this.Qc.indexOf("_main")&&
-1==this.ce.indexOf(a)&&this.ce.push(a);a=this.Qc.indexOf(a);-1!=a&&this.Qc.splice(a,1)};b.prototype.Kp=function(a){a=this.Hb(a);return 0<a.length?(a=a[0],a.ia?a.cn():a.b?a.b.currentTime:0):0};b.prototype.Lp=function(a,d){a=this.Hb(a);0<a.length&&(a=a[0],a.ia?(0>d&&(d=0),d>a.Sf.duration&&(d=a.Sf.duration-.1),a.dn(d)):a.b&&(0>d&&(d=0),d>a.b.duration&&(d=a.b.duration-.1),a.b.currentTime=d))};b.prototype.Gp=function(a,d){if(this.Fb){var b=this.ha;b&&b.setVolume(a,d)}else try{b=void 0;var c=Number(d);
1<c&&(c=1);0>c&&(c=0);"_videopanorama"===a&&this.s.b&&(this.s.b.volume=c);if("_main"===a){this.V=c;for(b=0;b<this.N.length;b++)this.N[b].b.volume=this.N[b].level*this.V;for(b=0;b<this.J.length;b++)this.J[b].b.volume=this.J[b].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=this.Hb(a);this.M(e);for(b=0;b<e.length;b++){var g=e[b];g.b&&null!=g.b.volume&&(g.b.volume=c*this.V);g.level=c}}}catch(f){this.M(f)}};b.prototype.ln=function(a,d){if(this.Fb){var b=this.ha;b&&b.changeVolume(a,d)}else try{var c=
b=void 0;"_videopanorama"===a&&this.s.b&&(this.s.b.volume=this.s.b.volume+Number(d));if("_main"===a){b=this.V;b+=Number(d);1<b&&(b=1);0>b&&(b=0);this.V=b;for(c=0;c<this.N.length;c++)this.N[c].b.volume=this.N[c].level*this.V;for(c=0;c<this.J.length;c++)this.J[c].b.volume=this.J[c].level*this.V;this.s.b&&(this.s.b.volume=this.V)}else{var e=this.Hb(a);for(c=0;c<e.length;c++){var g=e[c];b=g.level;b+=Number(d);1<b&&(b=1);0>b&&(b=0);g.level=b;g.b&&null!=g.b.volume&&(g.b.volume=b*this.V)}}}catch(f){this.M(f)}};
b.prototype.rp=function(a,d){a=this.Hb(a);for(var b=0;b<a.length;b++){var c=a[b];0==d?(c.Cf(!1),c.eb=!1):1==d?(c.Cf(!0),c.eb=!0):2==d&&c.b&&("visible"==c.b.style.visibility?(c.Cf(!1),c.eb=!1):(c.Cf(!0),c.eb=!0))}};b.prototype.mm=function(){try{for(var a=this,d=!1,b=!1,c=0;c<this.N.length;c++){var e=this.N[c];-1==e.loop||this.Ub(e.id)||-1!=this.Qc.indexOf(e.id)||-1!=this.Qc.indexOf("_main")&&-1==this.ce.indexOf(e.id)||(this.Ca&&this.La.enabled&&4!=e.mode&&6!=e.mode?this.La.xk?(e.ia?e.Yc():(e.b.play(),
e.b.currentTime=0),e.la=0,b=!0):d=!0:4==e.mode||6==e.mode||"_background"==e.id&&this.Ub(e.id)||(e.ia?e.Yc():(e.b.play(),e.b.currentTime&&(e.b.currentTime=0))))}d&&setTimeout(function(){a.La.Rp()},1E3*this.La.xb);b&&(this.La.Np=this.Ca.currentTime,this.La.Mp=setInterval(function(){a.La.yn()},10))}catch(r){this.M(r)}};b.prototype.Gk=function(){for(var a=0;a<this.La.Yg.length;a++)this.La.Fk(this.La.Yg[a])};b.prototype.Xl=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.b&&(this.Fa.removeChild(a.b.__div),
delete a.b),a.b=null;this.ja("hotspotsremoved",{})};b.prototype.Jj=function(a){this.ih=a;0!=a?this.T.style.zIndex=a.toString():this.T.style.zIndex="auto";this.Ga&&this.Ga.Zc&&(this.Ga.Zc.zIndex=(a+4).toString());this.Fa.style.zIndex=(a+4).toString();this.xa.style.zIndex=(a+3).toString();this.za.style.zIndex=(a+5).toString();for(var d=0;d<this.J.length+this.Xa.length;d++){var b=d<this.J.length?this.J[d]:this.Xa[d-this.J.length];b.b&&(b.b.style.zIndex=(a+(b.qb?8E4:0)).toString())}};b.prototype.zf=function(a){var d=
this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.xi)try{this.T.webkitRequestFullScreen?this.T.webkitRequestFullScreen():this.T.mozRequestFullScreen?this.T.mozRequestFullScreen():this.T.msRequestFullscreen?this.T.msRequestFullscreen():this.T.requestFullScreen?this.T.requestFullScreen():this.T.requestFullscreen&&this.T.requestFullscreen()}catch(h){this.M(h)}this.T.style.position="absolute";a=this.qe();this.T.style.left=window.pageXOffset-
a.x+this.margin.left+"px";this.T.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.Jj(10);document.body.style.overflow="hidden";d&&(this.ka&&this.ka.ggEnterFullscreen&&this.ka.ggEnterFullscreen(),this.ja("fullscreenenter",{}))}else{if(this.xi)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():
document.exitFullscreen&&document.exitFullscreen())}catch(h){this.M(h)}this.T.style.position="relative";this.T.style.left="0px";this.T.style.top="0px";this.Jj(0);document.body.style.overflow="";d&&(this.ka&&this.ka.ggExitFullscreen&&this.ka.ggExitFullscreen(),this.ja("fullscreenexit",{}))}this.Le()};b.prototype.si=function(){this.zf(!this.isFullscreen)};b.prototype.wn=function(){this.zf(!0)};b.prototype.exitFullscreen=function(){this.zf(!1)};b.prototype.Ln=function(){return this.isFullscreen};b.prototype.Pp=
function(a,d,b){this.l.Md=this.l.ph;this.l.Kf=this.l.fh;this.l.enabled=!0;this.l.Pe=this.l.enabled;this.l.active=!0;this.l.ld=0;var c=new Date;this.l.zd=0;this.l.startTime=c.getTime();a&&0!=a&&(this.l.speed=a);d&&(this.l.timeout=d);b&&(this.l.ri=b);this.ja("autorotatechanged",{})};b.prototype.Sp=function(){this.l.active=!1;this.l.enabled=!1;this.l.Pe=this.l.enabled;this.Ne=this.l.Uh=!1;this.u.active&&this.u.Hg&&(this.u.active=!1,this.u.Hg=!1,this.u.Eb=0);this.ja("autorotatechanged",{})};b.prototype.Wp=
function(){this.l.enabled=!this.l.active;this.l.Pe=this.l.enabled;this.l.active=this.l.enabled;this.l.ld=0;if(this.l.enabled){var a=new Date;this.l.zd=0;this.l.startTime=a.getTime();this.l.Md=this.l.ph;this.l.Kf=this.l.fh}this.ja("autorotatechanged",{})};b.prototype.Op=function(a){this.pb.od&&this.cm();this.Kb="";a&&""!=a&&(this.l.Md=a);this.l.Pe=this.l.enabled;this.l.Kf=!0;this.l.enabled=!0;this.l.active=!0;this.l.ld=0;a=new Date;this.l.zd=0;this.l.startTime=a.getTime();this.ja("autorotatechanged",
{})};b.prototype.cm=function(){this.pb.od=!1;this.pb.$i=!0;this.l.active=this.C.fe;this.ya.splice(this.ya.indexOf(this.w),1);0<this.ya.length&&(this.w=this.ya[0]);this.Kb="";this.Og(this.C.Th);this.Pg(this.C.zi);this.Ng(this.C.Lh);this.C.fe=!1;this.jf=(new Date).getTime()};b.prototype.wk=function(a){if(this.Od=document.getElementById(a)){this.Od.innerHTML="";this.T=document.createElement("div");this.T.onselectstart=function(){return!1};W&&this.T.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+
(this.Ia+"user-select: none;");this.T.setAttribute("style",a);this.Od.appendChild(this.T);this.D=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ia+"user-select: none;");W&&this.D.setAttribute("id","viewer");this.D.setAttribute("style",a);this.T.appendChild(this.D);if(this.Fb){var d=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+
(this.Ia+"user-select: none;");d.setAttribute("id",this.bj);d.setAttribute("style",a);this.D.appendChild(d)}this.Ga&&(this.Ga.Zc=document.createElement("canvas"),W&&this.Ga.Zc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ia+"user-select: none;"),a+=this.Ia+"pointer-events: none;",this.Ga.Zc.setAttribute("style",a),this.T.appendChild(this.Ga.Zc));this.Fa=document.createElement("div");W&&this.Fa.setAttribute("id",
"hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.lj&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.jd&&!this.Y&&(a+=this.Ia+"transform: translateZ(9999999px);");a+=this.Ia+"user-select: none;";this.Fa.setAttribute("style",a);this.T.appendChild(this.Fa);this.xa=document.createElement("canvas");W&&this.xa.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ia+"user-select: none;");a+=this.Ia+"pointer-events: none;";this.xa.setAttribute("style",a);this.T.appendChild(this.xa);this.za=document.createElement("div");W&&this.za.setAttribute("id","hotspottext");this.za.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");this.za.innerHTML=" Hotspot text!";this.T.appendChild(this.za);this.divSkin=this.ka=this.Fa;this.Jj(0)}else alert("container not found!")};b.prototype.yk=function(a){this.Ea=!0;return function(){a.Pa&&
(a.h&&a.h.complete?(a.loaded=!0,a.Pa.drawImage(a.h,0,0,a.width,a.height),a.h=null,a.Dd=null):a.Dd&&a.Dd.complete&&!a.loaded&&(a.Pa.drawImage(a.Dd,0,0,a.width,a.height),a.Dd=null))}};b.prototype.vk=function(a){var d,b=128;this.h.sf&&(this.D.style.backgroundColor=this.h.sf.replace("0x","#"));a?(b=this.Vf,this.Gf=1):this.qc>b&&(b=this.qc);for(d=0;6>d;d++){var c=this.nb.cb[d];a?(c.width=this.Vf,c.height=this.Vf):(c.K=document.createElement("canvas"),c.K.width=this.qc,c.K.height=this.qc,c.width=this.qc,
c.height=this.qc,c.Pa=c.K.getContext("2d"));var e="position:absolute;";e+="left: 0px;";e+="top: 0px;";e+="width: "+b+"px;";e+="height: "+b+"px;";a&&(e+="outline: 1px solid transparent;");e+=this.Ia+"transform-origin: 0% 0%;";e+="-webkit-user-select: none;";e+=this.Ia+"transform: ";var g="";var f=1;this.uf&&(f=100);g=4>d?g+("rotateY("+-90*d+"deg)"):g+("rotateX("+(4==d?-90:90)+"deg)");this.uf&&(g+=" scale("+f+")");g+=" translate3d("+-b/2+"px,"+-b/2+"px,"+-b*f/(2*this.Gf)+"px)";e+=g+";";c.dl=g;a||(c.K.setAttribute("style",
e),this.D.insertBefore(c.K,this.D.firstChild))}if(!a){for(d=0;6>d;d++)c=this.nb.cb[d],""!=this.Xe[d]&&(c.Dd=new Image,c.Dd.crossOrigin=this.crossOrigin,c.Dd.onload=this.yk(c),c.Dd.setAttribute("src",this.kc(this.Xe[d])),this.Qb.push(c.Dd));for(d=0;6>d;d++)c=this.nb.cb[d],c.loaded=!1,c.h=new Image,c.h.crossOrigin=this.crossOrigin,c.h.onload=this.yk(c),c.h.setAttribute("src",this.kc(this.th[d])),this.Qb.push(c.h)}};b.prototype.ei=function(){var a;this.Aa.ca.x=0;this.Aa.ca.y=0;if(this.Tc){for(a=0;a<
this.nb.cb.length;a++)this.nb.cb[a].K&&this.nb.cb[a].K.setAttribute&&(this.nb.cb[a].K.setAttribute("src",this.Ck),this.D.removeChild(this.nb.cb[a].K));if(this.h.I){for(a=0;a<this.h.I.length;a++){var b=this.h.I[a];for(e in b.U)if(b.U.hasOwnProperty(e)){var c=b.U[e];c.visible=!1;c.K&&(c.Pa&&c.Pa.clearRect(0,0,c.Pa.canvas.width,c.Pa.canvas.height),this.ti.push(c.K));c.h&&delete c.h;c.fb&&(this.H.deleteTexture(c.fb),this.gd--);c.Pa=null;c.K=null;c.h=null}delete b.U}delete this.h.I;this.h.I=null}}this.na.ei();
var e=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.nd?e.push(b):b.Ed();for(a=0;a<this.Xa.length;a++)this.Xa[a].Ed();this.A.wg=-1;this.xa.style.visibility="hidden";this.hb=0;this.Ee=[];this.La.Yg=[];for(a=0;a<this.N.length;a++)b=this.N[a],0==b.mode||b.Jl||this.Ee.push(b);this.J=e;this.Xa=[];this.s.b&&(this.T.removeChild(this.s.b),this.s.b=null,a=this.Hb("_videopanorama"),0<a.length&&(a[0].b=null));this.s.kd=!1;this.s.Kh=!1};b.prototype.$k=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");
window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{hh:screen.width*a,qg:screen.height*a}};b.prototype.Uk=function(){var a=this.$k();return a.hh>a.qg?a.hh:a.qg};b.prototype.Aj=function(a,b){var d=(new DOMParser).parseFromString(a,"text/xml");this.Ti=a;this.Sl(d,b);this.ha&&(this.M("Apply to Flash player"),this.ha.readConfigString(this.Ti),this.ha.setLocked(!0),this.ha.setSlaveMode(!0))};b.prototype.Rl=function(a,b,c){try{var d=void 0;d=new XMLHttpRequest;d.open("GET",a,!1);d.send(null);
if(d.responseXML){var e=a.lastIndexOf("/");0<=e&&(this.Nd=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.Nd=b);this.Aj(d.responseText,c)}else alert("Error loading panorama XML")}catch(r){alert("Error:"+r)}};b.prototype.ep=function(a,b,c,e){var d=new XMLHttpRequest;var l=this;d.onload=function(h){if(4<=d.readyState)if(d.responseXML){var k=a.lastIndexOf("/");0<=k&&(l.Nd=a.substr(0,k+1));3<=arguments.length&&null!=c&&(l.Nd=c);l.Aj(d.responseText,e);b&&b()}else alert("Error loading panorama XML");
else console.error("Wrong state loading XML:"+d.statusText)};d.onerror=function(){console.error("Error loading XML:"+d.statusText)};d.open("GET",a,!0);d.send(null)};b.prototype.Ji=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));(a=this.Pd[b])&&(b=a);a={oldNodeId:this.bb,nodeId:b};this.ja("beforechangenodeid",a);""!=this.bb&&-1==this.$j.indexOf(this.bb)&&this.$j.push(this.bb);this.zl=this.bb;this.bb=b;this.M("change active node: "+b);this.aa&&this.aa.changeActiveNode&&this.aa.changeActiveNode("{"+
b+"}");this.ja("changenodeid",a)};b.prototype.Rk=function(){return this.bb};b.prototype.Vk=function(){if(0<this.Ma.length){var a=this.Ma.indexOf(this.bb);a++;a>=this.Ma.length&&(a=0);return this.Ma[a]}return""};b.prototype.jo=function(){if(0<this.Ma.length){var a=this.Ma.indexOf(this.bb);a--;0>a&&(a=this.Ma.length-1);return this.Ma[a]}return""};b.prototype.Qn=function(){return this.zl};b.prototype.No=function(a){return-1!=this.$j.indexOf(a)};b.prototype.Sl=function(a,b){var d=a.firstChild;this.Ie=
[];this.Ma=[];this.Pd=[];for(a=d.firstChild;a;){if("map"==a.nodeName){var c={},e=a.getAttributeNode("title");e&&(c.title=e.nodeValue.toString());e=a.getAttributeNode("type");c.type=e.nodeValue.toString();"web"==c.type?(e=a.getAttributeNode("mapprovider"),c.mapprovider=e.nodeValue.toString(),e=a.getAttributeNode("mapstyle"),c.mapstyle=e.nodeValue.toString(),(e=a.getAttributeNode("mapurltemplate"))&&(c.mapurltemplate=e.nodeValue.toString()),(e=a.getAttributeNode("mapmaxzoom"))&&(c.mapmaxzoom=Number(e.nodeValue)),
(e=a.getAttributeNode("mapkey"))&&(c.mapkey=e.nodeValue.toString()),(e=a.getAttributeNode("styleurl"))&&(c.styleurl=e.nodeValue.toString())):(e=a.getAttributeNode("width"),c.width=Number(e.nodeValue),e=a.getAttributeNode("height"),c.height=Number(e.nodeValue),e=a.getAttributeNode("zoomlevels"),c.zoomlevels=Number(e.nodeValue),e=a.getAttributeNode("tileformat"),c.tileformat=e.nodeValue.toString(),e=a.getAttributeNode("bgcolor"),c.bgcolor=e.nodeValue.toString(),e=a.getAttributeNode("transparent"),c.transparent=
1==e.nodeValue,e=a.getAttributeNode("floorplannorth"),c.floorplannorth=Number(e.nodeValue));e=a.getAttributeNode("id");this.Sh[e.nodeValue.toString()]=c}a=a.nextSibling}if("tour"==d.nodeName){this.hf=!0;a="";(e=d.getAttributeNode("start"))&&(a=e.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(a=String(this.startNode),this.startNode="");this.hasOwnProperty("startView")&&this.startView&&("object"===typeof this.startView&&null!==this.startView?b=this.startView:""!=this.startView&&
(b=String(this.startView)),this.startView="");c=d.firstChild;var g="";for(d="";c;){if("panorama"==c.nodeName){if(e=c.getAttributeNode("id"))g=e.nodeValue.toString(),""==a&&(a=g),""==d&&(d=g),this.Ie[g]=c,this.Ma.push(g);for(e=c.firstChild;e;){if("userdata"==e.nodeName){var f=this.bg(e);this.yi[g]=f;f.customnodeid&&(this.Pd[f.customnodeid]=g);this.Ac[g]=this.Dk(e);this.mf[g]=this.Ek(e)}e=e.nextSibling}}if("masternode"==c.nodeName)for(e=c.firstChild;e;)"userdata"==e.nodeName&&(f=this.bg(e),this.yi._master=
f),e=e.nextSibling;c=c.nextSibling}this.Ie.hasOwnProperty(a)||(e=this.Pd[a])&&(a=e);this.Ie.hasOwnProperty(a)||(this.Mc("Start node "+a+" not found!"),a=d);this.zj(this.Ie[a],b);this.Ji("{"+a+"}");this.bb=a}else this.hf=!1,this.zj(d,b),this.Ji(""),this.Ma.push("");this.ja("configloaded",{})};b.prototype.zj=function(a,b){this.Xl();this.Ga&&this.Ga.gp();this.xf(this.ob);this.ei();this.xg=0;for(var d=a.firstChild,c,e,g=0;d;){if("view"==d.nodeName){if(c=d.getAttributeNode("fovmode"))this.f.mode=Number(c.nodeValue);
c=d.getAttributeNode("pannorth");this.pan.uj=1*(c?c.nodeValue:0);for(var f=d.firstChild;f;){"start"==f.nodeName&&(c=f.getAttributeNode("pan"),this.pan.c=Number(c?c.nodeValue:0),this.pan.Qa=this.pan.c,c=f.getAttributeNode("tilt"),this.i.c=Number(c?c.nodeValue:0),this.i.Qa=this.i.c,c=f.getAttributeNode("roll"),this.O.c=Number(c?c.nodeValue:0),this.O.Qa=this.O.c,c=f.getAttributeNode("fov"),this.f.c=Number(c?c.nodeValue:70),this.f.Qa=this.f.c,c=f.getAttributeNode("projection"),this.$h=Number(c?c.nodeValue:
4),this.Oc(this.$h));"min"==f.nodeName&&(c=f.getAttributeNode("pan"),this.pan.min=1*(c?c.nodeValue:0),c=f.getAttributeNode("tilt"),this.i.min=1*(c?c.nodeValue:-90),c=f.getAttributeNode("fov"),this.f.min=1*(c?c.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),c=f.getAttributeNode("fovpixel"),this.f.Gg=1*(c?c.nodeValue:0));if("max"==f.nodeName){c=f.getAttributeNode("pan");this.pan.max=1*(c?c.nodeValue:0);c=f.getAttributeNode("tilt");this.i.max=1*(c?c.nodeValue:90);c=f.getAttributeNode("fov");this.f.max=
1*(c?c.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(c=f.getAttributeNode("fovstereographic"))this.f.sj=1*c.nodeValue;if(c=f.getAttributeNode("fovfisheye"))this.f.rj=1*c.nodeValue;if(c=f.getAttributeNode("scaletofit"))this.B.bm=1==c.nodeValue}if("flyin"==f.nodeName){if(c=f.getAttributeNode("projection"))this.tc.Eb=Number(c.nodeValue);if(c=f.getAttributeNode("pan"))this.tc.pan=parseFloat(c.nodeValue);if(c=f.getAttributeNode("tilt"))this.tc.i=parseFloat(c.nodeValue);if(c=f.getAttributeNode("fov"))this.tc.f=
parseFloat(c.nodeValue)}f=f.nextSibling}}if("autorotate"==d.nodeName){if(c=d.getAttributeNode("speed"))this.l.speed=1*c.nodeValue;if(c=d.getAttributeNode("delay"))this.l.timeout=1*c.nodeValue;if(c=d.getAttributeNode("returntohorizon"))this.l.ri=1*c.nodeValue;if(c=d.getAttributeNode("nodedelay"))this.l.Yh=1*c.nodeValue;if(c=d.getAttributeNode("noderandom"))this.l.tj=1==c.nodeValue;this.Rd&&(this.l.enabled=!0,this.l.Pe=!0,this.l.active=!1);this.l.zd=0;if(c=d.getAttributeNode("startloaded"))this.l.Vg=
1==c.nodeValue,this.l.Vg&&(this.l.active=!1);if(c=d.getAttributeNode("useanimation"))this.l.fh=1==c.nodeValue,this.l.Kf=this.l.fh;if(c=d.getAttributeNode("syncanimationwithvideo"))this.l.Qj=1==c.nodeValue}if("animation"==d.nodeName){if(c=d.getAttributeNode("syncanimationwithvideo"))this.l.Qj=1==c.nodeValue;if(c=d.getAttributeNode("useinautorotation"))this.l.fh=1==c.nodeValue;if(c=d.getAttributeNode("animsequence"))this.l.ph=c.nodeValue,this.Rd&&(this.l.Md=this.l.ph);this.ya=[];for(f=d.firstChild;f;){if("clip"==
f.nodeName){this.w=new n.ck;if(c=f.getAttributeNode("animtitle"))this.w.Oe=c.nodeValue.toString();if(c=f.getAttributeNode("cliptitle"))this.w.ab=c.nodeValue.toString();if(c=f.getAttributeNode("nodeid"))this.w.xq=c.nodeValue.toString();if(c=f.getAttributeNode("length"))this.w.length=Number(c.nodeValue);if(c=f.getAttributeNode("animtype"))this.w.Xm=Number(c.nodeValue);if(c=f.getAttributeNode("nextcliptitle"))this.w.Hl=c.nodeValue.toString();if(c=f.getAttributeNode("nextclipnodeid"))this.w.Xh=c.nodeValue.toString();
if(c=f.getAttributeNode("nextclipstartview"))this.w.Mo=c.nodeValue.toString();if(c=f.getAttributeNode("transitiontype"))this.w.bq=Number(c.nodeValue);var m=f.firstChild;for(this.w.W=[];m;){if("keyframe"==m.nodeName){var y=new n.Fc;if(c=m.getAttributeNode("time"))y.time=Number(c.nodeValue);if(c=m.getAttributeNode("value"))y.value=Number(c.nodeValue);if(c=m.getAttributeNode("valuestring"))y.Yj=c.nodeValue.toString();if(c=m.getAttributeNode("transitiontime"))y.xb=Number(c.nodeValue);c=m.getAttributeNode("type");
var p=0;c&&(y.type=Number(c.nodeValue),p=Number(c.nodeValue));if(c=m.getAttributeNode("property"))y.ub=Number(c.nodeValue);if(c=m.getAttributeNode("additionaltrackid"))y.nh=c.nodeValue.toString();if(1==p||2==p){if(c=m.getAttributeNode("bezierintime"))y.ge=Number(c.nodeValue);if(c=m.getAttributeNode("bezierinvalue"))y.Wc=Number(c.nodeValue);if(c=m.getAttributeNode("bezierouttime"))y.he=Number(c.nodeValue);if(c=m.getAttributeNode("bezieroutvalue"))y.ie=Number(c.nodeValue)}this.w.W.push(y)}m=m.nextSibling}this.ya.push(this.w)}f=
f.nextSibling}}"input"==d.nodeName&&(e||(e=d));if(e)for(m=0;6>m;m++)c=e.getAttributeNode("prev"+m+"url"),this.Xe[m]=c?String(c.nodeValue):"";"altinput"==d.nodeName&&(f=0,(c=d.getAttributeNode("screensize"))&&(f=1*c.nodeValue),0<f&&f<=this.Uk()&&f>g&&(g=f,e=d));if("control"==d.nodeName&&this.Rd){if(c=d.getAttributeNode("simulatemass"))this.Aa.enabled=1==c.nodeValue;if(c=d.getAttributeNode("rubberband"))this.B.am=1==c.nodeValue;if(c=d.getAttributeNode("locked"))this.B.Ab=1==c.nodeValue;c&&(this.B.ue=
1==c.nodeValue);if(c=d.getAttributeNode("lockedmouse"))this.B.Ab=1==c.nodeValue;if(c=d.getAttributeNode("lockedkeyboard"))this.B.ue=1==c.nodeValue;if(c=d.getAttributeNode("lockedkeyboardzoom"))this.B.Co=1==c.nodeValue;if(c=d.getAttributeNode("lockedwheel"))this.B.md=1==c.nodeValue;if(c=d.getAttributeNode("invertwheel"))this.B.ml=1==c.nodeValue;if(c=d.getAttributeNode("speedwheel"))this.B.jm=1*c.nodeValue;if(c=d.getAttributeNode("invertcontrol"))this.B.yd=1==c.nodeValue;if(c=d.getAttributeNode("sensitivity"))this.B.sensitivity=
1*c.nodeValue,1>this.B.sensitivity&&(this.B.sensitivity=1);if(c=d.getAttributeNode("dblclickfullscreen"))this.B.Vi=1==c.nodeValue;if(c=d.getAttributeNode("contextfullscreen"))this.B.Zf=1==c.nodeValue;if(c=d.getAttributeNode("contextprojections"))this.B.rh=1==c.nodeValue;if(c=d.getAttributeNode("hideabout"))this.B.ef=1==c.nodeValue;for(f=d.firstChild;f;)"menulink"==f.nodeName&&(m={text:"",url:""},c=f.getAttributeNode("text"),m.text=c.nodeValue,c=f.getAttributeNode("url"),m.url=c.nodeValue,this.Fg.push(m)),
f=f.nextSibling}if("transition"==d.nodeName&&this.Rd){if(c=d.getAttributeNode("enabled"))this.C.enabled=1==c.nodeValue;if(c=d.getAttributeNode("blendtime"))this.C.Uf=c.nodeValue;if(c=d.getAttributeNode("blendcolor"))this.C.Re=c.nodeValue.toString();if(c=d.getAttributeNode("type"))this.C.type=c.nodeValue.toString();if(c=d.getAttributeNode("softedge"))this.C.Cc=1*c.nodeValue;if(c=d.getAttributeNode("zoomin"))this.C.Oa=c.nodeValue;if(c=d.getAttributeNode("zoomout"))this.C.bc=c.nodeValue;if(c=d.getAttributeNode("zoomfov"))this.C.Of=
c.nodeValue;if(c=d.getAttributeNode("zoomspeed"))this.C.de=c.nodeValue;if(c=d.getAttributeNode("zoomoutpause"))this.C.Pf=1==c.nodeValue;"cut"==this.C.type&&(this.C.Uf=0)}if("soundstransition"==d.nodeName){if(c=d.getAttributeNode("enabled"))this.La.enabled=1==c.nodeValue;if(c=d.getAttributeNode("transitiontime"))this.La.xb=1*c.nodeValue;if(c=d.getAttributeNode("crossfade"))this.La.xk=1==c.nodeValue}if("flyintransition"==d.nodeName){if(c=d.getAttributeNode("enabled"))this.pb.enabled=1==c.nodeValue&&
this.Y;if(c=d.getAttributeNode("speed"))this.pb.speed=1*c.nodeValue}"userdata"==d.nodeName&&(this.userdata=this.Lf=this.bg(d),this.Ac[a.id]||(this.Ac[a.id]=this.Dk(d),this.mf[a.id]=this.Ek(d)));if("hotspots"==d.nodeName)for(f=d.firstChild;f;){if("label"==f.nodeName&&this.Rd){m=this.A.Sj;if(c=f.getAttributeNode("enabled"))m.enabled=1==c.nodeValue;if(c=f.getAttributeNode("width"))m.width=1*c.nodeValue;if(c=f.getAttributeNode("height"))m.height=1*c.nodeValue;if(c=f.getAttributeNode("textcolor"))m.Tj=
1*c.nodeValue;if(c=f.getAttributeNode("textalpha"))m.Rj=1*c.nodeValue;if(c=f.getAttributeNode("background"))m.background=1==c.nodeValue;if(c=f.getAttributeNode("backgroundalpha"))m.dc=1*c.nodeValue;if(c=f.getAttributeNode("backgroundcolor"))m.ec=1*c.nodeValue;if(c=f.getAttributeNode("border"))m.Hi=1*c.nodeValue;if(c=f.getAttributeNode("bordercolor"))m.hc=1*c.nodeValue;if(c=f.getAttributeNode("borderalpha"))m.gc=1*c.nodeValue;if(c=f.getAttributeNode("borderradius"))m.Gi=1*c.nodeValue;if(c=f.getAttributeNode("wordwrap"))m.Ai=
1==c.nodeValue}if("polystyle"==f.nodeName&&this.Rd){if(c=f.getAttributeNode("mode"))this.A.mode=1*c.nodeValue;if(c=f.getAttributeNode("bordercolor"))this.A.hc=1*c.nodeValue;if(c=f.getAttributeNode("backgroundcolor"))this.A.ec=1*c.nodeValue;if(c=f.getAttributeNode("borderalpha"))this.A.gc=1*c.nodeValue;if(c=f.getAttributeNode("backgroundalpha"))this.A.dc=1*c.nodeValue;if(c=f.getAttributeNode("handcursor"))this.A.cf=1==c.nodeValue}c=void 0;"hotspot"==f.nodeName&&(c=new n.lh(this),c.type="point",c.Mb(f),
this.P.push(c));"polyhotspot"==f.nodeName&&(c=new n.lh(this),c.type="poly",c.Mb(f),this.P.push(c));f=f.nextSibling}if("sounds"==d.nodeName||"media"==d.nodeName)for(f=d.firstChild;f;){if("sound"==f.nodeName&&!this.Il)for(c=new n.Rm(this),c.Mb(f),this.Fb||c.addElement(),m=0;m<this.Ee.length;m++)c.id==this.Ee[m].id&&(this.Ee.splice(m,1),m--);"video"==f.nodeName&&(c=new n.gk(this),c.Mb(f),this.Fb||c.addElement());"image"==f.nodeName&&(c=new n.Pm(this),c.Mb(f),this.Fb||c.addElement());"lensflare"==f.nodeName&&
this.Ga&&(c=new n.Qm(this),c.Mb(f),this.Ga.Cg.push(c));f=f.nextSibling}d=d.nextSibling}for(m=0;m<this.Ee.length;m++){a=this.Ee[m];if(this.Ca&&this.La.enabled&&this.Ub(a.id))this.La.Yg.push(a);else{try{a.ia?a.Te():a.b.pause()}catch(t){this.M(t)}a.Ed()}this.N.splice(this.N.indexOf(a),1)}1!=this.C.Oa&&2!=this.C.Oa&&this.Gk();this.gb.gi=!0;b&&("object"===typeof b&&null!==b?(b.hasOwnProperty("pan")&&this.Af(Number(b.pan)),b.hasOwnProperty("tilt")&&this.Bf(Number(b.tilt)),b.hasOwnProperty("fov")&&this.yf(Number(b.fov)),
b.hasOwnProperty("projection")&&this.Oc(Number(b.projection))):""!=b&&(b=b.toString().split("/"),4<b.length&&this.Oc(Number(b[4])),0<b.length&&(c=String(b[0]),"N"==c.charAt(0)?this.Hj(Number(c.substr(1))):"S"==c.charAt(0)?this.Hj(-180+Number(c.substr(1))):this.Af(Number(c))),1<b.length&&this.Bf(Number(b[1])),2<b.length&&this.yf(Number(b[2]))));if(e){for(m=0;6>m;m++)(c=e.getAttributeNode("tile"+m+"url"))&&(this.th[m]=String(c.nodeValue)),c=e.getAttributeNode("tile"+m+"url1");for(m=0;6>m;m++)(c=e.getAttributeNode("prev"+
m+"url"))&&(this.Xe[m]=String(c.nodeValue));if(c=e.getAttributeNode("tilesize"))this.qc=1*c.nodeValue;if(c=e.getAttributeNode("canvassize"))this.Vf=Number(c.nodeValue);if(c=e.getAttributeNode("tilescale"))this.Gf=1*c.nodeValue;if(c=e.getAttributeNode("leveltileurl"))this.h.El=c.nodeValue;if(c=e.getAttributeNode("leveltilesize"))this.h.G=Number(c.nodeValue);if(c=e.getAttributeNode("levelbias"))this.h.Cl=Number(c.nodeValue);if(c=e.getAttributeNode("levelbiashidpi"))this.h.Dl=Number(c.nodeValue);c=e.getAttributeNode("overlap");
this.Za.O=0;this.Za.pitch=0;c&&(this.h.Ja=Number(c.nodeValue));if(c=e.getAttributeNode("levelingroll"))this.Za.O=Number(c.nodeValue);if(c=e.getAttributeNode("levelingpitch"))this.Za.pitch=Number(c.nodeValue);this.hb=0;(c=e.getAttributeNode("flat"))&&1==c.nodeValue&&(this.hb=2);c=e.getAttributeNode("width");this.h.width=1*(c?c.nodeValue:1);c=e.getAttributeNode("height");this.h.height=1*(c?c.nodeValue:this.h.width);this.s.src=[];this.h.I=[];for(f=e.firstChild;f;){if("preview"==f.nodeName){if(c=f.getAttributeNode("color"))this.h.sf=
c.nodeValue;if(c=f.getAttributeNode("strip"))this.h.Pl=1==c.nodeValue}if("video"==f.nodeName){if(c=f.getAttributeNode("format"))"3x2"==c.nodeValue&&(this.s.format=14),"equirectangular"==c.nodeValue&&(this.s.format=1);if(c=f.getAttributeNode("flipy"))this.s.cj=Number(c.nodeValue);if(c=f.getAttributeNode("startmutedmobile"))this.s.lm=1==c.nodeValue;if(c=f.getAttributeNode("bleed"))this.s.Qe=Number(c.nodeValue);if(c=f.getAttributeNode("endaction"))this.s.me=String(c.nodeValue);if(c=f.getAttributeNode("width"))this.s.width=
Number(c.nodeValue);if(c=f.getAttributeNode("height"))this.s.height=Number(c.nodeValue);for(m=f.firstChild;m;)"source"==m.nodeName&&(c=m.getAttributeNode("url"))&&this.s.src.push(c.nodeValue.toString()),m=m.nextSibling}if("level"==f.nodeName){e=new n.fk;c=f.getAttributeNode("width");e.width=1*(c?c.nodeValue:1);c=f.getAttributeNode("height");e.height=1*(c?c.nodeValue:e.width);if(c=f.getAttributeNode("preload"))e.cache=1==c.nodeValue;if(c=f.getAttributeNode("preview"))e.rf=1==c.nodeValue;e.L=Math.floor((e.width+
this.h.G-1)/this.h.G);e.ea=Math.floor((e.height+this.h.G-1)/this.h.G);this.h.I.push(e)}f=f.nextSibling}this.h.nj=this.h.I.length}this.df=!0;this.ah&&(this.Y=this.Tc=!1,this.ic||(this.M("dummy rendering"),this.ic=document.createElement("canvas"),this.ic.width=100,this.ic.height=100,this.ic.id="dummycanvas",this.D.appendChild(this.ic)),this.Sc());this.Y&&this.H&&(this.na.kl(this.Gf),this.na.ll());this.Tc&&(0<this.h.I.length?this.vk(!0):this.vk(!1),this.xg=0);var q=this;0<this.h.I.length&&this.h.Pl&&
0==this.hb&&(b=new Image,e=new n.fk,e.rf=!0,e.cache=!0,e.L=e.ea=0,e.height=e.width=0,this.h.I.push(e),b.crossOrigin=this.crossOrigin,b.onload=this.na.Lo(b),b.setAttribute("src",this.He(6,this.h.nj-1,0,0)));if(0<this.s.src.length&&this.Y)if(this.dh){this.s.b=document.createElement("video");this.s.b.crossOrigin=this.crossOrigin;this.s.b.setAttribute("style","display:none; max-width:none;");this.s.b.setAttribute("playsinline","playsinline");(this.Kc||this.Td)&&this.dg&&this.s.lm&&this.s.b.setAttribute("muted",
"muted");this.s.b.preload=!0;this.s.b.volume=this.V;this.T.appendChild(this.s.b);this.s.kd=!1;this.s.nm=!1;this.s.b.oncanplay=function(){if(!q.s.kd){q.s.Kh=!0;var a,b,d=[],c=new n.wa,e=q.H,f=q.s.b.videoWidth/3;q.s.width=q.s.b.videoWidth;q.s.height=q.s.b.videoHeight;for(a=0;6>a;a++){var h=a%3*f+q.s.Qe;var k=h+f-2*q.s.Qe;var g=4;3>a&&(g+=f);var l=g+f-2*q.s.Qe;for(b=0;4>b;b++){c.x=-1;c.y=-1;c.z=1;for(var m=0;m<b;m++)c.$l();d.push((0<c.x?h:k)/(3*f),(0<c.y?l:g)/(2*f))}}e.bindBuffer(e.ARRAY_BUFFER,q.s.oi);
e.bufferData(e.ARRAY_BUFFER,new Float32Array(d),e.STATIC_DRAW)}};"exit"==this.s.me?this.s.b.onended=function(){q.s.Kh=!1;q.s.kd=!1;q.T.removeChild(q.s.b);q.s.b=null;q.update()}:"stop"==this.s.me?q.s.b.onended=function(){q.update()}:"{"==this.s.me.charAt(0)?this.s.b.onended=function(){q.ye(q.s.me,"$fwd")}:this.s.b.loop=!0;for(m=0;m<this.s.src.length;m++)e=document.createElement("source"),e.setAttribute("src",this.kc(this.s.src[m])),this.s.b.appendChild(e);e=this.Hb("_videopanorama");0<e.length?e[0].b=
this.s.b:this.Tl("_videopanorama",this.s.b);this.s.b.play()}else"{"==this.s.me.charAt(0)&&q.ye(q.s.me,"$fwd");this.hk();this.C.Jd||this.mm();this.update();this.Rd&&(this.Rd=!1,this.ka&&this.ka.ggViewerInit&&this.ka.ggViewerInit(),this.pb.enabled&&0==this.hb&&this.Y&&(this.Oc(9),this.pan.c=this.tc.pan,this.i.c=this.tc.i,this.f.c=this.tc.f,this.Ka=this.tc.Eb,this.w=this.hg(!1),this.pan.c=this.w.W[0].value,this.i.c=this.w.W[1].value,this.f.c=this.w.W[2].value,3==this.w.W[3].ub&&this.Oc(this.w.W[3].value),
this.Kb=this.w.ab,this.C.Th=this.B.Ab,this.C.zi=this.B.md,this.C.Lh=this.B.ue,this.l.active=!1,this.l.zh=!0));this.Sc()};b.prototype.vj=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.ye(this.kc(a),b):window.open(this.kc(a),b))};b.prototype.Qp=function(){this.df=this.isLoaded=!1;this.checkLoaded=this.Qb=[];this.ai=0;this.ka&&this.ka.ggReLoaded&&this.ka.ggReLoaded();this.ja("beforechangenode",{})};b.prototype.ye=function(a,b){if(""!=a&&"{}"!=
a){this.Qp();this.aa&&this.aa.hotspotProxyOut&&this.aa.hotspotProxyOut(this.sa.id,this.sa.url);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var d="",c=null;"object"===typeof b&&null!==b?c=b:b&&(d=b.toString());d=d.replace("$cur",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());d=d.replace("$(cur)",this.pan.c+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());d=d.replace("$fwd","N"+this.pe()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());d=d.replace("$(fwd)","N"+this.pe()+"/"+this.i.c+"/"+
this.f.c+"//"+this.ra());d=d.replace("$bwd","S"+this.pe()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());d=d.replace("$(bwd)","S"+this.pe()+"/"+this.i.c+"/"+this.f.c+"//"+this.ra());d=d.replace("$ap",String(this.pan.c));d=d.replace("$(ap)",String(this.pan.c));d=d.replace("$an",String(this.pe()));d=d.replace("$(an)",String(this.pe()));d=d.replace("$at",String(this.i.c));d=d.replace("$(at)",String(this.i.c));d=d.replace("$af",String(this.f.c));d=d.replace("$(af)",String(this.f.c));d=d.replace("$ar",String(this.ra()));
d=d.replace("$(ar)",String(this.ra()));""!=d&&(b=d.split("/"),3<b.length&&""!=b[3]&&(this.startNode=b[3]));c=null!==c?c:d;this.ua();if("{"==a.charAt(0)){b=a.substr(1,a.length-2);var e=this.Pd[b];e&&(b=e);e=this.C;var g=this.H;if(this.Ie[b]){this.qh=!0;if(this.C.enabled&&this.Y&&this.C.ac){e.Je||e.Jd||(e.Th=this.B.Ab,e.zi=this.B.md,e.Lh=this.B.ue,this.Og(!0),this.Pg(!0),this.Ng(!0));var f=void 0;"wipeleftright"==e.type?f=1:"wiperightleft"==e.type?f=2:"wipetopbottom"==e.type?f=3:"wipebottomtop"==e.type?
f=4:"wiperandom"==e.type&&(f=Math.ceil(4*Math.random()));e.Ui=f;g.bindFramebuffer(g.FRAMEBUFFER,e.ac);g.viewport(0,0,e.ac.width,e.ac.height);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);e.Xg=!0;this.$g();e.Xg=!1;g.bindFramebuffer(g.FRAMEBUFFER,null);g.viewport(0,0,this.rb.width,this.rb.height);g=new Date;this.sa!=this.ob?(e.jh=this.sa.Lb/this.o.width,e.kh=1-this.sa.vb/this.o.height):(e.jh=.5,e.kh=.5);1!=e.Oa&&2!=e.Oa?(e.Oj=g.getTime(),e.Je=!0):(e.Im=g.getTime(),e.Jd=!0,e.yb=Math.sin(this.Tb()/2*
Math.PI/180)/Math.sin(e.Of/2*Math.PI/180),e.yb=Math.max(e.yb,1),e.Hm=1/e.de*e.yb*.3)}this.zj(this.Ie[b],c);this.Ji(a);e.enabled&&this.Y&&0!=e.bc&&(e.Fe=this.lg(),e.Ge=this.Dh(),e.Id=this.Tb(),e.qd=this.ra(),1==e.bc||3==e.bc?this.Rg(e.Of):2==e.bc?this.Rg(this.ig()+(this.ig()-e.Of)):4==e.bc&&(this.Oc(this.tc.Eb),this.Af(this.tc.pan),this.Bf(this.tc.i),this.Rg(this.tc.f)),e.Pf||1==e.Oa||2==e.Oa||(4==e.bc?(this.w=this.hg(!0,e.Fe,e.Ge,e.Id),this.Kb=this.w.ab,this.l.active=!0,this.pb.od=!0):this.moveTo(e.Fe,
e.Ge,e.Id,e.de,0,e.qd)));this.ha&&this.ha.openNext(a,d);this.C.Jd||this.C.Je||(this.ga&&this.Qi(),this.qh=!1)}else{this.Mc("invalid node id: "+b);return}}else this.Rl(a,null,c);this.ja("changenode",{});this.update(5)}};b.prototype.Xn=function(){return this.df?this.hf?this.Ma.slice(0):[""]:[]};b.prototype.bg=function(a){var b;var c={title:"",description:"",author:"",datetime:"",copyright:"",source:"",information:"",comment:"",latitude:0,longitude:0,customnodeid:"",tags:[]};if(a&&((b=a.getAttributeNode("title"))&&
(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=
b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.Dk=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x");
e.x=Number(a.nodeValue);a=c.getAttributeNode("y");e.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.Ek=function(a){for(var b={},c=a.firstChild;c;){if("mapcoords"==c.nodeName){var e={x:0,y:0};a=c.getAttributeNode("x_floorplan_percent");e.x=Number(a.nodeValue);a=c.getAttributeNode("y_floorplan_percent");e.y=Number(a.nodeValue);a=c.getAttributeNode("mapid");b[a.nodeValue.toString()]=e}c=c.nextSibling}return b};b.prototype.dj=function(a){return a?
this.yi[a]?this.yi[a]:this.bg():this.Lf};b.prototype.Yn=function(a){a=this.dj(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.ao=function(a){return this.dj(a).title};b.prototype.af=function(a,b){var c;for(c=0;c<this.w.W.length;c++)if(this.w.W[c].time==a&&this.w.W[c].ub==b)return this.w.W[c];return!1};b.prototype.Wn=function(a){var b,c=1E5,e=a,g=!1;for(b=0;b<this.w.W.length;b++)this.w.W[b].ub==a.ub&&this.w.W[b].time>a.time&&
this.w.W[b].time<c&&(e=this.w.W[b],c=e.time,g=!0);return g?e:!1};b.prototype.Dn=function(a){for(var b=[],c=0;c<this.w.W.length;c++)if(this.w.W[c].time<=a&&4==this.w.W[c].ub){for(var e=!1,g=0;g<b.length;g++)if(b[g].nh==this.w.W[c].nh){b[g].time<this.w.W[c].time?b.splice(g,1):e=!0;break}e||b.push(this.w.W[c])}return b};b.prototype.hg=function(a,b,c,e){for(var d=0;d<this.ya.length;d++)if(this.ya[d].ab&&0==this.ya[d].ab.indexOf("__FlyIn"))return this.ya[d];d=new n.bk;d.ab="__FlyIn";d.Ef=this.pan.c;d.Tg=
this.i.c;d.Hd=this.f.c;d.Sg=this.Ka;d.qd=this.$h;a?(d.Ye=!1,d.ke=!1,d.speed=this.C.de,d.Rc=b,d.ae=c,d.Ff=e):(d.Ye=!0,d.ke=!0,d.speed=this.pb.speed,d.Rc=this.pan.Qa,d.ae=this.i.Qa,d.Ff=this.f.Qa);return this.Ok(d)};b.prototype.Ok=function(a){var b=new n.ck;b.ab=a.ab;b.Oe="";b.W=[];for(var c=a.Sg!=a.qd&&-1!=a.qd;-180>a.Rc;)a.Rc=a.Rc+360;for(;180<a.Rc;)a.Rc=a.Rc-360;var e=a.Rc-a.Ef;if(360==this.pan.max-this.pan.min){for(;-180>e;)e+=360;for(;180<e;)e-=360}var g=a.ae-a.Tg,r=a.Ff-a.Hd,f=Math.round(Math.sqrt(e*
e+g*g+r*r)/a.speed*.33);c&&(f=Math.max(10,f));b.length=f;if(a.le){var m=Math.ceil(.7*f);m=Math.min(15,m);m=Math.max(5,m);b.length=f+m;var y=.33*m}var p=a.Ff,q=f,t=0,v=f-1;if(c){var u=a.Hd,x=void 0;4==a.qd?x=120:x=this.jg(a.qd);var A=a.Ff;r=A-a.Hd;var w=new n.rc(0,a.Hd),B=new n.rc(f,A),z=new n.rc,C=new n.rc;C.Ya(f/3,a.Hd+r/3);z.Ya(2*f/3,A-r/3);if(u>x)for(;t<=f&&u>x;)u=new n.rc,u.Fi(w,B,C,z,t),u=u.y,t++;else t=1;t>=.8*f&&(q=t=Math.round(.8*f));0==t&&(t=1);x=void 0;4==a.Sg?x=120:x=this.jg(a.Sg);u=a.Ff;
if(u>x)for(;v>t&&u>x;)u=new n.rc,u.Fi(w,B,C,z,v),u=u.y,v--}w=new n.Fc;w.time=0;w.ub=0;w.value=a.Ef;w.type=1;w.he=f/3;w.ie=a.Ye?a.Ef:a.Ef+e/3;b.W.push(w);w=new n.Fc;w.time=0;w.ub=1;w.value=a.Tg;w.type=1;w.he=f/3;w.ie=a.Ye?a.Tg:a.Tg+g/3;b.W.push(w);w=new n.Fc;w.time=0;w.ub=2;w.value=a.Hd;w.type=1;w.he=f/3;w.ie=a.Ye?a.Hd:a.Hd+r/3;b.W.push(w);w=new n.Fc;w.time=0;w.ub=3;w.value=a.Sg;w.type=0;w.xb=0;b.W.push(w);c&&(w=new n.Fc,w.time=t,w.ub=3,w.value=a.qd,w.type=0,w.xb=v-t,b.W.push(w));w=new n.Fc;w.time=
f;w.ub=0;w.value=a.Ef+e;w.type=1;w.ge=2*f/3;a.ke&&!a.le?w.Wc=w.value:w.Wc=w.value-e/3;a.le&&(w.he=f+y,w.ie=w.value+y/f*e);b.W.push(w);w=new n.Fc;w.time=f;w.ub=1;w.value=a.ae;w.type=1;w.ge=2*f/3;a.ke&&!a.le?w.Wc=a.ae:w.Wc=a.ae-g/3;a.le&&(w.he=f+y,w.ie=w.value+y/f*g);b.W.push(w);w=new n.Fc;w.time=q;w.ub=2;w.value=p;w.type=1;w.ge=2*q/3;a.ke?w.Wc=p:w.Wc=p-r/3;b.W.push(w);a.le&&(w=new n.Fc,w.time=f+m,w.ub=0,w.value=a.Rc,w.type=1,w.ge=f+m-y,w.Wc=a.Rc,b.W.push(w),w=new n.Fc,w.time=f+m,w.ub=1,w.value=a.ae,
w.type=1,w.ge=f+m-y,w.Wc=a.ae,b.W.push(w));this.ya.push(b);return b};b.prototype.oq=function(){this.s.b&&this.s.b.play()};b.prototype.pq=function(){this.s.b&&(this.s.b.pause(),this.s.b.currentTime=0)};b.prototype.nq=function(){this.s.b&&this.s.b.pause()};b.prototype.Fp=function(a){this.s.b&&(0>a&&(a=0),a>this.s.b.duration&&(a=this.s.b.duration-.1),this.s.b.currentTime=a,this.update())};b.prototype.po=function(){return this.s.b?this.s.b.currentTime:0};b.prototype.oo=function(){if(this.s.b)return this.s.b};
b.prototype.Ep=function(a){if(this.s.b){var b=!this.s.b.paused&&!this.s.b.ended,c=this.s.b.currentTime;this.s.b.pause();isNaN(parseInt(a,10))?this.s.b.src=String(a):this.s.b.src=this.s.src[parseInt(a,10)];b&&(this.s.b.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.s.b.currentTime=c}};b.prototype.vn=function(){this.Il=!0};return b}();n.a=c})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=U;window.ggHasWebGL=V;window.pano2vrPlayer=ggP2VR.a;
ggP2VR.a.prototype.getVersion=ggP2VR.a.prototype.cl;ggP2VR.a.prototype.readConfigString=ggP2VR.a.prototype.Aj;ggP2VR.a.prototype.readConfigUrl=ggP2VR.a.prototype.Rl;ggP2VR.a.prototype.readConfigUrlAsync=ggP2VR.a.prototype.ep;ggP2VR.a.prototype.readConfigXml=ggP2VR.a.prototype.Sl;ggP2VR.a.prototype.openUrl=ggP2VR.a.prototype.vj;ggP2VR.a.prototype.openNext=ggP2VR.a.prototype.ye;ggP2VR.a.prototype.setMargins=ggP2VR.a.prototype.qp;ggP2VR.a.prototype.addListener=ggP2VR.a.prototype.addListener;
ggP2VR.a.prototype.on=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.removeEventListener=ggP2VR.a.prototype.removeEventListener;ggP2VR.a.prototype.detectBrowser=ggP2VR.a.prototype.Bk;ggP2VR.a.prototype.initWebGL=ggP2VR.a.prototype.Jc;ggP2VR.a.prototype.getPercentLoaded=ggP2VR.a.prototype.eo;ggP2VR.a.prototype.setBasePath=ggP2VR.a.prototype.kp;ggP2VR.a.prototype.getBasePath=ggP2VR.a.prototype.En;ggP2VR.a.prototype.setViewerSize=ggP2VR.a.prototype.gm;ggP2VR.a.prototype.getViewerSize=ggP2VR.a.prototype.so;
ggP2VR.a.prototype.setSkinObject=ggP2VR.a.prototype.Ap;ggP2VR.a.prototype.changeViewMode=ggP2VR.a.prototype.jn;ggP2VR.a.prototype.getViewMode=ggP2VR.a.prototype.qo;ggP2VR.a.prototype.changePolygonMode=ggP2VR.a.prototype.rk;ggP2VR.a.prototype.setPolygonMode=ggP2VR.a.prototype.rk;ggP2VR.a.prototype.getPolygonMode=ggP2VR.a.prototype.ho;ggP2VR.a.prototype.showOnePolyHotspot=ggP2VR.a.prototype.hm;ggP2VR.a.prototype.hideOnePolyHotspot=ggP2VR.a.prototype.gl;ggP2VR.a.prototype.changePolyHotspotColor=ggP2VR.a.prototype.gn;
ggP2VR.a.prototype.toggleOnePolyHotspot=ggP2VR.a.prototype.Xp;ggP2VR.a.prototype.changeViewState=ggP2VR.a.prototype.kn;ggP2VR.a.prototype.getViewState=ggP2VR.a.prototype.ro;ggP2VR.a.prototype.setRenderFlags=ggP2VR.a.prototype.tp;ggP2VR.a.prototype.getRenderFlags=ggP2VR.a.prototype.ko;ggP2VR.a.prototype.setMaxTileCount=ggP2VR.a.prototype.em;ggP2VR.a.prototype.getVFov=ggP2VR.a.prototype.Tb;ggP2VR.a.prototype.setVFov=ggP2VR.a.prototype.Rg;ggP2VR.a.prototype.getHFov=ggP2VR.a.prototype.In;
ggP2VR.a.prototype.updatePanorama=ggP2VR.a.prototype.$g;ggP2VR.a.prototype.isTouching=ggP2VR.a.prototype.tl;ggP2VR.a.prototype.getIsMobile=ggP2VR.a.prototype.Nn;ggP2VR.a.prototype.setIsMobile=ggP2VR.a.prototype.op;ggP2VR.a.prototype.getIsTour=ggP2VR.a.prototype.On;ggP2VR.a.prototype.getIsAutorotating=ggP2VR.a.prototype.Kn;ggP2VR.a.prototype.getIsLoading=ggP2VR.a.prototype.Mn;ggP2VR.a.prototype.getIsLoaded=ggP2VR.a.prototype.Ch;ggP2VR.a.prototype.getIsTileLoading=ggP2VR.a.prototype.Tk;
ggP2VR.a.prototype.getLastActivity=ggP2VR.a.prototype.Pn;ggP2VR.a.prototype.getPan=ggP2VR.a.prototype.lg;ggP2VR.a.prototype.getPanNorth=ggP2VR.a.prototype.pe;ggP2VR.a.prototype.getPanDest=ggP2VR.a.prototype.co;ggP2VR.a.prototype.getPanN=ggP2VR.a.prototype.Wk;ggP2VR.a.prototype.setPan=ggP2VR.a.prototype.Af;ggP2VR.a.prototype.setPanNorth=ggP2VR.a.prototype.Hj;ggP2VR.a.prototype.changePan=ggP2VR.a.prototype.qk;ggP2VR.a.prototype.changePanLog=ggP2VR.a.prototype.fn;ggP2VR.a.prototype.getTilt=ggP2VR.a.prototype.Dh;
ggP2VR.a.prototype.getTiltDest=ggP2VR.a.prototype.lo;ggP2VR.a.prototype.setTilt=ggP2VR.a.prototype.Bf;ggP2VR.a.prototype.changeTilt=ggP2VR.a.prototype.sk;ggP2VR.a.prototype.changeTiltLog=ggP2VR.a.prototype.hn;ggP2VR.a.prototype.getFov=ggP2VR.a.prototype.ig;ggP2VR.a.prototype.getFovDest=ggP2VR.a.prototype.Hn;ggP2VR.a.prototype.setFov=ggP2VR.a.prototype.yf;ggP2VR.a.prototype.changeFov=ggP2VR.a.prototype.pk;ggP2VR.a.prototype.changeFovLog=ggP2VR.a.prototype.Ki;ggP2VR.a.prototype.getRoll=ggP2VR.a.prototype.Zk;
ggP2VR.a.prototype.setRoll=ggP2VR.a.prototype.Ij;ggP2VR.a.prototype.setPanTilt=ggP2VR.a.prototype.sp;ggP2VR.a.prototype.setPanTiltFov=ggP2VR.a.prototype.ii;ggP2VR.a.prototype.setDefaultView=ggP2VR.a.prototype.mp;ggP2VR.a.prototype.setLocked=ggP2VR.a.prototype.pp;ggP2VR.a.prototype.setLockedMouse=ggP2VR.a.prototype.Og;ggP2VR.a.prototype.setLockedKeyboard=ggP2VR.a.prototype.Ng;ggP2VR.a.prototype.getLockedKeyboard=ggP2VR.a.prototype.Rn;ggP2VR.a.prototype.setLockedWheel=ggP2VR.a.prototype.Pg;
ggP2VR.a.prototype.moveTo=ggP2VR.a.prototype.moveTo;ggP2VR.a.prototype.moveToEx=ggP2VR.a.prototype.Vh;ggP2VR.a.prototype.moveToDefaultView=ggP2VR.a.prototype.Ho;ggP2VR.a.prototype.moveToDefaultViewEx=ggP2VR.a.prototype.Io;ggP2VR.a.prototype.addHotspotElements=ggP2VR.a.prototype.hk;ggP2VR.a.prototype.playSound=ggP2VR.a.prototype.Ae;ggP2VR.a.prototype.playPauseSound=ggP2VR.a.prototype.Ol;ggP2VR.a.prototype.playStopSound=ggP2VR.a.prototype.bp;ggP2VR.a.prototype.pauseSound=ggP2VR.a.prototype.wj;
ggP2VR.a.prototype.activateSound=ggP2VR.a.prototype.Um;ggP2VR.a.prototype.soundGetTime=ggP2VR.a.prototype.Kp;ggP2VR.a.prototype.soundSetTime=ggP2VR.a.prototype.Lp;ggP2VR.a.prototype.setMediaVisibility=ggP2VR.a.prototype.rp;ggP2VR.a.prototype.isPlaying=ggP2VR.a.prototype.Ub;ggP2VR.a.prototype.stopSound=ggP2VR.a.prototype.ni;ggP2VR.a.prototype.setVolume=ggP2VR.a.prototype.Gp;ggP2VR.a.prototype.changeVolume=ggP2VR.a.prototype.ln;ggP2VR.a.prototype.removeHotspots=ggP2VR.a.prototype.Xl;
ggP2VR.a.prototype.getHotspotsVisible=ggP2VR.a.prototype.Sk;ggP2VR.a.prototype.getCurrentPerspective=ggP2VR.a.prototype.ed;ggP2VR.a.prototype.addHotspot=ggP2VR.a.prototype.Vm;ggP2VR.a.prototype.updateHotspot=ggP2VR.a.prototype.fq;ggP2VR.a.prototype.removeHotspot=ggP2VR.a.prototype.fp;ggP2VR.a.prototype.setActiveHotspot=ggP2VR.a.prototype.xf;ggP2VR.a.prototype.getPointHotspotIds=ggP2VR.a.prototype.fo;ggP2VR.a.prototype.getHotspot=ggP2VR.a.prototype.Jn;ggP2VR.a.prototype.setFullscreen=ggP2VR.a.prototype.zf;
ggP2VR.a.prototype.toggleFullscreen=ggP2VR.a.prototype.si;ggP2VR.a.prototype.enterFullscreen=ggP2VR.a.prototype.wn;ggP2VR.a.prototype.exitFullscreen=ggP2VR.a.prototype.exitFullscreen;ggP2VR.a.prototype.getIsFullscreen=ggP2VR.a.prototype.Ln;ggP2VR.a.prototype.startAutorotate=ggP2VR.a.prototype.Pp;ggP2VR.a.prototype.stopAutorotate=ggP2VR.a.prototype.Sp;ggP2VR.a.prototype.toggleAutorotate=ggP2VR.a.prototype.Wp;ggP2VR.a.prototype.startAnimation=ggP2VR.a.prototype.Op;ggP2VR.a.prototype.createLayers=ggP2VR.a.prototype.wk;
ggP2VR.a.prototype.removePanorama=ggP2VR.a.prototype.ei;ggP2VR.a.prototype.getScreenResolution=ggP2VR.a.prototype.$k;ggP2VR.a.prototype.getMaxScreenResolution=ggP2VR.a.prototype.Uk;ggP2VR.a.prototype.getNodeIds=ggP2VR.a.prototype.Xn;ggP2VR.a.prototype.getNodeUserdata=ggP2VR.a.prototype.dj;ggP2VR.a.prototype.getNodeLatLng=ggP2VR.a.prototype.Yn;ggP2VR.a.prototype.getNodeTitle=ggP2VR.a.prototype.ao;ggP2VR.a.prototype.getCurrentNode=ggP2VR.a.prototype.Rk;ggP2VR.a.prototype.getNextNode=ggP2VR.a.prototype.Vk;
ggP2VR.a.prototype.getPrevNode=ggP2VR.a.prototype.jo;ggP2VR.a.prototype.getLastVisitedNode=ggP2VR.a.prototype.Qn;ggP2VR.a.prototype.getCurrentPointHotspots=ggP2VR.a.prototype.Gn;ggP2VR.a.prototype.getPositionAngles=ggP2VR.a.prototype.io;ggP2VR.a.prototype.getPositionRawAngles=ggP2VR.a.prototype.Xk;ggP2VR.a.prototype.nodeVisited=ggP2VR.a.prototype.No;ggP2VR.a.prototype.setElementIdPrefix=ggP2VR.a.prototype.np;ggP2VR.a.prototype.videoPanoPlay=ggP2VR.a.prototype.oq;ggP2VR.a.prototype.videoPanoStop=ggP2VR.a.prototype.pq;
ggP2VR.a.prototype.videoPanoPause=ggP2VR.a.prototype.nq;ggP2VR.a.prototype.getVideoPanoTime=ggP2VR.a.prototype.po;ggP2VR.a.prototype.setVideoPanoTime=ggP2VR.a.prototype.Fp;ggP2VR.a.prototype.getVideoPanoObject=ggP2VR.a.prototype.oo;ggP2VR.a.prototype.setVideoPanoSource=ggP2VR.a.prototype.Ep;ggP2VR.a.prototype.getMediaObject=ggP2VR.a.prototype.Vn;ggP2VR.a.prototype.registerVideoElement=ggP2VR.a.prototype.Tl;ggP2VR.a.prototype.disableSoundLoading=ggP2VR.a.prototype.vn;
ggP2VR.a.prototype.setCrossOrigin=ggP2VR.a.prototype.lp;ggP2VR.a.prototype.setProjection=ggP2VR.a.prototype.Oc;ggP2VR.a.prototype.getProjection=ggP2VR.a.prototype.ra;ggP2VR.a.prototype.changeProjection=ggP2VR.a.prototype.Li;ggP2VR.a.prototype.changeProjectionEx=ggP2VR.a.prototype.Li;ggP2VR.a.prototype.changeLensflares=ggP2VR.a.prototype.en;ggP2VR.a.prototype.setTransition=ggP2VR.a.prototype.Cp;ggP2VR.a.prototype.getMapType=ggP2VR.a.prototype.Un;ggP2VR.a.prototype.getMapDetails=ggP2VR.a.prototype.Tn;
ggP2VR.a.prototype.getNodeMapCoords=ggP2VR.a.prototype.Zn;ggP2VR.a.prototype.getNodeMapCoordsInPercent=ggP2VR.a.prototype.$n;ggP2VR.a.prototype.getMapContainingNode=ggP2VR.a.prototype.Sn;ggP2VR.a.prototype.addVariable=ggP2VR.a.prototype.Wm;ggP2VR.a.prototype.setVariableOptions=ggP2VR.a.prototype.fm;ggP2VR.a.prototype.setVariableValue=ggP2VR.a.prototype.$d;ggP2VR.a.prototype.getVariableValue=ggP2VR.a.prototype.no;ggP2VR.a.prototype.setUseGyro=ggP2VR.a.prototype.Dp;ggP2VR.a.prototype.getUseGyro=ggP2VR.a.prototype.mo;
ggP2VR.a.prototype.getOS=ggP2VR.a.prototype.bo;ggP2VR.a.prototype.getBrowser=ggP2VR.a.prototype.Fn;
