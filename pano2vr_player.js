//////////////////////////////////////////////////////////////////////
// Pano2VR 6.1 beta2/17561 HTML5/CSS3 & WebGL Panorama Player       //
// License: Anthony T. Acevedo Jr.                                  //
// (c) 2019, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

var oh="function"==typeof Object.defineProperties?Object.defineProperty:function(p,f,g){p!=Array.prototype&&p!=Object.prototype&&(p[f]=g.value)},qh="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function wh(p,f){if(f){var g=qh;p=p.split(".");for(var d=0;d<p.length-1;d++){var b=p[d];b in g||(g[b]={});g=g[b]}p=p[p.length-1];d=g[p];f=f(d);f!=d&&null!=f&&oh(g,p,{configurable:!0,writable:!0,value:f})}}var xh;
if("function"==typeof Object.setPrototypeOf)xh=Object.setPrototypeOf;else{var yh;a:{var zh={a:!0},Ah={};try{Ah.__proto__=zh;yh=Ah.a;break a}catch(p){}yh=!1}xh=yh?function(p,f){p.__proto__=f;if(p.__proto__!==f)throw new TypeError(p+" is not extensible");return p}:null}var Bh=xh;wh("Object.setPrototypeOf",function(p){return p||Bh});
wh("Array.prototype.fill",function(p){return p?p:function(f,g,d){var b=this.length||0;0>g&&(g=Math.max(0,b+g));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(g=Number(g||0);g<d;g++)this[g]=f;return this}});function Ch(p){var f=0;return function(){return f<p.length?{done:!1,value:p[f++]}:{done:!0}}}function Dh(){Dh=function(){};qh.Symbol||(qh.Symbol=Eh)}var Eh=function(){var p=0;return function(f){return"jscomp_symbol_"+(f||"")+p++}}();
function Fh(){Dh();var p=qh.Symbol.iterator;p||(p=qh.Symbol.iterator=qh.Symbol("iterator"));"function"!=typeof Array.prototype[p]&&oh(Array.prototype,p,{configurable:!0,writable:!0,value:function(){return Gh(Ch(this))}});Fh=function(){}}function Gh(p){Fh();p={next:p};p[qh.Symbol.iterator]=function(){return this};return p}
function Hh(p,f){Fh();p instanceof String&&(p+="");var g=0,d={next:function(){if(g<p.length){var b=g++;return{value:f(b,p[b]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}wh("Array.prototype.keys",function(p){return p?p:function(){return Hh(this,function(f){return f})}});
var __extends=this&&this.__extends||function(){function p(f,g){p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var a in b)b.hasOwnProperty(a)&&(d[a]=b[a])};return p(f,g)}return function(f,g){function d(){this.constructor=f}p(f,g);f.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)}}();
function Ih(){var p="perspective",f=["Webkit","Moz","O","ms","Ms"],g;for(g=0;g<f.length;g++)"undefined"!==typeof document.documentElement.style[f[g]+"Perspective"]&&(p=f[g]+"Perspective");"undefined"!==typeof document.documentElement.style[p]?"webkitPerspective"in document.documentElement.style?(p=document.createElement("style"),f=document.createElement("div"),g=document.head||document.getElementsByTagName("head")[0],p.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",g.appendChild(p),
f.id="ggswhtml5",document.documentElement.appendChild(f),g=5===f.offsetHeight,p.parentNode.removeChild(p),f.parentNode.removeChild(f)):g=!0:g=!1;return g}function Jh(){var p;if(p=!!window.WebGLRenderingContext)try{var f=document.createElement("canvas");f.width=100;f.height=100;var g=f.getContext("webgl");g||(g=f.getContext("experimental-webgl"));p=!!g}catch(d){p=!1}return p}var ggP2VR;
(function(p){var f=function(){function d(b){this.u=null;this.yg=this.Xl=this.nb=!1;this.ob=!0;this.ib=this.Ka=this.Fa=0;this.fov=70;this.fb=0;this.autoplay=this.Cg=!1;this.id="";this.A=this.pan=0;this.u=b;this.Uc=this.vc=100;this.Ec=1}d.prototype.Tb=function(b){var a;if(a=b.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=b.getAttributeNode("pan"))this.pan=Number(a.nodeValue);if(a=b.getAttributeNode("tilt"))this.A=Number(a.nodeValue)};d.prototype.yn=function(b){var a="",c=this.u,d=!0;if(c.uf){var l=
new p.Ga(0,0,-100);l.Fa(-this.A*Math.PI/180);l.Ka(this.pan*Math.PI/180);l.Ka(-c.pan.m*Math.PI/180);l.Fa(c.A.m*Math.PI/180);l.ib(c.U.m*Math.PI/180);.01<=l.z&&(d=!1)}c.Kc&&(a+="perspective("+b+"px) ");a=a+("translate3d(0px,0px,"+b+"px) ")+("rotateZ("+c.U.m.toFixed(10)+"deg) ");a+="rotateX("+c.A.m.toFixed(10)+"deg) ";a+="rotateY("+(-c.pan.m).toFixed(10)+"deg) ";a+="rotateY("+this.pan.toFixed(10)+"deg) ";a+="rotateX("+(-this.A).toFixed(10)+"deg) ";b=1E4;l=this.j.videoWidth;var e=this.j.videoHeight;if(0==
l||0==e)l=640,e=480;0<this.vc&&(l=this.vc);0<this.Uc&&(e=this.Uc);0<l&&0<e&&(this.j.width=l,this.j.height=e,this.j.style.width=l+"px",this.j.style.height=e+"px");0<this.fov&&(b=l/(2*Math.tan(this.fov/2*Math.PI/180)));a+="translate3d(0px,0px,"+(-b).toFixed(10)+"px) ";a+="rotateZ("+this.ib.toFixed(10)+"deg) ";a+="rotateY("+(-this.Ka).toFixed(10)+"deg) ";a+="rotateX("+this.Fa.toFixed(10)+"deg) ";this.Ec&&1!=this.Ec&&(a+="scaleY("+this.Ec+") ");a+="translate3d("+-l/2+"px,"+-e/2+"px,0px) ";this.j.style[c.ab+
"Origin"]="0% 0%";this.nb&&(a="",1==this.fb&&(a+="scale("+Math.min(c.D.width/l,c.D.height/e)+") "),a+="translate3d("+-l/2+"px,"+-e/2+"px,0px) ");this.Gp!=a&&(this.Gp=a,this.j.style[c.ab]=a,this.j.style.visibility=d&&this.ob?"visible":"hidden",this.yg&&this.Xl==this.nb&&(this.j.style[c.Rc]="all 0s linear 0s"),this.Xl=this.nb)};d.prototype.Pf=function(b){this.j&&(this.j.style.visibility=b?"visible":"hidden")};d.prototype.Te=function(){var b=this.u;b.ia?(this.j.style.left=b.D.width/2+"px",this.j.style.top=
b.D.height/2+"px"):(this.j.style.left=b.margin.left+b.D.width/2+"px",this.j.style.top=b.margin.top+b.D.height/2+"px")};return d}();p.Yr=f;var g=function(d){function b(a){a=d.call(this,a)||this;a.va=!1;a.jn=!1;a.zm=!1;a.Uf=!1;a.zj=!1;a.fk=!1;a.Ve=!1;a.ac=null;a.Eh=null;a.ih=0;a.Je=0;a.Df=!1;a.Aq=!1;a.stopped=!1;a.url=[];a.loop=0;a.level=1;a.qc=0;a.mode=1;a.Nh=10;a.yb=0;a.Tf=0;a.ua=1;a.dd=0;a.Nc=0;a.Oc=0;a.ed=0;a.pi=-1;return a}__extends(b,d);b.prototype.Ck=function(){var a=this,c=a.j.play();if(void 0!==
c)c.then(function(){a.Yi()})["catch"](function(){a.j.pause();a.jn&&(a.j.muted=!0,a.j.play())})};b.prototype.en=function(){if(this.va&&this.stopped)this.stopped=!1;else{if(!this.va&&this.u.uf){this.Kd();var a=this.Cc;this.addElement();this.Cc=a;this.j.pause()}0==this.loop?this.va?(this.ac=null,this.Sd()):this.j.play():0<this.Cc?(this.Cc--,this.va||(this.j.currentTime=0),this.zj&&(this.md&&0==this.md.gain.value||0==this.uc.gain.value&&0==this.fc.gain.value&&0==this.dc.gain.value&&0==this.ec.gain.value)||
(this.va?(this.ac=null,this.Sd()):this.j.play())):this.va&&(this.ac=null,this.Df=!1)}};b.prototype.Yi=function(){this.Ve=!1;var a=this.u.za;a&&(this.va||(this.source=a.createMediaElementSource(this.j)),2==this.mode||3==this.mode||5==this.mode?(this.Ad=a.createChannelSplitter(2),this.uc=a.createGain(),this.dc=a.createGain(),this.ec=a.createGain(),this.fc=a.createGain(),this.gg=a.createChannelMerger(2),this.va||this.source.connect(this.Ad),this.Ad.connect(this.uc,0),this.Ad.connect(this.dc,0),this.Ad.connect(this.ec,
1),this.Ad.connect(this.fc,1),this.uc.connect(this.gg,0,0),this.dc.connect(this.gg,0,1),this.ec.connect(this.gg,0,0),this.fc.connect(this.gg,0,1),this.gg.connect(a.destination),1==this.pi&&this.ln()):(this.md=a.createGain(),this.va||this.source.connect(this.md),this.md.connect(a.destination)))};b.prototype.ln=function(){1!=this.pi||this.Ve||!this.Ad||2!=this.mode&&3!=this.mode&&5!=this.mode||(this.Ad.connect(this.ec,0),this.Ad.connect(this.fc,0))};b.prototype.fh=function(){var a=this.u.za;this.nb||
this.fk||(this.uc.gain.setValueAtTime(this.dd,a.currentTime),this.fc.gain.setValueAtTime(this.ed,a.currentTime),this.dc.gain.setValueAtTime(this.Nc,a.currentTime),this.ec.gain.setValueAtTime(this.Oc,a.currentTime))};b.prototype.Ti=function(){if(!this.Ve||4==this.mode||6==this.mode){var a=this.u,c=this.u.za;if(this.j||this.va){var b,d=this.pan-a.pan.m;for(b=this.A-a.A.m;-180>d;)d+=360;for(;180<d;)d-=360;var e=this.qc,h=this.Nh;0==h&&(h=.01);0>h&&(h=a.fov.m);this.Wb||(this.Wb=new p.Ga,this.Wb.xl(this.pan,
this.A));0!=this.mode&&1!=this.mode||!c||this.md&&this.md.gain.setValueAtTime(this.level*a.ca*this.ua,c.currentTime);if(2==this.mode&&c){var n=.5*Math.cos(d*Math.PI/180)+.5;this.dd=Math.sqrt(n)*this.ua*this.level*a.ca;this.ed=Math.sqrt(n)*this.ua*this.level*a.ca;this.Nc=Math.sqrt(1-n)*this.ua*this.level*a.ca;this.Oc=Math.sqrt(1-n)*this.ua*this.level*a.ca;this.fh()}if(3==this.mode){d=0>d?d<-this.yb?d+this.yb:0:d>this.yb?d-this.yb:0;var m=this.level;b=Math.abs(b);b=b<this.Tf?0:b-this.Tf;var g=1-b/h;
if(Math.abs(d)>h||0>g)n=m*e*a.ca,c?(this.dd=n*this.ua,this.ed=n*this.ua,this.Oc=this.Nc=0,this.fh()):this.j.volume=m*e*a.ca;else if(n=1-Math.abs(d/h),c){var f=m*(e+(1-e)*g*n)*a.ca;n=m*e*a.ca;0<=d?(this.dd=f*this.ua,this.ed=n*this.ua):(this.dd=n*this.ua,this.ed=f*this.ua);2*Math.abs(d)<h?(n=1-Math.abs(2*d)/h,f=m*(e+(1-e)*g*n)*a.ca,n=.5*m*(1-e)*g*(1-n)*a.ca,0<=d?(this.ed=f*this.ua,this.Oc=n*this.ua,this.Nc=0):(this.dd=f*this.ua,this.Nc=n*this.ua,this.Oc=0)):(n=1-(Math.abs(2*d)-h)/h,f=.5*m*(1-e)*g*n*
a.ca,0<=d?(this.Oc=f*this.ua,this.Nc=0):(this.Nc=f*this.ua,this.Oc=0));this.fh()}else this.j.volume=m*(e+(1-e)*g*n)*a.ca}4==this.mode&&(Math.abs(d)<this.yb&&Math.abs(b)<this.Tf?this.Uf||(this.Uf=!0,this.Cc=this.loop-1,a.kf||(this.j.play(),this.Ve&&this.Yi())):this.Uf=!1);5==this.mode&&(b=180*Math.acos(a.qj.ti(this.Wb))/Math.PI,b<this.yb?c?(this.dd=this.level*a.ca*this.ua,this.ed=this.level*a.ca*this.ua,this.Oc=this.Nc=0,this.fh()):this.j.volume=this.level*a.ca:c?(b<this.yb+h?(d=0>d?d>-this.yb?0:d+
this.yb:d<this.yb?0:d-this.yb,f=1-Math.max(b-this.yb,0)/h,n=Math.max(1-Math.abs(d)*Math.cos(this.A*Math.PI/180)/h,0),0<d?(this.dd=this.level*(f*(1-this.qc)+this.qc)*a.ca*this.ua,this.ed=this.level*(f*n*(1-this.qc)+this.qc)*a.ca*this.ua,this.Nc=0,this.Oc=this.level*f*(1-n)*a.ca*this.ua):(this.dd=this.level*(f*n*(1-this.qc)+this.qc)*a.ca*this.ua,this.ed=this.level*(f*(1-this.qc)+this.qc)*a.ca*this.ua,this.Nc=this.level*f*(1-n)*a.ca*this.ua,this.Oc=0)):(f=this.level*this.qc*a.ca,this.dd=f*this.ua,this.ed=
f*this.ua,this.Oc=this.Nc=0),this.fh()):(b-=this.yb,b<h&&0<h?(n=1-Math.abs(b/h),this.j.volume=this.level*(e+(1-e)*n)*a.ca):this.j.volume=e*a.ca));6==this.mode&&(b=180*Math.acos(a.qj.ti(this.Wb))/Math.PI,Math.abs(b)<this.yb?this.Uf||(this.Uf=!0,this.Cc=this.loop-1,this.va?this.Df||this.Sd():this.j.play()):this.Uf=!1)}}};b.prototype.yo=function(){var a=this;a.ac=this.u.za.createBufferSource();a.ac.addEventListener("ended",function(){a.en()},!1);2==a.mode||3==a.mode||5==a.mode?a.ac.connect(a.Ad):a.ac.connect(a.md)};
b.prototype.Sd=function(){var a=this.u.za,c=this.Je;this.Eh?(null==this.ac&&(this.yo(),this.ac.buffer=this.Eh),this.ih=a.currentTime-c,this.Je=0,this.Df=!0,this.stopped=!1,this.ac.start(0,c),this.u.O("buffer Source started")):(this.u.O("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.Aq=!0)};b.prototype.dj=function(){var a=this.u.za.currentTime-this.ih;this.bf();this.Je=a};b.prototype.bf=function(){this.ac&&this.Df&&(this.stopped=!0,this.ac.disconnect(),this.ac.stop(0),this.ac=null);
this.ih=this.Je=0;this.Df=!1};b.prototype.lo=function(){var a=this.u.za;return this.Je?this.Je:this.ih?a.currentTime-this.ih:0};b.prototype.mo=function(a){this.bf();this.Je=a;this.Sd()};b.prototype.addElement=function(){var a=-1,c=this,b=this.u,d=this.u.za;try{for(var e=!1,h=0;h<b.Y.length;h++)b.Y[h].id==c.id&&(a=h,null==b.Y[h].j&&!b.Y[h].va||b.Y[h].url.join()!=c.url.join()||b.Y[h].loop!=c.loop||b.Y[h].mode!=c.mode||(e=!0,b.Y[h].pan=c.pan,b.Y[h].A=c.A,b.Y[h].level=c.level,b.Y[h].qc=c.qc,b.Y[h].Nh=
c.Nh,b.Y[h].yb=c.yb,b.Y[h].Tf=c.Tf));if(e)b.O("Keep playing "+c.id);else{if(0<=a){var n=b.Y[a];if(null!=n.j||n.va)if(d&&b.Va.enabled)b.Va.nh.push(n),1!=b.K.sa&&2!=b.K.sa&&6!=b.K.sa&&b.Va.sl(n);else{try{n.va?n.dj():n.j.pause()}catch(fa){b.O(fa)}try{n.Kd()}catch(fa){b.O(fa)}}}d&&(this.Ve=!0);c.j=document.createElement("audio");c.j.crossOrigin=b.crossOrigin;c.j.setAttribute("class","ggmedia");b.sf&&c.j.setAttribute("id",b.sf+c.id);for(h=0;h<c.url.length;h++)e=void 0,e=document.createElement("source"),
""!=c.url[h]&&"#"!=c.url[h]&&(e.crossOrigin=b.crossOrigin,e.setAttribute("src",b.Mb(c.url[h])),c.j.appendChild(e));c.j.volume=c.level*b.ca;if(0<c.j.childNodes.length&&(b.aa.appendChild(c.j),c.j.addEventListener("ended",function(){c.en()},!1),d)){c.zj=!1;0==c.loop&&c.source&&c.source.mediaElement&&(c.source.mediaElement.loop=!0);var m=new XMLHttpRequest;m.open("GET",b.Mb(c.url[0]),!0);m.responseType="arraybuffer";m.onload=function(){d.decodeAudioData(m.response,function(a){c.pi=a.numberOfChannels;
1==c.pi&&c.ln()})};m.send()}1<=c.loop&&(c.Cc=c.loop-1);0<=a?b.Y[a]=c:b.Y.push(c);c.Ti();-1!=this.u.ad.indexOf(c.id)||-1!=this.u.ad.indexOf("_main")&&-1==this.u.me.indexOf(c.id)||(1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||d&&b.Va.enabled||(c.va||(c.j.autoplay=!0,c.Ck()),c.autoplay=!0),0==c.mode&&0<=c.loop&&(c.autoplay=!0,c.Ck()))}}catch(fa){this.u.O(fa)}};b.prototype.Kd=function(){try{this.u.O("Remove Snd:"+this.id),this.va||(this.u.aa.removeChild(this.j),this.j=null)}catch(a){this.u.O(a)}};
b.prototype.Tb=function(a){d.prototype.Tb.call(this,a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("nodechangekeep"))this.zm=1==Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.Nh=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.qc=Number(c.nodeValue);
if(c=a.getAttributeNode("pansize"))this.yb=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.Tf=Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return b}(f);p.Un=g;g=function(d){function b(a){a=d.call(this,a)||this;a.poster="";a.Fa=0;a.Ka=0;a.ib=0;a.fov=50;a.fb=0;a.Cg=!1;a.td=!1;return a}__extends(b,d);b.prototype.Be=function(){1!=this.fb&&4!=this.fb||this.zg(!this.nb);2==this.fb&&this.u.Gm(this.id)};
b.prototype.zg=function(a){var c=this.u,b=c.za;if(1==this.fb||4==this.fb)if(this.nb=a,this.u.Kb)(c=c.ra)&&c.activateSound(this.id,this.nb?1:0);else{if(this.nb)this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(c.xh+8E4).toString(),this.j.style[this.u.Rc]="all 1s ease 0s",this.u.isPlaying(this.id)||c.Ke(this.id);else{this.j.style.pointerEvents="none";this.j.style.cursor="default";this.j.style.zIndex=c.xh.toString();this.j.style[this.u.Rc]="all 1s ease 0s";this.u.isPlaying(this.id)&&
c.Ii(this.id);this.fk=!0;var d=this;setTimeout(function(){d.fk=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)&&(b=b.currentTime,this.uc&&this.fc&&this.dc.gain&&this.dc&&this.ec)){var e=this.uc.gain.value,h=this.fc.gain.value,n=this.dc.gain.value,m=this.ec.gain.value;this.nb?(this.uc.gain.linearRampToValueAtTime(e,b),this.uc.gain.linearRampToValueAtTime(this.level*c.ca,b+1),this.fc.gain.linearRampToValueAtTime(h,b),this.fc.gain.linearRampToValueAtTime(this.level*c.ca,b+1),this.dc.gain.linearRampToValueAtTime(n,
b),this.dc.gain.linearRampToValueAtTime(0,b+1),this.ec.gain.linearRampToValueAtTime(m,b),this.ec.gain.linearRampToValueAtTime(0,b+1)):(this.uc.gain.linearRampToValueAtTime(e,b),this.uc.gain.linearRampToValueAtTime(this.dd,b+1),this.fc.gain.linearRampToValueAtTime(h,b),this.fc.gain.linearRampToValueAtTime(this.ed,b+1),this.dc.gain.linearRampToValueAtTime(n,b),this.dc.gain.linearRampToValueAtTime(this.Nc,b+1),this.ec.gain.linearRampToValueAtTime(m,b),this.ec.gain.linearRampToValueAtTime(this.Oc,b+1))}this.yg=
!0;this.u.zn()}2==this.fb&&(a?this.u.Ke(this.id):this.u.ek(this.id))};b.prototype.Ag=function(){this.yg=!1;this.j.style[this.u.Rc]="none"};b.prototype.Pr=function(){0==this.loop?this.j.play():0<this.Cc?(this.Cc--,this.j.currentTime=0,this.j.play()):this.isRunning=!1};b.prototype.Tb=function(a){d.prototype.Tb.call(this,a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.Fa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ka=Number(c.nodeValue);
if(c=a.getAttributeNode("rotz"))this.ib=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.fov=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.vc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Uc=Number(c.nodeValue);this.Ec=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.fb=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Cg=1==Number(c.nodeValue);if(c=a.getAttributeNode("startmutedmobile"))this.jn=1==Number(c.nodeValue)};
b.prototype.addElement=function(){var a=this,c=this.u,b=this.u.za;try{a.j=document.createElement("video");a.j.setAttribute("class","ggmedia");a.j.crossOrigin=c.crossOrigin;a.j.hidden=!0;a.j.addEventListener("click",function(a){a.stopPropagation()});c.sf&&a.j.setAttribute("id",c.sf+a.id);if(c.th)a.j.setAttribute("playsinline","playsinline"),a.j.setAttribute("style","display: none; max-width:none;");else if(a.j.setAttribute("style","max-width:none;pointer-events:none;"),a.j.setAttribute("playsinline",
"playsinline"),1==a.fb||4==a.fb)a.j.addEventListener(c.Jn(),function(){a.Ag()},!1),a.j.addEventListener("transitionend",function(){a.Ag()},!1);var d=void 0;for(d=0;d<a.url.length;d++){var e=void 0;e=document.createElement("source");e.crossOrigin=c.crossOrigin;e.setAttribute("src",c.Mb(a.url[d]));a.j.appendChild(e)}""!=a.poster&&(a.j.poster=c.Mb(a.poster),0>a.loop&&(a.j.preload="none"));a.j.volume=a.level*c.ca;1<=a.loop&&(a.Cc=a.loop-1);b&&(this.Ve=!0);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&
0<=a.loop&&(a.j.autoplay=!0,a.isRunning=!0,a.autoplay=!0,a.Ck());c.S.push(this);c.th?c.aa.appendChild(a.j):(a.j.style.position="absolute",a.vc&&(a.j.width=a.vc),a.Uc&&(a.j.height=a.Uc),c.L.appendChild(a.j));a.j.addEventListener("ended",function(){a.Pr()},!1)}catch(h){c.O(h)}};b.prototype.registerElement=function(a,c){this.td=!0;this.j=c;this.id=a;this.level=1;this.u.S.push(this)};b.prototype.Kd=function(){var a=this.u;a.th&&(a.R.deleteTexture(this.texture),this.texture=0,a.aa.removeChild(this.j));
a.Bn&&a.L.removeChild(this.j);this.j=null};return b}(g);p.Qk=g;g=function(d){function b(a){a=d.call(this,a)||this;a.url="";a.Fa=0;a.Ka=0;a.ib=0;a.fov=50;a.fb=0;a.Cg=!1;a.vc=100;a.Uc=100;a.Ec=1;return a}__extends(b,d);b.prototype.Tb=function(a){d.prototype.Tb.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.Fa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ka=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.ib=
Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.fov=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.vc=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Uc=Number(c.nodeValue);this.Ec=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.fb=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Cg=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),
a=a.nextSibling};b.prototype.Ag=function(){this.yg=!1;this.j.style[this.u.Rc]="none"};b.prototype.Be=function(){1!==this.fb&&4!==this.fb||this.zg(!this.nb)};b.prototype.zg=function(a){var c=this.u;if(1===this.fb||4===this.fb)this.nb=a,this.u.Kb?(a=this.u.ra)&&a.activateSound(this.id,this.nb?1:0):(this.nb?(this.j.style.pointerEvents="auto",this.j.style.cursor="pointer",this.j.style.zIndex=(c.xh+8E4).toString()):(this.j.style.pointerEvents="none",this.j.style.cursor="default",this.j.style.zIndex=c.xh.toString()),
this.j.style[c.Rc]="all 1s ease 0s",this.yg=!0,c.vn())};b.prototype.addElement=function(){var a=this,c=this.u;try{a.j=document.createElement("img");a.j.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.j.setAttribute("class","ggmedia");a.j.hidden=!0;a.j.addEventListener("click",function(a){a.stopPropagation()});c.sf&&a.j.setAttribute("id",c.sf+a.id);a.j.ondragstart=function(){return!1};if(1===a.fb||4===a.fb)a.j.addEventListener(c.Jn(),function(){a.Ag()},!1),a.j.addEventListener("transitionend",
function(){a.Ag()},!1);a.j.setAttribute("src",c.Mb(a.url));a.vc&&(a.j.width=a.vc);a.Uc&&(a.j.height=a.Uc);c.bb.push(a);a.j.style.position="absolute";c.L.appendChild(a.j)}catch(k){c.O("Error addimage:"+k)}};b.prototype.Kd=function(){this.u.L.removeChild(this.j);this.j=null};return b}(f);p.Sn=g;f=function(d){function b(a){a=d.call(this,a)||this;a.Xk=50;a.alpha=50;a.type=0;a.color=16777215;return a}__extends(b,d);b.prototype.Tb=function(a){d.prototype.Tb.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.Xk=
Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return b}(f);p.Tn=f;f=function(){function d(b){this.type="empty";this.vk=this.id=this.target=this.description=this.title=this.url="";this.w=100;this.h=20;this.Wi=!1;this.j=null;this.Ab=this.Sb=this.kb=this.Aa=this.A=this.pan=0;this.visible=!0;this.$b=b.I.$b;this.Yb=b.I.Yb;this.Zb=b.I.Zb;
this.Xb=b.I.Xb;this.pf=b.I.pf;this.vertices=[]}d.prototype.jf=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.A;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.vk;this.obj=this.j};d.prototype.tr=function(){var b=this.url;return"{"==b.charAt(0)?b.substr(1,b.length-2):!1};d.prototype.Tb=function(b){var a;if(a=b.getAttributeNode("url"))this.url=a.nodeValue.toString();if(a=b.getAttributeNode("target"))this.target=a.nodeValue.toString();
if(a=b.getAttributeNode("title"))this.title=a.nodeValue.toString();if(a=b.getAttributeNode("description"))this.description=a.nodeValue.toString();if(a=b.getAttributeNode("id"))this.id=a.nodeValue.toString();if(a=b.getAttributeNode("skinid"))this.vk=a.nodeValue.toString();if(a=b.getAttributeNode("width"))this.w=Number(a.nodeValue);if(a=b.getAttributeNode("height"))this.h=Number(a.nodeValue);if(a=b.getAttributeNode("wordwrap"))this.Wi=1==Number(a.nodeValue);a=b.getAttributeNode("pan");this.pan=1*(a?
Number(a.nodeValue):0);a=b.getAttributeNode("tilt");this.A=1*(a?Number(a.nodeValue):0);a=b.getAttributeNode("fov");this.fov=1*(a?Number(a.nodeValue):0);if(a=b.getAttributeNode("bordercolor"))this.$b=1*Number(a.nodeValue);if(a=b.getAttributeNode("backgroundcolor"))this.Yb=1*Number(a.nodeValue);if(a=b.getAttributeNode("borderalpha"))this.Zb=1*Number(a.nodeValue);if(a=b.getAttributeNode("backgroundalpha"))this.Xb=1*Number(a.nodeValue);if(a=b.getAttributeNode("handcursor"))this.pf=1==Number(a.nodeValue);
if(a=b.getAttributeNode("customimage"))this.ff=a.nodeValue;if(a=b.getAttributeNode("customimagewidth"))this.tj=Number(a.nodeValue);if(a=b.getAttributeNode("customimageheight"))this.Kh=Number(a.nodeValue);if(a=b.getAttributeNode("use3D"))this.An=1==Number(a.nodeValue);if(a=b.getAttributeNode("distance3D"))this.ol=Number(a.nodeValue);for(b=b.firstChild;b;){if("polystring"==b.nodeName){a=b.textContent.toString().split("|");for(var c=0;c<a.length;c++){var d=a[c].split("/");if(2==d.length){var l={pan:0,
A:0};l.pan=Number(d[0]);l.A=Number(d[1]);this.vertices.push(l)}}}"vertex"==b.nodeName&&(l={pan:0,A:0},a=b.getAttributeNode("pan"),l.pan=1*(a?Number(a.nodeValue):0),a=b.getAttributeNode("tilt"),l.A=1*(a?Number(a.nodeValue):0),this.vertices.push(l));b=b.nextSibling}this.jf()};return d}();p.Ah=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d,b){this.x=d;this.y=b}g.prototype.init=function(d,b){this.x=d;this.y=b};g.prototype.Ed=function(d,b,a){var c=b.y-d.y;this.x=d.x+(b.x-d.x)*a;this.y=d.y+c*a};g.prototype.ko=function(d,b,a,c,k){var l=new g;l.Ed(d,a,k);d=new g;d.Ed(a,c,k);a=new g;a.Ed(c,b,k);b=new g;b.Ed(l,d,k);l=new g;l.Ed(d,a,k);d=new g;d.Ed(b,l,k);this.x=d.x;this.y=d.y};g.prototype.bj=function(d,b,a,c,k){var l=new g,e=.5,h=.25;do{l.ko(d,b,a,c,e);var n=l.x-k;e=0<n?e-h:e+h;h/=2}while(.01<Math.abs(n));
this.x=l.x;this.y=l.y};return g}();p.Bc=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d,b,a,c,k){this.x=d;this.y=b;this.z=a;this.yd=c;this.Wb=k}g.prototype.init=function(d,b,a,c,k){this.x=d;this.y=b;this.z=a;this.yd=c;this.Wb=k};g.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.yd+","+this.Wb+")"};g.prototype.Fa=function(d){var b=Math.sin(d);d=Math.cos(d);var a=this.y,c=this.z;this.y=d*a-b*c;this.z=b*a+d*c};g.prototype.Hq=function(){var d=this.y;this.y=-this.z;this.z=d};g.prototype.Gq=function(){var d=this.y;
this.y=this.z;this.z=-d};g.prototype.Ka=function(d){var b=Math.sin(d);d=Math.cos(d);var a=this.x,c=this.z;this.x=d*a+b*c;this.z=-b*a+d*c};g.prototype.Iq=function(){var d=this.x;this.x=-this.z;this.z=d};g.prototype.ib=function(d){var b=Math.sin(d);d=Math.cos(d);var a=this.x,c=this.y;this.x=d*a-b*c;this.y=b*a+d*c};g.prototype.Sm=function(){var d=this.x;this.x=-this.y;this.y=d};g.prototype.Ld=function(d){this.Fa(d*Math.PI/180)};g.prototype.Me=function(d){this.Ka(d*Math.PI/180)};g.prototype.Ne=function(d){this.ib(d*
Math.PI/180)};g.prototype.clone=function(){return new g(this.x,this.y,this.z,this.yd,this.Wb)};g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};g.prototype.normalize=function(){var d=this.length();0<d&&(d=1/d,this.x*=d,this.y*=d,this.z*=d)};g.prototype.ti=function(d){return this.x*d.x+this.y*d.y+this.z*d.z};g.prototype.xl=function(d,b){var a=Math.cos(b*Math.PI/180);this.x=a*Math.sin(d*Math.PI/180);this.y=Math.sin(b*Math.PI/180);this.z=a*Math.cos(d*Math.PI/
180)};g.prototype.fo=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};g.prototype.ho=function(){return 180*Math.asin(this.y/this.length())/Math.PI};g.prototype.Ed=function(d,b,a){this.x=d.x*a+b.x*(1-a);this.y=d.y*a+b.y*(1-a);this.z=d.z*a+b.z*(1-a);this.yd=d.yd*a+b.yd*(1-a);this.Wb=d.Wb*a+b.Wb*(1-a)};return g}();p.Ga=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(){this.Wm()}g.prototype.Wm=function(){this.hc=1;this.wc=this.ic=this.Hb=0;this.jc=1;this.kc=this.Pb=this.xc=0;this.Qb=1};g.prototype.clone=function(d){this.hc=d.hc;this.Hb=d.Hb;this.ic=d.ic;this.wc=d.wc;this.jc=d.jc;this.xc=d.xc;this.Pb=d.Pb;this.kc=d.kc;this.Qb=d.Qb};g.prototype.Wq=function(d){var b=Math.cos(d);d=Math.sin(d);this.hc=1;this.wc=this.ic=this.Hb=0;this.jc=b;this.xc=-d;this.Pb=0;this.kc=d;this.Qb=b};g.prototype.Xq=function(d){var b=Math.cos(d);
d=Math.sin(d);this.hc=b;this.Hb=0;this.ic=d;this.wc=0;this.jc=1;this.xc=0;this.Pb=-d;this.kc=0;this.Qb=b};g.prototype.Yq=function(d){var b=Math.cos(d);d=Math.sin(d);this.hc=b;this.Hb=-d;this.ic=0;this.wc=d;this.jc=b;this.kc=this.Pb=this.xc=0;this.Qb=1};g.prototype.Tq=function(d){this.Wq(d*Math.PI/180)};g.prototype.Uq=function(d){this.Xq(d*Math.PI/180)};g.prototype.Vq=function(d){this.Yq(d*Math.PI/180)};g.prototype.Ld=function(d){this.Xc||(this.Xc=new g,this.$d=new g);this.Xc.Tq(d);this.$d.clone(this);
this.multiply(this.Xc,this.$d)};g.prototype.Me=function(d){this.Xc||(this.Xc=new g,this.$d=new g);this.Xc.Uq(d);this.$d.clone(this);this.multiply(this.Xc,this.$d)};g.prototype.Ne=function(d){this.Xc||(this.Xc=new g,this.$d=new g);this.Xc.Vq(d);this.$d.clone(this);this.multiply(this.Xc,this.$d)};g.prototype.multiply=function(d,b){this.hc=d.hc*b.hc+d.Hb*b.wc+d.ic*b.Pb;this.Hb=d.hc*b.Hb+d.Hb*b.jc+d.ic*b.kc;this.ic=d.hc*b.ic+d.Hb*b.xc+d.ic*b.Qb;this.wc=d.wc*b.hc+d.jc*b.wc+d.xc*b.Pb;this.jc=d.wc*b.Hb+
d.jc*b.jc+d.xc*b.kc;this.xc=d.wc*b.ic+d.jc*b.xc+d.xc*b.Qb;this.Pb=d.Pb*b.hc+d.kc*b.wc+d.Qb*b.Pb;this.kc=d.Pb*b.Hb+d.kc*b.jc+d.Qb*b.kc;this.Qb=d.Pb*b.ic+d.kc*b.xc+d.Qb*b.Qb};g.prototype.cq=function(d){var b=d.x;var a=d.y;var c=d.z;d.x=b*this.hc+a*this.Hb+c*this.ic;d.y=b*this.wc+a*this.jc+c*this.xc;d.z=b*this.Pb+a*this.kc+c*this.Qb};return g}();p.Nk=f})(ggP2VR||(ggP2VR={}));
(function(p){p.ka={create:function(f){var g="undefined"!=typeof Float32Array?new Float32Array(16):Array(16);f&&(g[0]=f[0],g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g[6]=f[6],g[7]=f[7],g[8]=f[8],g[9]=f[9],g[10]=f[10],g[11]=f[11],g[12]=f[12],g[13]=f[13],g[14]=f[14],g[15]=f[15]);return g},set:function(f,g){g[0]=f[0];g[1]=f[1];g[2]=f[2];g[3]=f[3];g[4]=f[4];g[5]=f[5];g[6]=f[6];g[7]=f[7];g[8]=f[8];g[9]=f[9];g[10]=f[10];g[11]=f[11];g[12]=f[12];g[13]=f[13];g[14]=f[14];g[15]=f[15];return g},identity:function(f){f[0]=
1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f},multiply:function(f,g,d){d||(d=f);var b=f[0],a=f[1],c=f[2],k=f[3],l=f[4],e=f[5],h=f[6],n=f[7],m=f[8],fa=f[9],r=f[10],p=f[11],q=f[12],y=f[13],x=f[14];f=f[15];var A=g[0],db=g[1],z=g[2],id=g[3],ka=g[4],tf=g[5],lh=g[6],mh=g[7],nh=g[8],ph=g[9],rh=g[10],sh=g[11],th=g[12],uh=g[13],vh=g[14];g=g[15];d[0]=A*b+db*l+z*m+id*q;d[1]=A*a+db*e+z*fa+id*y;d[2]=A*c+db*h+z*r+id*x;d[3]=A*k+db*n+z*
p+id*f;d[4]=ka*b+tf*l+lh*m+mh*q;d[5]=ka*a+tf*e+lh*fa+mh*y;d[6]=ka*c+tf*h+lh*r+mh*x;d[7]=ka*k+tf*n+lh*p+mh*f;d[8]=nh*b+ph*l+rh*m+sh*q;d[9]=nh*a+ph*e+rh*fa+sh*y;d[10]=nh*c+ph*h+rh*r+sh*x;d[11]=nh*k+ph*n+rh*p+sh*f;d[12]=th*b+uh*l+vh*m+g*q;d[13]=th*a+uh*e+vh*fa+g*y;d[14]=th*c+uh*h+vh*r+g*x;d[15]=th*k+uh*n+vh*p+g*f;return d},translate:function(f,g,d){var b=g[0],a=g[1];g=g[2];if(!d||f==d)return f[12]=f[0]*b+f[4]*a+f[8]*g+f[12],f[13]=f[1]*b+f[5]*a+f[9]*g+f[13],f[14]=f[2]*b+f[6]*a+f[10]*g+f[14],f[15]=f[3]*
b+f[7]*a+f[11]*g+f[15],f;var c=f[0],k=f[1],l=f[2],e=f[3],h=f[4],n=f[5],m=f[6],fa=f[7],r=f[8],p=f[9],q=f[10],y=f[11];d[0]=c;d[1]=k;d[2]=l;d[3]=e;d[4]=h;d[5]=n;d[6]=m;d[7]=fa;d[8]=r;d[9]=p;d[10]=q;d[11]=y;d[12]=c*b+h*a+r*g+f[12];d[13]=k*b+n*a+p*g+f[13];d[14]=l*b+m*a+q*g+f[14];d[15]=e*b+fa*a+y*g+f[15];return d},scale:function(f,g,d){var b=g[0],a=g[1];g=g[2];if(!d||f==d)return f[0]*=b,f[1]*=b,f[2]*=b,f[3]*=b,f[4]*=a,f[5]*=a,f[6]*=a,f[7]*=a,f[8]*=g,f[9]*=g,f[10]*=g,f[11]*=g,f;d[0]=f[0]*b;d[1]=f[1]*b;d[2]=
f[2]*b;d[3]=f[3]*b;d[4]=f[4]*a;d[5]=f[5]*a;d[6]=f[6]*a;d[7]=f[7]*a;d[8]=f[8]*g;d[9]=f[9]*g;d[10]=f[10]*g;d[11]=f[11]*g;d[12]=f[12];d[13]=f[13];d[14]=f[14];d[15]=f[15];return d},rotate:function(f,g,d,b){var a=d[0],c=d[1];d=d[2];var k=Math.sqrt(a*a+c*c+d*d);if(!k)return null;1!=k&&(k=1/k,a*=k,c*=k,d*=k);var l=Math.sin(g),e=Math.cos(g),h=1-e;g=f[0];k=f[1];var n=f[2],m=f[3],fa=f[4],r=f[5],p=f[6],q=f[7],y=f[8],x=f[9],A=f[10],db=f[11],z=a*a*h+e,id=c*a*h+d*l,ka=d*a*h-c*l,tf=a*c*h-d*l,lh=c*c*h+e,mh=d*c*h+
a*l,nh=a*d*h+c*l;a=c*d*h-a*l;c=d*d*h+e;b?f!=b&&(b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]):b=f;b[0]=g*z+fa*id+y*ka;b[1]=k*z+r*id+x*ka;b[2]=n*z+p*id+A*ka;b[3]=m*z+q*id+db*ka;b[4]=g*tf+fa*lh+y*mh;b[5]=k*tf+r*lh+x*mh;b[6]=n*tf+p*lh+A*mh;b[7]=m*tf+q*lh+db*mh;b[8]=g*nh+fa*a+y*c;b[9]=k*nh+r*a+x*c;b[10]=n*nh+p*a+A*c;b[11]=m*nh+q*a+db*c;return b},Ko:function(f,g,d,b,a,c,k){k||(k=p.ka.create());var l=g-f,e=b-d,h=c-a;k[0]=2*a/l;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2*a/e;k[6]=0;k[7]=0;k[8]=(g+f)/l;k[9]=(b+
d)/e;k[10]=-(c+a)/h;k[11]=-1;k[12]=0;k[13]=0;k[14]=-(c*a*2)/h;k[15]=0;return k},perspective:function(f,g,d,b,a){f=d*Math.tan(f*Math.PI/360);g*=f;return p.ka.Ko(-g,g,-f,f,d,b,a)},ds:function(f,g,d,b,a,c,k){k||(k=p.ka.create());var l=g-f,e=b-d,h=c-a;k[0]=2/l;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=2/e;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=-2/h;k[11]=0;k[12]=-(f+g)/l;k[13]=-(b+d)/e;k[14]=-(c+a)/h;k[15]=1;return k}}})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d){this.wa=p.ka.create();this.xb=p.ka.create();this.od=0;this.gb=[];this.Hg=!1;this.zk=this.Cj=this.kk=1;this.df=1E6;this.Ih=[!1,!1,!1,!1,!1,!1];this.Hi=!1;this.vj=[];this.Ok=8;this.Vp=new p.Nk;this.Ud=[];this.u=d;if(d.Yd||d.Eg)d.kh=2}g.prototype.Dg=function(){var d=this.u.R;if(d){var b=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),alert(d.getShaderInfoLog(b)),b=null);var a=d.createShader(d.VERTEX_SHADER);this.Tc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.P=d.createProgram();this.zf(this.P,a,b);this.P.ja=d.getAttribLocation(this.P,"aVertexPosition");d.enableVertexAttribArray(this.P.ja);this.P.La=d.getAttribLocation(this.P,"aTextureCoord");d.enableVertexAttribArray(this.P.La);this.P.be=d.getUniformLocation(this.P,"uPMatrix");this.P.Xg=d.getUniformLocation(this.P,"uMVMatrix");this.P.Jf=d.getUniformLocation(this.P,"uSampler");this.P.Xi=d.getUniformLocation(this.P,"uZoffset");b=d.createShader(d.VERTEX_SHADER);this.Tc(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
a=d.createShader(d.FRAGMENT_SHADER);this.Tc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.Id=d.createProgram();this.zf(this.Id,b,a);this.Id.ja=d.getAttribLocation(this.Id,"aVertexPosition");d.enableVertexAttribArray(this.Id.ja);a=d.createShader(d.VERTEX_SHADER);this.Tc(a,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
b=d.createShader(d.FRAGMENT_SHADER);this.Tc(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.qg=d.createProgram();this.zf(this.qg,a,b)}};g.prototype.Yh=function(){var d=this.u,b=d.R;if(b){var a=b.createShader(b.FRAGMENT_SHADER);var c=this.Hj(13);this.Tc(a,c);c=b.createShader(b.VERTEX_SHADER);
this.Tc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Mm=b.createProgram();this.zf(this.Mm,c,a);a=b.createShader(b.FRAGMENT_SHADER);c=this.Hj(4);this.Tc(a,c);c=b.createShader(b.VERTEX_SHADER);this.Tc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Nm=b.createProgram();this.zf(this.Nm,c,a);a=b.createShader(b.FRAGMENT_SHADER);c=this.Hj(d.F.format);this.Tc(a,c);c=b.createShader(b.VERTEX_SHADER);this.Tc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n");
this.Om=b.createProgram();this.zf(this.Om,c,a);this.vi||(this.vi=b.createBuffer())}else this.u.O("No WebGL to initRemapShader!")};g.prototype.Tc=function(d,b){var a=this.u.R;a.shaderSource(d,b);a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(d)),Kh&&alert(a.getShaderInfoLog(d)))};g.prototype.zf=function(d,b,a){var c=this.u.R;c.attachShader(d,b);c.attachShader(d,a);c.linkProgram(d);c.getProgramParameter(d,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(d)};g.prototype.Hj=function(d){var b=this.u;var a="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
a=(13==d?a+"uniform samplerCube cubeTexture;":a+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";a+="vec4 direction;\n";a+="vec2 src;\n";a+="vec2 srcCord;\n";a+="vec2 texc;\n";var c=this.Tl(b.Ra());b.Ra()!=b.yc&&0!=b.yc?(b=this.Tl(b.yc),a+="vec4 direction1,direction2;\n",a+=c.replace("direction=","direction1="),a+=b.replace("direction=","direction2="),a+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):a+=c;a+="direction=direction*matRotate;\n";13==d&&(a+="direction.z=-direction.z;",
a+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==d&&(a+="float iz=1.0/(direction.z * rectSrcDistance);\n",a+="src.x=-direction.x*iz;\n",a+="src.y= direction.y*iz;\n",a+="texc=src * srcScale + srcOffset;\n",a+="if (",a+="(direction.z<0.0) && ",a+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",a+="  gl_FragColor = texture2D(tileTexture, texc);\n",a+="} else {\n",a+="  discard;\n",a+="}\n");1==d&&(a+="src.x=atan(float(-direction.x), float(-direction.z));",a+=
"src.y=asin(direction.y);\n",a+="texc=src * srcScale + srcOffset;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");14==d&&(a+="vec2 cf;\n",a+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=+direction.y/direction.z;\n",a+="  cf.x=1.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",
a+="  src.y=-direction.y/direction.x;\n",a+="  cf.x=3.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",a+="  src.x=-direction.x/direction.z;\n",a+="  src.y=-direction.y/direction.z;\n",a+="  cf.x=5.0;cf.y=3.0;\n",a+="}\n",a+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",a+="  src.x=+direction.z/direction.x;\n",a+="  src.y=+direction.y/direction.x;\n",a+="  cf.x=1.0;cf.y=1.0;\n",
a+="}\n",a+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",a+="  src.x=+direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=5.0;cf.y=1.0;\n",a+="}\n",a+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",a+="  src.x=-direction.x/direction.y;\n",a+="  src.y=-direction.z/direction.y;\n",a+="  cf.x=3.0;cf.y=1.0;\n",a+="}\n",a+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",a+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",a+="gl_FragColor = texture2D(tileTexture, texc);\n");return a+="}\n"};g.prototype.Tl=function(d){var b="";switch(d){case 4:b+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:b+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:b+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return b+
"direction.w=0.0;\ndirection=normalize(direction);\n"};g.prototype.cm=function(d){var b,a,c=this.u,k=this.u.R;this.pj=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,this.pj);var l=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(b=0;12>b;b++)2>b%3&&(l[b]*=d);k.bufferData(k.ARRAY_BUFFER,new Float32Array(l),k.STATIC_DRAW);this.te=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,this.te);var e=[1,0,0,0,0,1,1,1];k.bufferData(k.ARRAY_BUFFER,new Float32Array(e),k.STATIC_DRAW);this.jd=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,
this.jd);var h=[0,1,2,0,2,3];k.bufferData(k.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),k.STATIC_DRAW);l=[];h=[];e=[];var n=new p.Ga;for(d=0;6>d;d++){var m=d%3;var g=3>d?1:0;for(a=0;4>a;a++){n.x=-1;n.y=-1;n.z=1;for(b=0;b<a;b++)n.Sm();e.push((0>n.x?.33:0)+.33*m,(0>n.y?0:.5)+.5*g);if(4>d)for(b=0;b<d;b++)n.Iq();else 5==d?n.Hq():n.Gq();l.push(n.x,n.y,n.z)}b=4*d;h.push(0+b,1+b,2+b,0+b,2+b,3+b)}c.F.Jk=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,c.F.Jk);k.bufferData(k.ARRAY_BUFFER,new Float32Array(l),k.STATIC_DRAW);
c.F.Ji=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,c.F.Ji);k.bufferData(k.ARRAY_BUFFER,new Float32Array(e),k.STATIC_DRAW);c.F.Pj=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,c.F.Pj);k.bufferData(k.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),k.STATIC_DRAW);this.Jp=k.createBuffer();this.Ip=k.createBuffer()};g.prototype.Kj=function(d){var b=this;return function(){try{if(d.hq)return;var a=b.u.R;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=d.Fe&&d.Fe.complete?d.Yl||(a.bindTexture(a.TEXTURE_2D,
d),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d.Fe),c=d.Yl=!0):null!=d.Ef&&d.Ef.complete&&(a.bindTexture(a.TEXTURE_2D,d),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d.Ef),c=!0);c&&(d.loaded=!0);a.bindTexture(a.TEXTURE_2D,null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0)}catch(k){b.u.O(k)}b.u.update(2)}};g.prototype.dm=function(){var d=this.u,b=d.R;if(this.gb)for(;0<this.gb.length;)b.deleteTexture(this.gb.pop());this.gb=[];for(var a=0;6>a;a++){var c=b.createTexture();this.od++;
c.Ef=null;c.Fe=null;c.Yl=!1;b.bindTexture(b.TEXTURE_2D,c);b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);if(d.ef[a]){var k=new Image;k.crossOrigin=d.crossOrigin;k.src=d.Mb(d.ef[a]);c.Ef=k;k.addEventListener&&k.addEventListener("load",this.Kj(c),!1);d.bc.push(k)}this.gb.push(c)}for(a=0;6>a;a++)d.kg[a]&&
(k=new Image,k.crossOrigin=d.crossOrigin,k.src=d.Mb(d.kg[a]),k.addEventListener?k.addEventListener("load",this.Kj(this.gb[a]),!1):k.onload=this.Kj(this.gb[a]),this.gb[a].Fe=k,d.bc.push(k));for(a=0;a<d.S.length;a++)d.S[a].td||(d.S[a].texture=b.createTexture(),d.od++,b.bindTexture(b.TEXTURE_2D,d.S[a].texture),b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));d.F.texture=b.createTexture();d.od++;b.bindTexture(b.TEXTURE_2D,d.F.texture);b.texImage2D(b.TEXTURE_2D,0,b.RGB,1,1,0,b.RGB,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindTexture(b.TEXTURE_2D,null)};g.prototype.Vr=function(){var d=this.u;if(d.D.width!=d.L.offsetWidth||d.D.height!=d.L.offsetHeight)d.D.width=
d.L.offsetWidth,d.D.height=d.L.offsetHeight;d.xe&&(d.Vc(0),d.Mc());if(d.R){var b=d.R;this.Ri();b.clear(b.DEPTH_BUFFER_BIT);b.useProgram(this.P);this.Qf(0);b.uniform1i(this.P.Jf,0);b.enableVertexAttribArray(this.P.ja);b.enableVertexAttribArray(this.P.La);b.bindBuffer(b.ARRAY_BUFFER,this.te);b.vertexAttribPointer(this.P.La,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.jd);b.uniform1f(this.P.Xi,1E-4);b.vertexAttribPointer(this.P.ja,3,b.FLOAT,!1,0,0);p.ka.identity(this.xb);
p.ka.perspective(d.Ob(),d.wb.width/d.wb.height,.1,100,this.xb);b.uniformMatrix4fv(this.P.be,!1,this.xb);for(d=0;6>d;d++)this.Qf(d),b.bindBuffer(b.ARRAY_BUFFER,this.pj),b.vertexAttribPointer(this.P.ja,3,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.te),b.vertexAttribPointer(this.P.La,2,b.FLOAT,!1,0,0),6<=this.gb.length&&this.gb[d].loaded&&(b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.gb[d]),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.jd),b.uniform1i(this.P.Jf,0),b.uniformMatrix4fv(this.P.Xg,
!1,this.wa),b.uniformMatrix4fv(this.P.be,!1,this.xb),b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0))}};g.prototype.Ri=function(){var d=this.u;if(d.v.Ff&&6<d.v.Ff.length){var b=parseInt(d.v.Ff);d.R.clearColor((b>>16&255)/255,(b>>8&255)/255,(b>>0&255)/255,1)}};g.prototype.Qf=function(d,b){void 0===b&&(b=1);var a=this.u;p.ka.identity(this.wa);p.ka.rotate(this.wa,b*-a.U.m*Math.PI/180,[0,0,1]);p.ka.rotate(this.wa,b*-a.A.m*Math.PI/180,[1,0,0]);-1==b?p.ka.rotate(this.wa,-a.pan.m*Math.PI/180,[0,1,0]):p.ka.rotate(this.wa,
(180-a.pan.m)*Math.PI/180,[0,1,0]);a.Oa&&(p.ka.rotate(this.wa,-a.Oa.pitch*Math.PI/180,[1,0,0]),p.ka.rotate(this.wa,a.Oa.U*Math.PI/180,[0,0,1]));4>d?p.ka.rotate(this.wa,-Math.PI/2*d,[0,1,0]):p.ka.rotate(this.wa,Math.PI/2*(5==d?1:-1),[1,0,0])};g.prototype.xr=function(d){var b=this;return function(){b.vj.push(d)}};g.prototype.Do=function(d){this.u.Ma=!0;this.u.kd=!0;d.loaded=!0;d.lk=0;d.ee=0;var b=this.u.R;this.ml();b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);if(null!=d.v&&d.v.complete){d.pb=b.createTexture();
this.u.od++;b.bindTexture(b.TEXTURE_2D,d.pb);try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d.v)}catch(a){b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.u.O(a)}}this.u.update(2)};g.prototype.ml=function(){this.u.Vb&&this.u.Vb--};g.prototype.Eo=function(){if(0<this.vj.length){var d=this.vj.shift();this.Do(d)}};g.prototype.eq=function(d){var b=this;return function(){b.u.Ma=!0;b.u.kd=!0;var a=b.u.v;try{if(null!=d&&d.complete){var c=
a.levels[a.levels.length-1],k=a.Ca;c.height=c.width=d.width-2*k;c.T=c.da=1;for(var l=0;6>l;l++){var e=new p.Od;e.W=document.createElement("canvas");b.u.ia?(e.W.width=c.width+2*k,e.W.height=c.height+2*k):(e.W.width=a.N+2*k,e.W.height=a.N+2*k);e.Ya=e.W.getContext("2d");e.W.style[b.u.ab+"Origin"]="0% 0%";e.W.style.overflow="hidden";e.W.style.position="absolute";e.v=d;var h=c.width+2*k,n=c.height+2*k;e.Ya&&e.Ya.drawImage(d,0,l*n,h,n,0,0,h,n);if(b.u.ia&&b.u.R){var m=b.u.R;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,
1);e.pb=m.createTexture();b.u.od++;m.bindTexture(m.TEXTURE_2D,e.pb);try{m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,e.W)}catch(fa){b.u.O(fa)}m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,0)}b.u.cd&&(e.W.Xd=-1,b.u.L.insertBefore(e.W,b.u.L.firstChild));c.ba[l]=e}c.loaded=!0}}catch(fa){b.u.O(fa)}b.u.update(2)}};g.prototype.qn=function(d){var b=this;return function(){b.u.Ma=!0;b.u.kd=!0;b.ml();d.v=null}};g.prototype.Tr=function(){var d=this.u,b=d.v,a=d.v.levels;d.xe&&
(d.Vc(0),d.Mc());if(d.R){var c=d.R;c.useProgram(this.P);this.Ri();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);p.ka.identity(this.xb);p.ka.perspective(d.Ob(),d.wb.width/d.wb.height,.1,100,this.xb);c.uniformMatrix4fv(this.P.be,!1,this.xb);d.xn();d.Yj();var k=d.Aj();var l=a.length-1;for(d.zc=0;l>=k;){var e=a[l],h=1;l==a.length-1&&0==b.Ca&&(h=b.N/(b.N-.5));for(var n=0;6>n;n++){var m=d.cube.faces[n];var g=m.Cf;if(m.ob&&0<g.Yf&&0<g.wh&&0<g.scale||e.cache){m.Ma=!1;m.bounds[l]||(m.bounds[l]={hb:0,
Eb:0,Fb:0,Gb:0});var f=m.bounds[l];e.cache?(f.hb=0,f.Eb=0,f.Fb=e.T-1,f.Gb=e.da-1):d.Ul(e,g,f);g=!0;for(var w=f.Eb;w<=f.Gb;w++)for(var q=f.hb;q<=f.Fb;q++){var y=q+w*e.T+n*e.T*e.da,x=e.ba[y];x||(x=e.ba[y]=new p.Od);this.Mh()?x.v||(x.ee?x.ee--:(this.hi(x,e,d.ie(n,l,q,w)),d.Ma=!0)):d.zc++;if(x.pb){if(!x.nf){y=.5*l+1;x.nf=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,x.nf);var A=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];A[3]=q*b.N-b.Ca;A[0]=Math.min((q+1)*b.N,e.width)+b.Ca;A[7]=w*b.N-b.Ca;A[1]=Math.min((w+1)*b.N,e.height)+
b.Ca;A[4]=A[1];A[6]=A[3];A[9]=A[0];A[10]=A[7];for(var db=0;12>db;db++)A[db]=0==db%3?h*y*(-2*A[db]/e.width+1):1==db%3?h*y*(-2*A[db]/e.height+1):y;c.bufferData(c.ARRAY_BUFFER,new Float32Array(A),c.STATIC_DRAW)}}else g=!1;x.visible=m.ob}f.Vj=g}}l--}for(n=0;6>n;n++)if(m=d.cube.faces[n],m.ob)for(g=m.Cf,this.Qf(n),c.uniform1i(this.P.Jf,0),c.uniformMatrix4fv(this.P.be,!1,this.xb),c.uniformMatrix4fv(this.P.Xg,!1,this.wa),c.enableVertexAttribArray(this.P.ja),c.enableVertexAttribArray(this.P.La),c.bindBuffer(c.ARRAY_BUFFER,
this.te),c.vertexAttribPointer(this.P.La,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.jd),c.useProgram(this.P),l=k;l<=a.length-1;){e=a[l];if(m.ob&&0<g.Yf&&m.bounds[l]&&0<=m.bounds[l].hb){f=m.bounds[l];for(w=f.Eb;w<=f.Gb;w++)for(q=f.hb;q<=f.Fb;q++)y=q+w*e.T+n*e.T*e.da,(x=e.ba[y])&&x.pb&&(c.uniform1f(this.P.Xi,1E-4*(q%2+w%2*2)),c.bindBuffer(c.ARRAY_BUFFER,x.nf),c.vertexAttribPointer(this.P.ja,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,x.pb),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),x.visible=m.ob;f.Vj&&(l=a.length)}l++}this.mk();d.kd=!1}};g.prototype.Mh=function(){return this.u.Vb<this.u.kh};g.prototype.hi=function(d,b,a){var c=this.u;c.Oj++;d.v=new Image;d.lk++;d.ee=1<<d.lk;d.v.onload=this.xr(d);d.v.onerror=this.qn(d);
d.v.onabort=this.qn(d);d.v.crossOrigin=c.crossOrigin;d.v.setAttribute("src",a);c.O("load "+a);b.cache&&c.bc.push(d.v);c.Vb++};g.prototype.In=function(){var d=this.u,b=d.v;d.xe&&(d.Vc(0),d.Mc());if(d.R){var a=d.R;this.Ri();Kh&&a.clearColor(.2,0,0,1);a.clear(a.DEPTH_BUFFER_BIT);a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.bindBuffer(a.ARRAY_BUFFER,this.vi);var c=[0,0];c[2]=d.D.width;c[3]=0;c[4]=d.D.width;c[5]=d.D.height;c[6]=0;c[7]=d.D.height;a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);
this.u.zc=0;if(!this.Fc||this.Hg)0<b.levels.length?this.Bo():this.Co();d.F.rd?this.sq():(a.enable(a.DEPTH_TEST),a.depthRange(0,1),a.depthFunc(a.LESS),this.Hi=!1,0<b.levels.length&&this.Ur(),this.Fc&&!this.Hi&&this.rq())}};g.prototype.fr=function(d,b,a,c,k,l,e){var h=this.u,n=h.v,m=h.D,g=a*n.N/b.width,f=(a+1)*n.N/b.width;a=c*n.N/b.height;b=(c+1)*n.N/b.height;1<f&&(k*=2,f=1);1<b&&(k*=2,b=1);k=Math.min(this.Ok,k);f=(f-g)/k;var w=(b-a)/k;c=b=0;n={x:0,y:0};var q={x:0,y:0},y=0;d.Vh=0;var x=h.Yg,A=new p.Ga,
db=this.Vp;db.Wm();4>l?db.Me(-90*l):db.Ld(5==l?90:-90);h.Oa&&(db.Ne(h.Oa.U),db.Ld(-h.Oa.pitch));db.Me(-h.pan.m);db.Ld(h.A.m);db.Ne(h.U.m);for(l=0;l<=k;l++)for(var z=0;z<=k;z++){var id=2*(g+z*f)-1;var ka=2*(a+l*w)-1;A.x=1*id;A.y=1*ka;A.z=-1;A.normalize();db.cq(A);id=this.Ql(A,n,h.Ra());0!=h.yc&&1>x&&(id=id&&this.Ql(A,q,h.yc),n.x=n.x*x+q.x*(1-x),n.y=n.y*x+q.y*(1-x));id?-1E10<n.x&&1E10>n.x&&-1E10<n.y&&1E10>n.y?-2<n.x&&2>n.x&&-2<n.y&&2>n.y&&(b+=n.x,c+=n.y,y++):n.x=NaN:n.x=NaN;d.pd[d.Vh++]=n.x;d.pd[d.Vh++]=
n.y}0<y?(b/=y,c/=y):e=0;for(a=0;a<d.Vh;a+=2)n.x=d.pd[a],n.y=d.pd[a+1],h=n.x-b,g=n.y-c,n.x+=h*e,n.y+=g*e,d.pd[a]=m.width/2+n.x*m.width/2,d.pd[a+1]=m.height/2-n.y*m.width/2;this.gr(d,k)};g.prototype.Ql=function(d,b,a){var c=!0;switch(a){case 0:case 4:a=1/(d.z*this.kk);b.x=-d.x*a;b.y=d.y*a;0<d.z&&(c=!1);break;case 9:1==d.z&&(c=!1);a=1/((1-d.z)*this.zk);b.x=d.x*a;b.y=-d.y*a;break;case 12:if(a=Math.sqrt(d.x*d.x+d.y*d.y),0==a)b.x=0,b.y=0;else{var k=2*this.Cj*Math.acos(-d.z)/a;if(2<a)return!1;b.x=k*d.x;
b.y=-k*d.y}}return c};g.prototype.gr=function(d,b){for(var a=this.u,c=[],k,l=d.Dd=0;l<b;l++)for(var e=0;e<b;e++){c[0]=l+e*(b+1);c[1]=l+1+e*(b+1);c[2]=l+(e+1)*(b+1);c[3]=l+1+(e+1)*(b+1);k=!0;for(var h=0;4>h;h++)isNaN(d.pd[2*c[0]])&&(k=!1);if(k){var n=!1,m=!1,g=!1,f=!1;for(h=0;4>h;h++){var p=d.pd[2*c[h]];p<a.D.width&&(m=!0);0<=p&&(n=!0);p=d.pd[2*c[h]+1];p<a.D.height&&(g=!0);0<=p&&(f=!0)}if(k=k&&m&&n&&g&&f)d.Ce[d.Dd++]=c[0],d.Ce[d.Dd++]=c[3],d.Ce[d.Dd++]=c[2],d.Ce[d.Dd++]=c[0],d.Ce[d.Dd++]=c[1],d.Ce[d.Dd++]=
c[3]}}};g.prototype.Ur=function(){var d=this.u,b=d.v,a=d.v.levels;d.xe&&(d.Vc(0),d.Mc());if(d.R){var c=d.R,k=this.Nm;c.useProgram(k);this.Ek(k);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);p.ka.identity(this.xb);p.ka.perspective(d.Ob(),d.wb.width/d.wb.height,.1,100,this.xb);c.uniformMatrix4fv(c.getUniformLocation(k,"uPMatrix"),!1,this.xb);this.u.zc=0;d.Yj();var l=d.Aj(),e=0;var h=a.length-1;for(var n={},m=a[h];m.Le&&0<h;)h--,m=a[h];for(var g=h,f=g,w=0;6>w;w++)for(var q=0;q<m.da;q++)for(var y=
0;y<m.T;y++){var x=y+q*m.T+w*m.T*m.da;n[x]=1}for(;h>=l;){var A={};m=a[h];var db=null;0<h&&(db=a[h-1]);var z=!0;for(var id in n)if(n.hasOwnProperty(id)){x=Number(id);var ka=m.ba[x];w=Number(Math.floor(x/(m.T*m.da)));q=Math.floor((x-w*m.T*m.da)/m.T);y=Math.floor(x-(q*m.T+w*m.T*m.da));if(6<=w)console.log("Grrr...");else{var tf=this.u.cube.faces[w];tf.Ma=!1;ka||(ka=m.ba[x]=new p.Od,d.O("create "+x));this.fr(ka,m,y,q,Math.max(1,this.Ok>>g-h),w,-(0!=d.yc)?.3:.1);ka.visible=0<ka.Dd||m.cache;ka.ci=3;ka.Lg=
Date.now();ka.visible&&!ka.pb&&(z=!1,this.Mh()?ka.v||(ka.ee?ka.ee--:(this.hi(ka,m,d.ie(w,h,y,q)),d.Ma=!0)):this.u.zc++);if(db&&(ka.visible||db.cache)){ka=(y*b.N+1)/m.width;y=Math.min(1,((y+1)*b.N-1)/m.width);var lh=(q*b.N+1)/m.height;q=Math.min(1,((q+1)*b.N-1)/m.height);x=b.N/db.width;tf=b.N/db.height;var mh=lh;lh=Math.floor(lh*db.height/b.N);do{var nh=ka,ph=Math.floor(ka*db.width/b.N);do{var rh=ph+lh*db.T+w*db.T*db.da;ph<db.T&&lh<db.da?A[rh]=1:d.O("Grrrr");ph++;nh+=x}while(nh<y);lh++;mh+=tf}while(mh<
q)}}}z&&(f=h,20>d.fov.m&&h<this.df&&(this.Hi=!0));n=A;h--}this.mk();c.uniform1i(c.getUniformLocation(k,"tileTexture"),0);c.activeTexture(c.TEXTURE0);h=l;for(l=-1;h<=Math.min(f,this.df-1);){m=a[h];for(id in m.ba)if(m.ba.hasOwnProperty(id)){n=Number(id);ka=m.ba[n];w=Math.floor(n/(m.T*m.da));q=Math.floor((n-w*m.T*m.da)/m.T);y=Math.floor(n-(q*m.T+w*m.T*m.da));l!=w&&(l=w,this.Si(w,k));if(e>d.Ge){d.O("Excided painted tiles");this.Hi=!1;break}ka.pb&&(n=w=b.N,y==m.T-1&&(w=m.width-b.N*y),q==m.da-1&&(n=m.height-
b.N*q),w=(w+2*b.Ca)/b.N,n=(n+2*b.Ca)/b.N,c.bindTexture(c.TEXTURE_2D,ka.pb),c.uniform2f(c.getUniformLocation(k,"uCanvasDimensions"),d.D.width,d.D.height),g=c.getUniformLocation(k,"srcScale"),c.uniform2f(g,.5*m.width/b.N/w,.5*m.height/b.N/n),g=c.getUniformLocation(k,"srcOffset"),c.uniform2f(g,(.5*m.width+b.Ca-b.N*y)/b.N/w,-(.5*m.height+b.Ca-b.N*q)/b.N/n+1),g=c.getUniformLocation(k,"zOffset"),c.uniform1f(g,(h+1)/(a.length+5)),w=c.getAttribLocation(k,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),
c.disableVertexAttribArray(2),c.enableVertexAttribArray(w),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Jp),c.vertexAttribPointer(w,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(ka.pd),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,
this.Ip),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(ka.Ce),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,ka.Dd,c.UNSIGNED_SHORT,0),e++)}h++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);d.kd=!1}};g.prototype.Si=function(d,b){var a=this.u.R;p.ka.identity(this.wa);this.Qf(d,-1);a.uniformMatrix4fv(a.getUniformLocation(b,"matRotate"),!1,this.wa)};g.prototype.sq=function(){var d=this.u;if(d.R){var b=d.R,a=this.Om;b.useProgram(a);this.Si(0,a);b.uniform2f(b.getUniformLocation(a,"uCanvasDimensions"),
d.D.width,d.D.height);if(1==d.F.format){var c=b.getUniformLocation(a,"srcScale");b.uniform2f(c,-.5/Math.PI,(d.F.flipY?-1:1)/Math.PI)}14==d.F.format&&(c=b.getUniformLocation(a,"srcScale"),b.uniform2f(c,1-2*d.F.$e/(d.F.width/3),1-2*d.F.$e/(d.F.height/2)));c=b.getUniformLocation(a,"srcOffset");b.uniform2f(c,.5,.5);this.Ek(a);c=b.getUniformLocation(a,"cubeTexture");b.uniform1i(c,0);c=b.getAttribLocation(a,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);
b.enableVertexAttribArray(c);b.bindBuffer(b.ARRAY_BUFFER,this.vi);b.vertexAttribPointer(c,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,d.F.texture);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.jd);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,
0)}};g.prototype.Ek=function(d){var b=this.u,a=b.R,c=this.u.D,k=c.width/c.height;switch(b.fov.mode){case 1:k=1;break;case 2:k=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(k=4/3)}c=a.getUniformLocation(d,"rectDstDistance");this.kk=Math.tan(Math.min(b.fov.m,179)/2*Math.PI/180)*k;a.uniform1f(c,this.kk);c=a.getUniformLocation(d,"fisheyeDistance");this.Cj=180/(b.fov.m*Math.PI*k);a.uniform1f(c,this.Cj);c=a.getUniformLocation(d,"stereoDistance");this.zk=Math.tan(Math.min(b.fov.m,
359)/4*Math.PI/180)*k;a.uniform1f(c,this.zk);c=a.getUniformLocation(d,"directionBlend");a.uniform1f(c,b.Yg)};g.prototype.rq=function(){var d=this.u,b=d.R,a=this.Mm;b.useProgram(a);b.enable(b.DEPTH_TEST);this.Si(0,a);b.uniform2f(b.getUniformLocation(a,"uCanvasDimensions"),d.D.width,d.D.height);d=b.getUniformLocation(a,"srcScale");b.uniform2f(d,1,1);d=b.getUniformLocation(a,"srcOffset");b.uniform2f(d,0,0);d=b.getUniformLocation(a,"zOffset");b.uniform1f(d,.9999);this.Ek(a);this.Si(0,a);d=b.getUniformLocation(a,
"cubeTexture");b.uniform1i(d,0);a=b.getAttribLocation(a,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(a);b.bindBuffer(b.ARRAY_BUFFER,this.vi);b.vertexAttribPointer(a,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_CUBE_MAP,this.Fc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,
b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.jd);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)};g.prototype.Co=function(){for(var d=this.u,b=d.R,a=[1,3,5,4,0,2],c=!0,k=!0,l=!1,e=0;6>e;e++)this.gb[e].Fe.complete?this.Ih[e]||(l=!0):c=!1,this.gb[e].Ef.complete||(k=!1);if(k||c)if(!k||c||!this.Fc||l){e=Math.round(d.Ac/d.Re);k=(d.Ac-e)/2;d.O("paint cube single - isMain: "+c+" overlap: "+k);this.df=0;this.Fc||
(this.Fc=b.createTexture());d.od++;b.bindTexture(b.TEXTURE_CUBE_MAP,this.Fc);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1);l=document.createElement("canvas");l.width=e;l.height=e;var h=l.getContext("2d");for(e=0;6>e;e++){var n=a[e];this.gb[n].Fe.complete?this.Ih[n]||(h.drawImage(this.gb[n].Fe,-k,-k),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,
l),this.Ih[n]=!0):(h.drawImage(this.gb[n].Ef,-k,-k,d.Ac,d.Ac),b.texImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,l))}this.Hg=!c}};g.prototype.Bo=function(){var d=this.u,b=this.u.v,a=d.v.levels,c=d.R,k;var l=a.length-1;if(!(0>l)){a[l].Le&&l--;var e=512;d.Gg&&(e=256);!d.If&&2<=d.devicePixelRatio&&(e=512);for((k=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&k<e&&(e=k);0<l&&a[l-1].width<=e;)l--;e=a[l];if(0!=e.T){k=l;var h=this.uo(l);this.Hg&&h&&(this.Hg=!1);h||(l=a.length-1,
e=a[l],h||(e.Le?(h=e.loaded,this.Xj(l-1)&&(--l,h=!0)):h=this.Xj(l)),this.Hg=!0);this.Xj(k);if(h&&this.df>l){e=a[l];d.O("paint cube level "+l);this.df=l;a=d.v.Ca;l=0<a||1<e.T||1<e.da;h=k=void 0;l&&(h=document.createElement("canvas"),h.width=e.width,h.height=e.height,2048>e.width&&(1500<e.width?(h.width=2048,h.height=2048):700<e.width?(h.width=1024,h.height=1024):(h.width=512,h.height=512)),k=h.getContext("2d"));this.Fc=c.createTexture();d.od++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.Fc);c.texParameteri(c.TEXTURE_CUBE_MAP,
c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);var n=[1,3,5,4,0,2];b=b.N;for(var m=0;6>m;m++){for(var g=0;g<e.da;g++)for(var f=0;f<e.T;f++){var p=f+g*e.T+n[m]*e.T*e.da,q=e.ba[p],y=q.v;q.W&&(y=q.W);y?l?(p=h.width/e.width,k.drawImage(y,p*(f*b-a),p*(g*b-a),p*y.width,p*y.height)):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,y):(d.O("WTF?!"),d.O(p),d.O(q))}l&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+
m,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h)}}}}};g.prototype.Xj=function(d){var b=this.u,a=b.v.levels[d];if(0==a.T)return!1;var c=!0;a.cache=!0;for(var k=0;6>k;k++)for(var l=0;l<a.da;l++)for(var e=0;e<a.T;e++){var h=e+l*a.T+k*a.T*a.da,n=a.ba[h];n||(n=a.ba[h]=new p.Od);this.Mh()?n.v||(n.ee?n.ee--:(this.hi(n,a,b.ie(k,d,e,l)),b.Ma=!0)):this.u.zc++;n.pb||(c=!1,b.Ma=!0)}c&&(a.loaded=!0);return c};g.prototype.uo=function(d){d=this.u.v.levels[d];if(0==d.T)return!1;for(var b=0;6>b;b++)for(var a=0;a<d.da;a++)for(var c=
0;c<d.T;c++){var k=d.ba[c+a*d.T+b*d.T*d.da];if(!k||!k.pb)return!1}return d.loaded=!0};g.prototype.ready=function(){return null!=this.Fc};g.prototype.mk=function(){for(var d=this.u,b=d.v.levels,a=d.R,c=Date.now(),k=b.length-1;0<=k;k--){var l=b[k];if(!l.cache)for(var e in l.ba)if(l.ba.hasOwnProperty(e)){var h=l.ba[e];0<h.ci&&h.ci--;h.visible||0<h.ci?(h.visible&&(h.Lg=c),h=this.Ud.indexOf(h),-1!==h&&this.Ud.splice(h,1)):-1===this.Ud.indexOf(h)&&(h.level=l,this.Ud.push(h))}}if(this.Ud.length>1.1*d.nn)for(this.Ud.sort(function(a,
c){return c.Lg-a.Lg});this.Ud.length>d.nn;)h=this.Ud.pop(),h.pb&&(a.deleteTexture(h.pb),d.od--,h.pb=0),h.v=null,h.nf&&(a.deleteBuffer(h.nf),h.nf=0),e=h.level.ba.indexOf(h),d.O("delete "+e+" "+(c-h.Lg)),delete h.level.ba[e]};g.prototype.Nr=function(){var d=this.u;if(d.R){var b=this.u.R;b.disable(b.DEPTH_TEST);var a;for(a=0;a<d.S.length;a++){var c=d.S[a];if(!c.td){p.ka.identity(this.wa);p.ka.rotate(this.wa,-d.U.m*Math.PI/180,[0,0,1]);p.ka.rotate(this.wa,-d.A.m*Math.PI/180,[1,0,0]);p.ka.rotate(this.wa,
(180-d.pan.m)*Math.PI/180,[0,1,0]);p.ka.rotate(this.wa,c.pan*Math.PI/180,[0,1,0]);p.ka.rotate(this.wa,-c.A*Math.PI/180,[1,0,0]);p.ka.translate(this.wa,[0,0,1]);p.ka.rotate(this.wa,c.ib*Math.PI/180,[0,0,1]);p.ka.rotate(this.wa,-c.Ka*Math.PI/180,[0,1,0]);p.ka.rotate(this.wa,c.Fa*Math.PI/180,[1,0,0]);var k=Math.tan(c.fov/2*Math.PI/180),l=c.aspect;l||(l=16/9);p.ka.scale(this.wa,[k,k/l,1]);p.ka.translate(this.wa,[0,0,-1]);b.bindBuffer(b.ARRAY_BUFFER,this.pj);b.vertexAttribPointer(this.P.ja,3,b.FLOAT,!1,
0,0);b.bindBuffer(b.ARRAY_BUFFER,this.te);b.vertexAttribPointer(this.P.La,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,c.texture);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.jd);b.uniform1i(this.P.Jf,0);b.uniformMatrix4fv(this.P.Xg,
!1,this.wa);b.uniformMatrix4fv(this.P.be,!1,this.xb);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}}b.enable(b.DEPTH_TEST)}};g.prototype.Mr=function(){var d=this.u,b;if(d.D.width!=d.L.offsetWidth||d.D.height!=d.L.offsetHeight)d.D.width=d.L.offsetWidth,d.D.height=d.L.offsetHeight;d.xe&&(d.Vc(0),d.Mc());if(d.R){var a=d.R;a.useProgram(this.P);p.ka.identity(this.xb);p.ka.perspective(d.Ob(),d.wb.width/d.wb.height,.1,100,this.xb);a.uniformMatrix4fv(this.P.be,!1,this.xb);this.Qf(0);a.uniform1i(this.P.Jf,
0);a.uniformMatrix4fv(this.P.be,!1,this.xb);a.uniformMatrix4fv(this.P.Xg,!1,this.wa);a.enableVertexAttribArray(this.P.ja);a.enableVertexAttribArray(this.P.La);a.bindBuffer(a.ARRAY_BUFFER,this.te);a.vertexAttribPointer(this.P.La,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.jd);a.uniform1f(this.P.Xi,1E-4);a.vertexAttribPointer(this.P.ja,3,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,d.F.texture);for(b=0;1>b;b++)this.Qf(0),a.bindBuffer(a.ARRAY_BUFFER,d.F.Jk),a.vertexAttribPointer(this.P.ja,
3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,d.F.Ji),a.vertexAttribPointer(this.P.La,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d.F.Pj),a.uniform1i(this.P.Jf,0),a.uniformMatrix4fv(this.P.Xg,!1,this.wa),a.uniformMatrix4fv(this.P.be,!1,this.xb),a.drawElements(a.TRIANGLES,36,a.UNSIGNED_SHORT,0)}};g.prototype.Lr=function(){var d=this.u,b=d.R,a=d.F;if(0<d.S.length)for(var c=0;c<d.S.length;c++){var k=d.S[c];if(!k.td&&k.isRunning&&k.Uh!=k.j.currentTime&&(k.Uh=k.j.currentTime,
!k.aspect&&0<k.j.videoHeight&&(k.aspect=k.j.videoWidth/k.j.videoHeight),d.th))try{k.texture&&(b.bindTexture(b.TEXTURE_2D,k.texture),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,k.j),d.update())}catch(e){d.O(e)}}if(a.j&&(c=Number(a.j.currentTime),a.Uh!=c)){a.Uh=c;try{var l=0<a.j.readyState;d.uf&&a.rd&&(l=l&&0<a.j.currentTime);a.texture&&a.bi&&l&&(a.rd=!0,a.width=a.j.videoWidth,a.height=a.j.videoHeight,b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,d.F.flipY),b.bindTexture(b.TEXTURE_2D,a.texture),b.texImage2D(b.TEXTURE_2D,
0,b.RGB,b.RGB,b.UNSIGNED_BYTE,a.j),a.mn=!0,d.update())}catch(e){d.O(e)}}};g.prototype.Dm=function(){var d,b,a=this.u,c=this.u.R;a.Ha.style.visibility="hidden";a.I.Jg!=a.I.mode&&(a.I.Jg=a.I.mode);if((0<=a.I.mode||0<a.I.tb.length)&&!a.K.mh){var k=1;0>=a.I.mode&&(k=0);3==a.I.mode&&(k=a.I.Aa);for(d=0;d<a.X.length;d++){var l=a.X[d];if("poly"==l.type){var e=l.ce,h=k;2==a.I.mode&&(h=l.Aa);var n=a.I.tb.indexOf(l.id);-1!=n&&(h=a.I.Ub[n]);if(0<e.length){n=[];for(b=0;b<e.length;b++)n.push(e[b].Sb),n.push(e[b].Ab),
n.push(0);c.useProgram(this.Id);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,new Float32Array(n),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.Id,"uCanvasDimensions"),a.D.width,a.D.height);e=c.getUniformLocation(this.Id,"uColor");b=l.$b;c.uniform3f(e,(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);var m=c.getUniformLocation(this.Id,"uAlpha");c.uniform1f(m,
l.Zb*h);c.vertexAttribPointer(this.Id.ja,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,n.length/3);b=l.Yb;c.uniform3f(e,(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);c.uniform1f(m,l.Xb*h);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,n.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,
0,n.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.P)}}}}};g.prototype.Dk=function(){var d=this.u,b=d.v;if(d.D.width!=d.L.offsetWidth||d.D.height!=d.L.offsetHeight)d.D.width=d.L.offsetWidth,d.D.height=d.L.offsetHeight;d.xe&&(d.Vc(0),d.Mc());if(d.R){var a=d.R;this.Ri();a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.useProgram(this.qg);var c=a.getUniformLocation(this.qg,"uRect");a.uniform2f(a.getUniformLocation(this.qg,
"uCanvasDimensions"),d.D.width,d.D.height);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.jd);var k=a.getAttribLocation(this.qg,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(k);a.bindBuffer(a.ARRAY_BUFFER,this.te);a.vertexAttribPointer(k,2,a.FLOAT,!1,0,0);d.zc=0;var l=100/d.fov.m;var e=b.width/b.height;k=d.D.height*l*e;l*=d.D.height;e=(d.pan.m/100/e-.5)*k+d.D.width/2;for(var h=(d.A.m/100-
.5)*l+d.D.height/2,n,m,g,f=0;b.levels.length>=f+2&&b.levels[f+1].width>k;)f++;var w;var q=[];for(w=b.levels.length-1;w>=f;){var y=b.levels[w];if(y.cache){var x={hb:0,Eb:0};x.Fb=y.T-1;x.Gb=y.da-1}else{x={};n=-h/l*(y.height/d.v.N);m=(-e+d.D.width)/k*(y.width/d.v.N);var A=(-h+d.D.height)/l*(y.height/d.v.N);x.hb=Math.min(Math.max(0,Math.floor(-e/k*(y.width/d.v.N))),y.T-1);x.Eb=Math.min(Math.max(0,Math.floor(n)),y.da-1);x.Fb=Math.min(Math.max(0,Math.floor(m)),y.T-1);x.Gb=Math.min(Math.max(0,Math.floor(A)),
y.da-1)}q[w]=x;var db=!0;for(m=x.Eb;m<=x.Gb;m++)for(n=x.hb;n<=x.Fb;n++)g=n+m*y.T,A=y.ba[g],A||(A=new p.Od,y.ba[g]=A),this.Mh()?A.v||(this.hi(A,y,d.ie(0,w,n,m)),d.Ma=!0):this.u.zc++,A.v&&A.v.complete||(db=!1),A.visible=!0;x.Vj=db;w--}for(w=b.levels.length-1;w>=f;){y=b.levels[w];if(q[w]&&0<=q[w].hb)for(x=q[w],m=x.Eb;m<=x.Gb;m++)for(n=x.hb;n<=x.Fb;n++)g=n+m*y.T,(A=y.ba[g])&&A.v&&A.v.complete&&(d=e+(-b.Ca+b.N*n)*k/y.width,a.uniform4f(c,d,h+(-b.Ca+b.N*m)*l/y.height,A.v.width*k/y.width,A.v.height*l/y.height),
A&&A.pb&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.jd),a.bindTexture(a.TEXTURE_2D,A.pb),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)));w--}this.mk()}};g.prototype.fe=function(){var d=this.u.R;if(d&&this.gb)for(;0<this.gb.length;){var b=this.gb.pop();b.hq=
!0;d.deleteTexture(b)}this.Fc&&(d.deleteTexture(this.Fc),this.Fc=null);this.df=1E6;this.Ih=[!1,!1,!1,!1,!1,!1]};return g}();p.Vn=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){return function(){this.Cf={sg:1,tg:1,Rg:0,Sg:0,Yf:0,wh:0,scale:1};this.ob=!0;this.bounds=[]}}(),g=function(){function d(){var b;this.faces=Array(6);for(b=0;6>b;b++)this.faces[b]=new f}d.prototype.vo=function(b,a,c,d){for(var k=0;6>k;k++){var e;if(e=this.faces[k]){var h=[];h.push(new p.Ga(-1,-1,-1,0,0));h.push(new p.Ga(1,-1,-1,1,0));h.push(new p.Ga(1,1,-1,1,1));h.push(new p.Ga(-1,1,-1,0,1));for(var n=0;n<h.length;n++)4>k?h[n].Ka(-Math.PI/2*k):h[n].Fa(Math.PI/2*(4===k?
-1:1)),d&&(h[n].ib(d.U*Math.PI/180),h[n].Fa(-d.pitch*Math.PI/180)),h[n].Ka(-b*Math.PI/180),h[n].Fa(a*Math.PI/180),h[n].ib(c*Math.PI/180);e.ob=0<h.length}}};return d}();p.Rn=g})(ggP2VR||(ggP2VR={}));
(function(p){p.Qn=function(){return function(){this.levels=[];this.Ff="0x000000";this.Hm=!1;this.um=this.tm=.4;this.N=512;this.Ca=1;this.Uj=0;this.Wj="";this.Qm=this.height=this.width=0}}();p.Pk=function(){return function(){this.height=this.width=0;this.Le=this.cache=!1;this.da=this.T=0;this.loaded=!1;this.ba=[]}}();p.Od=function(){return function(){this.loaded=this.visible=!1;this.ee=this.lk=0;this.pd=[];this.Vh=0;this.Ce=[];this.ci=this.Lg=this.Dd=0}}()})(ggP2VR||(ggP2VR={}));
(function(p){p.Mn=function(){return function(f,g){this.u=f;this.Da=g;var d=this.__div=document.createElement("div");var b=document.createElement("img");if(g.ff){var a=g.ff;b.setAttribute("style","position: absolute;width: "+g.tj+"px; height: "+g.Kh+"px;top: -"+g.Kh/2+"px;left: -"+g.tj/2+"px; "+f.Pa+"user-select: none;")}else a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D",
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+f.Pa+"user-select: none;");b.setAttribute("src",a);b.ondragstart=function(){return!1};d.appendChild(b);a="position:absolute;"+(f.Pa+"user-select: none;");a+=f.Pa+"touch-callout: none;";a+=f.Pa+"tap-highlight-color: rgba(0,0,0,0);";f.Wc&&!f.ia&&(a+=f.Pa+"transform: translateZ(9999999px);");d.setAttribute("style",a);d.onclick=function(){f.Kf(g);f.dk(g.url,g.target);f.la&&f.la.hotspotProxyClick&&f.la.hotspotProxyClick(g.id,
g.url)};d.ondblclick=function(){f.la&&f.la.hotspotProxyDoubleClick&&f.la.hotspotProxyDoubleClick(g.id,g.url)};var c=f.I.Li;if(c.enabled&&""!=g.title){var k=document.createElement("div");a="position:absolute;";a=g.ff?a+("top:\t "+g.Kh/2+"px;"):a+"top:\t 20px;";a=c.Wi?a+"white-space: pre-wrap;":a+"white-space: nowrap;";a+=f.Pa+"transform-origin: 50% 50%;";k.setAttribute("style",a+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;");k.style.color=this.u.ea(c.Mi,c.Ki);k.style.backgroundColor=
c.background?this.u.ea(c.Yb,c.Xb):"transparent";k.style.border="solid "+this.u.ea(c.$b,c.Zb)+" "+c.Fh+"px";k.style.borderRadius=c.cj+"px";k.style.textAlign="center";0<c.width?(k.style.left=-c.width/2+"px",k.style.width=c.width+"px"):k.style.width="auto";k.style.height=0<c.height?c.height+"px":"auto";k.style.overflow="hidden";k.innerHTML=g.title;d.onmouseover=function(){0==c.width&&(k.style.left=-k.offsetWidth/2+"px");k.style.visibility="inherit";f.la&&f.la.hotspotProxyOver&&f.la.hotspotProxyOver(g.id,
g.url)};d.onmouseout=function(){k.style.visibility="hidden";f.la&&f.la.hotspotProxyOut&&f.la.hotspotProxyOut(g.id,g.url)};d.appendChild(k)}}}()})(ggP2VR||(ggP2VR={}));(function(p){p.Pc=function(){return function(){this.value=this.time=0;this.Ik="";this.se=this.re=this.qe=this.pe=this.zb=this.type=this.Cb=0;this.Bh=""}}();p.Mk=function(){return function(){this.Er=this.eo=this.length=0}}();p.Lk=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d){this.u=d;this.enabled=!1;this.dg=1;this.af=0;this.type="crossdissolve";this.pc=this.sa=this.Lc=0;this.Zf=5;this.ne=1;this.$f=!1;this.Qe=this.Pe=this.yk=0;this.Nd=70;this.Ln=0;this.Db=this.Kn=1;this.zh=this.yh=.5;this.oe=!1;this.sj=1}g.prototype.Dg=function(){var d=this.u.R,b=d.createShader(d.VERTEX_SHADER);d.shaderSource(b,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(b)),b=null);var a=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.ya=d.createProgram();d.attachShader(this.ya,b);d.attachShader(this.ya,a);d.linkProgram(this.ya);d.getProgramParameter(this.ya,d.LINK_STATUS)||alert("Could not initialise shaders");this.ya.ja=d.getAttribLocation(this.ya,"aVertexPosition");d.enableVertexAttribArray(this.ya.ja);this.ya.La=d.getAttribLocation(this.ya,"aTextureCoord");d.enableVertexAttribArray(this.ya.La);a=d.createShader(d.FRAGMENT_SHADER);
d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.cb=d.createProgram();d.attachShader(this.cb,b);d.attachShader(this.cb,a);d.linkProgram(this.cb);d.getProgramParameter(this.cb,d.LINK_STATUS)||alert("Could not initialise shaders");this.cb.ja=d.getAttribLocation(this.cb,"aVertexPosition");d.enableVertexAttribArray(this.cb.ja);this.cb.La=d.getAttribLocation(this.cb,"aTextureCoord");d.enableVertexAttribArray(this.cb.La);a=d.createShader(d.FRAGMENT_SHADER);
d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.Ta=d.createProgram();d.attachShader(this.Ta,b);d.attachShader(this.Ta,a);d.linkProgram(this.Ta);d.getProgramParameter(this.Ta,d.LINK_STATUS)||alert("Could not initialise shaders");this.Ta.ja=d.getAttribLocation(this.Ta,"aVertexPosition");d.enableVertexAttribArray(this.Ta.ja);this.Ta.La=d.getAttribLocation(this.Ta,"aTextureCoord");d.enableVertexAttribArray(this.Ta.La);a=d.createShader(d.FRAGMENT_SHADER);
d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.Xa=d.createProgram();d.attachShader(this.Xa,b);d.attachShader(this.Xa,a);d.linkProgram(this.Xa);d.getProgramParameter(this.Xa,d.LINK_STATUS)||alert("Could not initialise shaders");this.Xa.ja=d.getAttribLocation(this.Xa,"aVertexPosition");d.enableVertexAttribArray(this.Xa.ja);this.Xa.La=d.getAttribLocation(this.Xa,"aTextureCoord");d.enableVertexAttribArray(this.Xa.La)};g.prototype.Vc=function(){var d=
this.u.R;if(!d)return!1;if(this.oc=d.createFramebuffer()){d.bindFramebuffer(d.FRAMEBUFFER,this.oc);this.oc.width=1024;this.oc.height=1024;this.Se=d.createTexture();d.bindTexture(d.TEXTURE_2D,this.Se);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.oc.width,this.oc.height,0,d.RGBA,d.UNSIGNED_BYTE,null);var b=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,b);d.renderbufferStorage(d.RENDERBUFFER,
d.DEPTH_COMPONENT16,this.oc.width,this.oc.height);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.Se,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,b);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);this.sb=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,this.sb);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),d.STATIC_DRAW);this.sb.itemSize=3;this.sb.ae=
4;this.Gf=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,this.Gf);d.bufferData(d.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),d.STATIC_DRAW);return!0}return!1};g.prototype.Em=function(d){var b=this.u.R,a=this.u.wb;if(this.xd){b.useProgram(this.ya);b.bindBuffer(b.ARRAY_BUFFER,this.sb);b.vertexAttribPointer(this.ya.ja,this.sb.itemSize,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Gf);b.vertexAttribPointer(this.ya.La,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(this.ya.ja);b.enableVertexAttribArray(this.ya.La);
b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.Se);a=1+(this.Db-1)*d;var c=b.getUniformLocation(this.ya,"uAlpha");b.uniform1f(c,1);c=b.getUniformLocation(this.ya,"uZoomIn");b.uniform1i(c,1);c=b.getUniformLocation(this.ya,"uZoomCenter");var k=.5+(this.yh-.5)*Math.sqrt(d),l=.5+(this.zh-.5)*Math.sqrt(d);0>k-.5/a&&(k=.5/a);0>l-.5/a&&(l=.5/a);1<k+.5/a&&(k=1-.5/a);1<l+.5/a&&(l=1-.5/a);b.uniform2f(c,k,l);k=b.getUniformLocation(this.ya,"uZoomFactor");b.uniform1f(k,a);b.uniform1i(b.getUniformLocation(this.ya,
"uSampler"),0);b.drawArrays(b.TRIANGLE_STRIP,0,this.sb.ae);b.useProgram(this.u.xa.P)}else{this.u.ph();b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.SRC_ALPHA,b.ONE);b.enable(b.BLEND);b.disable(b.DEPTH_TEST);k=.5+(this.yh-.5);l=.5+(this.zh-.5);0>k-.5/this.Db&&(k=.5/this.Db);0>l-.5/this.Db&&(l=.5/this.Db);1<k+.5/this.Db&&(k=1-.5/this.Db);1<l+.5/this.Db&&(l=1-.5/this.Db);if("crossdissolve"==this.type)b.useProgram(this.ya),b.bindBuffer(b.ARRAY_BUFFER,this.sb),b.vertexAttribPointer(this.ya.ja,
this.sb.itemSize,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Gf),b.vertexAttribPointer(this.ya.La,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Se),c=b.getUniformLocation(this.ya,"uAlpha"),b.uniform1f(c,1-d),c=b.getUniformLocation(this.ya,"uZoomIn"),b.uniform1i(c,1==this.sa||2==this.sa||6==this.sa?1:0),c=b.getUniformLocation(this.ya,"uZoomCenter"),b.uniform2f(c,k,l),k=b.getUniformLocation(this.ya,"uZoomFactor"),b.uniform1f(k,this.Db),b.uniform1i(b.getUniformLocation(this.ya,
"uSampler"),0);else if("diptocolor"==this.type)b.useProgram(this.cb),b.bindBuffer(b.ARRAY_BUFFER,this.sb),b.vertexAttribPointer(this.cb.ja,this.sb.itemSize,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Gf),b.vertexAttribPointer(this.cb.La,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Se),b.uniform1f(b.getUniformLocation(this.cb,"uColorPercent"),Math.min(2*d,1)),c=b.getUniformLocation(this.cb,"uAlpha"),b.uniform1f(c,1-Math.max(2*(d-.5),0)),b.uniform3f(b.getUniformLocation(this.cb,
"uDipColor"),(this.af>>16&255)/255,(this.af>>8&255)/255,(this.af&255)/255),c=b.getUniformLocation(this.cb,"uZoomIn"),b.uniform1i(c,1==this.sa||2==this.sa||6==this.sa?1:0),c=b.getUniformLocation(this.cb,"uZoomCenter"),b.uniform2f(c,k,l),k=b.getUniformLocation(this.cb,"uZoomFactor"),b.uniform1f(k,this.Db),b.uniform1i(b.getUniformLocation(this.cb,"uSampler"),0);else if("irisround"==this.type||"irisroundcenter"==this.type||"irisrectangular"==this.type||"irisrectangularcenter"==this.type){b.useProgram(this.Ta);
b.bindBuffer(b.ARRAY_BUFFER,this.sb);b.vertexAttribPointer(this.Ta.ja,this.sb.itemSize,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Gf);b.vertexAttribPointer(this.Ta.La,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.Se);if(1==this.sa||2==this.sa||6==this.sa||"irisroundcenter"==this.type||"irisrectangularcenter"==this.type)var e=c=.5;else c=this.yh,e=this.zh;var h=c*a.width,n=e*a.height;h=Math.max(h,a.width-h);n=Math.max(n,a.height-n);"irisround"==this.type||"irisroundcenter"==
this.type?b.uniform1f(b.getUniformLocation(this.Ta,"uRadius"),(Math.sqrt(h*h+n*n)+this.Lc)*d):(h>n?(n=a.height/a.width*h+this.Lc,h+=this.Lc):(h=a.width/a.height*n+this.Lc,n+=this.Lc),b.uniform2f(b.getUniformLocation(this.Ta,"uRectDim"),h*d,n*d));d=b.getUniformLocation(this.Ta,"uSoftEdge");b.uniform1f(d,this.Lc);b.uniform1i(b.getUniformLocation(this.Ta,"uRound"),"irisround"==this.type||"irisroundcenter"==this.type?1:0);b.uniform2f(b.getUniformLocation(this.Ta,"uIrisCenter"),c*a.width,e*a.height);c=
b.getUniformLocation(this.Ta,"uZoomIn");b.uniform1i(c,1==this.sa||2==this.sa||6==this.sa?1:0);c=b.getUniformLocation(this.Ta,"uZoomCenter");b.uniform2f(c,k,l);k=b.getUniformLocation(this.Ta,"uZoomFactor");b.uniform1f(k,this.Db);b.uniform1i(b.getUniformLocation(this.Ta,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)b.useProgram(this.Xa),b.bindBuffer(b.ARRAY_BUFFER,this.sb),b.vertexAttribPointer(this.Xa.ja,
this.sb.itemSize,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Gf),b.vertexAttribPointer(this.Xa.La,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.Se),b.uniform1f(b.getUniformLocation(this.Xa,"uPercent"),3>this.sj?d*(a.width+this.Lc):d*(a.height+this.Lc)),d=b.getUniformLocation(this.Xa,"uSoftEdge"),b.uniform1f(d,this.Lc),b.uniform1i(b.getUniformLocation(this.Xa,"uDirection"),this.sj),b.uniform2f(b.getUniformLocation(this.Xa,"uCanvasDimensions"),a.width,a.height),
c=b.getUniformLocation(this.Xa,"uZoomIn"),b.uniform1i(c,1==this.sa||2==this.sa||6==this.sa?1:0),c=b.getUniformLocation(this.Xa,"uZoomCenter"),b.uniform2f(c,k,l),k=b.getUniformLocation(this.Xa,"uZoomFactor"),b.uniform1f(k,this.Db),b.uniform1i(b.getUniformLocation(this.Xa,"uSampler"),0);b.drawArrays(b.TRIANGLE_STRIP,0,this.sb.ae);b.useProgram(this.u.xa.P);b.disable(b.BLEND);b.enable(b.DEPTH_TEST)}};return g}();p.On=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d){this.nh=[];this.u=d;this.enabled=!1;this.Cb=2;this.hl=!1}g.prototype.sl=function(d){if(2==d.mode||3==d.mode||5==d.mode){var b=this.u.za.currentTime,a=d.fc.gain.value,c=d.dc.gain.value,k=d.ec.gain.value;d.uc.gain.linearRampToValueAtTime(d.uc.gain.value,b);d.uc.gain.linearRampToValueAtTime(0,b+this.Cb);d.fc.gain.linearRampToValueAtTime(a,b);d.fc.gain.linearRampToValueAtTime(0,b+this.Cb);d.dc.gain.linearRampToValueAtTime(c,b);d.dc.gain.linearRampToValueAtTime(0,
b+this.Cb);d.ec.gain.linearRampToValueAtTime(k,b);d.ec.gain.linearRampToValueAtTime(0,b+this.Cb)}else b=this.u.za.currentTime,d.md.gain.linearRampToValueAtTime(d.md.gain.value,b),d.md.gain.linearRampToValueAtTime(0,b+this.Cb);d.zj=!0;setTimeout(function(){d.Kd()},1E3*this.Cb+5)};g.prototype.qr=function(){for(var d=0;d<this.u.Y.length;d++){var b=this.u.Y[d];-1==this.u.ad.indexOf(b.id)&&(-1==this.u.ad.indexOf("_main")||-1!=this.u.me.indexOf(b.id))&&!this.u.isPlaying(b.id)&&-1<b.loop&&4!=b.mode&&6!=
b.mode&&(b.va?b.Sd():(b.j.play(),b.j.currentTime=0))}};g.prototype.Io=function(){var d=(this.u.za.currentTime-this.lr)/this.Cb;d=Math.min(1,d);for(var b=0;b<this.u.Y.length;b++){var a=this.u.Y[b];this.u.isPlaying(a.id)&&1>a.ua&&(a.ua=d)}1==d&&clearInterval(this.kr)};return g}();p.Pn=f})(ggP2VR||(ggP2VR={}));
(function(p){var f=function(){function g(d){this.Pg=[];this.gd=null;this.mc=[];this.cc=[];this.nc=[];this.tk=!0;this.u=d;this.zo()}g.prototype.Dg=function(){var d=this.u.R,b=d.createShader(d.VERTEX_SHADER);d.shaderSource(b,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(b)),b=null);var a=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.rc=d.createProgram();d.attachShader(this.rc,b);d.attachShader(this.rc,a);d.linkProgram(this.rc);d.getProgramParameter(this.rc,d.LINK_STATUS)||alert("Could not initialise shaders");this.rc.ja=d.getAttribLocation(this.rc,"aVertexPosition");d.enableVertexAttribArray(this.rc.ja);a=d.createShader(d.VERTEX_SHADER);b=d.createShader(d.VERTEX_SHADER);d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);d.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(b)),a=null);var c=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
d.compileShader(c);d.getShaderParameter(c,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(c)),c=null);this.Ba=d.createProgram();d.attachShader(this.Ba,a);d.attachShader(this.Ba,c);d.linkProgram(this.Ba);d.getProgramParameter(this.Ba,d.LINK_STATUS)||alert("Could not initialise shaders");this.Ba.ja=d.getAttribLocation(this.Ba,"aVertexPosition");d.enableVertexAttribArray(this.Ba.ja);a=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(alert(d.getShaderInfoLog(a)),a=null);this.Bb=d.createProgram();d.attachShader(this.Bb,b);d.attachShader(this.Bb,a);d.linkProgram(this.Bb);d.getProgramParameter(this.Bb,d.LINK_STATUS)||alert("Could not initialise shaders");this.Bb.ja=d.getAttribLocation(this.Bb,"aVertexPosition")};g.prototype.Vc=function(){var d=this.u.R;this.Cd=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,this.Cd);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),d.STATIC_DRAW);this.Cd.itemSize=3;this.Cd.ae=4;this.lf=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,this.lf);for(var b=[0,0,0],a=2*Math.PI/6,c=Math.PI/180*35,k=1,l=c;l<=c+2*Math.PI;l+=a)b.push(Math.sin(l)),b.push(-Math.cos(l)),b.push(0),k++;d.bufferData(d.ARRAY_BUFFER,new Float32Array(b),d.STATIC_DRAW);this.lf.itemSize=3;this.lf.ae=k;this.Rm=d.createTexture();d.bindTexture(d.TEXTURE_2D,this.Rm);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);b=document.createElement("canvas");b.width=100;b.height=1;a=b.getContext("2d");a.width=100;a.height=1;c=a.createLinearGradient(0,0,100,0);c.addColorStop(0,this.u.ea(16777215,0));c.addColorStop(.88,this.u.ea(0,0));c.addColorStop(.9,this.u.ea(16654848,1));c.addColorStop(.92,this.u.ea(16776448,1));c.addColorStop(.94,this.u.ea(4849466,1));c.addColorStop(.96,
this.u.ea(131071,1));c.addColorStop(.98,this.u.ea(8190,1));c.addColorStop(1,this.u.ea(0,0));a.fillStyle=c;a.fillRect(0,0,100,1);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b)};g.prototype.Dq=function(){for(;0<this.Pg.length;)this.Pg.pop()};g.prototype.zo=function(){var d=[],b=[],a=[];var c={radius:14,alpha:.2,color:11390415,B:.27};d.push(c);c={radius:20,alpha:.25,color:11390415,B:.4};d.push(c);c={radius:10,alpha:.2,color:12442332,B:.6};d.push(c);c={radius:15,alpha:.2,color:11390415,
B:.8};d.push(c);c={radius:10,alpha:.2,color:12442332,B:1.5};d.push(c);c={radius:15,alpha:.2,color:11390415,B:1.8};d.push(c);c={radius:8,alpha:.2,color:12575203,H:.8,B:.7};b.push(c);c={radius:7,alpha:.4,color:12575203,H:.5,B:1.6};b.push(c);c={radius:5,alpha:.4,color:12575203,H:.6,B:.9};b.push(c);c={radius:8,alpha:.3,color:12575203,H:.4,B:1.1};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:30,alpha:.3,color:11390415,B:.5};d.push(c);c={radius:10,alpha:.3,color:11390415,
B:1};d.push(c);c={radius:20,alpha:.3,color:11390415,B:1.3};d.push(c);c={radius:10,alpha:.3,color:11390415,B:1.5};d.push(c);c={radius:15,alpha:.3,color:11390415,B:1.8};d.push(c);c={radius:10,alpha:.3,color:15506856,H:.8,B:.7};b.push(c);c={radius:20,alpha:.5,color:15506856,H:.5,B:1.6};b.push(c);c={radius:5,alpha:.5,color:15506856,H:.6,B:.9};b.push(c);c={radius:60,alpha:.4,color:15506856,H:.2,B:1.1};b.push(c);a.push({radius:220,alpha:.035,B:2});this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=
[];a=[];c={radius:30,alpha:.5,color:15465727,B:.5};d.push(c);c={radius:40,alpha:.28,color:15726842,B:.8};d.push(c);c={radius:25,alpha:.32,color:15726842,B:1.1};d.push(c);c={radius:15,alpha:.25,color:15726842,B:1.35};d.push(c);c={radius:10,alpha:.28,color:15465727,B:1.65};d.push(c);c={radius:10,alpha:.45,color:15465727,H:.8,B:.7};b.push(c);c={radius:7,alpha:.5,color:15465727,H:.4,B:.9};b.push(c);c={radius:40,alpha:.4,color:15465727,H:.3,B:.38};b.push(c);c={radius:50,alpha:.4,color:15465727,H:.5,B:1.25};
b.push(c);c={radius:18,alpha:.2,color:15465727,H:.5,B:1.25};b.push(c);c={radius:10,alpha:.34,color:15726842,H:.8,B:1.5};b.push(c);c={radius:38,alpha:.37,color:15465727,H:.3,B:-.5};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:16,alpha:.5,color:16363159,B:.1};d.push(c);c={radius:26,alpha:.3,color:16091819,B:.32};d.push(c);c={radius:29,alpha:.2,color:16091819,B:1.32};d.push(c);c={radius:20,alpha:.18,color:16363159,B:1.53};d.push(c);c={radius:27,alpha:.13,color:16425092,
B:1.6};d.push(c);c={radius:20,alpha:.1,color:16091819,B:1.75};d.push(c);c={radius:12,alpha:.45,color:16312238,H:.45,B:.2};b.push(c);c={radius:8,alpha:.25,color:16434209,H:.7,B:.33};b.push(c);c={radius:9,alpha:.25,color:16091819,H:.4,B:.7};b.push(c);c={radius:7,alpha:.2,color:16091819,H:.4,B:.85};b.push(c);c={radius:60,alpha:.23,color:16091819,H:.55,B:1.05};b.push(c);c={radius:37,alpha:.1,color:16091819,H:.55,B:1.22};b.push(c);c={radius:10,alpha:.25,color:16363159,H:.65,B:1.38};b.push(c);c={radius:7,
alpha:.2,color:16434209,H:.5,B:1.45};b.push(c);c={radius:3,alpha:.2,color:16416033,H:.5,B:1.78};b.push(c);c={radius:6,alpha:.18,color:16434209,H:.45,B:1.9};b.push(c);c={radius:4,alpha:.14,color:16766514,H:.45,B:2.04};b.push(c);c={radius:30,alpha:.14,color:16766514,H:.8,B:.04};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:9,alpha:.3,color:14346999,H:.3,B:.3};b.push(c);c={radius:5,alpha:.5,color:14148072,H:.8,B:.6};b.push(c);c={radius:3,alpha:.37,color:14346999,
H:.66,B:.8};b.push(c);c={radius:45,alpha:.2,color:14346999,H:.36,B:1.2};b.push(c);c={radius:13,alpha:.2,color:14346999,H:.36,B:1.23};b.push(c);c={radius:11,alpha:.2,color:14148072,H:.36,B:1.28};b.push(c);c={radius:27,alpha:.16,color:14346999,H:.36,B:1.55};b.push(c);c={radius:6,alpha:.36,color:14148072,H:.8,B:1.7};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:24,alpha:.2,color:15186464,B:.2};d.push(c);c={radius:7,alpha:.26,color:15186464,B:.35};d.push(c);c={radius:23,
alpha:.18,color:15186464,B:.65};d.push(c);c={radius:13,alpha:.2,color:15186464,B:.8};d.push(c);c={radius:11,alpha:.15,color:15186464,B:1.4};d.push(c);c={radius:15,alpha:.11,color:15451904,B:1.6};d.push(c);c={radius:6,alpha:.45,color:15579138,H:.45,B:.22};b.push(c);c={radius:3,alpha:.3,color:15451904,H:.25,B:.4};b.push(c);c={radius:4,alpha:.2,color:15451904,H:.25,B:.45};b.push(c);c={radius:65,alpha:.17,color:15186464,H:.25,B:.5};b.push(c);c={radius:5,alpha:.45,color:15579138,H:.45,B:.88};b.push(c);
c={radius:140,alpha:.18,color:15579138,H:.32,B:.95};b.push(c);c={radius:12,alpha:.22,color:15579138,H:.32,B:1.1};b.push(c);c={radius:8,alpha:.32,color:15451904,H:.72,B:1.2};b.push(c);c={radius:55,alpha:.2,color:15451904,H:.45,B:1.33};b.push(c);c={radius:4,alpha:.3,color:15451904,H:.25,B:1.42};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:16,alpha:.4,color:10933495,B:.32};d.push(c);c={radius:14,alpha:.3,color:11007484,B:.36};d.push(c);c={radius:10,alpha:.3,color:4037331,
B:.58};d.push(c);c={radius:14,alpha:.22,color:8835068,B:.68};d.push(c);c={radius:10,alpha:.27,color:11007484,B:.82};d.push(c);c={radius:11,alpha:.27,color:10867450,B:1};d.push(c);c={radius:9,alpha:.2,color:6158332,B:1.05};d.push(c);c={radius:10,alpha:.17,color:10867450,B:1.78};d.push(c);c={radius:10,alpha:.3,color:4037331,B:-.23};d.push(c);c={radius:8,alpha:.45,color:8835068,H:.45,B:.175};b.push(c);c={radius:7,alpha:.4,color:12574715,H:.55,B:.46};b.push(c);c={radius:3,alpha:.3,color:10867450,H:.35,
B:.5};b.push(c);c={radius:60,alpha:.37,color:4031699,H:.75,B:.75};b.push(c);c={radius:3,alpha:.25,color:4031699,H:.25,B:.75};b.push(c);c={radius:3,alpha:.2,color:6158332,H:.25,B:.9};b.push(c);c={radius:7,alpha:.45,color:8835068,H:.45,B:1.3};b.push(c);c={radius:32,alpha:.22,color:8835068,H:.75,B:1.62};b.push(c);c={radius:9,alpha:.45,color:4031699,H:.65,B:1.6};b.push(c);c={radius:8,alpha:.25,color:4031699,H:.65,B:1.83};b.push(c);c={radius:7,alpha:.4,color:12574715,H:.55,B:-.18};b.push(c);this.mc.push(d);
this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:16,alpha:.4,color:16389120,B:.32};d.push(c);c={radius:26,alpha:.22,color:16389120,B:.4};d.push(c);c={radius:26,alpha:.25,color:16389120,B:.65};d.push(c);c={radius:18,alpha:.3,color:16389120,B:1.23};d.push(c);c={radius:14,alpha:.26,color:16389120,B:1.33};d.push(c);c={radius:17,alpha:.18,color:16389120,B:1.7};d.push(c);c={radius:30,alpha:.16,color:16389120,B:2.15};d.push(c);c={radius:100,alpha:.25,color:16389120,H:.22,B:1.45};b.push(c);c={radius:7,
alpha:.5,color:15628151,H:.3,B:1.5};b.push(c);c={radius:3,alpha:.5,color:15628151,H:.3,B:1.52};b.push(c);c={radius:4,alpha:.5,color:16389120,H:.3,B:1.745};b.push(c);c={radius:9,alpha:.22,color:16389120,H:.3,B:1.8};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:16,alpha:.4,color:10933495,B:.32};d.push(c);c={radius:14,alpha:.3,color:11007484,B:.36};d.push(c);c={radius:10,alpha:.3,color:4037331,B:.58};d.push(c);c={radius:14,alpha:.22,color:8835068,B:.68};d.push(c);
c={radius:10,alpha:.27,color:11007484,B:.82};d.push(c);c={radius:11,alpha:.27,color:10867450,B:1};d.push(c);c={radius:9,alpha:.2,color:6158332,B:1.05};d.push(c);c={radius:10,alpha:.17,color:10867450,B:1.78};d.push(c);c={radius:10,alpha:.3,color:4037331,B:-.23};d.push(c);c={radius:8,alpha:.45,color:8835068,H:.45,B:.175};b.push(c);c={radius:7,alpha:.4,color:12574715,H:.55,B:.46};b.push(c);c={radius:3,alpha:.3,color:10867450,H:.35,B:.5};b.push(c);c={radius:60,alpha:.37,color:4031699,H:.75,B:.75};b.push(c);
c={radius:3,alpha:.25,color:4031699,H:.25,B:.75};b.push(c);c={radius:3,alpha:.2,color:6158332,H:.25,B:.9};b.push(c);c={radius:7,alpha:.45,color:8835068,H:.45,B:1.3};b.push(c);c={radius:32,alpha:.22,color:8835068,H:.75,B:1.62};b.push(c);c={radius:9,alpha:.45,color:4031699,H:.65,B:1.6};b.push(c);c={radius:8,alpha:.25,color:4031699,H:.65,B:1.83};b.push(c);c={radius:7,alpha:.4,color:12574715,H:.55,B:-.18};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:16,alpha:.4,color:16389120,
B:.32};d.push(c);c={radius:26,alpha:.22,color:16389120,B:.4};d.push(c);c={radius:26,alpha:.25,color:16389120,B:.65};d.push(c);c={radius:18,alpha:.3,color:16389120,B:1.23};d.push(c);c={radius:14,alpha:.26,color:16389120,B:1.33};d.push(c);c={radius:17,alpha:.18,color:16389120,B:1.7};d.push(c);c={radius:30,alpha:.16,color:16389120,B:2.15};d.push(c);c={radius:100,alpha:.25,color:16389120,H:.22,B:1.45};b.push(c);c={radius:7,alpha:.5,color:15628151,H:.3,B:1.5};b.push(c);c={radius:3,alpha:.5,color:15628151,
H:.3,B:1.52};b.push(c);c={radius:4,alpha:.5,color:16389120,H:.3,B:1.745};b.push(c);c={radius:9,alpha:.22,color:16389120,H:.3,B:1.8};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a);d=[];b=[];a=[];c={radius:24,alpha:.2,color:15186464,B:.2};d.push(c);c={radius:7,alpha:.26,color:15186464,B:.35};d.push(c);c={radius:23,alpha:.18,color:15186464,B:.65};d.push(c);c={radius:13,alpha:.2,color:15186464,B:.8};d.push(c);c={radius:11,alpha:.15,color:15186464,B:1.4};d.push(c);c={radius:15,alpha:.11,color:15451904,
B:1.6};d.push(c);c={radius:6,alpha:.45,color:15579138,H:.45,B:.22};b.push(c);c={radius:3,alpha:.3,color:15451904,H:.25,B:.4};b.push(c);c={radius:4,alpha:.2,color:15451904,H:.25,B:.45};b.push(c);c={radius:65,alpha:.17,color:15186464,H:.25,B:.5};b.push(c);c={radius:5,alpha:.45,color:15579138,H:.45,B:.88};b.push(c);c={radius:140,alpha:.18,color:15579138,H:.32,B:.95};b.push(c);c={radius:12,alpha:.22,color:15579138,H:.32,B:1.1};b.push(c);c={radius:8,alpha:.32,color:15451904,H:.72,B:1.2};b.push(c);c={radius:55,
alpha:.2,color:15451904,H:.45,B:1.33};b.push(c);c={radius:4,alpha:.3,color:15451904,H:.25,B:1.42};b.push(c);this.mc.push(d);this.cc.push(b);this.nc.push(a)};g.prototype.pq=function(){if(this.tk){var d=this.u.R,b,a=new p.Ga(0,0,-100),c=this.u.nd(),k=0,l=0,e=!1;if(this.u.ia){var h=this.u.wb.width;var n=this.u.wb.height;this.u.K.mh&&(h=this.u.K.oc.width,n=this.u.K.oc.height)}else{this.$||(this.$=this.gd.getContext("2d"));if(this.$.width!==this.u.D.width||this.$.height!==this.u.D.height)this.$.width=
this.u.D.width,this.$.height=this.u.D.height;this.$.clear?this.$.clear():this.$.clearRect(0,0,this.gd.width,this.gd.height);h=this.$.width;n=this.$.height}var m=Math.sqrt(h*h+n*n),g=m/800;for(b=0;b<this.Pg.length;b++){var f=this.Pg[b];a.init(0,0,-100);a.Fa(-f.A*Math.PI/180);a.Ka(f.pan*Math.PI/180);a.Ka(-this.u.pan.m*Math.PI/180);a.Fa(this.u.A.m*Math.PI/180);a.ib(this.u.U.m*Math.PI/180);if(-.01>a.z){l=-c/a.z;k=a.x*l;l*=a.y;var w=Math.max(h,n);Math.abs(k)<w/2+100&&Math.abs(l)<w/2+100&&(e=!0,k+=h/2,
l+=n/2)}if(e){this.u.ia&&(d.blendFunc(d.SRC_ALPHA,d.DST_ALPHA),d.enable(d.BLEND),d.disable(d.DEPTH_TEST));w=h/2;var q=n/2;var y=Math.sqrt((w-k)*(w-k)+(q-l)*(q-l));var x=m/2;q=h>n?h:n;w=f.Xk/100*((x-y)/x);0>w&&(w=0);if(this.u.ia){d.useProgram(this.rc);d.bindBuffer(d.ARRAY_BUFFER,this.u.K.sb);d.vertexAttribPointer(this.rc.ja,this.u.K.sb.itemSize,d.FLOAT,!1,0,0);var A=d.getUniformLocation(this.rc,"uCanvasDimensions");d.uniform2f(A,d.drawingBufferWidth,d.drawingBufferHeight);d.uniform2f(d.getUniformLocation(this.rc,
"uFlareCenterPosition"),d.drawingBufferWidth/h*k,n-d.drawingBufferHeight/n*l);d.uniform1f(d.getUniformLocation(this.rc,"uBlindingValue"),w);A=d.getUniformLocation(this.rc,"uAspectRatio");d.uniform1f(A,this.u.K.mh?d.drawingBufferWidth/d.drawingBufferHeight:d.drawingBufferWidth/d.drawingBufferHeight/(h/n));d.drawArrays(d.TRIANGLE_STRIP,0,this.u.K.sb.ae)}else A=this.$.createRadialGradient(k,l,1,k,l,q),A.addColorStop(0,"rgba(255, 255, 255, "+w+")"),A.addColorStop(.5,"rgba(255, 255, 255, "+.8*w+")"),A.addColorStop(1,
"rgba(255, 255, 255, "+.6*w+")"),this.$.fillStyle=A,this.$.fillRect(0,0,this.$.width,this.$.height);if(0!=Number(f.type)&&!this.u.K.mh){w=h/2-k;q=n/2-l;var db=1,z=Number(f.type)-1;y<.35*x&&(db=y/(.35*x),db*=db);y>.7*x&&(db=(x-y)/(.3*x));db*=f.alpha/100;if(0<this.mc[z].length)for(y=0;y<this.mc[z].length;y++){var id=this.mc[z][y];x=id.radius*g;var ka=id.alpha*db;0>ka&&(ka=0);var tf=id.color;if(8==z||9==z||10==z)tf=f.color;if(this.u.ia)d.useProgram(this.Ba),d.bindBuffer(d.ARRAY_BUFFER,this.lf),d.vertexAttribPointer(this.Ba.ja,
this.lf.itemSize,d.FLOAT,!1,0,0),A=d.getUniformLocation(this.Ba,"uCanvasDimensions2"),d.uniform2f(A,d.drawingBufferWidth,d.drawingBufferHeight),d.uniform2f(d.getUniformLocation(this.Ba,"uCirclePosition"),d.drawingBufferWidth/h*(k+w*id.B),d.drawingBufferWidth/h*(n-(l+q*id.B))),d.uniform2f(d.getUniformLocation(this.Ba,"uCircleTexturePosition"),d.drawingBufferWidth/h*(k+w*id.B),n-(l+q*id.B)),d.uniform1f(d.getUniformLocation(this.Ba,"uCircleRadius"),x),d.uniform3f(d.getUniformLocation(this.Ba,"uCircleColor"),
(tf>>16&255)/255,(tf>>8&255)/255,(tf&255)/255),d.uniform1f(d.getUniformLocation(this.Ba,"uCircleAlpha"),ka),d.uniform1f(d.getUniformLocation(this.Ba,"uCircleSoftness"),.1),A=d.getUniformLocation(this.Ba,"uAspectRatio"),d.uniform1f(A,d.drawingBufferWidth/d.drawingBufferHeight/(h/n)),d.drawArrays(d.TRIANGLE_FAN,0,this.lf.ae);else{this.$.save();this.$.translate(k+w*id.B,l+q*id.B);A=this.$.createRadialGradient(0,0,1,0,0,1.1*x);A.addColorStop(0,this.u.ea(tf,ka));A.addColorStop(.65,this.u.ea(tf,.9*ka));
A.addColorStop(.8,this.u.ea(tf,.7*ka));A.addColorStop(1,this.u.ea(tf,.2*ka));this.$.beginPath();tf=2*Math.PI/6;id=Math.PI/180*35;var lh=!0;for(ka=id;ka<=id+2*Math.PI;ka+=tf)lh?(this.$.moveTo(x*Math.sin(ka),x*Math.cos(ka)),lh=!1):this.$.lineTo(x*Math.sin(ka),x*Math.cos(ka));this.$.closePath();this.$.fillStyle=A;this.$.fill();this.$.restore()}}if(0<this.cc[z].length)for(y=0;y<this.cc[z].length;y++){id=this.cc[z][y];x=id.radius*g;ka=id.alpha*db;0>ka&&(ka=0);tf=id.color;if(8==z||9==z||10==z)tf=f.color;
this.u.ia?(d.useProgram(this.Ba),d.bindBuffer(d.ARRAY_BUFFER,this.Cd),d.vertexAttribPointer(this.Ba.ja,this.Cd.itemSize,d.FLOAT,!1,0,0),A=d.getUniformLocation(this.Ba,"uCanvasDimensions2"),d.uniform2f(A,d.drawingBufferWidth,d.drawingBufferHeight),A=d.getUniformLocation(this.Ba,"uCirclePosition"),d.uniform2f(A,d.drawingBufferWidth/h*(k+w*id.B),d.drawingBufferWidth/h*(n-(l+q*id.B))),A=d.getUniformLocation(this.Ba,"uCircleTexturePosition"),d.uniform2f(A,d.drawingBufferWidth/h*(k+w*id.B),n-(l+q*id.B)),
A=d.getUniformLocation(this.Ba,"uCircleRadius"),d.uniform1f(A,x),d.uniform3f(d.getUniformLocation(this.Ba,"uCircleColor"),(tf>>16&255)/255,(tf>>8&255)/255,(tf&255)/255),d.uniform1f(d.getUniformLocation(this.Ba,"uCircleAlpha"),ka),d.uniform1f(d.getUniformLocation(this.Ba,"uCircleSoftness"),id.H),A=d.getUniformLocation(this.Ba,"uAspectRatio"),d.uniform1f(A,d.drawingBufferWidth/d.drawingBufferHeight/(h/n)),d.drawArrays(d.TRIANGLE_FAN,0,this.Cd.ae)):(this.$.save(),this.$.translate(k+w*id.B,l+q*id.B),
A=this.$.createRadialGradient(0,0,1,0,0,x),A.addColorStop(0,this.u.ea(tf,ka)),A.addColorStop(1-id.H,this.u.ea(tf,.8*ka)),A.addColorStop(1,this.u.ea(tf,0)),this.$.beginPath(),this.$.arc(0,0,x,0,2*Math.PI,!1),this.$.closePath(),this.$.fillStyle=A,this.$.fill(),this.$.restore())}if(0<this.nc[z].length)for(y=0;y<this.nc[z].length;y++)f=this.nc[z][y],x=f.radius*g,ka=f.alpha*db,0>ka&&(ka=0),this.u.ia?(d.useProgram(this.Bb),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,this.Rm),d.bindBuffer(d.ARRAY_BUFFER,
this.Cd),d.vertexAttribPointer(this.Bb.ja,this.Cd.itemSize,d.FLOAT,!1,0,0),A=d.getUniformLocation(this.Bb,"uCanvasDimensions2"),d.uniform2f(A,h,n),A=d.getUniformLocation(this.Bb,"uCirclePosition"),d.uniform2f(A,k+w*f.B,n-(l+q*f.B)),A=d.getUniformLocation(this.Bb,"uRingTexturePosition"),d.uniform2f(A,d.drawingBufferWidth/h*(k+w*f.B),n-(l+q*f.B)),A=d.getUniformLocation(this.Bb,"uCircleRadius"),d.uniform1f(A,x),d.uniform2f(d.getUniformLocation(this.Bb,"uRingPosition"),k+w*f.B,n-(l+q*f.B)),d.uniform1f(d.getUniformLocation(this.Bb,
"uRingRadius"),x),d.uniform1f(d.getUniformLocation(this.Bb,"uRingAlpha"),ka),A=d.getUniformLocation(this.Bb,"uAspectRatio"),d.uniform1f(A,d.drawingBufferWidth/d.drawingBufferHeight/(h/n)),d.uniform1i(d.getUniformLocation(this.Bb,"uSampler"),0),d.drawArrays(d.TRIANGLE_FAN,0,this.Cd.ae)):(this.$.save(),this.$.translate(k+w*f.B,l+q*f.B),A=this.$.createRadialGradient(0,0,0,0,0,x),A.addColorStop(0,this.u.ea(16777215,0)),A.addColorStop(.88,this.u.ea(0,0)),A.addColorStop(.9,this.u.ea(16654848,ka)),A.addColorStop(.92,
this.u.ea(16776448,ka)),A.addColorStop(.94,this.u.ea(4849466,ka)),A.addColorStop(.96,this.u.ea(131071,ka)),A.addColorStop(.98,this.u.ea(8190,ka)),A.addColorStop(1,this.u.ea(0,0)),this.$.beginPath(),this.$.arc(0,0,x,0,2*Math.PI,!1),this.$.closePath(),this.$.fillStyle=A,this.$.fill(),this.$.restore())}this.u.ia&&(d.useProgram(this.u.xa.P),d.disable(d.BLEND),d.enable(d.DEPTH_TEST))}}}};return g}();p.Nn=f})(ggP2VR||(ggP2VR={}));var THREE;
(function(p){var f=function(){function g(d){this.qd=[];this.pa={x:0,y:0};this.Jc={x:0,y:0};this.Vg=0;this.Oh=!1;this.Kk=this.Ie=0;this.Hk=!1;this.u=null;this.nk=!0;this.Wd=1;this.Wh=[];this.ej=this.Gn=!1;this.yf=[-1,-1,-1,-1];this.ei=[];this.Ee=[];this.u=d;var b=this;setTimeout(function(){window.WebVRPolyfill&&(new window.WebVRPolyfill({BUFFER_SCALE:1}),d.O("WebVR Polyfill loaded!"));b.Lp()},0);THREE?this.Wk():console.log("Three.js not available!")}g.prototype.Ao=function(){this.init();this.animate()};
g.prototype.Wk=function(){this.Bk=new THREE.Matrix4;this.Am=new THREE.Euler};g.prototype.init=function(){"getVRDisplays"in navigator||console.log("no vr support");if(THREE)if(this.renderer)console.log("already set up!");else{this.Bk||this.Wk();var d=this,b=this.hd=this.u.hd,a=this.Jq=new THREE.Scene,c=this.camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.001,2E4);c.position.z=-.01;c.position.y=0;c.position.x=0;this.renderer=c=new THREE.WebGLRenderer({depth:!0,logarithmicDepthBuffer:!0,
alpha:!0,antialias:!0,stencil:!0});c.setClearColor(new THREE.Color(0),1);c.setPixelRatio(window.devicePixelRatio);c.setSize(window.innerWidth,window.innerHeight);c.gammaInput=!0;c.gammaOutput=!0;c.shadowMap.enabled=!1;b.appendChild(c.domElement);"getVRDisplays"in navigator&&(c.vr.enabled=!0,c.vr.setFrameOfReferenceType("head-model"));b=this.lj=c.vr.getController(0);b.addEventListener("selectstart",function(a){d.Bm(a)});b.addEventListener("selectend",function(){});b.visible=!1;a.add(b);var k=this.mj=
c.vr.getController(1);k.addEventListener("selectstart",function(a){d.Bm(a)});k.addEventListener("selectend",function(){});k.visible=!1;a.add(k);c=(new THREE.BufferGeometry).setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-1)]);var l=new THREE.LineBasicMaterial({color:14737632,lineWidth:1});c=new THREE.Line(c,l);c.name="line";c.scale.z=5;b.add(c.clone());k.add(c.clone());this.dh=new THREE.Raycaster;this.pa=new THREE.Vector2;this.Bf=new THREE.Group;this.tf=new THREE.Group;this.De=new THREE.Group;
this.yj=new THREE.Group;this.fj=new THREE.Group;this.Bf.add(this.De);this.Bf.add(this.yj);this.Bf.add(this.tf);a.add(this.Bf);a.add(this.fj);a=document.createElement("canvas");a.width=64;a.height=64;b=a.getContext("2d");b.fillStyle="black";b.lineWidth=3;b.beginPath();b.arc(32,32,10,0,2*Math.PI);b.stroke();a=new THREE.Texture(a);a.needsUpdate=!0;c=new THREE.PlaneBufferGeometry(2,2,8);a=new THREE.MeshBasicMaterial({map:a});a.transparent=!0;a=new THREE.Mesh(c,a);a.position.z=-50;this.fj.add(a);window.addEventListener("resize",
function(){d.nq()},!1);document.addEventListener("mouseup",function(){d.lq()},!1);document.addEventListener("mousedown",function(a){d.jq(a)},!1);document.addEventListener("mousemove",function(a){d.kq(a)},!1);this.display||this.ag()}else console.log("Three.js not available!")};g.prototype.uk=function(){var d=this.u;this.display=null;d.O("VR not found");d.V("vrchanged",{});d.V("playerstatechanged",{})};g.prototype.cn=function(d){var b=this.u;this.display=d;this.renderer&&this.renderer.vr.setDevice(d);
b.O("VR found");b.V("vrchanged",{});b.V("playerstatechanged",{})};g.prototype.Lp=function(){if(!this.Gn){this.Gn=!0;var d=this;"getVRDisplays"in navigator?(window.addEventListener("vrdisplayconnect",function(b){d.cn(b.display)},!1),window.addEventListener("vrdisplaydisconnect",function(){d.uk()},!1),window.addEventListener("vrdisplaypresentchange",function(){d.Oh=d.display?d.display.isPresenting:!1;d.u.O("VR Presenting: "+d.Oh);d.Oh?(d.Cm(),d.ag()):(d.cl(),d.fe())},!1),window.addEventListener("vrdisplayactivate",
function(b){d.renderer&&d.renderer.domElement&&b.display.requestPresent([{source:d.renderer.domElement}])},!1),navigator.getVRDisplays().then(function(b){0<b.length?d.cn(b[0]):d.uk()})["catch"](d.uk)):this.display=null}};g.prototype.Fg=function(){var d=this.display;return d?d.isPresenting:!1};g.prototype.Nj=function(){return null!=this.display&&THREE};g.prototype.ng=function(){var d=this.display,b=this.u;d?(1==this.Wd&&("Oculus Go"==d.displayName&&(this.Wd=1.7),"Gear VR"==d.displayName&&(this.Wd=
2),"Lenovo Mirage Solo"==d.displayName&&(this.Wd=2)),b.Hc("Enter VR on '"+d.displayName+"' x"+this.Wd),this.renderer.vr.setFramebufferScaleFactor(this.Wd),d.isPresenting||(this.renderer.vr.setDevice(d),d.requestPresent([{source:this.renderer.domElement}]))):this.ag()};g.prototype.Cm=function(){if(THREE&&this.renderer){var d=this.u;d.Ue=!0;d.aa.style.display="none";d.eb.style.display="none";this.renderer.domElement.style.display="inline";d.V("vrchanged",{});d.V("playerstatechanged",{})}};g.prototype.cl=
function(){if(THREE&&this.renderer){var d=this.u;d.Ue=!1;d.aa.style.display="inline";d.eb.style.display="inline";this.renderer.domElement.style.display="none";d.Ci(0);d.Mc();d.update();d.V("vrchanged",{});d.V("playerstatechanged",{})}};g.prototype.hf=function(){var d=this.display;d&&d.isPresenting&&d.$r()};g.prototype.rn=function(){this.Fg()?this.hf():this.ng()};g.prototype.vl=function(){var d=0,b=this.u;var a=1536;if(this.renderer){var c=this.display;if(c){var k=c.getEyeParameters("left");k&&(b.O(k),
c=k.renderWidth*this.Wd,k.ul&&(k=Math.abs(k.ul.bs+k.ul.es),90>k&&(c/=Math.tan(k/2*Math.PI/180))),10<c&&(a=c))}b.O("Canvas: "+a)}a*=Math.pow(2,0);if(0<b.v.levels.length){for(;b.v.levels.length>=d+2&&!b.v.levels[d+1].Le&&b.v.levels[d+1].width>a;)d++;b.O("Level "+d+" - width: "+b.v.levels[d].width);b.O(b.v.levels)}return d};g.prototype.Pl=function(d){var b=this.u,a=b.ke[d];d="";if(a){a=a.firstChild;for(var c;a;)"input"==a.nodeName&&(c=a)&&(c=0<b.v.levels.length?c.getAttributeNode("leveltileurl"):c.getAttributeNode("tilevrurl"))&&
(d=c.nodeValue),a=a.nextSibling}else d=0<b.v.levels.length?b.v.Wj:b.il;for(a=0;3>a;a++)d=b.Jb(d,"c","vr"),d=b.Jb(d,"s","vr"),d=b.Jb(d,"r",0),d=b.Jb(d,"l",0),d=b.Jb(d,"x",0),d=b.Jb(d,"y",0),d=b.Jb(d,"v",0),d=b.Jb(d,"h",0);return b.Mb(d)};g.prototype.ceilPowerOfTwo=function(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))};g.prototype.loadTexture=function(d,b){var a=new THREE.ImageLoader;a.setCrossOrigin(this.u.crossOrigin);var c=this;a.load(b,function(a){var b=c.ceilPowerOfTwo(a.width),k=c.ceilPowerOfTwo(a.height);
d.format=THREE.RGBFormat;d.needsUpdate=!0;if(b==a.width&&k==a.height)d.image=a;else{c.u.O("resizing "+a.width+"/"+a.height+" -> "+b+"/"+k);var h=document.createElement("canvas");h.width=b;h.height=k;h.getContext("2d").drawImage(a,0,0,b,k);d.image=h}d.Fp=!0});this.Wh.push(d)};g.prototype.ag=function(){if(THREE){var d=this.u;if(this.ej)d.O("vr panorama aleady added!");else{this.vl();var b=this.tf,a=this;d.O("add vr panorama");this.fe();b.setRotationFromEuler(this.Am);b.rotateX(d.Oa.pitch*Math.PI/180);
b.rotateZ(-d.Oa.U*Math.PI/180);var c=new THREE.SphereBufferGeometry(2E4/3*1.5,16,16),k=(new THREE.TextureLoader).load(this.Pl(d.Ej()));k=new THREE.MeshBasicMaterial({map:k,side:THREE.DoubleSide});c=new THREE.Mesh(c,k);c.scale.x=-1;c.rotateZ(d.Oa.U*Math.PI/180);c.rotateX(-d.Oa.pitch*Math.PI/180);c.rotateY(-90*Math.PI/180);b.add(c);a.gk=c;a.ej=!0;setTimeout(function(){d.O("Adding Main Pano");a.ej=!1;d.F.j?a.co():a.ao();a.$n();a.Yn()});this.Fq();this.nk=!0}}};g.prototype.co=function(){var d=this.u,b=
this.tf,a=new THREE.SphereBufferGeometry(2E4/3,60,40);a.scale(-1,1,1);var c=new THREE.VideoTexture(d.F.j);c.wrapS=THREE.ClampToEdgeWrapping;c.wrapT=THREE.ClampToEdgeWrapping;c.minFilter=THREE.LinearFilter;c=new THREE.MeshBasicMaterial({map:c});a=new THREE.Mesh(a,c);a.rotateY(-90*Math.PI/180);b.add(a);try{d.F.j.play()}catch(k){}};g.prototype.ao=function(){var d=this.u,b=[],a=this.vl(),c=this.tf,k=2E4/3;if(d.v.levels.length>a)for(var l=d.v.levels[a],e=0;6>e;e++){b[e]=new THREE.Group;for(var h=0;h<l.da;h++)for(var n=
0;n<l.T;n++){var m=new THREE.Texture;this.loadTexture(m,d.ie(e,a,n,h));m.wrapS=THREE.ClampToEdgeWrapping;m.wrapT=THREE.ClampToEdgeWrapping;m.minFilter=THREE.LinearMipMapLinearFilter;m.anisotropy=1;var g=d.v.N+2*d.v.Ca,f=d.v.N+2*d.v.Ca;n==l.T-1&&(g=l.width-d.v.N*(l.T-1)+2*d.v.Ca);h==l.da-1&&(f=l.width-d.v.N*(l.da-1)+2*d.v.Ca);var p=new THREE.PlaneBufferGeometry(k*g/l.width,k*f/l.width,8);m=new THREE.MeshBasicMaterial({map:m});p=new THREE.Mesh(p,m);m.transparent=!0;m.side=THREE.FrontSide;m=1*d.v.N;
p.position.x=k*(n*m+g/2-d.v.Ca-l.width/2)/l.width;p.position.y=k*-(h*m+f/2-d.v.Ca-l.width/2)/l.width;p.position.z=-.5*k;b[e].add(p)}4>e?b[e].rotation.y=-e*Math.PI/2:b[e].rotation.x=(4==e?1:-1)*Math.PI/2;c.add(b[e])}else for(a=d.Re,e=0;6>e;e++)b[e]=new THREE.Group,m=(new THREE.TextureLoader).load(d.Mb(d.kg[e])),m.wrapS=THREE.ClampToEdgeWrapping,m.wrapT=THREE.ClampToEdgeWrapping,m.minFilter=THREE.LinearFilter,p=new THREE.PlaneBufferGeometry(a*k/2,a*k/2,64),m=new THREE.MeshBasicMaterial({map:m}),p=new THREE.Mesh(p,
m),m.transparent=!0,m.side=THREE.FrontSide,p.position.x=0,p.position.y=0,p.position.z=-.25*k,b[e].add(p),4>e?b[e].rotation.y=-e*Math.PI/2:b[e].rotation.x=(4==e?1:-1)*Math.PI/2,c.add(b[e])};g.prototype.$n=function(){var d=this.u,b=this.De;new p.Ga(0,0,-100);for(var a=d.I.Li,c=0;c<d.X.length;c++){var k=d.X[c],l=k.tr();if(!1!==l){var e=new THREE.SphereBufferGeometry(.2,16,16),h=(new THREE.TextureLoader).load(this.Pl(l));h=new THREE.MeshBasicMaterial({map:h});h.transparent=!0;h.opacity=.25;l=new THREE.Mesh(e,
h);h=k.title;if(a.enabled&&""!=h){e=document.createElement("canvas");e.width=256;e.height=32;var n=e.getContext("2d");this.lh||(this.lh=document.createElement("canvas"),this.lh.width=e.width,this.lh.height=e.height);var m=this.lh.getContext("2d");m.clearRect(0,0,e.width,e.height);m.font="16px Helvetica";m.textAlign="center";m.textBaseline="top";var g=m.measureText(h),f=g.width;0<a.height&&(f=Math.min(a.width,e.width-6),f=Math.max(f,g.width));g=f+6;a.background&&(m.fillStyle=this.u.ea(a.Yb,a.Xb),m.fillRect((e.width-
f)/2-3,2,f+6,24));0<a.Fh&&(m.strokeStyle=this.u.ea(a.$b,a.Zb),m.strokeRect((e.width-f)/2-3,2,f+6,24));m.fillStyle=this.u.ea(a.Mi,a.Ki);m.fillText(h,e.width/2,5,e.width-6);n.drawImage(this.lh,(e.width-g)/2,2,g,24,0,0,e.width,e.height);h=new THREE.Texture(e);h.needsUpdate=!0;e=new THREE.PlaneBufferGeometry(1.5*g/e.width,4.5/e.height,1,1);h=new THREE.MeshBasicMaterial({map:h,side:THREE.DoubleSide});e=new THREE.Mesh(e,h);e.translateY(-.29375);l.add(e);h.transparent=!0;h.opacity=.5}l.rotateY(k.pan*Math.PI/
180);l.rotateX(k.A*Math.PI/180);l.translateY(-0);l.translateZ(-5);l.userData=k;l.castShadow=!1;l.receiveShadow=!1;b.add(l)}}};g.prototype.Yn=function(){for(var d=this.u,b=this.yj,a=0;a<d.S.length;a++){var c=d.S[a];if(c.j&&"_videopanorama"!=c.id){c.j.play();var k=new THREE.VideoTexture(c.j);k.wrapS=THREE.ClampToEdgeWrapping;k.wrapT=THREE.ClampToEdgeWrapping;k.minFilter=THREE.LinearFilter;var l=5E3*Math.tan(c.fov*Math.PI/360);var e=0<c.vc?l*c.Uc/c.vc:l;c.Ec&&1!=c.Ec&&(e*=c.Ec);l=new THREE.PlaneBufferGeometry(l,
e,5,5);k=new THREE.MeshBasicMaterial({map:k,side:THREE.DoubleSide});k=new THREE.Mesh(l,k);k.rotateY(c.pan*Math.PI/180);k.rotateX(c.A*Math.PI/180);k.translateY(-0);k.translateZ(-2500);k.rotateZ(-c.ib*Math.PI/180);k.rotateY(-c.Ka*Math.PI/180);k.rotateX(-c.Fa*Math.PI/180);k.userData=c;k.castShadow=!1;k.receiveShadow=!1;b.add(k)}}};g.prototype.fe=function(){if(THREE){this.Wh=[];for(var d=this.tf,b=d.children.length-1;0<=b;b--){var a=d.children[b];a.remove.apply(a,a.children);d.remove(a)}d=this.De;for(b=
d.children.length-1;0<=b;b--)a=d.children[b],a.remove.apply(a,a.children),d.remove(a);d=this.yj;for(b=d.children.length-1;0<=b;b--)a=d.children[b],a.remove.apply(a,a.children),d.remove(a)}};g.prototype.nq=function(){if(THREE){var d=this.camera;d.aspect=window.innerWidth/window.innerHeight;d.updateProjectionMatrix();this.renderer.setSize(window.innerWidth,window.innerHeight)}};g.prototype.Bm=function(d){THREE&&(d=this.Hl(d.target),0<d.length&&(d=d[0].object.userData,this.u.Yc(d.url,d.target)))};g.prototype.Hl=
function(d){this.Bk.identity().extractRotation(d.matrixWorld);this.dh.ray.origin.setFromMatrixPosition(d.matrixWorld);this.dh.ray.direction.set(0,0,-1).applyMatrix4(this.Bk);return this.dh.intersectObjects(this.De.children)};g.prototype.intersectObjects=function(d){var b=d.getObjectByName("line");d=this.Hl(d);if(0<d.length){d=d[0];var a=d.object;a.selected=!0;this.qd.push(a);b.scale.z=d.distance}else b.scale.z=5};g.prototype.wo=function(){for(;this.qd.length;)this.qd.pop().selected=!1};g.prototype.kq=
function(d){d.preventDefault();var b=this.pa,a=this.renderer;b.x=d.clientX/a.domElement.clientWidth*2-1;b.y=2*-(d.clientY/a.domElement.clientHeight)+1;1==d.buttons&&(this.Vg=this.Jc.x-b.x)};g.prototype.Mp=function(){var d=this.dh;d.setFromCamera(this.pa,this.camera);d=d.intersectObjects(this.De.children);0<d.length&&(d=d[0].object,d.selected=!0,this.qd.push(d))};g.prototype.Np=function(){var d=this.dh;d.setFromCamera({x:0,y:0},this.camera);d=d.intersectObjects(this.De.children);0<d.length&&(d=d[0].object,
d.selected=!0,this.qd.push(d))};g.prototype.lq=function(){this.Vg=0};g.prototype.jq=function(d){50>d.clientX&&50>d.clientY&&this.u.hf();0<this.qd.length?this.u.Yc(this.qd[0].userData.url):(this.Jc.x=this.pa.x,this.Jc.y=this.pa.y)};g.prototype.animate=function(){var d=this.Wp=this;this.renderer&&this.renderer.setAnimationLoop(function(){d.render()})};g.prototype.render=function(){if(THREE){var d=this.Wp,b=d.u;d.wo();if(b.Ue){d.Hk=d.lj.visible||d.mj.visible?!1:!0;d.lj.visible&&d.intersectObjects(d.lj);
d.mj.visible&&d.intersectObjects(d.mj);d.Oh||d.Mp();if(d.Hk)if(d.Np(),0<this.qd.length)if(this.Sj!=this.qd[0])this.Sj=this.qd[0],this.Rp=Date.now();else{if(Date.now()>this.Rp+1E3){var a=this.Sj.userData;a&&a.url&&this.u.Yc(a.url,a.target)}}else this.Sj=null;var c=navigator.getGamepads&&navigator.getGamepads();a=!1;for(var k=0;k<c.length;k++){var l=c[k];if(l&&0<l.buttons.length){var e="Oculus Touch (Left)"==l.id||"Oculus Touch (Right)"==l.id;l.buttons[0].touched&&2<=l.axes.length&&!e?(a=!0,l=l.axes[0],
-1==this.yf[k]?this.yf[k]=l:(e=this.yf[k]-l,-.3>e&&(this.eh(20),this.yf[k]=l),.3<e&&(this.eh(-20),this.yf[k]=l))):(this.yf[k]=-1,2<=l.axes.length&&(l=l.axes[0],.8<l?(a=!0,1!=this.Ee[k]&&(this.Ee[k]=1,this.ei[k]=Date.now()-1E4)):-.8>l?(a=!0,-1!=this.Ee[k]&&(this.Ee[k]=-1,this.ei[k]=Date.now()-1E4)):this.Ee[k]=0,0!=this.Ee[k]&&(l=Date.now()-this.ei[k],console.log(l),400<l&&(this.ei[k]=Date.now(),this.eh(20*this.Ee[k])))))}}this.gk&&0<this.Wh.length&&this.Wh.every(function(a){return a.Fp})&&(this.tf.remove(this.gk),
this.gk=null,b.O("unload Preview Sphere"));c=this.De;for(k=c.children.length-1;0<=k;k--){l=c.children[k];l.rotateY(1*Math.PI/180);var h=e=1;l.selected?(e=1.5,h=1):a?(e=.6,h=.7):(e=.4,h=.5);var n=l.scale.x;n+=.1*(e-n);l.scale.x=l.scale.y=l.scale.z=n;l.material.opacity+=.1*(h-l.material.opacity);0<l.children.length&&(l.children[0].rotateY(-1*Math.PI/180),l.children[0].material.opacity=l.material.opacity)}a=d.camera.rotation.clone();a.reorder("YXZ");this.Kk=180*a.y/Math.PI;this.nk&&(this.eh(this.Kk-
b.pan.m),this.nk=!1);b.Rq(this.Kk-this.Ie,180*a.x/Math.PI,180*a.z/Math.PI);b=this.fj;d.Hk?(b.setRotationFromEuler(d.camera.rotation),b.visible=!0):b.visible=!1;d.renderer.render(d.Jq,d.camera);0==this.Vg||isNaN(this.Vg)||this.eh(this.Vg)}}};g.prototype.Fq=function(){this.Ie=0;this.Bf.setRotationFromEuler(this.Am)};g.prototype.eh=function(d){this.Ie+=d;this.Bf.rotateY(d*Math.PI/180)};return g}();p.Wn=f})(ggP2VR||(ggP2VR={}));var Kh=!1;
(function(p){var f=function(){return function(){this.fov=this.A=this.pan=0}}(),g=function(){return function(){this.nj=-1E7}}(),d=function(){function b(a,c){this.Tp="TGljZW5zZTogQW50aG9ueSBULiBBY2V2ZWRvIEpyLg==";this.pan={m:0,$a:0,min:0,max:360,d:0,ck:0,Qc:0,open:0};this.A={m:0,$a:0,min:-90,max:90,d:0,Qc:0,open:0};this.U={m:0,$a:0,min:-180,max:180,d:0,open:0};this.Dc={pan:0,A:-90,U:0,fov:170,Ib:9};this.fov={m:70,$a:70,min:1,Ug:0,max:170,Zj:360,$j:270,prev:0,d:0,mode:0,gn:0,kl:0,open:0};this.Oa={U:0,pitch:0};this.D={width:10,height:10};
this.rb=0;this.qj=new p.Ga;this.crossOrigin="anonymous";this.Ua=this.si=4;this.od=this.xh=this.Yg=this.yc=0;this.Hn={};this.ga={start:{x:0,y:0},oa:{x:0,y:0},Hd:{x:0,y:0},m:{x:0,y:0},na:{x:0,y:0}};this.Z={Jc:!1,Sc:!1,$h:function(){return this.Sc||this.Jc},wl:0,startTime:0,start:{x:0,y:0},oa:{x:0,y:0},Hd:{x:0,y:0},m:{x:0,y:0},na:{x:0,y:0}};this.kf=!0;this.Ja={enabled:!0,oa:{x:0,y:0},na:{x:0,y:0},pk:0,fov:{active:!1,tc:0}};this.qb={alpha:0,beta:0,gamma:0,orientation:0,Ie:0,xi:!0,fadeIn:0};this.Bg={alpha:0,
beta:0,gamma:0,orientation:0};this.F={src:[],$e:4,width:640,height:480,rd:!1,bi:!1,xk:!0,hn:!1,we:"loop",j:HTMLVideoElement=null,mn:!1,texture:WebGLTexture=null,Jk:WebGLBuffer=null,Ji:WebGLBuffer=null,Pj:WebGLBuffer=null,format:1,Uh:0,flipY:1};this.di=0;this.ra=this.Ha=this.Qa=this.aa=this.sc=this.eb=this.L=null;this.ye="pano";this.Dj="flashcontainer";this.rj="";this.control=null;this.bc=[];this.Ma=!1;this.mg=1;this.ta=null;this.Pd=this.Xe=this.qf=!1;this.bg=0;this.zd=.02;this.$i=0;this.aj=!1;this.Zi=
this.Ch=this.cg=this.We=this.Vk=0;this.Uk=-1;this.Rb="";this.Hf=this.Kc=!1;this.$g=0;this.kg=[];this.il="";this.ef=[];this.Re=this.Ac=1;this.eg=1024;this.If=!1;this.Ge=200;this.Vb=0;this.kh=5;this.zc=0;this.nn=50;this.Oj=this.pn=0;this.C={enabled:!1,timeout:5,active:!1,jh:!1,speed:.4,Oi:0,oi:0,bk:!0,uh:!1,Wf:!1,Dh:"",Qd:"Animation01",Ze:!1,ki:!1,Ak:!1,startTime:0,sd:0,rg:!1,Jh:!1,gi:0,Gd:0,Ng:0,Og:0,Mg:0,rm:0};this.G={active:!1,aborted:!1,speed:.1,pan:0,A:0,U:0,fov:70,Nd:70,Ng:0,Og:0,sm:0,Mg:0,Ib:0,
bh:0,Tj:0,Gk:!1,Wg:!1,Tk:0,Sk:0,Xh:!1};this.xf={pan:-1,A:-1,fov:-1};this.pm=0;this.la=null;this.Xf={};this.vh={};this.Td=[];this.ji={};this.Ic={};this.Af={};this.I={mode:1,Jg:-1,Aa:0,kb:0,fd:.05,$b:255,Zb:1,Yb:255,Xb:.3,pf:!0,Li:{enabled:!0,width:180,height:20,Mi:0,Ki:1,background:!0,Yb:16777215,Xb:1,$b:0,Zb:1,cj:3,Fh:1,Wi:!0},tb:[],Ub:[],$c:[],Gi:[]};this.Na=null;this.X=[];this.Y=[];this.S=[];this.bb=[];this.ke={};this.Wa=[];this.Ia=[];this.ad=[];this.me=[];this.Oe=[];this.ca=1;this.xa=this.de=this.Lb=
this.hd=null;this.og={};this.vd={};this.v=new p.Qn;this.oq={target:0,current:0,fd:.01,Fo:2,wj:0,Lh:!1,jo:!1};this.margin={left:0,top:0,right:0,bottom:0};this.M={Qg:!1,Up:!1,gc:!1,Zd:!1,Fd:!0,em:!1,fn:1,Tm:!1,uj:!0,jg:!0,Hh:!1,rf:!1,Um:!0,sensitivity:8};this.Tg=[];this.kd=!0;this.pa={x:0,y:0};this.th=this.Kb=this.qh=this.cd=this.Ue=this.ia=!1;this.Ui=this.Bn=!0;this.Mj=!1;this.xe=!0;this.rh=this.Jj=this.Lj=!1;this.Cn=!0;this.Pa=this.Rd="";this.Rc="transition";this.ab="transform";this.Bd="perspective";
this.pl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.wb={width:0,height:0};this.Al=new p.Ga;this.zl=new p.Ga;this.Bl=new p.Ga;this.Cl=new p.Ga;this.yl=new p.Ga;this.vf=!1;this.qm=this.Za="";this.Vi=[];this.ak=[];this.Ij=!1;this.Qi=[];this.Gg=this.gm=this.Eg=this.hm=this.Yd=this.Qj=this.qk=this.Wc=this.uf=this.fm=this.Rj=this.im=this.jm=this.lm=!1;this.sh=!0;this.wi=this.Zh=
!1;this.am=[];this.devicePixelRatio=1;this.qa=this.K=null;this.fg=!1;this.Va=null;this.vb={enabled:!1,speed:1,running:!1,Bj:!0};this.ym=!1;this.ii="<<LOG>>";this.cube=new p.Rn;this.Fk=!1;this.ig=function(a,c){if(0==a.length)return a;var b;var d=[];var k=c.ti(a[0])-0;for(b=0;b<a.length;b++){var e=b;var l=b+1;l==a.length&&(l=0);var g=c.ti(a[l])-0;if(0<=k&&0<=g)d.push(a[e]);else if(0<=k||0<=g){var f=g/(g-k);0>f&&(f=0);1<f&&(f=1);var y=new p.Ga;y.Ed(a[e],a[l],f);0>k||d.push(a[e]);d.push(y)}k=g}return d};
this.Im=new f;this.wk=0;this.lc=!1;this.fi=-1;this.wg=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.mi=1;this.Jo=this.Rh=this.nm=this.xj=this.jk=this.ui=0;this.om=!1;this.Vd=!0;this.mb=new p.Ah(this);this.mb.pf=!1;this.nl();if(7<
this.ii.length){var d=b.lg("bG9n");window[b.lg("Y29uc29sZQ==")][d](b.ll(this.ii))}this.Kf(this.mb);this.checkLoaded=this.bc;this.isLoaded=!1;c&&c.hasOwnProperty("useFlash")&&c.useFlash&&(this.Kb=!0,this.ia=this.cd=!1,c.hasOwnProperty("flashPlayerId")?this.ye=c.flashPlayerId:this.ye="pano",c.hasOwnProperty("flashContainerId")?this.Dj=c.flashContainerId:this.Dj=a+"flash");c&&c.hasOwnProperty("webGLFlags")&&c.webGLFlags&&(this.Hn=c.webGLFlags);this.Ea();this.Kb||(this.Sa=new p.Nn(this));this.fl(a);this.io();
this.userdata=this.Xf=this.pg();this.emptyHotspot=this.mb;this.mouse=this.pa;this.K=new p.On(this);this.Va=new p.Pn(this);this.xa=new p.Vn(this);this.jb=new p.Wn(this);this.Mc()}b.prototype.Vl=function(a){return-99991===a?this.Tp:"6.1 beta2/17561"};b.prototype.oj=function(){this.K.enabled=this.qa.enabled;this.K.type=this.qa.type;this.K.sa=this.qa.zoomin;this.K.pc=this.qa.zoomout;this.K.dg=this.qa.blendtime;this.K.$f=this.qa.zoomoutpause;this.K.Zf=this.qa.zoomfov;this.K.ne=this.qa.zoomspeed;this.K.af=
this.qa.blendcolor;this.K.Lc=this.qa.softedge;this.qa=null};b.prototype.ar=function(a){this.qa={};this.qa.enabled=!0;this.qa.type=this.K.type;this.qa.zoomin=this.K.sa;this.qa.zoomout=this.K.pc;this.qa.blendtime=this.K.dg;this.qa.zoomoutpause=this.K.$f;this.qa.zoomfov=this.K.Zf;this.qa.zoomspeed=this.K.ne;this.qa.blendcolor=this.K.af;this.qa.softedge=this.K.Lc;if(a.hasOwnProperty("type")){var c=a.type;if("cut"==c||"crossdissolve"==c||"diptocolor"==c||"irisround"==c||"irisrectangular"==c||"wipeleftright"==
c||"wiperightleft"==c||"wipetopbottom"==c||"wipebottomtop"==c||"wiperandom"==c)this.qa.type=c}a.hasOwnProperty("before")&&(c=Number(a.before),0==c||2==c)&&(this.qa.zoomin=c);a.hasOwnProperty("after")&&(c=Number(a.after),0==c||2==c||3==c||4==c)&&(this.qa.zoomout=c);a.hasOwnProperty("transitiontime")&&(c=Number(a.transitiontime),0<=c&&50>=c&&(this.qa.blendtime=c));a.hasOwnProperty("waitfortransition")&&(this.qa.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(c=Number(a.zoomedfov),
.01<=c&&50>=c&&(this.qa.zoomfov=c));a.hasOwnProperty("zoomspeed")&&(c=Number(a.zoomspeed),.01<=c&&99>=c&&(this.qa.zoomspeed=c));a.hasOwnProperty("dipcolor")&&(this.qa.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.qa.softedge=a));this.fg||this.oj()};b.prototype.Zc=function(a,c,b){var d=c?Number(c):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Hc("Unsupported projection type: "+a);else if(c&&0!==d&&4!==d&&12!==d&&9!==d)this.Hc("Unsupported projection2 type: "+d);
else if(a==d&&(d=0),this.Yg=b?Number(b):1,this.Ua!=a||this.yc!=d)this.Ua=a,this.yc=d,this.xa.Yh()};b.prototype.Ra=function(){return 0==this.Ua?4:this.Ua};b.prototype.ij=function(a,c){if(0!=a&&4!=a&&12!=a&&9!=a)this.Hc("Unsupported projection type: "+a);else if(this.ia||0==a||4==a||this.Hc("Projection changes require WebGL!"),this.Ra()!=a){var b={};b.pan=this.pan.m;b.tilt=this.A.m;b.fov=this.fov.m;b.projection=a;b.timingFunction=3;b.speed=c;a=this.vg(a);b.fov=Math.min(a,b.fov);this.li(b)}};b.prototype.addListener=
function(a,c){(this.og[a]=this.og[a]||[]).push(c)};b.prototype.V=function(a,c){if(a=this.og[a])for(var b=a.length,d=0;d<b;d++)try{a[d].apply(null,[c])}catch(e){this.Hc(e)}};b.prototype.removeEventListener=function(a,c){var b=this.og[a];if(b){var d;var e=0;for(d=b.length;e<d;e++)if(b[e]===c){1===d?delete this.og[a]:b.splice(e,1);break}}};b.prototype.Eq=function(){this.Ma=!0};b.prototype.Ep=function(){return this.R};b.prototype.bo=function(a,c,b,d){if(!this.vd.hasOwnProperty(a)){var k=new g;this.vd[a]=
k;k.type=c;"undefined"!==typeof b&&this.ge(a,b);"object"===typeof d&&this.an(a,d);return!0}return!1};b.prototype.an=function(a,c){if(this.vd.hasOwnProperty(a)&&"object"===typeof c){var b=this.vd[a];c.hasOwnProperty("cookiePath")&&(b.dl=String(c.cookiePath));c.hasOwnProperty("cookieExpireDays")&&(b.nj=parseFloat(c.cookieExpireDays));if(c.hasOwnProperty("keep")&&(b.mm=!!c.keep,b.mm)){var d="ggvar_"+a;0<document.cookie.length&&(c=document.cookie.indexOf(d+"="),-1!=c&&(c=c+d.length+1,d=document.cookie.indexOf(";",
c),-1==d&&(d=document.cookie.length),c=decodeURIComponent(document.cookie.substring(c,d)),0==b.type&&this.ge(a,c),1==b.type&&this.ge(a,parseFloat(c)),2==b.type&&this.ge(a,"true"==c)))}return!0}return!1};b.prototype.ge=function(a,c){if(this.vd.hasOwnProperty(a)){var b=this.vd[a];if(0==b.type&&"string"===typeof c||1==b.type&&"number"===typeof c||2==b.type&&"boolean"===typeof c){if(b.mm){var d="ggvar_"+a+"="+encodeURIComponent(c.toString());-1<=b.nj&&(d+="; max-age="+86400*b.nj);b.dl&&(d+="; path="+
b.dl);document.cookie=d}b.value!=c&&(b.value=c,this.V("varchanged_"+a,{value:c}));return!0}}return!1};b.prototype.yp=function(a){if(this.vd.hasOwnProperty(a))return this.vd[a].value};b.lg=function(a){var c="",b=0;a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));d=d<<2|e>>4;e=(e&15)<<4|h>>2;var m=(h&3)<<6|g;c+=String.fromCharCode(d);64!=h&&(c+=String.fromCharCode(e));64!=g&&(c+=String.fromCharCode(m))}while(b<a.length);return c};b.sr=function(a){for(var c=[1,1,1,1,2,2,3,0],b=a.length,d="",e=0;e<b;){var h=a.charCodeAt(e++);if(h&128){var g=c[h>>3&7];if(!(h&64&&g)||e+g>b)return null;for(h&=63>>g;0<g;--g){var m=a.charCodeAt(e++);if(128!=(m&192))return null;h=h<<6|
m&63}}d+=String.fromCharCode(h)}return d};b.ll=function(a){return b.sr(b.lg(a))};b.prototype.nl=function(){this.devicePixelRatio=window.devicePixelRatio||1;this.lm=!!navigator.userAgent.match(/(Windows|Win)/g);this.jm=!!navigator.userAgent.match(/(Mac|Macintosh|Mac_powerpc)/g);this.im=!!navigator.userAgent.match(/(Linux|Ubuntu)/g);this.Rj=!!navigator.userAgent.match(/(MSIE)/g);this.fm=!!navigator.userAgent.match(/(Edge|EdgA)/g);this.uf=!!navigator.userAgent.match(/(Firefox)/g);if(this.Wc=!!navigator.userAgent.match(/(Safari)/g)){var a=
navigator.userAgent.indexOf("Safari");this.ud=navigator.userAgent.substring(a+7);a=navigator.userAgent.indexOf("Version");-1!=a&&(this.ud=navigator.userAgent.substring(a+8));this.ud=this.ud.substring(0,this.ud.indexOf(" "));this.ud=this.ud.substring(0,this.ud.indexOf("."));this.qk=!0}if(this.Qj=!!navigator.userAgent.match(/(Chrome)/g))this.Wc=!1;this.Yd=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);this.hm=!!navigator.userAgent.match(/(iPhone|iPod)/g);this.Eg=!!navigator.userAgent.match(/(android)/i);
this.gm=!!navigator.userAgent.match(/(IEMobile)/i);this.Gg=this.Yd||this.Eg||this.gm;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.am=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.Zh=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];this.Pa="";this.Rc="transition";this.ab="transform";this.Bd="perspective";for(var c=0;c<a.length;c++)"undefined"!==typeof document.documentElement.style[a[c]+"Transform"]&&(this.Pa=
"-"+a[c].toLowerCase()+"-",this.Rc=a[c]+"Transition",this.ab=a[c]+"Transform",this.Bd=a[c]+"Perspective");this.Mj=Ih();this.ia=Jh();this.cd=this.Mj;this.ia&&(this.cd=!1);this.Kc=!0;this.Hf=!1;if(this.Yd||this.Eg)this.$m(80),this.kh=2;this.Hc("Pano2VR player "+this.Vl()+" - Prefix:"+this.Pa+", "+(this.Mj?"CSS 3D available":"CSS 3D not available")+", "+(this.ia?"WebGL available":"WebGL not available"));Kh&&this.O("Pano2VR Debug version!");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,
this.za=new AudioContext}catch(k){this.za=null}this.Wc&&(!this.qk||9>Number(this.ud))&&(this.za=null);this.Wc&&!this.Yd&&12<=Number(this.ud)&&(this.za=null);this.sh=this.hm?this.Wc&&this.qk&&10<=Number(this.ud)?!0:!1:!0};b.prototype.O=function(a){if(Kh){var c=document.getElementById("gg_debug");c&&(c.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Hc=function(a){var c=document.getElementById("gg_debug");c&&(c.innerHTML=a+"<br />");window.console&&window.console.log(a)};
b.prototype.$m=function(a){this.Ge=a};b.prototype.setCrossOrigin=function(a){this.crossOrigin=a};b.prototype.Mq=function(a){this.sf=a};b.prototype.op=function(){return this.$g};b.prototype.Kq=function(a){this.Rd=a};b.prototype.No=function(){return this.Rd};b.prototype.Xo=function(){return this.Gg};b.prototype.Yo=function(){return this.vf};b.prototype.Uo=function(){return this.C.active};b.prototype.Nq=function(a){this.Gg=!!a};b.prototype.Sh=function(){return this.isLoaded};b.prototype.Wo=function(){return!this.isLoaded};
b.prototype.nd=function(){return Number(this.D.height)/(2*Math.tan(Math.PI/180*(this.Ob()/2)))};b.prototype.bn=function(a,c){this.isFullscreen&&(a=window.innerWidth,c=window.innerHeight);var b=a-this.margin.left-this.margin.right,d=c-this.margin.top-this.margin.bottom;if(!(10>b||10>d)){var e=window.devicePixelRatio||1;this.If&&(e=1);this.L.style.width=b+"px";this.L.style.height=d+"px";this.L.style.left=this.margin.left+"px";this.L.style.top=this.margin.top+"px";if(this.ia)try{this.eb&&(this.eb.style.position=
"absolute",this.eb.style.display="inline",this.eb.style.width=b+"px",this.eb.style.height=d+"px",this.eb.width=b*e,this.eb.height=d*e),this.R&&(this.wb.width=b*e,this.wb.height=d*e,this.R.viewport(0,0,this.R.drawingBufferWidth,this.R.drawingBufferHeight))}catch(h){alert(h)}this.sc&&(this.sc.style.width=a+"px",this.sc.style.height=c+"px",this.sc.width=a,this.sc.height=c);this.Qa&&(this.Qa.style.width=a+"px",this.Qa.style.height=c+"px",this.Ha.style.width=a+"px",this.Ha.style.height=c+"px",this.Ha.width=
a,this.Ha.height=c,this.Ha.style.left=this.margin.left+"px",this.Ha.style.top=this.margin.top+"px",this.ta&&this.ta!=this.Qa&&(this.ta.style.width=a+"px",this.ta.style.height=c+"px"));this.Sa&&(b=this.Sa.gd,b.style.width=a+"px",b.style.height=c+"px",b.width=a,b.height=c,b.style.left=this.margin.left+"px",b.style.top=this.margin.top+"px");this.qf&&(this.Ma=!0);b=this.L.offsetWidth;d=this.L.offsetHeight;if(this.D.width!=b||this.D.height!=d)this.D.width=b,this.D.height=d;this.Or();this.ta&&this.ta.ggUpdateSize&&
this.ta.ggUpdateSize(a,c);this.V("sizechanged",{w:a,h:c});this.V("playerstatechanged",{})}};b.prototype.Te=function(){this.Fk=!0};b.prototype.Mc=function(){this.bn(this.hd.offsetWidth,this.hd.offsetHeight)};b.prototype.Dp=function(){var a={width:0,height:0};a.width=this.D.width;a.height=this.D.height;return a};b.prototype.Ae=function(){var a={x:0,y:0},c=this.L;if(c.offsetParent){do a.x+=c.offsetLeft,a.y+=c.offsetTop,c=c.offsetParent;while(c)}return a};b.prototype.Zq=function(a){this.la=a};b.prototype.Oq=
function(a,c,b,d){this.margin.left=a;this.margin.top=c;this.margin.right=b;this.margin.bottom=d;this.la=this.skinObj;this.Te()};b.prototype.ro=function(a){0==a&&(this.M.Fd=!1);1==a&&(this.M.Fd=!0);2==a&&(this.M.Fd=!this.M.Fd);this.V("viewmodechanged",{})};b.prototype.Bp=function(){return 1==this.M.Fd?1:0};b.prototype.al=function(a,c){this.I.mode=1==c&&0<this.I.mode?0:Math.round(a);this.update();this.ra&&(this.ra.changePolygonMode(a,c),this.ra.update());this.V("polymodechanged",{})};b.prototype.dn=
function(a){var c=this.I.tb.indexOf(a);-1==c?(this.I.tb.push(a),this.I.Ub.push(0),this.I.$c.push(1)):this.I.$c[c]=1;this.update()};b.prototype.Zl=function(a){var c=this.I.tb.indexOf(a);-1!=c&&(this.I.$c[c]=0,this.I.Gi.push(a),this.update())};b.prototype.zr=function(a){var c=this.I.tb.indexOf(a);-1==c||-1!=c&&0==this.I.$c[c]?this.dn(a):this.Zl(a);this.update()};b.prototype.po=function(a,c,b,d,e){for(var k=0;k<this.X.length;k++){var l=this.X[k];"poly"!=l.type||l.id!=a&&""!=a||(l.Yb=c,l.Xb=b,l.$b=d,
l.Zb=e)}""==a&&(this.I.Yb=c,this.I.Xb=b,this.I.$b=d,this.I.Zb=e);this.update()};b.prototype.no=function(a){this.Sa&&(this.Sa.tk=0==a?!0:1==a?!1:!this.Sa.tk,this.update())};b.prototype.qp=function(){return this.I.mode};b.prototype.so=function(){this.V("viewstatechanged",{})};b.prototype.Cp=function(){return 0};b.prototype.ep=function(a){return(a=this.ji[a])?a.type:"web"};b.prototype.cp=function(a){return(a=this.ji[a])?a:{}};b.prototype.jp=function(a,c){var b=[];a||(a=this.Za);var d=this.Td[a];d&&(a=
d);""===a&&0<Object.keys(this.Ic).length&&(a=Object.keys(this.Ic)[0]);this.Ic[a]&&this.Ic[a][c]&&(b.push(this.Ic[a][c].y),b.push(this.Ic[a][c].x));return b};b.prototype.kp=function(a,c){var b=[];a||(a=this.Za);var d=this.Td[a];d&&(a=d);""===a&&0<Object.keys(this.Ic).length&&(a=Object.keys(this.Ic)[0]);this.Af[a]&&this.Af[a][c]&&(b.push(this.Af[a][c].x),b.push(this.Af[a][c].y));return b};b.prototype.Kl=function(a){var c=this.Td[a];c&&(a=c);c=this.Jl();for(var b=[],d=0;d<c.length;d++)this.Ic[a][c[d]]&&
b.push(c[d]);return b};b.prototype.bp=function(a){a=this.Kl(a);return 0<a.length?a[0]:""};b.prototype.Jl=function(){var a=[],c;for(c in this.ji)a.push(c);return a};b.prototype.bm=function(a,c,b){a=Math.atan2(a+1,b);var d=Math.atan2(c+1,b);c=Math.sin(a);b=Math.sin(d);a=Math.cos(a);d=Math.cos(d);this.Al.init(0,0,-1);this.zl.init(a,0,-c);this.Bl.init(-a,0,-c);this.Cl.init(0,d,-b);this.yl.init(0,-d,-b)};b.prototype.kj=function(a){a=this.ig(a,this.Al);a=this.ig(a,this.zl);a=this.ig(a,this.Bl);a=this.ig(a,
this.Cl);return a=this.ig(a,this.yl)};b.prototype.un=function(a){if(!this.Kc&&this.Sp!=a){this.Sp=a;var c=this.margin.left+this.D.width/2+"px ";c+=this.margin.top+this.D.height/2+"px ";this.Qa.style[this.Bd]=a+"px";this.Qa.style[this.Bd+"Origin"]=c;this.L.style[this.Bd]=a+"px";this.L.style[this.Bd+"Origin"]=c}};b.prototype.Gl=function(){return this.K.le||this.K.xd||this.ia&&(4!=this.Ua||0!=this.yc)?!1:!0};b.prototype.oh=function(){var a=new p.Ga(0,0,-100),c=this.nd();var b=100/this.fov.m;var d=this.v.width/
this.v.height;var e=this.D.height*b*d;b*=this.D.height;for(var h=this.Gl(),g=0;g<this.X.length;g++){var m=this.X[g];if("point"==m.type){var f=!1;if(2==this.rb){var r=(this.pan.m-m.pan)/100/d*e;var w=(this.A.m-m.A)/100*b;Math.abs(r)<this.D.width/2+500&&Math.abs(w)<this.D.height/2+500&&(f=!0)}else a.init(0,0,-100),a.Fa(-m.A*Math.PI/180),a.Ka(m.pan*Math.PI/180),a.Ka(-this.pan.m*Math.PI/180),a.Fa(this.A.m*Math.PI/180),a.ib(this.U.m*Math.PI/180),.01>a.z?(w=-c/a.z,r=a.x*w,w*=a.y,Math.abs(r)<this.D.width/
2+500&&Math.abs(w)<this.D.height/2+500&&(f=!0)):w=r=0;m.Sb=r+this.D.width/2;m.Ab=w+this.D.height/2;m.visible=f;m.px=m.Sb;m.py=m.Ab;m.visible=m.visible;if(m.j&&m.j.onUpdatePosition)m.j.onUpdatePosition(this,m);else m.j&&m.j.__div&&("none"!=m.j.__div.style[this.Rc]&&(m.j.__div.style[this.Rc]="none"),m.j.ggUse3d?(this.Kc||this.un(c),2==this.rb?(m.j.__div.style[this.ab]="scale("+(100/this.fov.m*500/m.j.gg3dDistance).toFixed(10)+")",m.j.__div.style.left=this.margin.left+r+this.D.width/2+"px",m.j.__div.style.top=
this.margin.top+w+this.D.height/2+"px"):(m.j.__div.style.width="1px",m.j.__div.style.height="1px",r="",this.Kc&&(r+="perspective("+c+"px) "),r+="translate3d(0px,0px,"+c+"px) ",r+="rotateZ("+this.U.m.toFixed(10)+"deg) ",r+="rotateX("+this.A.m.toFixed(10)+"deg) ",r+="rotateY("+(-this.pan.m).toFixed(10)+"deg) ",r+="rotateY("+m.pan.toFixed(10)+"deg) ",r+="rotateX("+(-m.A).toFixed(10)+"deg) ",r+="translate3d(0px,0px,"+(-1*m.j.gg3dDistance).toFixed(10)+"px) ",m.j.__div.style[this.ab+"Origin"]="0% 0%",m.j.__div.style[this.ab]=
r,m.j.__div.style.left=this.margin.left+this.D.width/2+"px",m.j.__div.style.top=this.margin.top+this.D.height/2+"px")):f&&h?(m.j.__div.style.left=this.margin.left+r+this.D.width/2+"px",m.j.__div.style.top=this.margin.top+w+this.D.height/2+"px"):(m.j.__div.style.left="-1000px",m.j.__div.style.top="-1000px"))}if("poly"==m.type){var q=[];if(2==this.rb)for(m.ce=[],f=0;f<m.vertices.length;f++)w=m.vertices[f],r=(this.pan.m-w.pan)/100/d*e,w=(this.A.m-w.A)/100*b,r+=this.margin.left+this.D.width/2,w+=this.margin.top+
this.D.height/2,m.ce.push({Sb:r,Ab:w});else{for(f=0;f<m.vertices.length;f++)w=m.vertices[f],a.init(0,0,-100),a.Fa(-w.A*Math.PI/180),a.Ka(w.pan*Math.PI/180),a.Ka(-this.pan.m*Math.PI/180),a.Fa(this.A.m*Math.PI/180),a.ib(this.U.m*Math.PI/180),q.push(a.clone());q=this.kj(q);if(0<q.length)for(f=0;f<q.length;f++)a=q[f],.1>a.z?(w=-c/a.z,r=this.D.width/2+a.x*w,w=this.D.height/2+a.y*w):w=r=0,a.Sb=r,a.Ab=w;m.ce=q}}}};b.prototype.Po=function(){for(var a=[],c=0;c<this.X.length;c++){var b=this.X[c];"point"==b.type&&
b.j&&b.j.__div&&a.push(b.j.__div)}return a};b.prototype.ea=function(a,c){a=Number(a);isNaN(c)&&(c=0);0>c&&(c=0);1<c&&(c=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+c+")"};b.prototype.qq=function(){var a;if(this.Ha&&(this.I.Jg!=this.I.mode&&(this.I.Jg=this.I.mode,this.Ha.style.visibility=0<this.I.mode?"inherit":"hidden"),0<=this.I.mode||0<this.I.tb.length)){this.ma||(this.ma=this.Ha.getContext("2d"));if(this.ma.width!=this.D.width||this.ma.height!=this.D.height)this.ma.width=this.D.width,
this.ma.height=this.D.height;this.ma.clear?this.ma.clear():this.ma.clearRect(0,0,this.Ha.width,this.Ha.height);var c=1;0>=this.I.mode&&(c=0);3==this.I.mode&&(c=this.I.Aa);for(a=0;a<this.X.length;a++){var b=this.X[a];var d=c;if("poly"==b.type){var e=b.ce;2==this.I.mode&&(d=b.Aa);var h=this.I.tb.indexOf(b.id);-1!=h&&(d=this.I.Ub[h]);this.ma.fillStyle=this.ea(b.Yb,b.Xb*d);this.ma.strokeStyle=this.ea(b.$b,b.Zb*d);if(0<e.length){this.ma.beginPath();for(b=0;b<e.length;b++)d=e[b],0==b?this.ma.moveTo(d.Sb,
d.Ab):this.ma.lineTo(d.Sb,d.Ab);this.ma.closePath();this.ma.stroke();this.ma.fill()}}}}};b.prototype.$l=function(a,c,b){var d,k=!1;var h=0;for(d=a.length-1;h<a.length;d=h++){var g=a[h];d=a[d];g.Ab>b!=d.Ab>b&&c<(d.Sb-g.Sb)*(b-g.Ab)/(d.Ab-g.Ab)+g.Sb&&(k=!k)}return k};b.prototype.Gh=function(a,c){var b=-1;if((0<=this.I.mode||0<this.I.tb.length)&&this.Op())for(var d=0;d<this.X.length;d++){var e=this.X[d];"poly"==e.type&&e.ce&&0<e.ce.length&&(-1!=this.I.mode||-1!=this.I.tb.indexOf(e.id))&&this.$l(e.ce,
a,c)&&(b=d,e.Sb=a,e.Ab=c)}return 0<=b?this.X[b]:!1};b.prototype.Op=function(){return 4==this.Ra()&&0==this.yc};b.prototype.Ob=function(){var a=0,c=this.Ra(),b=this.D;switch(this.fov.mode){case 0:a=this.fov.m/2;break;case 1:a=4==c?180*Math.atan(b.height/b.width*Math.tan(this.fov.m/2*Math.PI/180))/Math.PI:b.height/b.width*this.fov.m/2;break;case 2:a=Math.sqrt(b.width*b.width+b.height*b.height);a=4==c?180*Math.atan(b.height/a*Math.tan(this.fov.m/2*Math.PI/180))/Math.PI:b.height/a*this.fov.m/2;break;
case 3:a=4*b.height/3>b.width?this.fov.m/2:4==c?180*Math.atan(4*b.height/(3*b.width)*Math.tan(this.fov.m/2*Math.PI/180))/Math.PI:4*b.height/(3*b.width)*(this.fov.m/2)}return 2*a};b.prototype.So=function(a,c){a||(a=this.Ob());c||(c=this.Ra());return 4==c?180*Math.atan(this.aspect()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.aspect()};b.prototype.aspect=function(){return this.D.width/this.D.height};b.prototype.Yk=function(a){var c=this.fov.m;a/=2;var b=this.Ra();switch(this.fov.mode){case 0:c=2*a;break;
case 1:a=4==b?180*Math.atan(this.D.width/this.D.height*Math.tan(a*Math.PI/180))/Math.PI:this.D.width/this.D.height*a;c=2*a;break;case 2:c=Math.sqrt(this.D.width*this.D.width+this.D.height*this.D.height);a=4==b?180*Math.atan(c/this.D.height*Math.tan(a*Math.PI/180))/Math.PI:c/this.D.height*a;c=2*a;break;case 3:4*this.D.height/3>this.D.width?c=2*a:(c=3*this.D.width/(4*this.D.height),a=4==b?180*Math.atan(c*Math.tan(a*Math.PI/180))/Math.PI:c*a,c=2*a)}return c};b.prototype.Ei=function(a){this.fov.m=this.Yk(a)};
b.prototype.hg=function(){if(!this.Ue){var a=this.Im;a.pan=this.pan.m;a.A=this.A.m;a.fov=this.fov.m;this.cf(a);this.cf(a);this.cf(a);this.pan.m=a.pan;this.A.m=a.A;this.fov.m=a.fov}};b.prototype.cf=function(a){var c=this.D.width/this.D.height;if(2==this.rb){if(0<this.fov.Ug){var b=this.Ac;this.v.levels&&0<this.v.levels.length&&(b=this.v.levels[0].height);this.fov.min=100*this.D.height/(b*this.fov.Ug)}var d=a.fov/2;b=d*c;var e=this.v.width/this.v.height*50;c=this.M.Um?2*Math.min(50,e/c):2*Math.max(50,
e/c);a.fov<this.fov.min&&(a.fov=this.fov.min);a.fov>c&&(a.fov=c);50<d?a.A=0:(50<a.A+d&&(a.A=50-d),-50>a.A-d&&(a.A=-50+d));b>e?a.pan=0:(a.pan+b>e&&(a.pan=e-b,this.C.active&&(this.C.speed=-this.C.speed,this.pan.d=0)),a.pan-b<-e&&(a.pan=-e+b,this.C.active&&(this.C.speed=-this.C.speed,this.pan.d=0)))}else{0<this.fov.Ug&&(b=this.Ac,this.v.levels&&0<this.v.levels.length&&(b=this.v.levels[0].height),this.fov.min=360*Math.atan2(this.D.height/2,b/2*this.fov.Ug)/Math.PI);a.fov<this.fov.min&&(a.fov=this.fov.min);
e=this.fov.max;var h=179;d=this.Ob()/2;b=c*d;4==this.Ra()?b=180*Math.atan(c*Math.tan(d*Math.PI/180))/Math.PI:9==this.Ra()?(e=this.fov.$j,h=355):12==this.Ra()&&(e=this.fov.Zj,h=360);this.ia||(e=Math.max(160,e));a.fov>e&&(a.fov=e);12==this.Ra()&&(2*b>h&&(a.fov=h/c),d=this.Ob()/2,2*d>h&&(a.fov=h),d=this.Ob()/2,b=c*d);2*d>this.A.max-this.A.min&&180>this.A.max-this.A.min&&(d=(this.A.max-this.A.min)/2,a.fov=this.Yk(2*d));90>this.A.max?a.A+d>this.A.max&&(a.A=this.A.max-d):a.A>this.A.max&&(a.A=this.A.max);
-90<this.A.min?a.A-d<this.A.min&&(a.A=this.A.min+d):a.A<this.A.min&&(a.A=this.A.min);c=this.pan.max-this.pan.min;if(359.99>c){e=90;h=Math.tan(d*Math.PI/180);var g=Math.tan((Math.abs(a.A)+d)*Math.PI/180);g=Math.sqrt(g*g+1)/Math.sqrt(h*h+1);d=180*Math.atan(g*Math.tan(b*Math.PI/180))/Math.PI;2*d>c&&(g=Math.tan(c*Math.PI/360)/Math.tan(b*Math.PI/180),c=g*Math.sqrt(h*h+1),g=Math.sqrt(c*c-1),e=180/Math.PI*Math.atan(g));a.pan+d>this.pan.max&&(a.pan=this.pan.max-d,this.C.active&&(this.C.speed=-this.C.speed,
this.pan.d=0));a.pan-d<this.pan.min&&(a.pan=this.pan.min+d,this.C.active&&(this.C.speed=-this.C.speed,this.pan.d=0));a.A+b>e&&(a.A=e-b);a.A-b<-e&&(a.A=-e+b)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.Ma=!0;a&&(this.mg=Math.max(1*a,this.mg))};b.prototype.Il=function(){return this.ra?!!this.ra.isTileLoading:0<this.Vb||0<this.zc};b.prototype.ph=function(){var a=Date.now();if(this.Kb){if(this.ra)if(this.Gr(),2===this.rb)this.hg(),this.oh();else if(0===this.rb){var c=this.nd();this.bm(this.D.width/
2,this.D.height/2,c);this.oh()}}else 2===this.rb?(this.oh(),this.ia?(this.xa.Dk(),this.xa.Dm()):this.Dk()):0===this.rb&&(!this.ia||4==this.Ua&&0==this.yc?(c=this.nd(),this.bm(this.D.width/2,this.D.height/2,c),this.oh(),this.th?this.xa.Nr():this.Bn&&this.zn(),this.vn(),this.ia?(this.F.rd?14==this.F.format?this.xa.Mr():this.xa.In():0<this.v.levels.length?this.xa.Tr():this.xa.Vr(),this.xa.Dm()):(this.cd?0<this.v.levels.length?this.Kr():this.Jr():this.qh&&this.Fr(),this.qq()),this.Sa&&this.Sa.pq()):(this.xa.In(),
this.oh(),this.Kp()));c=Date.now();50<c-a?(this.O("Time between frames: "+(c-a)),this.If||(2<this.wk?(this.If=!0,this.O("disabling HighDPI rendering"),this.Mc()):this.wk++)):this.wk=0;this.qf&&this.v.Qm++};b.prototype.Jr=function(){var a=!1;if(this.D.width!=this.L.offsetWidth||this.D.height!=this.L.offsetHeight)this.D.width=this.L.offsetWidth,this.D.height=this.L.offsetHeight,this.L.style[this.ab+"OriginX"]=this.D.width/2+"px",this.L.style[this.ab+"OriginY"]=this.D.height/2+"px",a=!0;var c=Math.round(this.nd());
this.Kg==c&&!a||this.Kc||(this.Kg=c,this.L.style[this.Bd]=c+"px");this.cube.vo(this.pan.m,this.A.m,this.U.m,this.Oa);for(a=0;6>a;a++){var b;if(b=this.cube.faces[a]){var d="";this.Kc?(d+="translate3d("+this.D.width/2+"px,"+this.D.height/2+"px,0px) ",d+="perspective("+c+"px) ",d+="translate3d(0px,0px,"+c+"px) "):d+="translate3d("+this.D.width/2+"px,"+this.D.height/2+"px,"+c+"px) ";d+="rotateZ("+Number(this.U.m).toFixed(10)+"deg) ";d+="rotateX("+Number(this.A.m).toFixed(10)+"deg) ";d+="rotateY("+Number(-this.pan.m).toFixed(10)+
"deg) ";b.Wl&&(d+=b.Wl,b.ob||(d="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),b.W.style[this.ab]=d)}}};b.prototype.Fr=function(){this.hg();var a;this.sc&&(a=this.sc.getContext("2d"));if(this.D.width!==this.L.offsetWidth||this.D.height!==this.L.offsetHeight)this.D.width=this.L.offsetWidth,this.D.height=this.L.offsetHeight;if(a){var c=a.canvas.width/2,b=a.canvas.height/2,d=a.createRadialGradient(c,b,5,c,b,Math.max(c,b));d.addColorStop(0,"#333");d.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,
a.canvas.height);a.fillStyle=d;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.m.toFixed(1),c,b-60);a.fillText("Tilt: "+this.A.m.toFixed(1),c,b-30);a.fillText("Fov: "+this.fov.m.toFixed(1),c,b+0);a.fillText("Node: "+this.Ej(),c,b+30);a.fillText("Title: "+this.Xf.title,c,b+60)}};b.prototype.Gr=function(){this.hg();if(this.D.width!==this.L.offsetWidth||this.D.height!==this.L.offsetHeight)this.D.width=this.L.offsetWidth,this.D.height=this.L.offsetHeight;
this.ra&&this.ra.setPan&&(this.ra.setPan(this.pan.m),this.ra.setTilt(this.A.m),this.ra.setFov(this.fov.m))};b.prototype.Dk=function(){this.Ha.style.visibility="inherit";this.ma||(this.ma=this.Ha.getContext("2d"));if(this.ma.width!=this.D.width||this.ma.height!=this.D.height)this.ma.width=this.D.width,this.ma.height=this.D.height;this.ma.clear?this.ma.clear():this.ma.clearRect(0,0,this.Ha.width,this.Ha.height);this.zc=0;var a=100/this.fov.m;var c=this.v.width/this.v.height;var b=this.D.height*a*c;
a*=this.D.height;var d=(this.pan.m/100/c-.5)*b+this.D.width/2;for(var e=(this.A.m/100-.5)*a+this.D.height/2,h,g,m,f,r=0;this.v.levels.length>=r+2&&this.v.levels[r+1].width>b;)r++;var w;var q=[];for(w=this.v.levels.length-1;w>=r;){c=this.v.levels[w];if(c.cache){var y={hb:0,Eb:0};y.Fb=c.T-1;y.Gb=c.da-1}else{y={};var x=-e/a*(c.height/this.v.N);h=(-d+this.D.width)/b*(c.width/this.v.N);g=(-e+this.D.height)/a*(c.height/this.v.N);y.hb=Math.min(Math.max(0,Math.floor(-d/b*(c.width/this.v.N))),c.T-1);y.Eb=
Math.min(Math.max(0,Math.floor(x)),c.da-1);y.Fb=Math.min(Math.max(0,Math.floor(h)),c.T-1);y.Gb=Math.min(Math.max(0,Math.floor(g)),c.da-1)}q[w]=y;var A=!0;for(g=y.Eb;g<=y.Gb;g++)for(h=y.hb;h<=y.Fb;h++)f=h+g*c.T,x=c.ba[f],x||(x=new p.Od,c.ba[f]=x),this.Vb<this.kh?x.v||(this.Oj++,x.v=new Image,x.v.onload=this.wr(),x.v.onerror=this.Ni(x),x.v.onabort=this.Ni(x),x.v.crossOrigin=this.crossOrigin,x.v.setAttribute("src",this.ie(0,w,h,g)),c.cache&&this.bc.push(x.v),this.Vb++,this.Ma=!0):this.zc++,x.v&&x.v.complete||
(A=!1),x.visible=!0;y.Vj=A;w--}for(w=this.v.levels.length-1;w>=r;){c=this.v.levels[w];if(q[w]&&0<=q[w].hb)for(y=q[w],g=y.Eb;g<=y.Gb;g++)for(h=y.hb;h<=y.Fb;h++)f=h+g*c.T,(x=c.ba[f])||(x=c.ba[f]=new p.Od),x.v&&x.v.complete&&(f=d+(-this.v.Ca+this.v.N*h)*b/c.width,this.ma.drawImage(x.v,f,e+(-this.v.Ca+this.v.N*g)*a/c.height,x.v.width*b/c.width,x.v.height*a/c.height)),x.visible=!0;w--}for(b=0;b<this.v.levels.length;b++)if(c=this.v.levels[b],!c.cache)for(m in c.ba)c.ba.hasOwnProperty(m)&&(x=c.ba[m],x.visible||
(x.v=null,delete c.ba[m]));if(0<=this.I.mode||0<this.I.tb.length)for(b=1,0>=this.I.mode&&(b=0),3==this.I.mode&&(b=this.I.Aa),m=0;m<this.X.length;m++)if(c=this.X[m],d=b,"poly"==c.type&&(a=c.ce,2==this.I.mode&&(d=c.Aa),e=this.I.tb.indexOf(c.id),-1!=e&&(d=this.I.Ub[e]),0<a.length)){this.ma.fillStyle=this.ea(c.Yb,c.Xb*d);this.ma.strokeStyle=this.ea(c.$b,c.Zb*d);this.ma.beginPath();for(c=0;c<a.length;c++)d=a[c],0==c?this.ma.moveTo(d.Sb,d.Ab):this.ma.lineTo(d.Sb,d.Ab);this.ma.closePath();this.ma.stroke();
this.ma.fill()}this.kd=!1};b.prototype.ur=function(a){var c=this;return function(){c.update();c.kd=!0;a.loaded=!0;a.v&&!a.W&&c.L.appendChild(a.v);c.Vb&&c.Vb--;a.v&&a.Ya&&(a.Ya.drawImage(a.v,0,0),a.v=null)}};b.prototype.wr=function(){var a=this;return function(){a.Ma=!0;a.kd=!0;a.Vb&&a.Vb--}};b.prototype.Ni=function(a){var c=this;return function(){c.Ma=!0;c.kd=!0;c.Vb&&c.Vb--;a.v=null}};b.prototype.Ul=function(a,c,b){b.hb=a.width/this.v.N*c.sg;b.Eb=a.height/this.v.N*c.tg;b.Fb=a.width/this.v.N*c.Rg;
b.Gb=a.height/this.v.N*c.Sg;b.hb=Math.min(Math.max(0,Math.floor(b.hb)),a.T-1);b.Eb=Math.min(Math.max(0,Math.floor(b.Eb)),a.da-1);b.Fb=Math.min(Math.max(0,Math.floor(b.Fb)),a.T-1);b.Gb=Math.min(Math.max(0,Math.floor(b.Gb)),a.da-1)};b.prototype.Sq=function(a){a=Math.round(a);this.Kc=0<(a&1);this.Hf=0<(a&2);this.Ui=0<(a&4);this.If=0<(a&8);4096<=a&&(this.cd=0<(a&4096),this.ia=0<(a&8192),this.qh=0<(a&32768))};b.prototype.tp=function(){var a=0;this.Kc&&(a|=1);this.Hf&&(a|=2);this.Ui&&(a|=4);this.cd&&(a|=
4096);this.ia&&(a|=8192);this.qh&&(a|=32768);return a};b.prototype.xn=function(){if(!(6>this.cube.faces.length))for(var a=0;6>a;a++){var c=this.cube.faces[a];var b=[];b.push(new p.Ga(-1,-1,-1,0,0));b.push(new p.Ga(1,-1,-1,1,0));b.push(new p.Ga(1,1,-1,1,1));b.push(new p.Ga(-1,1,-1,0,1));for(var d=0;4>d;d++)4>a?b[d].Ka(-Math.PI/2*a):b[d].Fa(Math.PI/2*(4==a?-1:1)),this.Oa&&(b[d].ib(this.Oa.U*Math.PI/180),b[d].Fa(-this.Oa.pitch*Math.PI/180)),b[d].Me(-this.pan.m),b[d].Ld(this.A.m),b[d].Ne(this.U.m);b=
this.kj(b);c.ob=0<b.length;if(c.ob){c=c.Cf;c.sg=b[0].yd;c.Rg=b[0].yd;c.tg=b[0].Wb;c.Sg=b[0].Wb;for(d=1;d<b.length;d++)c.sg=Math.min(c.sg,b[d].yd),c.Rg=Math.max(c.Rg,b[d].yd),c.tg=Math.min(c.tg,b[d].Wb),c.Sg=Math.max(c.Sg,b[d].Wb);c.Yf=c.Rg-c.sg;c.wh=c.Sg-c.tg;c.scale=Math.max(c.Yf,c.wh)}else c.Cf.Yf=-1,c.Cf.wh=-1}};b.prototype.Yj=function(){for(var a=0;a<this.v.levels.length;a++){var c=this.v.levels[a],b;for(b in c.ba)c.ba.hasOwnProperty(b)&&(c.ba[b].visible=!1)}};b.prototype.Aj=function(){var a=
0,c=Math.tan(Math.min(this.Ob(),175)*Math.PI/360),b=this.D.height/(2*c);b*=1+this.D.width/this.D.height*c/2;for(b*=Math.pow(2,1<this.devicePixelRatio?this.v.um:this.v.tm);this.v.levels.length>=a+2&&!this.v.levels[a+1].Le&&this.v.levels[a+1].width>b;)a++;return a};b.prototype.Kr=function(){var a=!1,c,b,d;if(this.D.width!==this.L.offsetWidth||this.D.height!==this.L.offsetHeight)this.D.width=this.L.offsetWidth,this.D.height=this.L.offsetHeight,this.L.style[this.ab+"OriginX"]=this.D.width/2+"px",this.L.style[this.ab+
"OriginY"]=this.D.height/2+"px",a=!0;var e=Math.round(this.nd());if(this.Kg!=e||a)this.Kg=e,this.Kc||(this.L.style[this.Bd]=e+"px",this.L.style[this.Bd+"Origin"]="50% 50%");this.zc=0;if(0<this.v.levels.length){this.xn();this.Yj();var h="";for(c=0;6>c;c++){var g=this.cube.faces[c];g.ob&&(h=h+c+",")}h=this.Aj();var m;for(m=this.v.levels.length-1;m>=h;){a=this.v.levels[m];var f=1;m==this.v.levels.length-1&&0==this.v.Ca&&(f=this.v.N/(this.v.N-2));for(c=0;6>c;c++){g=this.cube.faces[c];var r=g.Cf;if(g.ob&&
0<r.Yf&&0<r.wh&&0<r.scale||a.cache){g.Ma=!1;var w={};a.cache?(w.hb=0,w.Eb=0,w.Fb=a.T-1,w.Gb=a.da-1):this.Ul(a,r,w);for(d=w.Eb;d<=w.Gb;d++)for(b=w.hb;b<=w.Fb;b++){var q=b+d*a.T+c*a.T*a.da;(r=a.ba[q])||(r=a.ba[q]=new p.Od);if(!r.W&&this.Vb<this.kh){if(0<this.Qi.length){r.W=this.Qi.shift();for(q=this.L.firstChild;q&&q.Xd&&(-1==q.Xd||q.Xd>=m);)q=q.nextSibling;this.L.insertBefore(r.W,q);r.Ya=r.W.getContext("2d")}else if(this.pn<this.Ge){this.pn++;r.W=document.createElement("canvas");r.W.width=this.v.N+
2*this.v.Ca;r.W.height=this.v.N+2*this.v.Ca;r.Ya=r.W.getContext("2d");r.W.style[this.ab+"Origin"]="0% 0%";r.W.style.overflow="hidden";r.W.style.position="absolute";for(q=this.L.firstChild;q&&q.Xd&&(-1==q.Xd||q.Xd>=m);)q=q.nextSibling;this.L.insertBefore(r.W,q)}r.W&&(this.Oj++,r.v=new Image,r.v.crossOrigin=this.crossOrigin,r.v.style[this.ab+"Origin"]="0% 0%",r.v.style.position="absolute",r.v.style.overflow="hidden",r.W.Xd=m,r.v.onload=this.ur(r),r.v.onerror=this.Ni(r),r.v.onabort=this.Ni(r),r.v.setAttribute("src",
this.ie(c,m,b,d)),a.cache&&this.bc.push(r.v),this.Vb++,this.Ma=!0)}else this.zc++;if(r.W){q="";this.Kc?(q+="translate3d("+this.D.width/2+"px,"+this.D.height/2+"px,0px) ",q+=" perspective("+e+"px) ",q+="translate3d(0px,0px,"+e+"px) "):q+="translate3d("+this.D.width/2+"px,"+this.D.height/2+"px,"+e+"px) ";q+="rotateZ("+Number(this.U.m).toFixed(10)+"deg) ";q+="rotateX("+Number(this.A.m).toFixed(10)+"deg) ";q+="rotateY("+Number(-this.pan.m).toFixed(10)+"deg) ";this.Oa&&(q+="rotateX("+Number(-this.Oa.pitch).toFixed(10)+
"deg) ",q+="rotateZ("+Number(this.Oa.U).toFixed(10)+"deg) ");q=4>c?q+("rotateY("+-90*c+"deg) "):q+("rotateX("+(4==c?-90:90)+"deg) ");if(this.Hf){var y=this.v.N/a.width*(2*m+1)*(this.eg/this.v.N);y=this.Wc?2/Math.tan(this.fov.m*Math.PI/360)*y:2*y;q+=" scale("+y*f*f+")"}else y=1/(f*f);q+=" translate3d("+(1/f*b*this.v.N-this.v.Ca-a.width/2)+"px,";q+=1/f*d*this.v.N-this.v.Ca-a.width/2+"px,";q+=-a.width*y/2+"px)";g.ob&&(r.visible=!0,r.W?r.W.style[this.ab]=q:r.v&&(r.v.style[this.ab]=q))}}}}m--}for(e=0;e<
this.v.levels.length;e++){a=this.v.levels[e];for(var x in a.ba)a.ba.hasOwnProperty(x)&&(r=a.ba[x],!r.visible&&r.W&&(a.cache?r.W?r.W.style[this.ab]="translate3d(-10px,-10px,0px) scale(0.001,0.001)":r.v&&(r.v.style[this.ab]=""):(r.Ya&&r.Ya.clearRect(0,0,r.Ya.canvas.width,r.Ya.canvas.height),this.Qi.push(r.W),r.W?(h="translate3d(-10px,-10px,0px) scale(0.001,0.001)",r.W.style[this.ab]=h,r.W.Xd=-1):r.loaded&&this.L.removeChild(r.v),r.W=null,r.v=null,r.Ya=null,delete a.ba[x])))}this.kd=!1}};b.prototype.vn=
function(){var a=Math.round(this.nd());this.Kc||this.un(a);for(var c=0;c<this.bb.length;c++){var b=this.bb[c];b.yn(a);b.j.hidden=!1}};b.prototype.zn=function(){for(var a=Math.round(this.nd()),c=0;c<this.S.length;c++){var b=this.S[c];b.td||(b.yn(a),b.j.hidden=!1)}};b.prototype.Kp=function(){for(var a=0;a<this.bb.length;a++){var c=this.bb[a];c.Pf(!1)}for(a=0;a<this.S.length;a++)c=this.S[a],c.td||c.Pf(!1)};b.prototype.Or=function(){for(var a=0;a<this.S.length;a++){var c=this.S[a];c.td||c.Te()}for(a=
0;a<this.bb.length;a++)c=this.bb[a],c.Te()};b.prototype.Vc=function(a){this.xe=!1;try{this.eb=a?a:document.createElement("canvas");var c=this.hd.offsetWidth-this.margin.left-this.margin.right,b=this.hd.offsetHeight-this.margin.top-this.margin.bottom;if(100>c||100>b)b=c=100;var d=window.devicePixelRatio||1;this.If&&(d=1);this.L.style.width=c+"px";this.L.style.height=b+"px";this.eb.style.width=c+"px";this.eb.style.height=b+"px";this.eb.width=c*d;this.eb.height=b*d;this.eb.style.display="none";this.eb.style.touchAction=
"none";this.L.insertBefore(this.eb,this.L.firstChild);var e=this.Hn;e.stencil=!0;e.depth=!0;e.powerPreference="high-performance";e.alpha=this.Wc?!0:!1;this.Yd&&10<=this.am[0]&&(e.antialias=!1,e.alpha=!1);this.R=this.eb.getContext("webgl",e);this.R||(this.R=this.eb.getContext("experimental-webgl",e));if(this.R){var h=this.R;this.wb.width=c*d;this.wb.height=b*d;h.clearColor(0,0,0,0);h.enable(this.R.DEPTH_TEST);h.viewport(0,0,500,500);h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT);4096<=h.getParameter(h.MAX_TEXTURE_SIZE)&&
!this.Gg&&(this.Ge=1<d?4*this.Ge:2*this.Ge);this.O("Max tile cnt: "+this.Ge);this.xa.Dg();this.xa.Yh();this.xa.cm(this.Re);this.xa.dm();this.K&&(this.K.Dg(),this.K.Vc());this.Sa&&(this.Sa.Dg(),this.Sa.Vc())}}catch(n){this.O(n)}this.R?(this.ia=!0,this.V("webglready",{gl:this.R})):alert("Could not initialise WebGL!")};b.prototype.Mb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Rd+a:this.Rd};b.prototype.Jb=function(a,c,b){var d=(new RegExp("%0*"+
c,"i")).exec(a.toString());if(d){d=d.toString();var k=b.toString();d.charAt(d.length-1)!=c&&(k=(1+b).toString());if(!isNaN(parseFloat(b)))for(;k.length<d.length-1;)k="0"+k;a=a.replace(d,k)}return a};b.prototype.ie=function(a,c,b,d){var k=this.v.Uj-1-c,l=this.v.Wj,g="x";switch(a){case 0:g="f";break;case 1:g="r";break;case 2:g="b";break;case 3:g="l";break;case 4:g="u";break;case 5:g="d";break;case "vr":g="vr"}for(var m=0;3>m;m++)l=this.Jb(l,"c",a),l=this.Jb(l,"s",g),l=this.Jb(l,"r",c),l=this.Jb(l,"l",
k),l=this.Jb(l,"x",b),l=this.Jb(l,"y",d),l=this.Jb(l,"v",d),l=this.Jb(l,"h",b);return this.Mb(l)};b.prototype.xg=function(){return this.pan.m};b.prototype.np=function(){return this.G.pan};b.prototype.Nl=function(){for(var a=this.pan.m;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.ze=function(){for(var a=this.pan.m-this.pan.ck;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Nf=function(a){this.Ea();isNaN(a)||(this.pan.m=Number(a));this.update()};b.prototype.rk=function(a){this.Ea();
isNaN(a)||(this.pan.m=Number(a)+this.pan.ck);this.update()};b.prototype.$k=function(a,c){isNaN(a)||(this.Nf(this.xg()+a),c&&(this.pan.d=a))};b.prototype.oo=function(a,c){this.$k(a*this.Qh(),c)};b.prototype.Th=function(){return this.A.m};b.prototype.vp=function(){return this.G.A};b.prototype.Of=function(a){this.Ea();isNaN(a)||(this.A.m=Number(a));this.update()};b.prototype.bl=function(a,c){this.Of(this.Th()+a);c&&(this.A.d=a)};b.prototype.qo=function(a,c){this.bl(a*this.Qh(),c)};b.prototype.Ci=function(a){this.Ea();
isNaN(a)||(this.U.m=Number(a));this.update()};b.prototype.Rl=function(){return this.U.m};b.prototype.Fj=function(){return this.fov.m};b.prototype.Qo=function(){return this.G.Nd};b.prototype.Lf=function(a){this.Ea();switch(this.Ra()){case 4:var c=170;break;case 12:c=360;break;case 9:c=355;break;default:c=170}2==this.rb&&(c=9999999999);!isNaN(a)&&0<a&&a<c&&(c=this.fov.m,this.fov.m=1*a,c!=this.fov.m&&this.update())};b.prototype.Zk=function(a,c){this.Lf(this.Fj()+a);c&&(this.fov.d=a)};b.prototype.hj=
function(a,c){if(!isNaN(a)){var b=a/90*Math.cos(Math.min(this.fov.m,90)*Math.PI/360);b=this.fov.m*Math.exp(b);this.Lf(b);c&&(this.fov.d=a)}};b.prototype.Qq=function(a,c){this.Ea();isNaN(a)||(this.pan.m=a);isNaN(c)||(this.A.m=c);this.update()};b.prototype.Rq=function(a,c,b){this.Ea();!isNaN(a)&&1E7>a&&-1E7<a&&(this.pan.m=a);!isNaN(c)&&1E7>c&&-1E7<c&&(this.A.m=c);!isNaN(b)&&1E7>b&&-1E7<b&&(this.U.m=b);this.update()};b.prototype.Bi=function(a,c,b){this.Ea();isNaN(a)||(this.pan.m=a);isNaN(c)||(this.A.m=
c);isNaN(b)||this.Lf(b);this.update()};b.prototype.Lq=function(){this.Bi(this.pan.$a,this.A.$a,this.fov.$a)};b.prototype.setLocked=function(a){this.Ym(a);this.Zm(a);this.Xm(a)};b.prototype.Ym=function(a){this.M.gc=a};b.prototype.Xm=function(a){this.M.Qg=a};b.prototype.ap=function(){return this.M.Qg};b.prototype.Zm=function(a){this.M.Zd=a};b.prototype.zi=function(a){this.lc=a};b.prototype.Ro=function(){return this.Jj};b.prototype.br=function(a,c){void 0===c&&(c=!0);this.Cn=c;this.rh==!a&&((this.rh=
!!a)?this.qb.xi=!0:this.U.m=0,this.V("gyrochanged",{}),this.V("playerstatechanged",{}))};b.prototype.wp=function(){return this.rh};b.prototype.mp=function(){return this.Eg?5:this.Yd?4:this.lm?1:this.jm?2:this.im?3:0};b.prototype.Oo=function(){return this.Rj?5:this.fm?4:this.uf?2:this.Wc?3:this.Qj?1:0};b.prototype.moveTo=function(a,c,b,d,e,h){this.Ea();if("_blank"!==a&&""!==a){this.G.active=!0;this.G.aborted=!1;this.G.Gk=!1;var k=a.toString().split("/");1<k.length&&(a=Number(k[0]),d=Number(c),c=Number(k[1]),
2<k.length&&(b=Number(k[2])));this.G.pan=isNaN(a)?this.pan.m:Number(a);this.G.A=isNaN(c)?this.A.m:Number(c);this.G.fov=!isNaN(b)&&0<b&&180>b?Number(b):this.fov.m;this.G.speed=!isNaN(d)&&0<d?Number(d):1;this.G.U=isNaN(e)?this.U.m:Number(e);void 0!==h?!a||4!=h&&12!=h&&9!=h||(this.G.Ib=h):this.G.Ib=this.Ua}};b.prototype.li=function(a){this.Ea();var c=0,b=0,d=70,e=4,h=0,g=1;a.hasOwnProperty("pan")&&(c=Number(a.pan),this.G.pan=c);a.hasOwnProperty("tilt")&&(b=Number(a.tilt),this.G.A=b);a.hasOwnProperty("fov")&&
(d=Number(a.fov),this.G.fov=d);a.hasOwnProperty("projection")&&(e=Number(a.projection),this.G.Ib=e);a.hasOwnProperty("timingFunction")&&(h=Number(a.timingFunction));a.hasOwnProperty("speed")&&(g=Number(a.speed));0>=g?(this.Bi(c,b,d),this.Zc(e)):(a=new p.Lk,a.lb="__AutoMove",a.Rf=this.Nl(),a.hh=this.A.m,a.Md=this.fov.m,a.gh=this.Ua,a.bd=c,a.he=b,a.Sf=d,a.wd=e,a.gf=!1,a.ue=!1,a.ve=!1,0==h&&(a.ue=!0),1==h&&(a.gf=!0,a.ue=!0),2==h&&(a.ve=!0),a.speed=g,this.G.Sk=this.J,this.J=this.Dl(a),this.G.Tk=(new Date).getTime(),
this.G.Gk=!0,this.G.active=!0,this.G.aborted=!1,this.G.pan=c,this.G.A=b,this.G.fov=d,this.Pd=!1)};b.prototype.$p=function(a){this.moveTo(this.pan.$a,this.A.$a,this.fov.$a,a)};b.prototype.aq=function(a,c){var b={};b.pan=this.pan.$a;b.tilt=this.A.$a;b.fov=this.fov.$a;b.projection=this.si;b.timingFunction=c;b.speed=a;this.li(b)};b.prototype.Zn=function(a,c,b,d){var e=new p.Ah(this);e.type="point";e.pan=c;e.A=b;e.id=a;e.j={};e.j.player=this;e.jf();e.j.hotspot=e;e.j.__div=document.createElement("div");
e.j.__div.appendChild(d);this.X.push(e);e.j.__div.style.position="absolute";e.j.__div.style.left="-1000px";e.j.__div.style.top="-1000px";this.Qa.insertBefore(e.j.__div,this.Qa.firstChild);this.Ma=!0};b.prototype.Hr=function(a,c,b){for(var d=0;d<this.X.length;d++){var e=this.X[d];e.id==a&&(e.pan=c,e.A=b,e.jf())}this.Ma=!0};b.prototype.Cq=function(a){for(var c=-1,b,d=0;d<this.X.length;d++)b=this.X[d],b.id==a&&(c=d);-1<c&&(b=this.X.splice(c,1).pop(),b.j&&b.j.__div&&this.Qa.removeChild(b.j.__div))};b.prototype.pp=
function(){for(var a=[],c=0;c<this.X.length;c++){var b=this.X[c];"point"==b.type&&a.push(String(b.id))}return a};b.prototype.To=function(a){for(var c=0;c<this.X.length;c++){var b=this.X[c];if(b.id==a)return c={},c.id=a,c.pan=b.pan,c.tilt=b.A,c.url=b.url,c.target=b.target,c.title=b.title,c.description=b.description,c.skinid=b.vk,b.ff&&(c.customimage=b.ff,c.customimagewidth=b.tj,c.customimageheight=b.Kh,c.use3D=b.An,c.distance3D=b.ol),b.j&&b.j.__div&&(c.div=b.j.__div),c}};b.prototype.Fn=function(a,
c){this.ga.start.x=a;this.ga.start.y=c;this.ga.oa.x=a;this.ga.oa.y=c;this.Ja.oa.x=a;this.Ja.oa.y=c;this.jk++;this.pan.Qc=this.pan.m;this.A.Qc=this.A.m};b.prototype.Dn=function(a,c){var b=this.Ob();this.pan.Qc+=a*b/this.D.height;this.A.Qc+=c*b/this.D.height;this.pan.m=this.pan.Qc;this.A.m=this.A.Qc};b.prototype.En=function(a,c){this.ga.m.x=a;this.ga.m.y=c;this.ga.na.x=this.ga.m.x-this.ga.oa.x;this.ga.na.y=this.ga.m.y-this.ga.oa.y;this.M.Fd&&(this.ga.oa.x=this.ga.m.x,this.ga.oa.y=this.ga.m.y,this.update())};
b.prototype.Ea=function(){this.C.active&&(this.C.active=!1,this.V("autorotatechanged",{}),this.pan.d=0,this.A.d=0,this.fov.d=0);this.G.active&&(this.G.active=!1,this.pan.d=0,this.A.d=0,this.fov.d=0);this.Xe=this.G.aborted=!1;this.C.ki=!1;this.zd=.02;this.bg=0;this.C.Wf&&(this.C.enabled=this.C.Ze);this.wf=(new Date).getTime()};b.prototype.Zo=function(){return this.wf};b.prototype.Ol=function(a,c){a||(a=this.pa.x,c=this.pa.y);var b=this.D.height/(2*Math.tan(this.fov.m*Math.PI/360));a-=this.D.width/
2;c-=this.D.height/2;var d={};d.pan=180*Math.atan(a/b)/Math.PI;d.tilt=180*Math.atan(-c/Math.sqrt(a*a+b*b))/Math.PI;return d};b.prototype.rp=function(a,c){a||(a=this.pa.x,c=this.pa.y);if(2===this.rb){var b=this.fov.m/this.D.height;a=-(a-this.D.width/2)*b+this.pan.m;c=-(c-this.D.height/2)*b+this.A.m}else{b=new p.Ga(0,0,1);a=this.Ol(a,c);b.Ld(-a.tilt);b.Me(a.pan);b.Ld(-this.A.m);b.Me(-this.pan.m);b.Ld(-this.Oa.pitch);b.Ne(this.Oa.U);for(a=b.fo()-180;-180>a;)a+=360;c=b.ho()}b={};b.pan=a;b.tilt=c;return b};
b.prototype.Gc=function(a){return a==this.control||a&&void 0!==a.ggPermeableMap&&1==a.ggPermeableMap?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.jj=function(a,c){var b=this.nd(),d,e;for(d=0;d<this.S.length+this.bb.length;d++){var h=d<this.S.length?this.S[d]:this.bb[d-this.S.length];if(h.nb)return h}for(d=0;d<this.S.length+this.bb.length;d++)if(h=d<this.S.length?this.S[d]:this.bb[d-this.S.length],!h.td){var g=
[],m=new p.Ga,f;var r=e=void 0;0<h.fov&&(e=Math.tan(h.fov/2*Math.PI/180),r=0<h.vc?e*h.Uc/h.vc:e,h.Ec&&1!=h.Ec&&(r*=h.Ec));for(f=0;4>f;f++){switch(f){case 0:m.init(-e,-r,0);break;case 1:m.init(e,-r,0);break;case 2:m.init(e,r,0);break;case 3:m.init(-e,r,0)}m.Fa(h.Fa*Math.PI/180);m.Ka(-h.Ka*Math.PI/180);m.ib(h.ib*Math.PI/180);--m.z;m.Fa(-h.A*Math.PI/180);m.Ka(h.pan*Math.PI/180);m.Ka(-this.pan.m*Math.PI/180);m.Fa(this.A.m*Math.PI/180);m.ib(this.U.m*Math.PI/180);g.push(m.clone())}g=this.kj(g);if(0<g.length){for(f=
0;f<g.length;f++)m=g[f],.1>m.z?(r=-b/m.z,e=this.D.width/2+m.x*r,r=this.D.height/2+m.y*r):r=e=0,m.Sb=e,m.Ab=r;if(this.$l(g,a,c))return h}}return null};b.prototype.ai=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.Zp=function(a){this.wn(a);if(this.ld)this.ld.onclick();this.kf&&this.Ph();this.Lb=null;if(!this.M.gc&&!this.lc){a=a?a:window.event;if(a.which||0==a.which||1==a.which){var c=
(new Date).getTime();if(this.de){this.Lb=this.de;this.Z.Jc=!0;this.Z.startTime=c;a.stopPropagation();return}if(this.Gc(a.target)){var b;(b=this.jj(this.pa.x,this.pa.y))&&b.Be&&(this.Lb=b);this.Fn(a.pageX,a.pageY);this.Z.Jc=!0;this.Z.startTime=c;a.preventDefault();this.Ea()}}this.ga.na.x=0;this.ga.na.y=0}};b.prototype.Vf=function(a,c){var b=this.I.Li;b.enabled&&(this.Da!=this.mb&&0<=a&&0<=c&&""!=this.Da.title?(this.Na.innerHTML=this.Da.title,this.Na.style.color=this.ea(b.Mi,b.Ki),this.Na.style.backgroundColor=
b.background?this.ea(b.Yb,b.Xb):"transparent",this.Na.style.border="solid "+this.ea(b.$b,b.Zb)+" "+b.Fh+"px",this.Na.style.borderRadius=b.cj+"px",this.Na.style.textAlign="center",0<b.width?(this.Na.style.left=a-b.width/2+this.margin.left+"px",this.Na.style.width=b.width+"px"):(this.Na.style.width="auto",this.Na.style.left=a-this.Na.offsetWidth/2+this.margin.left+"px"),this.Na.style.height=0<b.height?b.height+"px":"auto",this.Na.style.top=c+25+ +this.margin.top+"px",this.Na.style.visibility="inherit",
this.Na.style.overflow="hidden"):(this.Na.style.visibility="hidden",this.Na.innerHTML=""))};b.prototype.wn=function(a){var c=this.Ae();this.ai()?(this.pa.x=a.pageX-this.margin.left,this.pa.y=a.pageY-this.margin.top):(this.pa.x=a.pageX-c.x,this.pa.y=a.pageY-c.y);return c};b.prototype.Kf=function(a){this.Da=a&&null!==a&&"object"==typeof a?a:this.mb;this.Da==this.mb&&(a=this.Gh(this.pa.x,this.pa.y))&&(a.kb=0);this.Da.jf&&this.Da.jf();this.hotspot=this.Da};b.prototype.Yp=function(a){a=a?a:window.event;
var c=this.wn(a);if(!this.M.gc&&!this.lc&&!this.de){this.C.active&&(this.C.gi=(new Date).getTime());0==a.buttons&&(this.Z.Jc=!1);this.Z.Jc&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.En(a.pageX,a.pageY),this.Ea());var b=!1;if(this.Da==this.mb||"poly"==this.Da.type){var d=this.mb;0<this.X.length&&this.Gc(a.target)&&(d=this.Gh(this.pa.x,this.pa.y));this.yi(d);this.Vf(a.pageX-c.x,a.pageY-c.y);0!=d&&d!=this.mb&&(b=!0)}c=null;!b&&this.Gc(a.target)&&(c=this.jj(this.pa.x,this.pa.y));this.C.Jh&&
(this.C.Jh=!1);this.Qa.style.cursor=this.Da!=this.mb&&this.Da.pf&&b||c&&c.Cg?"pointer":"default"}};b.prototype.yi=function(a){!1===a&&(a=this.mb);this.Da!=a&&(this.Da!=this.mb&&(0<this.I.mode&&(this.Da.kb=0),this.la&&this.la.hotspotProxyOut&&this.la.hotspotProxyOut(this.Da.id,this.Da.url)),a!=this.mb?(this.Kf(a),this.la&&this.la.hotspotProxyOver&&this.la.hotspotProxyOver(this.Da.id,this.Da.url),0<this.I.mode&&(this.I.kb=1,this.Da.kb=1)):(this.Kf(this.mb),0<this.I.mode&&(this.I.kb=0)),this.ra&&this.ra.changeCurrentHotspot(this.Da.id))};
b.prototype.Xp=function(a){a=a?a:window.event;this.fi=-1;this.kf&&this.Ph();if(!this.M.gc&&!this.lc&&(this.Lb&&(this.Lb.Be(),this.de=this.Lb.nb?this.Lb:null),this.Z.Jc)){this.Ea();a.preventDefault();this.Z.Jc=!1;a=(new Date).getTime();var c=Math.abs(this.ga.start.x-this.ga.oa.x)+Math.abs(this.ga.start.y-this.ga.oa.y);if(400>a-this.Z.startTime&&0<=c&&20>c){var b=this.Gh(this.pa.x,this.pa.y);b&&this.sn(b);c=Math.abs(this.ga.Hd.x-this.ga.oa.x)+Math.abs(this.ga.Hd.y-this.ga.oa.y);700>a-this.Ig&&0<=c&&
20>c?(b?this.tn(b):this.M.uj&&this.Pi(),this.Ig=0):this.Ig=a;this.ga.Hd.x=this.ga.oa.x;this.ga.Hd.y=this.ga.oa.y}}};b.prototype.vm=function(a){if(!this.M.Zd&&!this.lc&&(a=a?a:window.event,this.Gc(a.target))){var c=a.detail?-1*a.detail:a.wheelDelta/40;this.M.em&&(c=-c);a.axis&&(-1==this.fi?this.fi=a.axis:this.fi!=a.axis&&(c=0));var b=0<c?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(c=0);0!=c&&(this.hj(b*this.M.fn,!0),this.update());a.preventDefault();this.Ea()}};
b.prototype.Dr=function(a){a||(a=window.event);var c=a.touches,b=this.Ae();this.pa.x=c[0].pageX-b.x;this.pa.y=c[0].pageY-b.y;this.je=this.Lb=null;this.kf&&this.Ph();if(!this.M.gc&&!this.lc){var d=(new Date).getTime();if(this.de)this.Lb=this.de,this.Z.Sc=!0,this.Z.startTime=d,a.preventDefault();else{if(!this.Z.Sc&&c[0]){this.Z.startTime=d;this.Z.start.x=c[0].pageX;this.Z.start.y=c[0].pageY;this.Z.oa.x=c[0].pageX;this.Z.oa.y=c[0].pageY;this.ub=c[0].target;if(this.Gc(this.ub)){(d=this.jj(this.pa.x,this.pa.y))&&
d.Be&&(this.Lb=d);if(d=this.Gh(this.pa.x,this.pa.y))this.O(d),this.je=d,this.yi(d),d=this.wg(a),this.Vf(d.x-b.x,d.y-b.y);this.Fn(c[0].pageX,c[0].pageY);this.Z.wl=c[0].identifier;this.Z.Sc=!0;a.preventDefault();this.Ea()}if(this.ub){b=this.ub;for(d=!1;b&&b!=this.control;){if(b.onmouseover)b.onmouseover();b.onmousedown&&!d&&(b.onmousedown(),d=!0);b=b.parentNode}d&&a.preventDefault()}}1<c.length&&(this.Z.Sc=!1);!this.Lj&&2==c.length&&c[0]&&c[1]&&this.Gc(this.ub)&&(a=c[0].pageX-c[1].pageX,c=c[0].pageY-
c[1].pageY,this.fov.gn=Math.sqrt(a*a+c*c),this.fov.prev=this.fov.m);this.ga.na.x=0;this.ga.na.y=0}}};b.prototype.Ph=function(){try{this.sh&&this.F.j&&(!this.F.rd&&this.F.xk&&this.F.j.play(),this.F.j.muted=!1);if(this.za&&(this.za.resume(),"suspended"==this.za.state))return;if(this.Yd&&this.za&&this.za.createOscillator){var a=this.za.createOscillator(),c=this.za.createGain();a.frequency.value=30;a.type="sine";a.connect(c);c.connect(this.za.destination);c.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},
1E4)}for(c=0;c<this.Y.length;c++){var b=this.Y[c];(!this.isPlaying(b.id)||b.va)&&0<=b.loop&&b.autoplay&&(b.va&&b.bf(),this.Ke(b.id,b.loop))}for(c=0;c<this.S.length;c++){var d=this.S[c];!this.isPlaying(d.id)&&d.autoplay&&this.sh&&this.Ke(d.id,d.loop);this.isPlaying(d.id)&&d.autoplay&&this.sh&&(d.j.muted=!1)}this.kf=!1}catch(e){this.O(e)}};b.prototype.Cr=function(a){a||(a=window.event);var c=a.touches,b=this.Ae();this.pa.x=c[0].pageX-b.x;this.pa.y=c[0].pageY-b.y;if(this.M.gc||this.lc)(this.K.xd||this.K.le)&&
a.preventDefault();else{c[0]&&(this.Z.oa.x=c[0].pageX,this.Z.oa.y=c[0].pageY);if(this.ub){for(var d=this.ub,e=!1;d&&d!=this.control&&!e;)"scrollarea"==d.ggType&&(e=!0),"map"==d.ggType&&(e=!0),"text"==d.ggType&&(e=!0),d=d.parentNode;e||a.preventDefault()}if(this.Z.Sc){a.preventDefault();for(d=0;d<c.length;d++)if(c[d].identifier==this.Z.wl){this.En(c[d].pageX,c[d].pageY);break}this.je&&(d=this.wg(a),this.Vf(d.x-b.x,d.y-b.y));this.Ea()}2==c.length&&c[0]&&c[1]&&(this.Z.Sc=!1,!this.Lj&&this.Gc(this.ub)&&
(this.M.Zd||(b=c[0].pageX-c[1].pageX,c=c[0].pageY-c[1].pageY,this.fov.kl=Math.sqrt(b*b+c*c),this.Ja.fov.active=!0,this.Ja.fov.tc=this.fov.prev*Math.sqrt(this.fov.gn/this.fov.kl),4==this.Ra()&&this.Ja.fov.tc>this.fov.max&&(this.Ja.fov.tc=this.fov.max),this.Ja.fov.tc<this.fov.min&&(this.Ja.fov.tc=this.fov.min)),this.Ea(),a.preventDefault()))}};b.prototype.Br=function(a){var c=this.Ae(),b=!1;this.kf&&this.Ph();if(!this.M.gc&&!this.lc){this.Z.Sc&&(a.preventDefault(),this.Ea());var d=(new Date).getTime();
var e=void 0;var h=!1;e=Math.abs(this.Z.start.x-this.Z.oa.x)+Math.abs(this.Z.start.y-this.Z.oa.y);if(0<=e&&20>e){b=!0;this.Gc(this.ub)&&(a.preventDefault(),this.Lb&&(this.Lb.Be(),this.de=this.Lb.nb?this.Lb:null));if(this.ub){for(e=this.ub;e&&e!=this.control;)e.onclick&&(e.onclick(),h=!0,b=!1),e=e.parentNode;h&&a.preventDefault()}e=Math.abs(this.Z.Hd.x-this.Z.oa.x)+Math.abs(this.Z.Hd.y-this.Z.oa.y);if(700>d-this.Ig&&0<=e&&20>e){if(this.Gc(this.ub))if(a.preventDefault(),this.je)this.tn(this.je);else if(this.M.uj){var g=
this;setTimeout(function(){g.Pi()},1)}if(this.ub){for(e=this.ub;e&&e!=this.control;)e.ondblclick&&(e.ondblclick(),h=!0,b=!1),e=e.parentNode;h&&a.preventDefault()}this.Ig=0}else this.Ig=d;this.Z.Hd.x=this.Z.oa.x;this.Z.Hd.y=this.Z.oa.y}if(this.ub)for(e=this.ub;e&&e!=this.control;){if(e.onmouseout)e.onmouseout();if(e.onmouseup)e.onmouseup();e=e.parentNode}a=this.wg(a);this.Vf(a.x-c.x,a.y-c.y);this.je&&b&&this.sn(this.je);this.ub=null;this.Z.Sc=!1;this.yi(this.mb);this.je=null}};b.prototype.Ar=function(a){var c=
this.Ae();this.M.gc||this.lc||(this.Z.Sc=!1);this.je=null;this.yi(this.mb);a=this.wg(a);this.Vf(a.x-c.x,a.y-c.y)};b.prototype.km=function(){return null!=this.ub||this.Z.Sc||this.Z.Jc};b.prototype.wm=function(a){!this.He&&window.MSGesture&&(this.O("setup gesture"),this.He=new MSGesture,this.He.target=this.control);this.He&&this.He.addPointer(a.pointerId)};b.prototype.Fl=function(a){this.Lj=!0;this.mi=1;this.M.gc||this.M.Zd||this.lc||(a.touches?(this.ub=a.touches.target,this.Gc(a.target)&&(a.preventDefault(),
this.fov.prev=this.fov.m,this.Ea())):(a.preventDefault(),this.fov.prev=this.fov.m,this.Ea()))};b.prototype.Lo=function(a){this.M.gc||this.M.Zd||this.lc||!this.Gc(a.target)||(a.preventDefault(),this.Ja.fov.active=!0,this.Ja.fov.tc=this.fov.prev/Math.sqrt(a.scale),4==this.Ra()&&this.Ja.fov.tc>this.fov.max&&(this.Ja.fov.tc=this.fov.max),this.update(),this.Ea())};b.prototype.bq=function(a){this.M.gc||this.M.Zd||this.lc||(a.preventDefault(),1!=a.scale&&(this.Ja.fov.active=!0,this.mi*=a.scale,this.Ja.fov.tc=
this.fov.prev/Math.sqrt(this.mi),4==this.Ra()&&this.Ja.fov.tc>this.fov.max&&(this.Ja.fov.tc=this.fov.max),this.update(),this.Ea()))};b.prototype.El=function(a){this.M.gc||this.M.Zd||this.lc||(this.Ja.fov.active=!1,a.preventDefault(),this.Ea(),this.He&&this.He.reset&&this.He.reset())};b.prototype.Pp=function(a){this.M.Qg||this.lc||(this.isFullscreen&&a.preventDefault(),this.di=a.keyCode,this.Ea())};b.prototype.Qp=function(a){this.di&&(this.di=0,a.preventDefault())};b.prototype.iq=function(){this.di=
0};b.prototype.ri=function(){this.isFullscreen&&(this.ai()||this.exitFullscreen(),this.ai()&&(this.aa.style.left="0px",this.aa.style.top="0px"))};b.prototype.mq=function(a,c,b,d){d?(this.Bg.alpha=a,this.Bg.beta=c,this.Bg.gamma=b,this.Bg.gamma+=90):(this.qb.alpha=a,this.qb.beta=c,this.qb.gamma=b,this.qb.gamma+=90);this.qb.orientation=window.orientation?1*parseInt(""+window.orientation,10):0;b=new p.Nk;a=this.qb;b.Me(-a.alpha);b.Ne(-a.beta);b.Ld(-a.gamma);b.Ne(90-a.orientation);1>b.Hb?-1<b.Hb?(c=180/
Math.PI*Math.asin(-b.Hb),a=180/Math.PI*Math.atan2(b.kc,b.jc),b=180/Math.PI*Math.atan2(b.ic,b.hc)):(c=0,a=90,b=-180/Math.PI*Math.atan2(-b.Pb,b.Qb)):(c=0,a=-90,b=180/Math.PI*Math.atan2(-b.Pb,b.Qb));if(this.rh)if(this.km()||this.G.Xh||this.qb.xi)this.qb.Ie=this.xg()+b,this.qb.fadeIn=0,this.qb.xi=!1;else{d=this.G.active;var e=1;10>this.qb.fadeIn&&(this.qb.fadeIn+=1,e=.1*this.qb.fadeIn);b=-b+this.qb.Ie;this.Nf(e*b+(1-e)*this.xg());this.Of(e*a+(1-e)*this.Th());this.Cn?this.Ci(e*c+(1-e)*this.Rl()):this.Ci(0);
this.hg();this.G.active=d}};b.prototype.sn=function(a){this.la&&this.la.hotspotProxyClick&&this.la.hotspotProxyClick(a.id,a.url);""!=a.url&&(this.dk(a.url,a.target),this.Vf(-1,-1))};b.prototype.tn=function(a){this.la&&this.la.hotspotProxyDoubleClick&&this.la.hotspotProxyDoubleClick(a.id,a.url)};b.prototype.Qh=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.fov.m,90)/360))};b.prototype.Fm=function(){var a=this;setTimeout(function(){a.Fm()},100);9!=a.ui||a.Zh||window.requestAnimationFrame(function(){a.Zg();
a.Hc("restart recover timer")});10<a.ui&&1<a.jk&&(a.Hc("recover timer - disabling requestAnimationFrame"),a.Zh=!0,a.Zg());a.ui++};b.prototype.Fi=function(a){var c={Xr:{value:0,name:"pan"},Zr:{value:1,name:"tilt"},Wr:{value:2,name:"fov"}},b=0,d=0,e=0,h;for(h in c){for(var g=c[h],m,f=Math.floor(a);!this.mf(f,g.value)&&0<f;)f--;f=this.mf(f,g.value);var r=this.gp(f);if(r){m=new p.Bc(f.time,f.value);var w=new p.Bc(r.time,r.value),q=(a-f.time)/(r.time-f.time);if(0!=f.type||0!=r.type&&3!=r.type)if(3==f.type)m=
f.value;else{q=new p.Bc;var y=new p.Bc,x=r.time-f.time;0==f.type?y.init(f.time+.3*x,f.value):y.init(f.re,f.se);0==r.type||3==r.type?q.init(r.time-.3*x,r.value):q.init(r.pe,r.qe);r=new p.Bc;r.bj(m,w,y,q,a);m=r.y}else r=new p.Bc,r.Ed(m,w,q),m=r.y}else m=f.value;switch(g.value){case 0:g=this.pan.m;if(this.Pd&&3!=f.type){if(2!=this.rb){for(;360<m;)m-=360;for(;-360>m;)m+=360}b=m-g;2!=this.rb&&(180<b&&(b-=360),-180>b&&(b+=360));this.pan.m+=b*this.zd}else this.pan.m=m;this.C.Ng=this.pan.m;break;case 1:g=
this.A.m;this.Pd&&3!=f.type?(d=m-g,this.A.m+=d*this.zd):this.A.m=m;this.C.Og=this.A.m;break;case 2:g=this.fov.m,this.Pd&&3!=f.type?(e=m-g,this.fov.m+=e*this.zd):this.fov.m=m,this.C.Mg=this.fov.m}}c=this.Ra();for(h=Math.floor(a);!this.mf(h,3)&&0<h;)h--;h=this.mf(h,3);f=a-h.time;this.Pd&&-1!=this.cg&&this.Ch+this.Zi>a?(c=this.vg(this.cg),this.fov.m>c?this.Ch=a:(f=(a-this.Ch)/this.Zi,f=Math.min(1,f),this.Zc(this.Ua,this.cg,1-f))):(0==h.Cb||f>h.Cb-.3?this.Zc(h.value):(f/=h.Cb,this.Zc(c,h.value,1-f)),
this.C.rm=h.value);this.Pd&&(b=Math.sqrt(b*b+d*d+e*e),.3>b&&(this.Pd=!1,this.zd=.02,this.bg=0),0<this.bg&&b>this.bg&&(this.zd+=.01,this.zd=Math.min(this.zd,1)),this.bg=b);h=Math.floor(a);if(h!=this.Uk)for(this.Uk=h,a=this.Mo(h),b=0;b<a.length;b++)d=a[b],e=d.Bh,this.vd.hasOwnProperty(e)&&(c=this.vd[e].type,0==c?this.ge(e,d.Ik):1==c?this.ge(e,d.value):2==c&&this.ge(e,"true"==d.Ik));this.update()};b.prototype.tq=function(a){var c=this.G.speed;this.G.Tj&&(c=c*(a.getTime()-this.G.Tj)/60,5<c&&(c=5),.2>
c&&(c=.2));this.G.Tj=a.getTime();this.C.rg&&(this.xa.ready()||4==this.Ua)&&this.Sh()&&(this.C.rg=!1,this.C.active=!0,this.vb.running=!0,this.vb.Bj=!1);if(this.G.active||0!=this.G.Ib&&this.xa.ready()){if(this.G.Gk&&"__AutoMove"==this.J.lb){var b=a.getTime()-this.G.Tk;c=b/100;if(c>=this.J.length){if(this.Fi(this.J.length),this.Ia.splice(this.Ia.indexOf(this.J),1),this.G.active=!1,this.J=this.G.Sk,this.G.Ib=0,this.Bi(this.G.pan,this.G.A,this.G.fov),this.pan.Qc=this.G.pan,this.A.Qc=this.G.A,this.G.Wg&&
(this.G.Wg=!1,this.C.ki=!0,this.C.active=!0,this.V("autorotatechanged",{})),this.onMoveComplete)this.onMoveComplete()}else this.Fi(c)}else{this.pan.d=this.G.pan-this.pan.m;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.A.d=this.G.A-this.A.m;this.U.d=this.G.U-this.U.m;this.fov.d=this.G.fov-this.fov.m;b=c*this.Qh();var d=Math.sqrt(this.pan.d*this.pan.d+this.A.d*this.A.d+this.U.d*this.U.d+this.fov.d*this.fov.d),e=this.pan.m-this.G.Ng,
h=this.A.m-this.G.Og,g=this.U.m-this.G.sm,f=this.fov.m-this.G.Mg;100*Math.sqrt(e*e+h*h+g*g+f*f)<b&&0==this.G.Ib&&(this.G.aborted=!0);this.G.Ng=this.pan.m;this.G.Og=this.A.m;this.G.sm=this.U.m;this.G.Mg=this.fov.m;if(100*d<b||this.G.aborted){if(this.pan.d=0,this.A.d=0,this.U.d=0,this.fov.d=0,this.G.active&&(this.G.active=!1,this.pan.m=this.G.pan,this.A.m=this.G.A,this.U.m=this.G.U,this.fov.m=this.G.fov,this.onMoveComplete))this.onMoveComplete()}else d=d>5*b?b/d:.2,this.pan.d*=d,this.A.d*=d,this.fov.d*=
d;this.pan.m+=this.pan.d;this.A.m+=this.A.d;this.U.m+=this.U.d;this.fov.m+=this.fov.d;0!=this.G.Ib&&(this.G.Ib!=this.Ua?(c=this.vg(this.G.Ib),this.Fj()>c?(this.fov.m+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.A.d*this.A.d+this.U.d*this.U.d)/b,1))*b,this.fov.d)-this.fov.d,this.G.fov=this.fov.m):(this.yc=this.Ua,this.Ua=this.G.Ib,this.O("New projection from Target:"+this.Ua),this.Yg=this.G.bh=0,this.xa.Yh())):1>this.G.bh?(this.G.bh=Math.min(1,this.G.bh+.05*c),this.Yg=this.G.bh):
(this.yc=0,this.G.Ib=0,this.xa.Yh()))}this.wf=a.getTime();this.update()}else if(this.C.active){b=a.getTime()-this.C.startTime;this.C.gi<this.C.startTime&&(this.C.gi=this.C.startTime);if((this.C.Wf||this.vb.running)&&0<this.Ia.length){c=b/100;d=!1;if(this.Rb!=this.J.lb||""!=this.J.Ye&&this.C.Qd!=this.J.Ye){for(b=0;b<this.Ia.length;b++)if(""==this.Rb&&this.Ia[b].Ye==this.C.Qd||""!=this.Rb&&this.Ia[b].lb==this.Rb&&this.Ia[b].Ye==this.C.Qd){d=!0;this.J=this.Ia[b];this.Rb=this.J.lb;break}!d&&0<this.Ia.length&&
this.Ia[0].Ye==this.C.Qd&&(d=!0,this.J=this.Ia[0],this.Rb=this.J.lb)}else d=!0;if(d)if(b=(e=this.F.j&&this.F.rd)&&this.C.Ak&&!this.vb.running,this.Xe){d=c;if(b)for(this.F.j.currentTime<this.Vk&&this.aj&&(this.$i++,this.aj=!1),d=10*(this.$i*this.F.j.duration+this.F.j.currentTime),this.Vk=this.F.j.currentTime,.05>this.F.j.duration-this.F.j.currentTime&&(this.aj=!0);d>=10*this.We;)d-=10*this.We;if(!e&&c>=this.J.length||e&&!b&&c>=this.J.length||e&&b&&(this.J.lb!=this.J.xm||this.J.ni!=this.Za)&&c>=this.J.length){this.Fi(this.J.length);
this.C.Gd=0;this.Xe=!1;if(this.vb.running){this.Vm();return}this.Rb=this.J.xm;if(this.Rb==this.J.lb&&this.Za==this.J.ni){if(1<this.Wa.length&&0<this.C.oi){if(this.C.bk){b=1E3;do c=this.Wa[Math.floor(Math.random()*this.Wa.length)];while(b--&&c==this.Za)}else c=this.Ml();this.Yc("{"+c+"}");this.C.startTime=a.getTime();this.Xe=!1;this.C.active=!0;this.K.oe=!0}}else this.vf&&this.J.ni!=this.Za&&(this.Yc("{"+this.J.ni+"}",this.J.fq),this.K.enabled?(this.C.active=!1,this.K.oe=!0):this.C.active=!0),this.C.startTime=
a.getTime()}else this.Fi(d),this.C.Gd=d}else if(c=this.J.fa[0],d=this.J.fa[1],e=this.J.fa[2],h=this.J.fa[3],3!=h.zb&&(h=0),this.C.ki||this.G.aborted||this.vb.running||b){if(this.Xe=!0,this.C.startTime=0<this.C.Gd?a.getTime()-100*this.C.Gd:a.getTime(),this.Pd=b){for(this.We=this.$i=0;this.We<this.J.length/10;)this.We+=this.F.j.duration;d=10*this.F.j.currentTime;for(b=Math.floor(d);!this.mf(b,3)&&0<b;)b--;b=this.mf(b,3);b.value==this.Ua?this.cg=-1:(this.cg=b.value,this.Ch=d,this.Zi=Math.max(5,b.time+
b.Cb-d))}}else{b={};if(0<this.C.Gd)b.pan=this.C.Ng,b.tilt=this.C.Og,b.fov=this.C.Mg,b.projection=this.C.rm;else{for(b.pan=c.value;360<b.pan;)b.pan-=360;for(;-360>b.pan;)b.pan+=360;b.tilt=d.value;b.fov=e.value;b.projection=h?h.value:4}b.timingFunction=3;b.speed=1;this.G.Wg=!0;this.li(b);this.C.active=!0}}else if(0<this.C.oi&&this.vf&&b>=1E3*this.C.oi){if(1<this.Wa.length){if(this.C.bk){b=1E3;do c=this.Wa[Math.floor(Math.random()*this.Wa.length)];while(b--&&c==this.Za)}else b=this.Wa.indexOf(this.Za),
b++,b>=this.Wa.length&&(b=0),c=this.Wa[b];this.C.startTime=a.getTime();this.C.sd=a.getTime();this.C.timeout=0;this.Yc("{"+c+"}");this.C.active=!0;this.K.oe=!0}}else b=a.getTime(),d=c=1E3/60,0!=this.C.sd&&(d=b-this.C.sd),this.A.d=this.C.Oi*(0-this.A.m)/100,this.fov.d=this.C.Oi*(this.fov.$a-this.fov.m)/100,this.pan.d=.95*this.pan.d+-this.C.speed*this.Qh()*.05,c=d/c,this.pan.m+=this.pan.d*c,this.A.m+=this.A.d*c,this.fov.m+=this.fov.d*c,this.C.sd=b,this.update();3E3<a.getTime()-this.C.gi&&!this.C.Jh&&
(this.Qa.style.cursor="none",this.C.Jh=!0)}else!this.vb.Bj&&1E3<a.getTime()-this.wf&&(this.Ia.splice(this.Ia.indexOf(this.J),1),this.J=this.ug(!1),this.Rb=this.J.lb,this.C.active=!1,this.C.rg=!0),this.C.enabled&&!this.Z.$h()&&a.getTime()-this.wf>1E3*this.C.timeout&&!this.C.rg&&(this.C.jh&&this.Sh()||!this.C.jh)&&(this.C.active=!0,this.C.startTime=a.getTime(),this.C.sd=0,this.V("autorotatechanged",{}),this.pan.d=0,this.A.d=0,this.fov.d=0),!this.Ja.enabled||this.Z.$h()||0==this.pan.d&&0==this.A.d&&
0==this.fov.d||(this.G.Xh=!0,this.pan.d*=.9,this.A.d*=.9,this.fov.d*=.9,this.pan.m+=this.pan.d,this.A.m+=this.A.d,this.hj(this.fov.d),1E-4>this.pan.d*this.pan.d+this.A.d*this.A.d+this.fov.d*this.fov.d&&(this.pan.d=0,this.A.d=0,this.fov.d=0),this.update())};b.prototype.vq=function(a){var c=this.K;if(c.xd){var b=a.getTime()-c.Ln;b/=1E3*c.Kn;1<=b?(c.xd=!1,this.tl(),c.yk=a.getTime(),this.kn(),c.le=!0,0==c.pc||c.$f||(4==c.pc?(this.J=this.ug(!0,c.Pe,c.Qe,c.Nd),this.Rb=this.J.lb,this.C.active=!0,this.vb.running=
!0):this.moveTo(c.Pe,c.Qe,c.Nd,c.ne,0,c.wd))):c.Em(b)}else c.le&&(b=a.getTime()-c.yk,b/=1E3*c.dg,1<=b?(c.le=!1,this.wf=a.getTime(),this.update(),0!=c.pc&&c.$f&&(4==c.pc?(this.J=this.ug(!0,c.Pe,c.Qe,c.Nd),this.Rb=this.J.lb,this.C.active=!0,this.vb.running=!0):this.moveTo(c.Pe,c.Qe,c.Nd,c.ne,0,c.wd)),4!=c.pc&&(this.zi(!1),this.C.active=c.oe,this.V("autorotatechanged",{}),c.oe=!1),this.C.sd=0,this.qa&&this.oj(),this.fg=!1):c.Em(b));c=this.oq;c.jo&&(c.Lh?a.getTime()-c.wj>=1E3*c.Fo&&(c.Lh=!1):(c.current+=
c.fd,0>c.current&&(c.current=0,c.fd=-c.fd,c.Lh=!0,c.wj=a.getTime()),1<c.current&&(c.current=1,c.fd=-c.fd,c.Lh=!0,c.wj=a.getTime())))};b.prototype.yq=function(){var a,c=this.I;if(0<c.tb.length){for(a=0;a<c.tb.length;a++)c.$c[a]!=c.Ub[a]&&(c.$c[a]>c.Ub[a]?(c.Ub[a]+=.05,c.$c[a]<c.Ub[a]&&(c.Ub[a]=c.$c[a])):(c.Ub[a]-=.05,c.$c[a]>c.Ub[a]&&(c.Ub[a]=c.$c[a],-1!=c.Gi.indexOf(c.tb[a])&&(c.Gi.splice(c.Gi.indexOf(c.tb[a]),1),c.tb.splice(a,1),c.$c.splice(a,1),c.Ub.splice(a,1)))));this.update()}if(2==c.mode)for(a=
0;a<this.X.length;a++){var b=this.X[a];"poly"==b.type&&b.kb!=b.Aa&&(b.kb>b.Aa?(b.Aa+=c.fd,b.kb<b.Aa&&(b.Aa=b.kb)):(b.Aa-=c.fd,b.kb>b.Aa&&(b.Aa=b.kb)),this.update())}3==c.mode&&c.kb!=c.Aa&&(c.kb>c.Aa?(c.Aa+=c.fd,c.kb<c.Aa&&(c.Aa=c.kb)):(c.Aa-=c.fd,c.kb>c.Aa&&(c.Aa=c.kb)),this.update())};b.prototype.xq=function(){var a=this.Ja;this.Z.$h()&&(this.M.Fd?(a.na.x=.4*(this.ga.oa.x-a.oa.x),a.na.y=.4*(this.ga.oa.y-a.oa.y),a.oa.x+=a.na.x,a.oa.y+=a.na.y):(a.na.x=.1*-this.ga.na.x*this.M.sensitivity/8,a.na.y=.1*
-this.ga.na.y*this.M.sensitivity/8),this.Dn(a.na.x,a.na.y),this.update());a.fov.active&&(this.Zk(.4*(a.fov.tc-this.fov.m)),.001>Math.abs(a.fov.tc-this.fov.m)/this.fov.m&&(a.fov.active=!1),this.update());if(a.enabled&&(0!=a.na.x||0!=a.na.y)&&!this.Z.$h()){var c=.9*(1-a.pk);a.na.x*=c;a.na.y*=c;this.G.Xh=!0;.01>a.na.x*a.na.x+a.na.y*a.na.y?(a.na.x=0,a.na.y=0):(this.Dn(a.na.x,a.na.y),this.update())}};b.prototype.uq=function(){if(this.M.Tm&&this.M.Fd){var a=this.Im;a.pan=this.pan.m;a.A=this.A.m;a.fov=this.fov.m;
this.cf(a);this.cf(a);this.cf(a);var c=a.pan-this.pan.m,b=a.A-this.A.m;a=a.fov-this.fov.m;if(0!=c||0!=b||0!=a){var d=.2+.9*Math.min((Math.abs(c)+Math.abs(b)+Math.abs(a))/Math.abs(Math.min(this.fov.m,90))*.3,1);this.pan.m+=c*d;this.A.m+=b*d;this.fov.m+=a*d;this.Ja.pk=.3;this.update()}else this.Ja.pk=0}else this.hg();if(isNaN(this.pan.m)||1E7<this.pan.m||-1E7>this.pan.m)this.pan.m=0;if(isNaN(this.A.m)||1E7<this.A.m||-1E7>this.A.m)this.A.m=0;if(isNaN(this.U.m)||1E7<this.U.m||-1E7>this.U.m)this.U.m=0;
if(2!=this.rb){for(;360<this.pan.m;)this.pan.m-=360;for(;-360>this.pan.m;)this.pan.m+=360}};b.prototype.wq=function(){if(!this.Sh()&&this.qf&&5<this.v.Qm){var a,c=0,b=this.bc.length;if(this.qh)b=50,this.xj<b&&this.xj++,c=this.xj;else for(a=0;a<b;a++)(this.bc[a].complete&&this.bc[a].src!=this.pl||""==this.bc[a].src)&&c++;c==b?(this.$g=1,this.isLoaded=!0,this.ta&&this.ta.ggLoaded&&this.ta.ggLoaded(),this.V("imagesready",{}),this.C.jh&&this.C.enabled&&!this.G.active&&!this.K.xd&&(this.C.active=!0,this.C.startTime=
(new Date).getTime(),this.C.sd=0)):this.$g=c/(1*b);this.V("downloadprogress",{percentLoaded:this.$g})}};b.prototype.Zg=function(){var a=this;a.wi||(a.Zh?setTimeout(function(){a.wi=!1;a.Zg()},1E3/60):window.requestAnimationFrame(function(){a.wi=!1;a.Zg()}));a.wi=!0;this.jk=this.ui=0;a.G.Xh=!1;var c=new Date;this.Rh++;120<=this.Rh&&(this.O("F/s: "+Math.round(1E3*this.Rh/(c.getTime()-this.nm))),this.nm=c.getTime(),this.Rh=0);this.V("timer",{});this.ia&&this.xa.Eo();this.Kb&&""!==this.ye&&!this.ra&&document.hasOwnProperty(this.ye)&&
document[this.ye].setPan&&0==this.Jo--&&(this.ra=document[this.ye],this.cd=this.ia=!1,this.Ha&&(this.Ha.style.visibility="hidden"),this.ra.setLocked(!0),this.ra.setSlaveMode(!0),this.ra.readConfigString(this.rj),this.Hc("Flash player '"+this.ye+"' connected."));this.Fk&&(this.Mc(),this.Fk=!1);this.xq();this.wq();this.tq(c);this.uq();this.vq(c);this.xa.Lr();(0<=this.I.mode||0<this.I.tb.length)&&this.yq();this.Ti();if(this.xf.pan!=this.pan.m||this.xf.A!=this.A.m||this.xf.fov!=this.fov.m)this.xf.pan=
this.pan.m,this.xf.A=this.A.m,this.xf.fov=this.fov.m,this.V("positionchanged",{});this.pm!=this.Ua&&(this.pm=this.Ua,this.V("projectionchanged",{}));this.Ma&&(0<this.mg?this.mg--:(this.Ma=!1,this.mg=0),this.K.le||this.K.xd||this.Ue||(this.ph(),this.V("renderframe",{})),this.V("repaint",{}));c=this.Il();c!=this.om&&(c?(this.ta&&this.ta.ggReLoadedLevels&&this.ta.ggReLoadedLevels(),this.V("tilesrequested",{})):(a.ta&&a.ta.ggLoadedLevels&&a.ta.ggLoadedLevels(),this.V("tilesready",{})),this.om=c)};b.prototype.vg=
function(a){switch(a){case 4:a=Math.min(110,this.fov.max);break;case 12:a=Math.min(270,this.fov.Zj);a=Math.min(360*this.aspect(),a);a=Math.min(360/this.aspect(),a);break;case 9:a=Math.min(270,this.fov.$j);break;default:a=90}return a};b.prototype.Ir=function(){var a=this;setTimeout(function(){a.Mf(!1)},10);setTimeout(function(){a.Mf(!1)},100)};b.prototype.Ti=function(){this.qj.xl(this.pan.m,this.A.m);for(var a=0;a<this.Y.length+this.S.length;a++){if(a<this.Y.length)var c=this.Y[a];else if(c=this.S[a-
this.Y.length],c.td)continue;c.Ti()}};b.prototype.hr=function(a,c){var d=this;var l="<<U>>"+String(d.Pa);l=l.toUpperCase();"U"!=l.charAt(2)&&(d.M.rf=!1);if(0!=d.Tg.length||!d.M.rf||d.M.jg||d.M.Hh)if(d.ld)d.aa.removeChild(d.ld),d.ld=null;else{d.ld=document.createElement("div");var e=d.ld;l="left: "+a+"px;"+("top:\t "+c+"px;")+"z-index: 32000;";l+="position:relative;";l+="display: table;";l+="color: black;";l+="background-color: white;";l+="border: 1px solid lightgray;";l+="box-shadow: 1px 1px 3px #333;";
l+="font-family: Verdana, Arial, Helvetica, sans-serif;";l+="font-size: 9pt;";l+="opacity : 0.95;";e.setAttribute("style",l);e.setAttribute("class","gg_contextmenu");l=document.createElement("style");a=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");l.type="text/css";l.styleSheet?l.styleSheet.cssText=a.nodeValue:l.appendChild(a);e.appendChild(l);for(a=0;a<d.Tg.length;a++){c=d.Tg[a];var h=document.createElement("div");l="text-align: left;";l+="margin: 0;";l+="padding: 5px 20px;";
l+="vertical-align: left;";h.setAttribute("style",l);h.setAttribute("class","gg_context_row");l=document.createElement("a");l.href=c.url;l.target="_blank";l.innerHTML=c.text;l.setAttribute("style","color: black; text-decoration: none;");h.appendChild(l);e.appendChild(h)}0<d.Tg.length&&(!d.M.rf||d.M.jg||d.M.Hh)&&e.appendChild(document.createElement("hr"));if(d.M.Hh&&d.ia){c=[];c.push({text:"Rectilinear Projection",ah:4});c.push({text:"Stereographic Projection",ah:9});c.push({text:"Fisheye Projection",
ah:12});for(a=0;a<c.length;a++){h=c[a];var g=document.createElement("div");g.setAttribute("class","gg_context_row");l="text-align: left;";l+="margin: 0;";l=d.Ua==h.ah?l+"padding: 5px 20px 5px 7px;":l+"padding: 5px 20px;";l+="vertical-align: left;";l+="cursor: pointer;";g.setAttribute("style",l);g.onclick=function(a){return function(){d.ij(a,1);d.update()}}(h.ah);g.innerHTML=d.Ua==h.ah?"&#10687; "+h.text:h.text;e.appendChild(g)}d.M.rf&&!d.M.jg||e.appendChild(document.createElement("hr"))}d.M.jg&&(a=
document.createElement("div"),a.setAttribute("class","gg_context_row"),l="text-align: left;margin: 0;padding: 5px 20px;",l+="vertical-align: left;",l+="cursor: pointer;",a.setAttribute("style",l),a.onclick=function(){d.Pi()},a.innerHTML=d.ai()?"Exit Fullscreen":"Enter Fullscreen",e.appendChild(a));d.M.rf||(a=document.createElement("div"),l="text-align: left;margin: 0;padding: 5px 20px;",l+="vertical-align: left;",a.setAttribute("style",l),a.setAttribute("class","gg_context_row"),l=document.createElement("a"),
l.href=b.lg("aHR0cDovL3Bhbm8ydnIuY29tLw=="),l.target="_blank",l.innerHTML=b.lg("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),7<this.ii.length&&(l.innerHTML+="<br/>"+b.ll(this.ii).replace(/./gm,function(a){return"&#"+a.charCodeAt(0)+";"})),l.setAttribute("style","color: black; text-decoration: none;"),a.appendChild(l),e.appendChild(a));d.aa.insertBefore(d.ld,d.aa.firstChild);e.onclick=function(){d.ld&&(d.aa.removeChild(d.ld),d.ld=null)};e.oncontextmenu=e.onclick}};b.prototype.io=function(){var a=this;var c=a.Qa;
a.control=c;a.control=c;a.Ir();setTimeout(function(){a.Zg()},10);setTimeout(function(){a.Fm()},200);setTimeout(function(){a.Te();a.ph()},10);c.addEventListener&&(c.addEventListener("touchstart",function(c){a.Dr(c)},!1),c.addEventListener("touchmove",function(c){a.Cr(c)},!1),c.addEventListener("touchend",function(c){a.Br(c)},!1),c.addEventListener("touchcancel",function(c){a.Ar(c)},!1),c.addEventListener("pointerdown",function(c){a.wm(c)},!1),c.addEventListener("MSPointerDown",function(c){a.wm(c)},
!1),c.addEventListener("MSGestureStart",function(c){a.Fl(c)},!1),c.addEventListener("MSGestureEnd",function(c){a.El(c)},!1),c.addEventListener("MSGestureChange",function(c){a.bq(c)},!1),c.addEventListener("gesturestart",function(c){a.Fl(c)},!1),c.addEventListener("gesturechange",function(c){a.Lo(c)},!1),c.addEventListener("gestureend",function(c){a.El(c)},!1),c.addEventListener("mousedown",function(c){a.Zp(c)},!1),c.addEventListener("mousemove",function(c){a.Yp(c)},!1),document.addEventListener("mouseup",
function(c){a.Xp(c)},!1),c.addEventListener("mousewheel",function(c){a.vm(c)},!1),c.addEventListener("DOMMouseScroll",function(c){a.vm(c)},!1),document.addEventListener("keydown",function(c){a.Pp(c)},!1),document.addEventListener("keyup",function(c){a.Qp(c)},!1),window.addEventListener("resize",function(){a.Te()},!1),window.addEventListener("blur",function(){a.iq()},!1),a.aa.addEventListener("webkitfullscreenchange",function(){a.ri()},!1),document.addEventListener("mozfullscreenchange",function(){a.ri()},
!1),window.addEventListener("webkitfullscreenchange",function(){a.ri()},!1),document.addEventListener("MSFullscreenChange",function(){a.ri()},!1));c.oncontextmenu=function(c){void 0===c&&(c=window.event);if(c.target&&!a.Gc(c.target))return!0;if(!c.ctrlKey){c=a.wg(c);var b=a.Ae();a.hr(c.x-b.x,c.y-b.y);return!1}return!0};window.addEventListener("deviceorientation",function(c){a.mq(c.alpha,c.beta,c.gamma,c.absolute);null!=c.alpha&&null!=c.beta&&null!=c.gamma&&0==a.Jj&&(a.Jj=!0,a.V("gyroavailable",{available:!0}),
a.V("playerstatechanged",{}))})};b.prototype.Rk=function(){for(var a=0;a<this.X.length;a++)if("point"==this.X[a].type&&(this.la&&this.la.addSkinHotspot?(this.X[a].jf(),this.X[a].j=this.la.addSkinHotspot(this.X[a])):(this.X[a].j=new p.Mn(this,this.X[a]),this.X[a].ff&&this.X[a].An&&(this.X[a].j.ggUse3d=!0,this.X[a].j.gg3dDistance=this.X[a].ol)),this.X[a].j.__div.style.left="-1000px",this.X[a].j.__div.style.top="-1000px",this.X[a].j&&this.X[a].j.__div)){var c=this.Qa.firstChild;c?this.Qa.insertBefore(this.X[a].j.__div,
c):this.Qa.appendChild(this.X[a].j.__div)}};b.prototype.Jn=function(){var a,c=document.createElement("fakeelement"),b={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in b)if(void 0!==c.style[a])return b[a]};b.prototype.Nb=function(a){var c=[];a="#"==a.substr(0,1)?a.substr(1):"^"+a+"$";a=new RegExp(a,"");for(var b=0;b<this.Y.length;b++)a.test(this.Y[b].id)&&c.push(this.Y[b]);for(b=0;b<
this.S.length;b++)a.test(this.S[b].id)&&c.push(this.S[b]);for(b=0;b<this.bb.length;b++)a.test(this.bb[b].id)&&c.push(this.bb[b]);return c};b.prototype.fp=function(a){if("_videopanorama"==a)return this.F.j;a=this.Nb(a);return 0<a.length?a[0].j:null};b.prototype.Lm=function(a,c){var b=this;c.addEventListener("ended",function(a){b.V("videoended",{video:a.target})});c.addEventListener("pause",function(a){b.V("videopaused",{video:a.target})});c.addEventListener("play",function(a){b.V("videostarted",{video:a.target})});
for(var d=0;d<this.S.length;d++)if(this.S[d].id==a)return this.S[d].j=c,this.S[d];d=new p.Qk(this);d.registerElement(a,c);return d};b.prototype.isPlaying=function(a){if(this.Kb){var c=this.ra;if(c)return c.isPlaying(a)}else{if("_main"===a)return!0;a=this.Nb(a);if(0<a.length)return a[0].va?a[0].Df:!a[0].j.ended&&!a[0].j.paused}return!1};b.prototype.Ke=function(a,c){if(this.Kb){var b=this.ra;b&&b.playSound(a,c)}else try{b=this.Nb(a);for(var d=0;d<b.length;d++){var e=b[d];e.Cc=c&&!isNaN(Number(c))?Number(c)-
1:e.loop-1;-1==e.Cc&&(e.Cc=1E7);this.O(e.j);this.isPlaying(a)&&this.Ii(a);e.va?e.Sd():(e.j.play(),e.Ve&&e.Yi());this.$q(e.id)}}catch(h){this.O(h)}};b.prototype.Gm=function(a,c){a=this.Nb(a);for(var b=0;b<a.length;b++){var d=a[b];this.isPlaying(d.id)?this.ek(d.id):this.Ke(d.id,c)}};b.prototype.zq=function(a,c){a=this.Nb(a);for(var b=0;b<a.length;b++){var d=a[b];this.isPlaying(d.id)?this.Ii(d.id):this.Ke(d.id,c)}};b.prototype.ek=function(a){if(this.Kb){var c=this.ra;c&&c.pauseSound(a)}else try{if(c=
void 0,"_main"==a){this.Di(a);for(c=0;c<this.Y.length;c++)this.Y[c].va?this.Y[c].dj():this.Y[c].j.pause();for(c=0;c<this.S.length;c++)this.S[c].j.pause()}else{var b=this.Nb(a);for(c=0;c<b.length;c++){var d=b[c];this.Di(d.id);d.va?d.dj():d.j.pause()}}}catch(e){this.O(e)}};b.prototype.Xn=function(a,c){a=this.Nb(a);for(var b=0;b<a.length;b++){var d=a[b];0==c||1==c?d.zg&&d.zg(1==c):2==c&&d.Be&&d.Be();!d.nb||-1==this.bb.indexOf(d)&&-1==this.S.indexOf(d)||(this.Lb=this.de=d)}};b.prototype.Ii=function(a){var c;
if(this.Kb)(c=this.ra)&&c.stopSound(a);else try{if("_main"===a){this.Di(a);for(c=0;c<this.Y.length;c++)this.Y[c].va?this.Y[c].bf():(this.Y[c].j.pause(),this.Y[c].j.currentTime=0);for(c=0;c<this.S.length;c++)this.S[c].j.pause(),this.S[c].j.currentTime=0}else{var b=this.Nb(a);for(c=0;c<b.length;c++){var d=b[c];this.Di(d.id);d.va?d.bf():d.j&&d.j.pause&&(d.j.pause(),d.j.currentTime=0,this.uf&&-1==this.S.indexOf(d)&&(d.Kd(),d.addElement()))}}}catch(e){this.O(e)}};b.prototype.Di=function(a){-1==this.ad.indexOf(a)&&
this.ad.push(a);var c=this.me.indexOf(a);-1!=c&&this.me.splice(c,1);"_main"==a&&(this.me=[])};b.prototype.$q=function(a){-1!=this.ad.indexOf("_main")&&-1==this.me.indexOf(a)&&this.me.push(a);a=this.ad.indexOf(a);-1!=a&&this.ad.splice(a,1)};b.prototype.ir=function(a){a=this.Nb(a);return 0<a.length?(a=a[0],a.va?a.lo():a.j?a.j.currentTime:0):0};b.prototype.jr=function(a,c){a=this.Nb(a);0<a.length&&(a=a[0],a.va?(0>c&&(c=0),c>a.Eh.duration&&(c=a.Eh.duration-.1),a.mo(c)):a.j&&(0>c&&(c=0),c>a.j.duration&&
(c=a.j.duration-.1),a.j.currentTime=c))};b.prototype.setVolume=function(a,c){if(this.Kb){var b=this.ra;b&&b.setVolume(a,c)}else try{b=void 0;var d=Number(c);1<d&&(d=1);0>d&&(d=0);"_videopanorama"===a&&this.F.j&&(this.F.j.volume=d);if("_main"===a){this.ca=d;for(b=0;b<this.Y.length;b++)this.Y[b].j.volume=this.Y[b].level*this.ca;for(b=0;b<this.S.length;b++)this.S[b].j.volume=this.S[b].level*this.ca;this.F.j&&(this.F.j.volume=this.ca)}else{var e=this.Nb(a);this.O(e);for(b=0;b<e.length;b++){var h=e[b];
h.j&&null!=h.j.volume&&(h.j.volume=d*this.ca);h.level=d}}}catch(n){this.O(n)}};b.prototype.to=function(a,c){if(this.Kb){var b=this.ra;b&&b.changeVolume(a,c)}else try{var d=b=void 0;"_videopanorama"===a&&this.F.j&&(this.F.j.volume+=Number(c));if("_main"===a){b=this.ca;b+=Number(c);1<b&&(b=1);0>b&&(b=0);this.ca=b;for(d=0;d<this.Y.length;d++)this.Y[d].j.volume=this.Y[d].level*this.ca;for(d=0;d<this.S.length;d++)this.S[d].j.volume=this.S[d].level*this.ca;this.F.j&&(this.F.j.volume=this.ca)}else{var e=
this.Nb(a);for(d=0;d<e.length;d++){var h=e[d];b=h.level;b+=Number(c);1<b&&(b=1);0>b&&(b=0);h.level=b;h.j&&null!=h.j.volume&&(h.j.volume=b*this.ca)}}}catch(n){this.O(n)}};b.prototype.Ai=function(a,c,b){a.j.style.opacity=0==c?1:0;a.j.style[this.Rc]="opacity "+b+"ms";a.j.style.opacity=0==c?0:1};b.prototype.Pq=function(a,c,b){function d(){var a=e[g];if(!a.j)return"continue";0==c?(k.Ai(a,c,b),setTimeout(function(){0==a.j.style.opacity&&a.Pf(!1)},b+10),a.ob=!1):1==c?(k.Ai(a,c,b),a.Pf(!0),a.ob=!0):2==c&&
("visible"==a.j.style.visibility?(k.Ai(a,0,b),setTimeout(function(){0==a.j.style.opacity&&a.Pf(!1)},b+10),a.ob=!1):(k.Ai(a,1,b),a.Pf(!0),a.ob=!0))}for(var e=this.Nb(a),k=this,g=0;g<e.length;g++)d()};b.prototype.kn=function(){try{for(var a=this,c=!1,b=!1,d=0;d<this.Y.length;d++){var e=this.Y[d];if(-1!=e.loop&&!this.isPlaying(e.id)&&-1==this.ad.indexOf(e.id)&&(-1==this.ad.indexOf("_main")||-1!=this.me.indexOf(e.id)))if(this.za&&this.Va.enabled&&4!=e.mode&&6!=e.mode)if(this.Va.hl){if(e.va)e.Sd();else{var h=
e.j.play();if(void 0!==h)h.then(function(){})["catch"](function(){});e.j.currentTime=0}e.ua=0;b=!0}else c=!0;else if(4!=e.mode&&6!=e.mode&&("_background"!=e.id||!this.isPlaying(e.id)))if(e.va)e.Sd();else{h=e.j.play();if(void 0!==h)h.then(function(){})["catch"](function(){});e.j.currentTime&&(e.j.currentTime=0)}}c&&setTimeout(function(){a.Va.qr()},1E3*this.Va.Cb);b&&(this.Va.lr=this.za.currentTime,this.Va.kr=setInterval(function(){a.Va.Io()},10))}catch(n){this.O(n)}};b.prototype.tl=function(){for(var a=
0;a<this.Va.nh.length;a++)this.Va.sl(this.Va.nh[a])};b.prototype.Pm=function(){for(var a;0<this.X.length;)a=this.X.pop(),a.j&&(this.Qa.removeChild(a.j.__div),delete a.j),a.j=null;this.V("hotspotsremoved",{})};b.prototype.sk=function(a){this.xh=a;this.aa.style.zIndex=0!=a?a.toString():"auto";this.Sa&&this.Sa.gd&&(this.Sa.gd.zIndex=(a+4).toString());this.Qa.style.zIndex=(a+4).toString();this.Ha.style.zIndex=(a+3).toString();this.Na.style.zIndex=(a+5).toString();for(var c=0;c<this.S.length+this.bb.length;c++){var b=
c<this.S.length?this.S[c]:this.bb[c-this.S.length];b.j&&(b.j.style.zIndex=(a+(b.nb?8E4:0)).toString())}};b.prototype.Mf=function(a){var c=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.Ui)try{this.aa.webkitRequestFullScreen?this.aa.webkitRequestFullScreen():this.aa.mozRequestFullScreen?this.aa.mozRequestFullScreen():this.aa.msRequestFullscreen?this.aa.msRequestFullscreen():this.aa.requestFullScreen?this.aa.requestFullScreen():this.aa.requestFullscreen&&
this.aa.requestFullscreen()}catch(k){this.O(k)}this.aa.style.position="absolute";a=this.Ae();this.aa.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.aa.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.sk(10);document.body.style.overflow="hidden";c&&(this.ta&&this.ta.ggEnterFullscreen&&this.ta.ggEnterFullscreen(),this.V("fullscreenenter",{}),this.V("playerstatechanged",{}))}else{if(this.Ui)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?
document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(k){this.O(k)}this.aa.style.position="relative";this.aa.style.left="0px";this.aa.style.top="0px";this.sk(0);document.body.style.overflow="";c&&(this.ta&&this.ta.ggExitFullscreen&&this.ta.ggExitFullscreen(),this.V("fullscreenexit",{}),this.V("playerstatechanged",{}))}this.Te()};b.prototype.Pi=
function(){this.Mf(!this.isFullscreen)};b.prototype.Ho=function(){this.Mf(!0)};b.prototype.exitFullscreen=function(){this.Mf(!1)};b.prototype.Vo=function(){return this.isFullscreen};b.prototype.ng=function(){this.jb.Ao();this.jb.ng();this.jb.Cm();return!0};b.prototype.xp=function(){return this.jb.display?this.jb.display.displayName:"N/A"};b.prototype.cr=function(a){this.jb&&(this.jb.Wd=a)};b.prototype.hf=function(){this.jb&&(this.jb.hf(),this.jb.fe(),this.jb.cl());return!0};b.prototype.rn=function(){this.jb&&
(this.jb.Fg()?this.hf():this.ng());return!0};b.prototype.Fg=function(){return this.jb&&this.jb.Fg()?!0:!1};b.prototype.Nj=function(){return this.jb&&this.jb.Nj()?!0:!1};b.prototype.nr=function(a,c,b){this.C.Qd=this.C.Dh;this.C.Wf=this.C.uh;this.C.enabled=!0;this.C.Ze=this.C.enabled;this.C.active=!0;this.C.sd=0;var d=new Date;this.C.Gd=0;this.C.startTime=d.getTime();a&&0!=a&&(this.C.speed=a);c&&(this.C.timeout=c);b&&(this.C.Oi=b);this.V("autorotatechanged",{})};b.prototype.rr=function(){this.C.active=
!1;this.C.enabled=!1;this.C.Ze=this.C.enabled;this.Xe=this.C.ki=!1;this.G.active&&this.G.Wg&&(this.G.active=!1,this.G.Wg=!1,this.G.Ib=0);this.V("autorotatechanged",{})};b.prototype.yr=function(){this.C.enabled=!this.C.active;this.C.Ze=this.C.enabled;this.C.active=this.C.enabled;this.C.sd=0;if(this.C.enabled){var a=new Date;this.C.Gd=0;this.C.startTime=a.getTime();this.C.Qd=this.C.Dh;this.C.Wf=this.C.uh}this.V("autorotatechanged",{})};b.prototype.mr=function(a){this.vb.running&&this.Vm();this.Rb="";
a&&""!=a&&(this.C.Qd=a);this.C.Ze=this.C.enabled;this.C.Wf=!0;this.C.enabled=!0;this.C.active=!0;this.C.sd=0;a=new Date;this.C.Gd=0;this.C.startTime=a.getTime();this.V("autorotatechanged",{})};b.prototype.Vm=function(){this.vb.running=!1;this.vb.Bj=!0;this.C.active=this.K.oe;this.Ia.splice(this.Ia.indexOf(this.J),1);0<this.Ia.length&&(this.J=this.Ia[0]);this.Rb="";this.zi(!1);this.K.oe=!1;this.wf=(new Date).getTime()};b.prototype.fl=function(a){if(this.hd=document.getElementById(a)){this.hd.innerHTML=
"";this.aa=document.createElement("div");this.aa.onselectstart=function(){return!1};Kh&&this.aa.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Pa+"user-select: none;");this.aa.setAttribute("style",a);this.hd.appendChild(this.aa);this.L=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Pa+"user-select: none;");
Kh&&this.L.setAttribute("id","viewer");this.L.setAttribute("style",a);this.aa.appendChild(this.L);if(this.Kb){var c=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Pa+"user-select: none;");c.setAttribute("id",this.Dj);c.setAttribute("style",a);this.L.appendChild(c)}this.Sa&&(this.Sa.gd=document.createElement("canvas"),Kh&&this.Sa.gd.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Pa+"user-select: none;"),a+=this.Pa+"pointer-events: none;",this.Sa.gd.setAttribute("style",a),this.aa.appendChild(this.Sa.gd));this.Qa=document.createElement("div");Kh&&this.Qa.setAttribute("id","hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.Rj&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.Wc&&!this.ia&&(a+=this.Pa+"transform: translateZ(9999999px);");a+=this.Pa+"user-select: none;";
this.Qa.setAttribute("style",a);this.aa.appendChild(this.Qa);this.Ha=document.createElement("canvas");Kh&&this.Ha.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Pa+"user-select: none;");a+=this.Pa+"pointer-events: none;";this.Ha.setAttribute("style",a);this.aa.appendChild(this.Ha);this.Na=document.createElement("div");Kh&&this.Na.setAttribute("id","hotspottext");this.Na.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");
this.Na.innerHTML=" Hotspot text!";this.aa.appendChild(this.Na);this.divSkin=this.ta=this.Qa;this.sk(0)}else alert("container not found!")};b.prototype.jl=function(a){this.Ma=!0;return function(){a.Ya&&(a.v&&a.v.complete?(a.loaded=!0,a.Ya.drawImage(a.v,0,0,a.width,a.height),a.v=null,a.Jd=null):a.Jd&&a.Jd.complete&&!a.loaded&&(a.Ya.drawImage(a.Jd,0,0,a.width,a.height),a.Jd=null))}};b.prototype.el=function(a){var c,b=128;this.v.Ff&&(this.L.style.backgroundColor=this.v.Ff.replace("0x","#"));a?(b=this.eg,
this.Re=1):this.Ac>b&&(b=this.Ac);for(c=0;6>c;c++){var d=this.cube.faces[c];a?(d.width=this.eg,d.height=this.eg):(d.W=document.createElement("canvas"),d.W.width=this.Ac,d.W.height=this.Ac,d.width=this.Ac,d.height=this.Ac,d.Ya=d.W.getContext("2d"));var e="position:absolute;";e+="left: 0px;";e+="top: 0px;";e+="width: "+b+"px;";e+="height: "+b+"px;";a&&(e+="outline: 1px solid transparent;");e+=this.Pa+"transform-origin: 0% 0%;";e+="-webkit-user-select: none;";e+=this.Pa+"transform: ";var h="";var g=
1;this.Hf&&(g=100);h=4>c?h+("rotateY("+-90*c+"deg)"):h+("rotateX("+(4==c?-90:90)+"deg)");this.Hf&&(h+=" scale("+g+")");h+=" translate3d("+-b/2+"px,"+-b/2+"px,"+-b*g/(2*this.Re)+"px)";e+=h+";";d.Wl=h;a||(d.W.setAttribute("style",e),this.L.insertBefore(d.W,this.L.firstChild))}if(!a){for(c=0;6>c;c++)d=this.cube.faces[c],""!=this.ef[c]&&(d.Jd=new Image,d.Jd.crossOrigin=this.crossOrigin,d.Jd.onload=this.jl(d),d.Jd.setAttribute("src",this.Mb(this.ef[c])),this.bc.push(d.Jd));for(c=0;6>c;c++)d=this.cube.faces[c],
d.loaded=!1,d.v=new Image,d.v.crossOrigin=this.crossOrigin,d.v.onload=this.jl(d),d.v.setAttribute("src",this.Mb(this.kg[c])),this.bc.push(d.v)}};b.prototype.fe=function(){var a;this.Ja.na.x=0;this.Ja.na.y=0;if(this.cd){for(a=0;a<this.cube.faces.length;a++)this.cube.faces[a].W&&this.cube.faces[a].W.setAttribute&&(this.cube.faces[a].W.setAttribute("src",this.pl),this.L.removeChild(this.cube.faces[a].W));if(this.v.levels){for(a=0;a<this.v.levels.length;a++){var b=this.v.levels[a];for(l in b.ba)if(b.ba.hasOwnProperty(l)){var d=
b.ba[l];d.visible=!1;d.W&&(d.Ya&&d.Ya.clearRect(0,0,d.Ya.canvas.width,d.Ya.canvas.height),this.Qi.push(d.W));d.v&&delete d.v;d.pb&&(this.R.deleteTexture(d.pb),this.od--);d.Ya=null;d.W=null;d.v=null}delete b.ba}delete this.v.levels;this.v.levels=null}}this.xa.fe();var l=[];for(a=0;a<this.S.length;a++)b=this.S[a],b.td?l.push(b):b.Kd();for(a=0;a<this.bb.length;a++)this.bb[a].Kd();this.I.Jg=-1;this.Ha.style.visibility="hidden";this.rb=0;this.Oe=[];this.Va.nh=[];for(a=0;a<this.Y.length;a++)b=this.Y[a],
0==b.mode||b.zm||this.Oe.push(b);this.S=l;this.bb=[];this.F.j&&(this.aa.removeChild(this.F.j),this.F.j=null,a=this.Nb("_videopanorama"),0<a.length&&(a[0].j=null));this.F.rd=!1;this.F.bi=!1};b.prototype.Sl=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{w:screen.width*a,h:screen.height*a}};b.prototype.Ll=function(){var a=this.Sl();return a.w>a.h?a.w:a.h};b.prototype.ik=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");
this.rj=a;this.Km(c,b);this.ra&&(this.O("Apply to Flash player"),this.ra.readConfigString(this.rj),this.ra.setLocked(!0),this.ra.setSlaveMode(!0))};b.prototype.Jm=function(a,b,d){try{var c=void 0;c=new XMLHttpRequest;c.open("GET",a,!1);c.send(null);if(c.responseXML){var e=a.lastIndexOf("/");0<=e&&(this.Rd=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.Rd=b);this.ik(c.responseText,d)}else alert("Error loading panorama XML")}catch(h){alert("Error:"+h)}};b.prototype.Bq=function(a,b,d,l){var c=
new XMLHttpRequest;var k=this;c.onload=function(e){if(4<=c.readyState)if(c.responseXML){var h=a.lastIndexOf("/");0<=h&&(k.Rd=a.substr(0,h+1));3<=arguments.length&&null!=d&&(k.Rd=d);k.ik(c.responseText,l);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+c.statusText)};c.onerror=function(){console.error("Error loading XML:"+c.statusText)};c.open("GET",a,!0);c.send(null)};b.prototype.gj=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));(a=
this.Td[b])&&(b=a);a={oldNodeId:this.Za,nodeId:b};this.V("beforechangenodeid",a);this.Ij?this.Ij=!1:this.ak.push(this.Za);""!=this.Za&&-1==this.Vi.indexOf(this.Za)&&(this.Vi.push(this.Za),this.V("changevisitednodes",{}));this.qm=this.Za;this.Za=b;this.O("change active node: "+b);this.la&&this.la.changeActiveNode&&this.la.changeActiveNode("{"+b+"}");this.V("changenodeid",a)};b.prototype.Ej=function(){return this.Za};b.prototype.Ml=function(){if(0<this.Wa.length){var a=this.Wa.indexOf(this.Za);a++;
a>=this.Wa.length&&(a=0);return this.Wa[a]}return""};b.prototype.sp=function(){if(0<this.Wa.length){var a=this.Wa.indexOf(this.Za);a--;0>a&&(a=this.Wa.length-1);return this.Wa[a]}return""};b.prototype.$o=function(){return this.qm};b.prototype.gq=function(a){return-1!=this.Vi.indexOf(a)};b.prototype.xo=function(){this.Vi=[];this.V("changevisitednodes",{})};b.prototype.Km=function(a,b){var c=a.firstChild;this.ke=[];this.Wa=[];this.Td=[];for(a=c.firstChild;a;){if("map"==a.nodeName){var d={},e=a.getAttributeNode("title");
e&&(d.title=e.nodeValue.toString());e=a.getAttributeNode("type");d.type=e.nodeValue.toString();"web"==d.type?(e=a.getAttributeNode("mapprovider"),d.mapprovider=e.nodeValue.toString(),(e=a.getAttributeNode("mapstyle"))&&(d.mapstyle=e.nodeValue.toString()),(e=a.getAttributeNode("googlecustomstylecode"))&&(d.googlecustomstylecode=e.nodeValue.toString()),(e=a.getAttributeNode("mapurltemplate"))&&(d.mapurltemplate=e.nodeValue.toString()),(e=a.getAttributeNode("mapmaxzoom"))&&(d.mapmaxzoom=Number(e.nodeValue)),
(e=a.getAttributeNode("mapkey"))&&(d.mapkey=e.nodeValue.toString()),(e=a.getAttributeNode("styleurl"))&&(d.styleurl=e.nodeValue.toString())):(e=a.getAttributeNode("width"),d.width=Number(e.nodeValue),e=a.getAttributeNode("height"),d.height=Number(e.nodeValue),e=a.getAttributeNode("zoomlevels"),d.zoomlevels=Number(e.nodeValue),e=a.getAttributeNode("tileformat"),d.tileformat=e.nodeValue.toString(),e=a.getAttributeNode("bgcolor"),d.bgcolor=e.nodeValue.toString(),e=a.getAttributeNode("transparent"),d.transparent=
1==e.nodeValue,e=a.getAttributeNode("floorplannorth"),d.floorplannorth=Number(e.nodeValue));e=a.getAttributeNode("id");this.ji[e.nodeValue.toString()]=d}a=a.nextSibling}if("tour"==c.nodeName){this.vf=!0;a="";(e=c.getAttributeNode("start"))&&(a=e.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(a=String(this.startNode),this.startNode="");this.hasOwnProperty("startView")&&this.startView&&("object"===typeof this.startView&&null!==this.startView?b=this.startView:""!=this.startView&&
(b=String(this.startView)),this.startView="");d=c.firstChild;var h="";for(c="";d;){if("panorama"==d.nodeName){if(e=d.getAttributeNode("id"))h=e.nodeValue.toString(),""==a&&(a=h),""==c&&(c=h),this.ke[h]=d,this.Wa.push(h);for(e=d.firstChild;e;){if("userdata"==e.nodeName){var g=this.pg(e);this.vh[h]=g;h==a&&(this.vh._first=g);g.customnodeid&&(this.Td[g.customnodeid]=h);this.Ic[h]=this.ql(e);this.Af[h]=this.rl(e)}e=e.nextSibling}}if("masternode"==d.nodeName)for(e=d.firstChild;e;)"userdata"==e.nodeName&&
(g=this.pg(e),this.vh._master=g),e=e.nextSibling;d=d.nextSibling}this.ke.hasOwnProperty(a)||(e=this.Td[a])&&(a=e);this.ke.hasOwnProperty(a)||(this.Hc("Start node "+a+" not found!"),a=c);this.hk(this.ke[a],b);this.gj("{"+a+"}");this.Za=a}else this.vf=!1,this.hk(c,b),this.gj(""),this.Wa.push("");this.Ue&&(this.O("add pano vr config"),this.jb.ag());this.V("configloaded",{});this.V("changenode",{});this.V("playerstatechanged",{})};b.prototype.hk=function(a,b){var c=this;this.Pm();this.Sa&&this.Sa.Dq();
this.Kf(this.mb);this.fe();this.Kg=0;for(var d=a.firstChild,e,h,g=0;d;){if("view"==d.nodeName){if(e=d.getAttributeNode("fovmode"))this.fov.mode=Number(e.nodeValue);e=d.getAttributeNode("pannorth");this.pan.ck=1*(e?e.nodeValue:0);for(var f=d.firstChild;f;){"start"==f.nodeName&&(e=f.getAttributeNode("pan"),this.pan.m=Number(e?e.nodeValue:0),this.pan.$a=this.pan.m,e=f.getAttributeNode("tilt"),this.A.m=Number(e?e.nodeValue:0),this.A.$a=this.A.m,e=f.getAttributeNode("roll"),this.U.m=Number(e?e.nodeValue:
0),this.U.$a=this.U.m,e=f.getAttributeNode("fov"),this.fov.m=Number(e?e.nodeValue:70),this.fov.$a=this.fov.m,e=f.getAttributeNode("projection"),this.si=Number(e?e.nodeValue:4),this.Zc(this.si));"min"==f.nodeName&&(e=f.getAttributeNode("pan"),this.pan.min=1*(e?e.nodeValue:0),e=f.getAttributeNode("tilt"),this.A.min=1*(e?e.nodeValue:-90),e=f.getAttributeNode("fov"),this.fov.min=1*(e?e.nodeValue:5),1E-20>this.fov.min&&(this.fov.min=1E-20),e=f.getAttributeNode("fovpixel"),this.fov.Ug=1*(e?e.nodeValue:
0));if("max"==f.nodeName){e=f.getAttributeNode("pan");this.pan.max=1*(e?e.nodeValue:0);e=f.getAttributeNode("tilt");this.A.max=1*(e?e.nodeValue:90);e=f.getAttributeNode("fov");this.fov.max=1*(e?e.nodeValue:120);180<=this.fov.max&&(this.fov.max=179.9);if(e=f.getAttributeNode("fovstereographic"))this.fov.$j=1*e.nodeValue;if(e=f.getAttributeNode("fovfisheye"))this.fov.Zj=1*e.nodeValue;if(e=f.getAttributeNode("scaletofit"))this.M.Um=1==e.nodeValue}if("flyin"==f.nodeName){if(e=f.getAttributeNode("projection"))this.Dc.Ib=
Number(e.nodeValue);if(e=f.getAttributeNode("pan"))this.Dc.pan=parseFloat(e.nodeValue);if(e=f.getAttributeNode("tilt"))this.Dc.A=parseFloat(e.nodeValue);if(e=f.getAttributeNode("fov"))this.Dc.fov=parseFloat(e.nodeValue)}f=f.nextSibling}}if("autorotate"==d.nodeName){if(e=d.getAttributeNode("speed"))this.C.speed=1*e.nodeValue;if(e=d.getAttributeNode("delay"))this.C.timeout=1*e.nodeValue;if(e=d.getAttributeNode("returntohorizon"))this.C.Oi=1*e.nodeValue;if(e=d.getAttributeNode("nodedelay"))this.C.oi=
1*e.nodeValue;if(e=d.getAttributeNode("noderandom"))this.C.bk=1==e.nodeValue;this.Vd&&(this.C.enabled=!0,this.C.Ze=!0,this.C.active=!1);this.C.Gd=0;if(e=d.getAttributeNode("startloaded"))this.C.jh=1==e.nodeValue,this.C.jh&&(this.C.active=!1);if(e=d.getAttributeNode("useanimation"))this.C.uh=1==e.nodeValue,this.C.Wf=this.C.uh;if(e=d.getAttributeNode("syncanimationwithvideo"))this.C.Ak=1==e.nodeValue}if("animation"==d.nodeName){if(e=d.getAttributeNode("syncanimationwithvideo"))this.C.Ak=1==e.nodeValue;
if(e=d.getAttributeNode("useinautorotation"))this.C.uh=1==e.nodeValue;if(e=d.getAttributeNode("animsequence"))this.C.Dh=e.nodeValue,this.Vd&&(this.C.Qd=this.C.Dh);this.Ia=[];for(f=d.firstChild;f;){if("clip"==f.nodeName){this.J=new p.Mk;if(e=f.getAttributeNode("animtitle"))this.J.Ye=e.nodeValue.toString();if(e=f.getAttributeNode("cliptitle"))this.J.lb=e.nodeValue.toString();if(e=f.getAttributeNode("nodeid"))this.J.cs=e.nodeValue.toString();if(e=f.getAttributeNode("length"))this.J.length=Number(e.nodeValue);
if(e=f.getAttributeNode("animtype"))this.J.eo=Number(e.nodeValue);if(e=f.getAttributeNode("nextcliptitle"))this.J.xm=e.nodeValue.toString();if(e=f.getAttributeNode("nextclipnodeid"))this.J.ni=e.nodeValue.toString();if(e=f.getAttributeNode("nextclipstartview"))this.J.fq=e.nodeValue.toString();if(e=f.getAttributeNode("transitiontype"))this.J.Er=Number(e.nodeValue);var fa=f.firstChild;for(this.J.fa=[];fa;){if("keyframe"==fa.nodeName){var r=new p.Pc;if(e=fa.getAttributeNode("time"))r.time=Number(e.nodeValue);
if(e=fa.getAttributeNode("value"))r.value=Number(e.nodeValue);if(e=fa.getAttributeNode("valuestring"))r.Ik=e.nodeValue.toString();if(e=fa.getAttributeNode("transitiontime"))r.Cb=Number(e.nodeValue);e=fa.getAttributeNode("type");var w=0;e&&(r.type=Number(e.nodeValue),w=Number(e.nodeValue));if(e=fa.getAttributeNode("property"))r.zb=Number(e.nodeValue);if(e=fa.getAttributeNode("additionaltrackid"))r.Bh=e.nodeValue.toString();if(1==w||2==w){if(e=fa.getAttributeNode("bezierintime"))r.pe=Number(e.nodeValue);
if(e=fa.getAttributeNode("bezierinvalue"))r.qe=Number(e.nodeValue);if(e=fa.getAttributeNode("bezierouttime"))r.re=Number(e.nodeValue);if(e=fa.getAttributeNode("bezieroutvalue"))r.se=Number(e.nodeValue)}this.J.fa.push(r)}fa=fa.nextSibling}this.Ia.push(this.J)}f=f.nextSibling}}"input"==d.nodeName&&(h||(h=d));if(h)for(fa=0;6>fa;fa++)e=h.getAttributeNode("prev"+fa+"url"),this.ef[fa]=e?String(e.nodeValue):"";"altinput"==d.nodeName&&(f=0,(e=d.getAttributeNode("screensize"))&&(f=1*e.nodeValue),0<f&&f<=this.Ll()&&
f>g&&(g=f,h=d));if("control"==d.nodeName&&this.Vd){if(e=d.getAttributeNode("simulatemass"))this.Ja.enabled=1==e.nodeValue;if(e=d.getAttributeNode("rubberband"))this.M.Tm=1==e.nodeValue;if(e=d.getAttributeNode("locked"))this.M.gc=1==e.nodeValue;e&&(this.M.Qg=1==e.nodeValue);if(e=d.getAttributeNode("lockedmouse"))this.M.gc=1==e.nodeValue;if(e=d.getAttributeNode("lockedkeyboard"))this.M.Qg=1==e.nodeValue;if(e=d.getAttributeNode("lockedkeyboardzoom"))this.M.Up=1==e.nodeValue;if(e=d.getAttributeNode("lockedwheel"))this.M.Zd=
1==e.nodeValue;if(e=d.getAttributeNode("invertwheel"))this.M.em=1==e.nodeValue;if(e=d.getAttributeNode("speedwheel"))this.M.fn=1*e.nodeValue;if(e=d.getAttributeNode("invertcontrol"))this.M.Fd=1==e.nodeValue;if(e=d.getAttributeNode("sensitivity"))this.M.sensitivity=1*e.nodeValue,1>this.M.sensitivity&&(this.M.sensitivity=1);if(e=d.getAttributeNode("dblclickfullscreen"))this.M.uj=1==e.nodeValue;if(e=d.getAttributeNode("contextfullscreen"))this.M.jg=1==e.nodeValue;if(e=d.getAttributeNode("contextprojections"))this.M.Hh=
1==e.nodeValue;if(e=d.getAttributeNode("hideabout"))this.M.rf=1==e.nodeValue;for(f=d.firstChild;f;)"menulink"==f.nodeName&&(fa={text:"",url:""},e=f.getAttributeNode("text"),fa.text=e.nodeValue,e=f.getAttributeNode("url"),fa.url=e.nodeValue,this.Tg.push(fa)),f=f.nextSibling}if("transition"==d.nodeName&&this.Vd){if(e=d.getAttributeNode("enabled"))this.K.enabled=1==e.nodeValue;if(e=d.getAttributeNode("blendtime"))this.K.dg=1*e.nodeValue;if(e=d.getAttributeNode("blendcolor"))this.K.af=e.nodeValue.toString();
if(e=d.getAttributeNode("type"))this.K.type=e.nodeValue.toString();if(e=d.getAttributeNode("softedge"))this.K.Lc=1*e.nodeValue;if(e=d.getAttributeNode("zoomin"))this.K.sa=1*e.nodeValue;if(e=d.getAttributeNode("zoomout"))this.K.pc=1*e.nodeValue;if(e=d.getAttributeNode("zoomfov"))this.K.Zf=1*e.nodeValue;if(e=d.getAttributeNode("zoomspeed"))this.K.ne=1*e.nodeValue;if(e=d.getAttributeNode("zoomoutpause"))this.K.$f=1==e.nodeValue;"cut"==this.K.type&&(this.K.dg=0)}if("soundstransition"==d.nodeName){if(e=
d.getAttributeNode("enabled"))this.Va.enabled=1==e.nodeValue;if(e=d.getAttributeNode("transitiontime"))this.Va.Cb=1*e.nodeValue;if(e=d.getAttributeNode("crossfade"))this.Va.hl=1==e.nodeValue}if("flyintransition"==d.nodeName){if(e=d.getAttributeNode("enabled"))this.vb.enabled=1==e.nodeValue&&this.ia;if(e=d.getAttributeNode("speed"))this.vb.speed=1*e.nodeValue}"userdata"==d.nodeName&&(this.userdata=this.Xf=this.pg(d),this.Ic[a.id]||(this.Ic[a.id]=this.ql(d),this.Af[a.id]=this.rl(d)));if("hotspots"==
d.nodeName)for(f=d.firstChild;f;){if("label"==f.nodeName&&this.Vd){fa=this.I.Li;if(e=f.getAttributeNode("enabled"))fa.enabled=1==e.nodeValue;if(e=f.getAttributeNode("width"))fa.width=1*e.nodeValue;if(e=f.getAttributeNode("height"))fa.height=1*e.nodeValue;if(e=f.getAttributeNode("textcolor"))fa.Mi=1*e.nodeValue;if(e=f.getAttributeNode("textalpha"))fa.Ki=1*e.nodeValue;if(e=f.getAttributeNode("background"))fa.background=1==e.nodeValue;if(e=f.getAttributeNode("backgroundalpha"))fa.Xb=1*e.nodeValue;if(e=
f.getAttributeNode("backgroundcolor"))fa.Yb=1*e.nodeValue;if(e=f.getAttributeNode("border"))fa.Fh=1*e.nodeValue;if(e=f.getAttributeNode("bordercolor"))fa.$b=1*e.nodeValue;if(e=f.getAttributeNode("borderalpha"))fa.Zb=1*e.nodeValue;if(e=f.getAttributeNode("borderradius"))fa.cj=1*e.nodeValue;if(e=f.getAttributeNode("wordwrap"))fa.Wi=1==e.nodeValue}if("polystyle"==f.nodeName&&this.Vd){if(e=f.getAttributeNode("mode"))this.I.mode=1*e.nodeValue;if(e=f.getAttributeNode("bordercolor"))this.I.$b=1*e.nodeValue;
if(e=f.getAttributeNode("backgroundcolor"))this.I.Yb=1*e.nodeValue;if(e=f.getAttributeNode("borderalpha"))this.I.Zb=1*e.nodeValue;if(e=f.getAttributeNode("backgroundalpha"))this.I.Xb=1*e.nodeValue;if(e=f.getAttributeNode("handcursor"))this.I.pf=1==e.nodeValue}e=void 0;"hotspot"==f.nodeName&&(e=new p.Ah(this),e.type="point",e.Tb(f),this.X.push(e));"polyhotspot"==f.nodeName&&(e=new p.Ah(this),e.type="poly",e.Tb(f),this.X.push(e));f=f.nextSibling}if("sounds"==d.nodeName||"media"==d.nodeName)for(f=d.firstChild;f;){if("sound"==
f.nodeName&&!this.ym)for(e=new p.Un(this),e.Tb(f),this.Kb||e.addElement(),fa=0;fa<this.Oe.length;fa++)e.id==this.Oe[fa].id&&(this.Oe.splice(fa,1),fa--);"video"==f.nodeName&&(e=new p.Qk(this),e.Tb(f),this.Kb||e.addElement());"image"==f.nodeName&&(e=new p.Sn(this),e.Tb(f),this.Kb||e.addElement());"lensflare"==f.nodeName&&this.Sa&&(e=new p.Tn(this),e.Tb(f),this.Sa.Pg.push(e));f=f.nextSibling}d=d.nextSibling}for(fa=0;fa<this.Oe.length;fa++){a=this.Oe[fa];if(this.za&&this.Va.enabled&&this.isPlaying(a.id))this.Va.nh.push(a);
else{try{a.va?a.bf():a.j.pause()}catch(y){this.O(y)}a.Kd()}this.Y.splice(this.Y.indexOf(a),1)}1!=this.K.sa&&2!=this.K.sa&&6!=this.K.sa&&this.tl();this.qb.xi=!0;b&&("object"===typeof b&&null!==b?(b.hasOwnProperty("pan")&&this.Nf(Number(b.pan)),b.hasOwnProperty("tilt")&&this.Of(Number(b.tilt)),b.hasOwnProperty("fov")&&this.Lf(Number(b.fov)),b.hasOwnProperty("projection")&&this.Zc(Number(b.projection))):""!=b&&(b=b.toString().split("/"),4<b.length&&this.Zc(Number(b[4])),0<b.length&&(e=String(b[0]),"N"==
e.charAt(0)?this.rk(Number(e.substr(1))):"S"==e.charAt(0)?this.rk(-180+Number(e.substr(1))):this.Nf(Number(e))),1<b.length&&this.Of(Number(b[1])),2<b.length&&this.Lf(Number(b[2]))),this.pan.open=this.pan.m);if(h){for(fa=0;6>fa;fa++)(e=h.getAttributeNode("tile"+fa+"url"))&&(this.kg[fa]=String(e.nodeValue)),e=h.getAttributeNode("tile"+fa+"url1");for(fa=0;6>fa;fa++)(e=h.getAttributeNode("prev"+fa+"url"))&&(this.ef[fa]=String(e.nodeValue));if(e=h.getAttributeNode("tilevrurl"))this.il=String(e.nodeValue);
if(e=h.getAttributeNode("tilesize"))this.Ac=1*e.nodeValue;if(e=h.getAttributeNode("canvassize"))this.eg=Number(e.nodeValue);if(e=h.getAttributeNode("tilescale"))this.Re=1*e.nodeValue;if(e=h.getAttributeNode("leveltileurl"))this.v.Wj=e.nodeValue;if(e=h.getAttributeNode("leveltilesize"))this.v.N=Number(e.nodeValue);if(e=h.getAttributeNode("levelbias"))this.v.tm=Number(e.nodeValue);if(e=h.getAttributeNode("levelbiashidpi"))this.v.um=Number(e.nodeValue);e=h.getAttributeNode("overlap");this.Oa.U=0;this.Oa.pitch=
0;e&&(this.v.Ca=Number(e.nodeValue));if(e=h.getAttributeNode("levelingroll"))this.Oa.U=Number(e.nodeValue);if(e=h.getAttributeNode("levelingpitch"))this.Oa.pitch=Number(e.nodeValue);this.rb=0;(e=h.getAttributeNode("flat"))&&1==e.nodeValue&&(this.rb=2);e=h.getAttributeNode("width");this.v.width=1*(e?e.nodeValue:1);e=h.getAttributeNode("height");this.v.height=1*(e?e.nodeValue:this.v.width);this.F.src=[];this.v.levels=[];for(f=h.firstChild;f;){if("preview"==f.nodeName){if(e=f.getAttributeNode("color"))this.v.Ff=
e.nodeValue;if(e=f.getAttributeNode("strip"))this.v.Hm=1==e.nodeValue}if("video"==f.nodeName){if(e=f.getAttributeNode("format"))"3x2"==e.nodeValue&&(this.F.format=14),"equirectangular"==e.nodeValue&&(this.F.format=1);if(e=f.getAttributeNode("flipy"))this.F.flipY=Number(e.nodeValue);if(e=f.getAttributeNode("startonload"))this.F.xk=1==e.nodeValue;if(e=f.getAttributeNode("startmutedmobile"))this.F.hn=1==e.nodeValue;if(e=f.getAttributeNode("bleed"))this.F.$e=Number(e.nodeValue);if(e=f.getAttributeNode("endaction"))this.F.we=
String(e.nodeValue);if(e=f.getAttributeNode("width"))this.F.width=Number(e.nodeValue);if(e=f.getAttributeNode("height"))this.F.height=Number(e.nodeValue);for(fa=f.firstChild;fa;)"source"==fa.nodeName&&(e=fa.getAttributeNode("url"))&&this.F.src.push(e.nodeValue.toString()),fa=fa.nextSibling}if("level"==f.nodeName){h=new p.Pk;e=f.getAttributeNode("width");h.width=1*(e?e.nodeValue:1);e=f.getAttributeNode("height");h.height=1*(e?e.nodeValue:h.width);if(e=f.getAttributeNode("preload"))h.cache=1==e.nodeValue;
if(e=f.getAttributeNode("preview"))h.Le=1==e.nodeValue;h.T=Math.floor((h.width+this.v.N-1)/this.v.N);h.da=Math.floor((h.height+this.v.N-1)/this.v.N);this.v.levels.push(h)}f=f.nextSibling}this.v.Uj=this.v.levels.length}this.qf=!0;this.qh&&(this.ia=this.cd=!1,this.sc||(this.O("dummy rendering"),this.sc=document.createElement("canvas"),this.sc.width=100,this.sc.height=100,this.sc.id="dummycanvas",this.L.appendChild(this.sc)),this.Mc());this.ia&&this.R&&(this.xa.cm(this.Re),this.xa.dm());this.cd&&(0<
this.v.levels.length?this.el(!0):this.el(!1),this.Kg=0);var q=this;0<this.v.levels.length&&this.v.Hm&&0==this.rb&&(b=new Image,h=new p.Pk,h.Le=!0,h.cache=!0,h.T=h.da=0,h.height=h.width=0,this.v.levels.push(h),b.crossOrigin=this.crossOrigin,b.onload=this.xa.eq(b),b.setAttribute("src",this.ie(6,this.v.Uj-1,0,0)));if(0<this.F.src.length&&this.ia)if(this.sh){this.F.j=document.createElement("video");this.F.j.crossOrigin=this.crossOrigin;this.F.j.setAttribute("style","display:none; max-width:none;");this.F.j.setAttribute("playsinline",
"playsinline");this.F.j.preload=!0;this.F.j.volume=this.ca;this.aa.appendChild(this.F.j);this.F.rd=!1;this.F.mn=!1;this.F.j.oncanplay=function(){if(!q.F.rd){q.F.bi=!0;var a,b,c=[],d=new p.Ga,e=q.R,f=q.F.j.videoWidth/3;q.F.width=q.F.j.videoWidth;q.F.height=q.F.j.videoHeight;for(a=0;6>a;a++){var k=a%3*f+q.F.$e;var h=k+f-2*q.F.$e;var g=4;3>a&&(g+=f);var l=g+f-2*q.F.$e;for(b=0;4>b;b++){d.x=-1;d.y=-1;d.z=1;for(var m=0;m<b;m++)d.Sm();c.push((0<d.x?k:h)/(3*f),(0<d.y?l:g)/(2*f))}}e.bindBuffer(e.ARRAY_BUFFER,
q.F.Ji);e.bufferData(e.ARRAY_BUFFER,new Float32Array(c),e.STATIC_DRAW)}};"exit"==this.F.we?this.F.j.onended=function(){q.F.bi=!1;q.F.rd=!1;q.aa.removeChild(q.F.j);q.F.j=null;q.update()}:"stop"==this.F.we?q.F.j.onended=function(){q.update()}:"{"==this.F.we.charAt(0)?this.F.j.onended=function(){q.Yc(q.F.we,"$fwd")}:this.F.j.loop=!0;for(fa=0;fa<this.F.src.length;fa++)h=document.createElement("source"),h.setAttribute("src",this.Mb(this.F.src[fa])),this.F.j.appendChild(h);h=this.Nb("_videopanorama");0<
h.length?h[0].j=this.F.j:this.Lm("_videopanorama",this.F.j);if(this.F.xk&&(h=this.F.j.play(),void 0!==h))h.then(function(){})["catch"](function(){c.F.hn&&(c.F.j.muted=!0,c.F.j.play())})}else"{"==this.F.we.charAt(0)&&q.Yc(q.F.we,"$fwd");this.Rk();this.K.xd||this.kn();this.update();this.Vd&&(this.Vd=!1,this.ta&&this.ta.ggViewerInit&&this.ta.ggViewerInit(),this.vb.enabled&&0==this.rb&&this.ia&&(this.Zc(9),this.pan.m=this.Dc.pan,this.A.m=this.Dc.A,this.fov.m=this.Dc.fov,this.Ua=this.Dc.Ib,this.J=this.ug(!1),
this.pan.m=this.J.fa[0].value,this.A.m=this.J.fa[1].value,this.fov.m=this.J.fa[2].value,3==this.J.fa[3].zb&&this.Zc(this.J.fa[3].value),this.Rb=this.J.lb,this.zi(!0),this.C.active=!1,this.C.rg=!0));this.Mc()};b.prototype.dk=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.Yc(this.Mb(a),b):window.open(this.Mb(a),b))};b.prototype.pr=function(){this.qf=this.isLoaded=!1;this.checkLoaded=this.bc=[];this.$g=0;this.ta&&this.ta.ggReLoaded&&this.ta.ggReLoaded();
this.V("beforechangenode",{})};b.prototype.Hp=function(a){var b="";0<this.ak.length&&(b=this.ak.pop());""!=b&&(this.Ij=!0);this.Yc("{"+b+"}",a)};b.prototype.Yc=function(a,b){if(""!=a&&"{}"!=a){this.pr();this.la&&this.la.hotspotProxyOut&&this.la.hotspotProxyOut(this.Da.id,this.Da.url);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="",d=null;"object"===typeof b&&null!==b?d=b:b&&(c=b.toString());b="/"+this.A.m+"/"+this.fov.m+"//"+this.Ra();c=c.replace("$cur",this.pan.m+b);c=c.replace("$(cur)",
this.pan.m+b);c=c.replace("$fwd","N"+this.ze()+b);c=c.replace("$(fwd)","N"+this.ze()+b);c=c.replace("$bwd","S"+this.ze()+b);c=c.replace("$(bwd)","S"+this.ze()+b);c=c.replace("$ap",String(this.pan.m));c=c.replace("$(ap)",String(this.pan.m));c=c.replace("$an",String(this.ze()));c=c.replace("$(an)",String(this.ze()));c=c.replace("$at",String(this.A.m));c=c.replace("$(at)",String(this.A.m));c=c.replace("$af",String(this.fov.m));c=c.replace("$(af)",String(this.fov.m));c=c.replace("$ar",String(this.Ra()));
c=c.replace("$(ar)",String(this.Ra()));""!=c&&(b=c.split("/"),3<b.length&&""!=b[3]&&(this.startNode=b[3]));d=null!==d?d:c;this.Ea();if("{"==a.charAt(0)){b=a.substr(1,a.length-2);if(this.Za==b&&this.fg)return;var e=this.Td[b];e&&(b=e);e=this.K;var f=this.R;if(this.ke[b]){this.fg=!0;if(this.K.enabled&&this.ia&&this.K.oc){e.le||e.xd||this.zi(!0);var g=void 0;"wipeleftright"==e.type?g=1:"wiperightleft"==e.type?g=2:"wipetopbottom"==e.type?g=3:"wipebottomtop"==e.type?g=4:"wiperandom"==e.type&&(g=Math.ceil(4*
Math.random()));e.sj=g;f.bindFramebuffer(f.FRAMEBUFFER,e.oc);f.viewport(0,0,e.oc.width,e.oc.height);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);e.mh=!0;this.ph();e.mh=!1;f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,this.wb.width,this.wb.height);f=new Date;this.Da!=this.mb&&6!=e.sa?(e.yh=this.Da.Sb/this.D.width,e.zh=1-this.Da.Ab/this.D.height):(e.yh=.5,e.zh=.5);1!=e.sa&&2!=e.sa&&6!=e.sa?(e.yk=f.getTime(),e.le=!0):(e.Ln=f.getTime(),e.xd=!0,e.Db=Math.sin(this.Ob()/2*Math.PI/180)/Math.sin(e.Zf/
2*Math.PI/180),e.Db=Math.max(e.Db,1),e.Kn=1/e.ne*e.Db*.3)}this.hk(this.ke[b],d);this.gj(a);e.enabled&&this.ia&&0!=e.pc&&(e.Pe=this.xg(),e.Qe=this.Th(),e.Nd=this.Ob(),e.wd=this.Ra(),1==e.pc||3==e.pc?this.Ei(e.Zf):2==e.pc?this.Ei(this.Ob()+e.Zf):4==e.pc&&(this.Zc(this.Dc.Ib),this.Nf(this.Dc.pan),this.Of(this.Dc.A),this.Ei(this.Dc.fov)),e.$f||1==e.sa||2==e.sa||6==e.sa||(4==e.pc?(this.J=this.ug(!0,e.Pe,e.Qe,e.Nd),this.Rb=this.J.lb,this.C.active=!0,this.vb.running=!0):this.moveTo(e.Pe,e.Qe,e.Nd,e.ne,0,
e.wd)));this.ra&&this.ra.openNext(a,c);this.Ue&&(this.O("add pano opennext"),this.jb.ag());this.K.xd||this.K.le||(this.qa&&this.oj(),this.fg=!1)}else{this.Hc("invalid node id: "+b);return}}else this.Jm(a,null,d);this.V("changenode",{});this.update(5)}};b.prototype.hp=function(){return this.qf?this.vf?this.Wa.slice(0):[""]:[]};b.prototype.pg=function(a){var b;var d={title:"",description:"",author:"",datetime:"",copyright:"",source:"",information:"",comment:"",latitude:0,longitude:0,customnodeid:"",
tags:[]};if(a&&((b=a.getAttributeNode("title"))&&(d.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(d.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(d.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(d.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(d.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(d.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(d.information=b.nodeValue.toString()),
(b=a.getAttributeNode("comment"))&&(d.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(d.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(d.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(d.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);d.tags=a}return d};b.prototype.ql=function(a){for(var b={},d=a.firstChild;d;){if("mapcoords"==
d.nodeName){var f={x:0,y:0};a=d.getAttributeNode("x");f.x=Number(a.nodeValue);a=d.getAttributeNode("y");f.y=Number(a.nodeValue);a=d.getAttributeNode("mapid");b[a.nodeValue.toString()]=f}d=d.nextSibling}return b};b.prototype.rl=function(a){for(var b={},d=a.firstChild;d;){if("mapcoords"==d.nodeName){var f={x:0,y:0};a=d.getAttributeNode("x_floorplan_percent");f.x=Number(a.nodeValue);a=d.getAttributeNode("y_floorplan_percent");f.y=Number(a.nodeValue);a=d.getAttributeNode("mapid");b[a.nodeValue.toString()]=
f}d=d.nextSibling}return b};b.prototype.Gj=function(a){return a?this.vh[a]?this.vh[a]:this.pg():this.Xf};b.prototype.ip=function(a){a=this.Gj(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.lp=function(a){return this.Gj(a).title};b.prototype.mf=function(a,b){var c;for(c=0;c<this.J.fa.length;c++)if(this.J.fa[c].time==a&&this.J.fa[c].zb==b)return this.J.fa[c];return!1};b.prototype.gp=function(a){var b,d=1E5,f=a,e=!1;for(b=0;b<
this.J.fa.length;b++)this.J.fa[b].zb==a.zb&&this.J.fa[b].time>a.time&&this.J.fa[b].time<d&&(f=this.J.fa[b],d=f.time,e=!0);return e?f:!1};b.prototype.Mo=function(a){for(var b=[],d=0;d<this.J.fa.length;d++)if(this.J.fa[d].time<=a&&4==this.J.fa[d].zb){for(var f=!1,e=0;e<b.length;e++)if(b[e].Bh==this.J.fa[d].Bh){b[e].time<this.J.fa[d].time?b.splice(e,1):f=!0;break}f||b.push(this.J.fa[d])}return b};b.prototype.ug=function(a,b,d,f){for(var c=0;c<this.Ia.length;c++)if(this.Ia[c].lb&&0==this.Ia[c].lb.indexOf("__FlyIn"))return this.Ia[c];
c=new p.Lk;c.lb="__FlyIn";c.Rf=this.pan.m;c.hh=this.A.m;c.Md=this.fov.m;c.gh=this.Ua;c.wd=this.si;a?(c.gf=!1,c.ue=!1,c.speed=this.K.ne,c.bd=b,c.he=d,c.Sf=f):(c.gf=!0,c.ue=!0,c.speed=this.vb.speed,c.bd=this.pan.$a,c.he=this.A.$a,c.Sf=this.fov.$a);return this.Dl(c)};b.prototype.Dl=function(a){var b=new p.Mk;b.lb=a.lb;b.Ye="";b.fa=[];for(var d=a.gh!=a.wd&&-1!=a.wd;-180>a.bd;)a.bd+=360;for(;180<a.bd;)a.bd-=360;var f=a.bd-a.Rf;if(360==this.pan.max-this.pan.min){for(;-180>f;)f+=360;for(;180<f;)f-=360}var e=
a.he-a.hh,g=a.Sf-a.Md,n=Math.round(Math.sqrt(f*f+e*e+g*g)/a.speed*.33);d&&(n=Math.max(10,n));b.length=n;if(a.ve){var m=Math.ceil(.7*n);m=Math.min(15,m);m=Math.max(5,m);b.length=n+m;var fa=.33*m}var r=a.Sf,w=n,q=0,y=n-1;if(d){var x=a.Md;var A=4==a.wd?120:this.vg(a.wd);var db=a.Sf;g=db-a.Md;var z=new p.Bc(0,a.Md),id=new p.Bc(n,db),ka=new p.Bc,tf=new p.Bc;tf.init(n/3,a.Md+g/3);ka.init(2*n/3,db-g/3);if(x>A)for(;q<=n&&x>A;)x=new p.Bc,x.bj(z,id,tf,ka,q),x=x.y,q++;else q=1;q>=.8*n&&(w=q=Math.round(.8*n));
0==q&&(q=1);A=4==a.gh?120:this.vg(a.gh);x=a.Sf;if(x>A)for(;y>q&&x>A;)x=new p.Bc,x.bj(z,id,tf,ka,y),x=x.y,y--}z=new p.Pc;z.time=0;z.zb=0;z.value=a.Rf;z.type=1;z.re=n/3;z.se=a.gf?a.Rf:a.Rf+f/3;b.fa.push(z);z=new p.Pc;z.time=0;z.zb=1;z.value=a.hh;z.type=1;z.re=n/3;z.se=a.gf?a.hh:a.hh+e/3;b.fa.push(z);z=new p.Pc;z.time=0;z.zb=2;z.value=a.Md;z.type=1;z.re=n/3;z.se=a.gf?a.Md:a.Md+g/3;b.fa.push(z);z=new p.Pc;z.time=0;z.zb=3;z.value=a.gh;z.type=0;z.Cb=0;b.fa.push(z);d&&(z=new p.Pc,z.time=q,z.zb=3,z.value=
a.wd,z.type=0,z.Cb=y-q,b.fa.push(z));z=new p.Pc;z.time=n;z.zb=0;z.value=a.Rf+f;z.type=1;z.pe=2*n/3;z.qe=a.ue&&!a.ve?z.value:z.value-f/3;a.ve&&(z.re=n+fa,z.se=z.value+fa/n*f);b.fa.push(z);z=new p.Pc;z.time=n;z.zb=1;z.value=a.he;z.type=1;z.pe=2*n/3;z.qe=a.ue&&!a.ve?a.he:a.he-e/3;a.ve&&(z.re=n+fa,z.se=z.value+fa/n*e);b.fa.push(z);z=new p.Pc;z.time=w;z.zb=2;z.value=r;z.type=1;z.pe=2*w/3;z.qe=a.ue?r:r-g/3;b.fa.push(z);a.ve&&(z=new p.Pc,z.time=n+m,z.zb=0,z.value=a.bd,z.type=1,z.pe=n+m-fa,z.qe=a.bd,b.fa.push(z),
z=new p.Pc,z.time=n+m,z.zb=1,z.value=a.he,z.type=1,z.pe=n+m-fa,z.qe=a.he,b.fa.push(z));this.Ia.push(b);return b};b.prototype.Rr=function(){this.F.j&&this.F.j.play()};b.prototype.Sr=function(){this.F.j&&(this.F.j.pause(),this.F.j.currentTime=0)};b.prototype.Qr=function(){this.F.j&&this.F.j.pause()};b.prototype.er=function(a){this.F.j&&(0>a&&(a=0),a>this.F.j.duration&&(a=this.F.j.duration-.1),this.F.j.currentTime=a,this.update())};b.prototype.Ap=function(){return this.F.j?this.F.j.currentTime:0};b.prototype.zp=
function(){if(this.F.j)return this.F.j};b.prototype.dr=function(a){if(this.F.j){var b=!this.F.j.paused&&!this.F.j.ended,d=this.F.j.currentTime;this.F.j.pause();this.F.j.src=isNaN(parseInt(a,10))?String(a):this.F.src[parseInt(a,10)];b&&(this.F.j.onloadedmetadata=function(){this.currentTime=d;this.play();this.onloadedmetadata=null});this.F.j.currentTime=d}};b.prototype.Go=function(){this.ym=!0};return b}();p.f=d})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=Ih;window.ggHasWebGL=Jh;
window.pano2vrPlayer=ggP2VR.f;ggP2VR.f.prototype.getVersion=ggP2VR.f.prototype.Vl;ggP2VR.f.prototype.readConfigString=ggP2VR.f.prototype.ik;ggP2VR.f.prototype.readConfigUrl=ggP2VR.f.prototype.Jm;ggP2VR.f.prototype.readConfigUrlAsync=ggP2VR.f.prototype.Bq;ggP2VR.f.prototype.readConfigXml=ggP2VR.f.prototype.Km;ggP2VR.f.prototype.openUrl=ggP2VR.f.prototype.dk;ggP2VR.f.prototype.openNext=ggP2VR.f.prototype.Yc;ggP2VR.f.prototype.goBack=ggP2VR.f.prototype.Hp;ggP2VR.f.prototype.setMargins=ggP2VR.f.prototype.Oq;
ggP2VR.f.prototype.addListener=ggP2VR.f.prototype.addListener;ggP2VR.f.prototype.on=ggP2VR.f.prototype.addListener;ggP2VR.f.prototype.removeEventListener=ggP2VR.f.prototype.removeEventListener;ggP2VR.f.prototype.off=ggP2VR.f.prototype.removeEventListener;ggP2VR.f.prototype.detectBrowser=ggP2VR.f.prototype.nl;ggP2VR.f.prototype.initWebGL=ggP2VR.f.prototype.Vc;ggP2VR.f.prototype.getPercentLoaded=ggP2VR.f.prototype.op;ggP2VR.f.prototype.setBasePath=ggP2VR.f.prototype.Kq;
ggP2VR.f.prototype.getBasePath=ggP2VR.f.prototype.No;ggP2VR.f.prototype.setViewerSize=ggP2VR.f.prototype.bn;ggP2VR.f.prototype.getViewerSize=ggP2VR.f.prototype.Dp;ggP2VR.f.prototype.setSkinObject=ggP2VR.f.prototype.Zq;ggP2VR.f.prototype.changeViewMode=ggP2VR.f.prototype.ro;ggP2VR.f.prototype.getViewMode=ggP2VR.f.prototype.Bp;ggP2VR.f.prototype.changePolygonMode=ggP2VR.f.prototype.al;ggP2VR.f.prototype.setPolygonMode=ggP2VR.f.prototype.al;ggP2VR.f.prototype.getPolygonMode=ggP2VR.f.prototype.qp;
ggP2VR.f.prototype.showOnePolyHotspot=ggP2VR.f.prototype.dn;ggP2VR.f.prototype.hideOnePolyHotspot=ggP2VR.f.prototype.Zl;ggP2VR.f.prototype.changePolyHotspotColor=ggP2VR.f.prototype.po;ggP2VR.f.prototype.toggleOnePolyHotspot=ggP2VR.f.prototype.zr;ggP2VR.f.prototype.changeViewState=ggP2VR.f.prototype.so;ggP2VR.f.prototype.getViewState=ggP2VR.f.prototype.Cp;ggP2VR.f.prototype.setRenderFlags=ggP2VR.f.prototype.Sq;ggP2VR.f.prototype.getRenderFlags=ggP2VR.f.prototype.tp;
ggP2VR.f.prototype.setMaxTileCount=ggP2VR.f.prototype.$m;ggP2VR.f.prototype.getVFov=ggP2VR.f.prototype.Ob;ggP2VR.f.prototype.setVFov=ggP2VR.f.prototype.Ei;ggP2VR.f.prototype.getHFov=ggP2VR.f.prototype.So;ggP2VR.f.prototype.updatePanorama=ggP2VR.f.prototype.ph;ggP2VR.f.prototype.isTouching=ggP2VR.f.prototype.km;ggP2VR.f.prototype.getIsMobile=ggP2VR.f.prototype.Xo;ggP2VR.f.prototype.setIsMobile=ggP2VR.f.prototype.Nq;ggP2VR.f.prototype.getIsTour=ggP2VR.f.prototype.Yo;
ggP2VR.f.prototype.getIsAutorotating=ggP2VR.f.prototype.Uo;ggP2VR.f.prototype.getIsLoading=ggP2VR.f.prototype.Wo;ggP2VR.f.prototype.getIsLoaded=ggP2VR.f.prototype.Sh;ggP2VR.f.prototype.getIsTileLoading=ggP2VR.f.prototype.Il;ggP2VR.f.prototype.getLastActivity=ggP2VR.f.prototype.Zo;ggP2VR.f.prototype.getPan=ggP2VR.f.prototype.xg;ggP2VR.f.prototype.getPanNorth=ggP2VR.f.prototype.ze;ggP2VR.f.prototype.getPanDest=ggP2VR.f.prototype.np;ggP2VR.f.prototype.getPanN=ggP2VR.f.prototype.Nl;
ggP2VR.f.prototype.setPan=ggP2VR.f.prototype.Nf;ggP2VR.f.prototype.setPanNorth=ggP2VR.f.prototype.rk;ggP2VR.f.prototype.changePan=ggP2VR.f.prototype.$k;ggP2VR.f.prototype.changePanLog=ggP2VR.f.prototype.oo;ggP2VR.f.prototype.getTilt=ggP2VR.f.prototype.Th;ggP2VR.f.prototype.getTiltDest=ggP2VR.f.prototype.vp;ggP2VR.f.prototype.setTilt=ggP2VR.f.prototype.Of;ggP2VR.f.prototype.changeTilt=ggP2VR.f.prototype.bl;ggP2VR.f.prototype.changeTiltLog=ggP2VR.f.prototype.qo;ggP2VR.f.prototype.getFov=ggP2VR.f.prototype.Fj;
ggP2VR.f.prototype.getFovDest=ggP2VR.f.prototype.Qo;ggP2VR.f.prototype.setFov=ggP2VR.f.prototype.Lf;ggP2VR.f.prototype.changeFov=ggP2VR.f.prototype.Zk;ggP2VR.f.prototype.changeFovLog=ggP2VR.f.prototype.hj;ggP2VR.f.prototype.getRoll=ggP2VR.f.prototype.Rl;ggP2VR.f.prototype.setRoll=ggP2VR.f.prototype.Ci;ggP2VR.f.prototype.setPanTilt=ggP2VR.f.prototype.Qq;ggP2VR.f.prototype.setPanTiltFov=ggP2VR.f.prototype.Bi;ggP2VR.f.prototype.setDefaultView=ggP2VR.f.prototype.Lq;ggP2VR.f.prototype.setLocked=ggP2VR.f.prototype.setLocked;
ggP2VR.f.prototype.setLockedMouse=ggP2VR.f.prototype.Ym;ggP2VR.f.prototype.setLockedKeyboard=ggP2VR.f.prototype.Xm;ggP2VR.f.prototype.getLockedKeyboard=ggP2VR.f.prototype.ap;ggP2VR.f.prototype.setLockedWheel=ggP2VR.f.prototype.Zm;ggP2VR.f.prototype.moveTo=ggP2VR.f.prototype.moveTo;ggP2VR.f.prototype.moveToEx=ggP2VR.f.prototype.li;ggP2VR.f.prototype.moveToDefaultView=ggP2VR.f.prototype.$p;ggP2VR.f.prototype.moveToDefaultViewEx=ggP2VR.f.prototype.aq;ggP2VR.f.prototype.addHotspotElements=ggP2VR.f.prototype.Rk;
ggP2VR.f.prototype.playSound=ggP2VR.f.prototype.Ke;ggP2VR.f.prototype.playPauseSound=ggP2VR.f.prototype.Gm;ggP2VR.f.prototype.playStopSound=ggP2VR.f.prototype.zq;ggP2VR.f.prototype.pauseSound=ggP2VR.f.prototype.ek;ggP2VR.f.prototype.activateSound=ggP2VR.f.prototype.Xn;ggP2VR.f.prototype.soundGetTime=ggP2VR.f.prototype.ir;ggP2VR.f.prototype.soundSetTime=ggP2VR.f.prototype.jr;ggP2VR.f.prototype.setMediaVisibility=ggP2VR.f.prototype.Pq;ggP2VR.f.prototype.isPlaying=ggP2VR.f.prototype.isPlaying;
ggP2VR.f.prototype.stopSound=ggP2VR.f.prototype.Ii;ggP2VR.f.prototype.setVolume=ggP2VR.f.prototype.setVolume;ggP2VR.f.prototype.changeVolume=ggP2VR.f.prototype.to;ggP2VR.f.prototype.removeHotspots=ggP2VR.f.prototype.Pm;ggP2VR.f.prototype.getHotspotsVisible=ggP2VR.f.prototype.Gl;ggP2VR.f.prototype.getCurrentPerspective=ggP2VR.f.prototype.nd;ggP2VR.f.prototype.addHotspot=ggP2VR.f.prototype.Zn;ggP2VR.f.prototype.updateHotspot=ggP2VR.f.prototype.Hr;ggP2VR.f.prototype.removeHotspot=ggP2VR.f.prototype.Cq;
ggP2VR.f.prototype.setActiveHotspot=ggP2VR.f.prototype.Kf;ggP2VR.f.prototype.getPointHotspotIds=ggP2VR.f.prototype.pp;ggP2VR.f.prototype.getHotspot=ggP2VR.f.prototype.To;ggP2VR.f.prototype.setFullscreen=ggP2VR.f.prototype.Mf;ggP2VR.f.prototype.toggleFullscreen=ggP2VR.f.prototype.Pi;ggP2VR.f.prototype.enterFullscreen=ggP2VR.f.prototype.Ho;ggP2VR.f.prototype.exitFullscreen=ggP2VR.f.prototype.exitFullscreen;ggP2VR.f.prototype.getIsFullscreen=ggP2VR.f.prototype.Vo;ggP2VR.f.prototype.startAutorotate=ggP2VR.f.prototype.nr;
ggP2VR.f.prototype.stopAutorotate=ggP2VR.f.prototype.rr;ggP2VR.f.prototype.toggleAutorotate=ggP2VR.f.prototype.yr;ggP2VR.f.prototype.startAnimation=ggP2VR.f.prototype.mr;ggP2VR.f.prototype.createLayers=ggP2VR.f.prototype.fl;ggP2VR.f.prototype.removePanorama=ggP2VR.f.prototype.fe;ggP2VR.f.prototype.getScreenResolution=ggP2VR.f.prototype.Sl;ggP2VR.f.prototype.getMaxScreenResolution=ggP2VR.f.prototype.Ll;ggP2VR.f.prototype.getNodeIds=ggP2VR.f.prototype.hp;ggP2VR.f.prototype.getNodeUserdata=ggP2VR.f.prototype.Gj;
ggP2VR.f.prototype.getNodeLatLng=ggP2VR.f.prototype.ip;ggP2VR.f.prototype.getNodeTitle=ggP2VR.f.prototype.lp;ggP2VR.f.prototype.getCurrentNode=ggP2VR.f.prototype.Ej;ggP2VR.f.prototype.getNextNode=ggP2VR.f.prototype.Ml;ggP2VR.f.prototype.getPrevNode=ggP2VR.f.prototype.sp;ggP2VR.f.prototype.getLastVisitedNode=ggP2VR.f.prototype.$o;ggP2VR.f.prototype.getCurrentPointHotspots=ggP2VR.f.prototype.Po;ggP2VR.f.prototype.getPositionAngles=ggP2VR.f.prototype.rp;ggP2VR.f.prototype.getPositionRawAngles=ggP2VR.f.prototype.Ol;
ggP2VR.f.prototype.nodeVisited=ggP2VR.f.prototype.gq;ggP2VR.f.prototype.clearVisitedNodes=ggP2VR.f.prototype.xo;ggP2VR.f.prototype.setElementIdPrefix=ggP2VR.f.prototype.Mq;ggP2VR.f.prototype.videoPanoPlay=ggP2VR.f.prototype.Rr;ggP2VR.f.prototype.videoPanoStop=ggP2VR.f.prototype.Sr;ggP2VR.f.prototype.videoPanoPause=ggP2VR.f.prototype.Qr;ggP2VR.f.prototype.getVideoPanoTime=ggP2VR.f.prototype.Ap;ggP2VR.f.prototype.setVideoPanoTime=ggP2VR.f.prototype.er;ggP2VR.f.prototype.getVideoPanoObject=ggP2VR.f.prototype.zp;
ggP2VR.f.prototype.setVideoPanoSource=ggP2VR.f.prototype.dr;ggP2VR.f.prototype.getMediaObject=ggP2VR.f.prototype.fp;ggP2VR.f.prototype.registerVideoElement=ggP2VR.f.prototype.Lm;ggP2VR.f.prototype.disableSoundLoading=ggP2VR.f.prototype.Go;ggP2VR.f.prototype.setCrossOrigin=ggP2VR.f.prototype.setCrossOrigin;ggP2VR.f.prototype.setProjection=ggP2VR.f.prototype.Zc;ggP2VR.f.prototype.getProjection=ggP2VR.f.prototype.Ra;ggP2VR.f.prototype.changeProjection=ggP2VR.f.prototype.ij;
ggP2VR.f.prototype.changeProjectionEx=ggP2VR.f.prototype.ij;ggP2VR.f.prototype.changeLensflares=ggP2VR.f.prototype.no;ggP2VR.f.prototype.setTransition=ggP2VR.f.prototype.ar;ggP2VR.f.prototype.getMapType=ggP2VR.f.prototype.ep;ggP2VR.f.prototype.getMapDetails=ggP2VR.f.prototype.cp;ggP2VR.f.prototype.getNodeMapCoords=ggP2VR.f.prototype.jp;ggP2VR.f.prototype.getNodeMapCoordsInPercent=ggP2VR.f.prototype.kp;ggP2VR.f.prototype.getMapContainingNode=ggP2VR.f.prototype.bp;
ggP2VR.f.prototype.getMapsContainingNode=ggP2VR.f.prototype.Kl;ggP2VR.f.prototype.getMapIDs=ggP2VR.f.prototype.Jl;ggP2VR.f.prototype.addVariable=ggP2VR.f.prototype.bo;ggP2VR.f.prototype.setVariableOptions=ggP2VR.f.prototype.an;ggP2VR.f.prototype.setVariableValue=ggP2VR.f.prototype.ge;ggP2VR.f.prototype.getVariableValue=ggP2VR.f.prototype.yp;ggP2VR.f.prototype.getGyroAvailable=ggP2VR.f.prototype.Ro;ggP2VR.f.prototype.setUseGyro=ggP2VR.f.prototype.br;ggP2VR.f.prototype.getUseGyro=ggP2VR.f.prototype.wp;
ggP2VR.f.prototype.getOS=ggP2VR.f.prototype.mp;ggP2VR.f.prototype.getBrowser=ggP2VR.f.prototype.Oo;ggP2VR.f.prototype.triggerEvent=ggP2VR.f.prototype.V;ggP2VR.f.prototype.requestRedraw=ggP2VR.f.prototype.Eq;ggP2VR.f.prototype.getWebGlContext=ggP2VR.f.prototype.Ep;ggP2VR.f.prototype.enterVR=ggP2VR.f.prototype.ng;ggP2VR.f.prototype.exitVR=ggP2VR.f.prototype.hf;ggP2VR.f.prototype.toggleVR=ggP2VR.f.prototype.rn;ggP2VR.f.prototype.isInVR=ggP2VR.f.prototype.Fg;ggP2VR.f.prototype.hasVR=ggP2VR.f.prototype.Nj;
ggP2VR.f.prototype.getVRDisplayName=ggP2VR.f.prototype.xp;ggP2VR.f.prototype.setVRFrameBufferScaleFactor=ggP2VR.f.prototype.cr;
